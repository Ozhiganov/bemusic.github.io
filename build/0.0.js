webpackJsonp([0],[,,,function(n){function e(){}var t=n.exports={};t.nextTick=function(){var n="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.MutationObserver,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(n)return function(n){return window.setImmediate(n)};var r=[];if(e){var i=document.createElement("div"),o=new MutationObserver(function(){var n=r.slice();r.length=0,n.forEach(function(n){n()})});return o.observe(i,{attributes:!0}),function(n){r.length||i.setAttribute("yes","no"),r.push(n)}}return t?(window.addEventListener("message",function(n){var e=n.source;if((e===window||null===e)&&"process-tick"===n.data&&(n.stopPropagation(),r.length>0)){var t=r.shift();t()}},!0),function(n){r.push(n),window.postMessage("process-tick","*")}):function(n){setTimeout(n,0)}}(),t.title="browser",t.browser=!0,t.env={},t.argv=[],t.on=e,t.addListener=e,t.once=e,t.off=e,t.removeListener=e,t.removeAllListeners=e,t.emit=e,t.binding=function(){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(){throw new Error("process.chdir is not supported")}},function(n,e){"use strict";function t(n){function e(){return new Promise(function(e,t){var r=o.open(n,1);r.onupgradeneeded=function(n){var r=n.target.result,i=r.createObjectStore("cachier",{keyPath:"_id"});i.transaction.oncomplete=function(){e(r)},i.transaction.onerror=function(){t(new Error("Cannot upgrade database!"))}},r.onerror=function(){t(new Error("Cannot request database!"))},r.onsuccess=function(n){var t=n.target.result;e(t)}})}function t(n){return new Promise(function(e,t){n.onerror=function(){t(new Error("IndexedDB Error: "+n.error))},n.onblocked=function(){console.log(n),t(new Error("IndexedDB Blocked: "+n))},n.onsuccess=function(n){e(n)}})}function r(n){return new Promise(function(e,t){var r=new FileReader;r.onload=function(){e({buffer:r.result,type:n.type})},r.onerror=function(){t(new Error("Unable to convert blob to object!"))},r.readAsArrayBuffer(n)})}function i(n){return n instanceof Blob?n:n.buffer?new Blob([n.buffer],{type:n.type}):void 0}var o=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,s=e();return n=n||"cachier",{connection:s,save:function(n,e,i){var o=!!this._NO_BLOB;return s.then(function(s){return Promise.resolve().then(function(){if(o)throw new Error("Requested non-Blob storing mode");var r=s.transaction("cachier","readwrite").objectStore("cachier").put({_id:n,blob:e,metadata:i});return t(r)})["catch"](function(){return console.log("Cannot store as blob, store as data-URL instead."),r(e).then(function(e){var r=s.transaction("cachier","readwrite").objectStore("cachier").put({_id:n,blob:e,metadata:i});return t(r)})})})},load:function(n){return s.then(function(e){var r=e.transaction("cachier").objectStore("cachier").get(n);return t(r).then(function(){var n=r.result;return{blob:i(n.blob),metadata:n.metadata}})})},"delete":function(n){return s.then(function(e){var r=e.transaction("cachier","readwrite").objectStore("cachier")["delete"](n);return t(r)})},destroyDatabase:function(){return s?s.then(function(n){n.close()}).then(function(){var e=o.deleteDatabase(n);return t(e)}).tap(function(){s=null}):Promise.resolve()}}}e["default"]=new t,e.Cachier=t,n.exports=Object.assign(e["default"],e)},function(n,e,t){"use strict";t(9),t(10)},function(n,e,t){t(7),t(8)},function(n){!function(e,t,r){"use strict";function i(n){return null!=n&&("object"==typeof n||"function"==typeof n)}function o(n){return"function"==typeof n}function s(n,e,t){n&&!at(n=t?n:n[pe],jt)&&xt(n,jt,e)}function a(n){return n==r?n===r?"Undefined":"Null":Qe.call(n).slice(8,-1)}function u(n){var e,t=a(n);return t==Z&&(e=n[jt])?at(Ve,e)?"~"+e:e:t}function l(){for(var n=arguments.length,e=Ee(n),t=0,r=Lt._,i=!1;n>t;)(e[t]=arguments[t++])===r&&(i=!0);return c(this,e,n,i,r,!1)}function c(n,e,t,r,i,o,s){return M(n),function(){var a,u=o?s:this,l=arguments.length,c=0,f=0;if(!r&&!l)return p(n,e,u);if(a=e.slice(),r)for(;t>c;c++)a[c]===i&&(a[c]=arguments[f++]);for(;l>f;)a.push(arguments[f++]);return p(n,a,u)}}function f(n,e,t){if(M(n),~t&&e===r)return n;switch(t){case 1:return function(t){return n.call(e,t)};case 2:return function(t,r){return n.call(e,t,r)};case 3:return function(t,r,i){return n.call(e,t,r,i)}}return function(){return n.apply(e,arguments)}}function p(n,e,t){var i=t===r;switch(0|e.length){case 0:return i?n():n.call(t);case 1:return i?n(e[0]):n.call(t,e[0]);case 2:return i?n(e[0],e[1]):n.call(t,e[0],e[1]);case 3:return i?n(e[0],e[1],e[2]):n.call(t,e[0],e[1],e[2]);case 4:return i?n(e[0],e[1],e[2],e[3]):n.call(t,e[0],e[1],e[2],e[3]);case 5:return i?n(e[0],e[1],e[2],e[3],e[4]):n.call(t,e[0],e[1],e[2],e[3],e[4])}return n.apply(t,e)}function h(n,e){var t=Ye(n[pe]),r=Ke.call(n,t,e);return i(r)?r:t}function d(n){return n}function m(n,e){return at(n,e)?n[e]:void 0}function g(n){return st?ot(n).concat(st(n)):ot(n)}function v(n,e){for(var t,r=ut(n),i=it(r),o=i.length,s=0;o>s;)if(r[t=i[s++]]===e)return t}function b(n){return je(n).split(",")}function y(n){var e=1==n,t=2==n,i=3==n,o=4==n,s=6==n,a=5==n||s;return function(u){for(var l,c,p=ke(I(this)),h=arguments[1],d=ut(p),m=f(u,h,3),g=E(d.length),v=0,b=e?Ee(g):t?[]:r;g>v;v++)if((a||v in d)&&(l=d[v],c=m(l,v,p),n))if(e)b[v]=c;else if(c)switch(n){case 3:return!0;case 5:return l;case 6:return v;case 2:b.push(l)}else if(o)return!1;return s?-1:i||o?o:b}}function w(n){return function(e){var t=ut(I(this)),r=E(t.length),i=j(arguments[1],r);if(n&&e!=e){for(;r>i;i++)if(S(t[i]))return n||i}else for(;r>i;i++)if((n||i in t)&&t[i]===e)return n||i;return!n&&-1}}function x(n,e){return"function"==typeof n?n:e}function S(n){return n!=n}function k(n){return isNaN(n)?0:bt(n)}function E(n){return n>0?gt(k(n),pt):0}function j(n,e){var n=k(n);return 0>n?mt(n+e,0):gt(n,e)}function T(n,e,t){var r=i(e)?function(n){return e[n]}:e;return function(e){return je(t?e:this).replace(n,r)}}function O(n){return function(e){var t,i,o=je(I(this)),s=k(e),a=o.length;return 0>s||s>=a?n?"":r:(t=o.charCodeAt(s),55296>t||t>56319||s+1===a||(i=o.charCodeAt(s+1))<56320||i>57343?n?o.charAt(s):t:n?o.slice(s,s+2):(t-55296<<10)+(i-56320)+65536)}}function R(n,e,t){if(!n)throw Ne(t?e+t:e)}function I(n){if(n==r)throw Ne("Function called on null or undefined");return n}function M(n){return R(o(n),n," is not a function!"),n}function q(n){return R(i(n),n," is not an object!"),n}function _(n,e,t){R(n instanceof e,t,": use the 'new' operator!")}function C(n,e){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:e}}function N(n,e,t){return n[e]=t,n}function P(n){return yt?function(e,t,r){return tt(e,t,C(n,r))}:N}function L(n){return ue+"("+n+")_"+(++wt+vt())[de](36)}function A(n,e){return _e&&_e[n]||(e?_e:kt)(ue+Ge+n)}function D(n,e){for(var t in e)xt(n,t,e[t]);return n}function B(n,e){xt(n,Et,e),Tt&&xt(n,ye,e)}function F(n,e,t,r){n[pe]=Ye(r||qt,{next:C(1,t)}),s(n,e+" Iterator")}function z(n,r,i,o){var a=n[pe],u=m(a,Et)||m(a,ye)||o&&m(a,o)||i;if(t&&(B(a,u),u!==i)){var l=nt(u.call(new n));s(l,r+" Iterator",!0),at(a,ye)&&B(l,e)}return Mt[r]=u,Mt[r+" Iterator"]=e,u}function H(n,e,t,r,i,o){function s(n){return function(){return new t(this,n)}}F(t,e,r);var a=s(Rt+It),u=s(It);i==It?u=z(n,e,u,"values"):a=z(n,e,a,"entries"),i&&X(zt+Dt*Ct,e,{entries:a,keys:o?u:s(Rt),values:u})}function W(n,e){return{value:e,done:!!n}}function U(n){var e=ke(n),t=Q[ue],r=!!(t&&t[be]&&t[be]in e);return r||Et in e||at(Mt,u(e))}function $(n){var e=Q[ue],t=e&&e[be]&&n[e[be]],r=t||n[Et]||Mt[u(n)];return q(r.call(n))}function J(n,e,t){return t?p(n,e):n(e)}function G(n,e,t,r){for(var i,o=$(n),s=f(t,r,e?2:1);!(i=o.next()).done;)if(J(s,i.value,e)===!1)return}function X(n,e,r){var i,s,a,u,l=n&Bt,c=l?Q:n&Ft?Q[e]:(Q[e]||Ue)[pe],p=l?Pt:Pt[e]||(Pt[e]={});l&&(r=e);for(i in r)s=!(n&Dt)&&c&&i in c&&(!o(c[i])||Xe(c[i])),a=(s?c:r)[i],n&Ht&&s?u=f(a,Q):n&Wt&&!t&&c[i]==a?(u=function(n){return this instanceof a?new a(n):a(n)},u[pe]=a[pe]):u=n&zt&&o(a)?f(Ze,a):a,p[i]!=a&&xt(p,i,u),t&&c&&!s&&(l?c[i]=a:delete c[i]&&xt(c,i,a))}var V,Q=e(),Z="Object",K="Function",Y="Array",ne="String",ee="Number",te="RegExp",re="Date",ie="Map",oe="Set",se="WeakMap",ae="WeakSet",ue="Symbol",le="Promise",ce="Math",fe="Arguments",pe="prototype",he="constructor",de="toString",me=de+"Tag",ge="hasOwnProperty",ve="forEach",be="iterator",ye="@@"+be,we="process",xe="createElement",Se=Q[K],ke=Q[Z],Ee=Q[Y],je=Q[ne],Te=Q[ee],Oe=Q[te],Re=(Q[re],Q[ie]),Ie=Q[oe],Me=Q[se],qe=Q[ae],_e=Q[ue],Ce=Q[ce],Ne=Q.TypeError,Pe=Q.setTimeout,Le=Q.setImmediate,Ae=Q.clearImmediate,De=Q[we],Be=De&&De.nextTick,Fe=Q.document,ze=Fe&&Fe.documentElement,He=(Q.navigator,Q.define),We=Ee[pe],Ue=ke[pe],$e=Se[pe],Je=1/0,Ge=".",Xe=f(/./.test,/\[native code\]\s*\}\s*$/,1),Ve={Undefined:1,Null:1,Array:1,String:1,Arguments:1,Function:1,Error:1,Boolean:1,Number:1,Date:1,RegExp:1},Qe=Ue[de],Ze=$e.call,Ke=$e.apply,Ye=ke.create,nt=ke.getPrototypeOf,et=ke.setPrototypeOf,tt=ke.defineProperty,rt=(ke.defineProperties,ke.getOwnPropertyDescriptor),it=ke.keys,ot=ke.getOwnPropertyNames,st=ke.getOwnPropertySymbols,at=f(Ze,Ue[ge],2),ut=ke,lt=ke.assign||function(n){for(var e=ke(I(n)),t=arguments.length,r=1;t>r;)for(var i,o=ut(arguments[r++]),s=it(o),a=s.length,u=0;a>u;)e[i=s[u++]]=o[i];return e},ct=We.push,ft=(We.unshift,We.slice,We.splice,We.indexOf,We[ve]),pt=9007199254740991,ht=Ce.ceil,dt=Ce.floor,mt=Ce.max,gt=Ce.min,vt=Ce.random,bt=Ce.trunc||function(n){return(n>0?dt:ht)(n)},yt=!!function(){try{return tt({},Ge,Ue)}catch(n){}}(),wt=0,xt=P(1),St=_e?N:xt,kt=_e||L,Et=A(be),jt=A(me),Tt=ye in We,Ot=kt("iter"),Rt=1,It=2,Mt={},qt={},_t=Et in We,Ct="keys"in We&&!("next"in[].keys());B(qt,e);var Nt=a(De)==we,Pt={},Lt=t?Q:Pt,At=Q.core,Dt=1,Bt=2,Ft=4,zt=8,Ht=16,Wt=32;"undefined"!=typeof n&&n.exports&&(n.exports=Pt),o(He)&&He.amd&&He(function(){return Pt}),(!Nt||t)&&(Pt.noConflict=function(){return Q.core=At,Pt},Q.core=Pt),X(Bt+Dt,{global:Q}),!function(n,e,t){Xe(_e)||(_e=function(e){R(!(this instanceof _e),ue+" is not a "+he);var r=L(e);return yt&&t&&tt(Ue,r,{configurable:!0,set:function(n){xt(this,r,n)}}),St(Ye(_e[pe]),n,r)},xt(_e[pe],de,function(){return this[n]})),X(Bt+Wt,{Symbol:_e});var r={"for":function(n){return at(e,n+="")?e[n]:e[n]=_e(n)},iterator:Et,keyFor:l.call(v,e),toStringTag:jt=A(me,!0),pure:kt,set:St,useSetter:function(){t=!0},useSimple:function(){t=!1}};ft.call(b("hasInstance,isConcatSpreadable,match,replace,search,species,split,toPrimitive,unscopables"),function(n){r[n]=A(n)}),X(Ft,ue,r),s(_e,ue),X(Bt,{Reflect:{ownKeys:g}})}(kt("tag"),{},!0),!function(n,e){function o(e){return n(e=+e)&&0!=e?0>e?-o(-e):v(e+b(e*e+1)):e}function l(n){if(i(n)&&n instanceof Oe)throw Ne()}var c=Q.RangeError,p=Te.isInteger||function(e){return!i(e)&&n(e)&&dt(e)===e},h=Ce.sign||function(n){return 0==(n=+n)||n!=n?n:0>n?-1:1},d=Ce.pow,m=Ce.abs,g=Ce.exp,v=Ce.log,b=Ce.sqrt,w=je.fromCharCode,M=O(!0),_={assign:lt,is:function(n,e){return n===e?0!==n||1/n===1/e:n!=n&&e!=e}};"__proto__"in Ue&&function(n,e){try{e=f(Ze,rt(Ue,"__proto__").set,2),e({},We)}catch(t){n=!0}_.setPrototypeOf=et=et||function(t,r){return q(t),R(null===r||i(r),r,": can't set as prototype!"),n?t.__proto__=r:e(t,r),t}}(),X(Ft,Z,_),X(Ft,ee,{EPSILON:d(2,-52),isFinite:function(e){return"number"==typeof e&&n(e)},isInteger:p,isNaN:S,isSafeInteger:function(n){return p(n)&&m(n)<=pt},MAX_SAFE_INTEGER:pt,MIN_SAFE_INTEGER:-pt,parseFloat:parseFloat,parseInt:parseInt}),X(Ft,ce,{acosh:function(n){return 1>n?0/0:v(n+b(n*n-1))},asinh:o,atanh:function(n){return 0==n?+n:v((1+ +n)/(1-n))/2},cbrt:function(n){return h(n)*d(m(n),1/3)},clz32:function(n){return(n>>>=0)?32-n[de](2).length:32},cosh:function(n){return(g(n)+g(-n))/2},expm1:function(n){return 0==n?+n:n>-1e-6&&1e-6>n?+n+n*n/2:g(n)-1},fround:function(n){return new Float32Array([n])[0]},hypot:function(){for(var n,e=0,t=arguments.length;t--;){if(n=+arguments[t],n==Je||n==-Je)return Je;e+=n*n}return b(e)},imul:function(n,e){var t=65535,r=t&n,i=t&e;return 0|r*i+((t&n>>>16)*i+r*(t&e>>>16)<<16>>>0)},log1p:function(n){return n>-1e-8&&1e-8>n?n-n*n/2:v(1+ +n)},log10:function(n){return v(n)/Ce.LN10},log2:function(n){return v(n)/Ce.LN2},sign:h,sinh:function(n){return 0==n?+n:(g(n)-g(-n))/2},tanh:function(e){return n(e)?0==e?+e:(g(e)-g(-e))/(g(e)+g(-e)):h(e)},trunc:bt}),s(Ce,ce,!0),X(Ft,ne,{fromCodePoint:function(){for(var n,e=[],t=arguments.length,r=0;t>r;){if(n=+arguments[r++],j(n,1114111)!==n)throw c(n+" is not a valid code point");e.push(65536>n?w(n):w(((n-=65536)>>10)+55296,n%1024+56320))}return e.join("")},raw:function(n){for(var e=ut(I(n.raw)),t=E(e.length),r=arguments.length,i=[],o=0;t>o;)i.push(je(e[o++])),r>o&&i.push(je(arguments[o]));return i.join("")}}),X(zt,ne,{codePointAt:O(!1),endsWith:function(n){l(n);var e=je(I(this)),t=arguments[1],i=E(e.length),o=t===r?i:gt(E(t),i);return n+="",e.slice(o-n.length,o)===n},includes:function(n){return l(n),!!~je(I(this)).indexOf(n,arguments[1])},repeat:function(n){var e=je(I(this)),t="",r=k(n);if(0>r||r==Je)throw c("Count can't be negative");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(t+=e);return t},startsWith:function(n){l(n);var e=je(I(this)),t=E(gt(arguments[1],e.length));return n+="",e.slice(t,t+n.length)===n}}),H(je,ne,function(n){St(this,Ot,{o:je(n),i:0})},function(){var n,e=this[Ot],t=e.o,r=e.i;return r>=t.length?W(1):(n=M.call(t,r),e.i+=n.length,W(0,n))}),X(Ft,Y,{from:function(n){var e,t=ke(I(n)),i=new(x(this,Ee)),o=arguments[1],s=arguments[2],a=o!==r,u=a?f(o,s,2):r,l=0;if(U(t))for(var c,p=$(t);!(c=p.next()).done;l++)i[l]=a?u(c.value,l):c.value;else for(e=E(t.length);e>l;l++)i[l]=a?u(t[l],l):t[l];return i.length=l,i},of:function(){for(var n=0,e=arguments.length,t=new(x(this,Ee))(e);e>n;)t[n]=arguments[n++];return t.length=e,t}}),X(zt,Y,{copyWithin:function(n,e){var t=ke(I(this)),i=E(t.length),o=j(n,i),s=j(e,i),a=arguments[2],u=a===r?i:j(a,i),l=gt(u-s,i-o),c=1;for(o>s&&s+l>o&&(c=-1,s=s+l-1,o=o+l-1);l-->0;)s in t?t[o]=t[s]:delete t[o],o+=c,s+=c;return t},fill:function(n){for(var e=ke(I(this)),t=E(e.length),i=j(arguments[1],t),o=arguments[2],s=o===r?t:j(o,t);s>i;)e[i++]=n;return e},find:y(5),findIndex:y(6)}),H(Ee,Y,function(n,e){St(this,Ot,{o:ut(n),i:0,k:e})},function(){var n=this[Ot],e=n.o,t=n.k,i=n.i++;return!e||i>=e.length?(n.o=r,W(1)):t==Rt?W(0,i):t==It?W(0,e[i]):W(0,[i,e[i]])},It),Mt[fe]=Mt[Y],s(Q.JSON,"JSON",!0),t&&(e[jt]=Ge,a(e)!=Ge&&xt(Ue,de,function(){return"[object "+u(this)+"]"}),"g"!=/./g.flags&&tt(Oe[pe],"flags",{configurable:!0,get:T(/^.*\/(\w*)$/,"$1")}))}(isFinite,{}),o(Le)&&o(Ae)||function(n){function e(n){if(at(d,n)){var e=d[n];delete d[n],e()}}function t(n){e(n.data)}var r,i,s,a=Q.postMessage,u=Q.addEventListener,c=Q.MessageChannel,h=0,d={};Le=function(n){for(var e=[],t=1;arguments.length>t;)e.push(arguments[t++]);return d[++h]=function(){p(o(n)?n:Se(n),e)},r(h),h},Ae=function(n){delete d[n]},Nt?r=function(n){Be(l.call(e,n))}:u&&o(a)&&!Q.importScripts?(r=function(n){a(n,"*")},u("message",t,!1)):o(c)?(i=new c,s=i.port2,i.port1.onmessage=t,r=f(s.postMessage,s,1)):r=Fe&&n in Fe[xe]("script")?function(t){ze.appendChild(Fe[xe]("script"))[n]=function(){ze.removeChild(this),e(t)}}:function(n){Pe(l.call(e,n),0)}}("onreadystatechange"),X(Bt+Ht,{setImmediate:Le,clearImmediate:Ae}),!function(n,e){o(n)&&o(n.resolve)&&n.resolve(e=new n(Se()))==e||function(e,t){function s(n){var e;return i(n)&&(e=n.then),o(e)?e:!1}function a(n){var t=n.chain;t.length&&e(function(){for(var e=n.msg,r=1==n.state,i=0;t.length>i;)!function(n){var t,i,o=r?n.ok:n.fail;try{o?(t=o===!0?e:o(e),t===n.P?n.rej(Ne(le+"-chain cycle")):(i=s(t))?i.call(t,n.res,n.rej):n.res(t)):n.rej(e)}catch(a){n.rej(a)}}(t[i++]);t.length=0})}function u(n){var e,t,r=this;if(!r.done){r.done=!0,r=r.def||r;try{(e=s(n))?(t={def:r,done:!1},e.call(n,f(u,t,1),f(l,t,1))):(r.msg=n,r.state=1,a(r))}catch(i){l.call(t||{def:r,done:!1},i)}}}function l(n){var e=this;e.done||(e.done=!0,e=e.def||e,e.msg=n,e.state=2,a(e))}n=function(e){M(e),_(this,n,le);var i={chain:[],state:0,done:!1,msg:r};xt(this,t,i);try{e(f(u,i,1),f(l,i,1))}catch(o){l.call(i,o)}},D(n[pe],{then:function(n,e){var r={ok:o(n)?n:!0,fail:o(e)?e:!1},i=r.P=new this[he](function(n,e){r.res=M(n),r.rej=M(e)}),s=this[t];return s.chain.push(r),s.state&&a(s),i},"catch":function(n){return this.then(r,n)}}),D(n,{all:function(n){var e=this,t=[];return new e(function(r,i){G(n,!1,ct,t);var o=t.length,s=Ee(o);o?ft.call(t,function(n,t){e.resolve(n).then(function(n){s[t]=n,--o||r(s)},i)}):r(s)})},race:function(n){var e=this;return new e(function(t,r){G(n,!1,function(n){e.resolve(n).then(t,r)})})},reject:function(n){return new this(function(e,t){t(n)})},resolve:function(n){return i(n)&&nt(n)===this[pe]?n:new this(function(e){e(n)})}})}(Be||Le,kt("def")),s(n,le),X(Bt+Dt*!Xe(n),{Promise:n})}(Q[le]),!function(){function n(n,e,i,o,a,u){function l(n,e){return e!=r&&G(e,a,n[h],n),n}function f(n,e){var r=b[n];t&&xt(b,n,function(n,t){var i=r.call(this,0===n?0:n,t);return e?this:i})}var h=a?"set":"add",b=n&&n[pe],y={};if(Xe(n)&&(u||!Ct&&at(b,"entries"))){var w,x=n,S=new n,k=S[h](u?{}:-0,1);_t&&n.length||(n=function(t){return _(this,n,e),l(new x,t)},n[pe]=b),u||S[ve](function(n,e){w=1/e===-Je}),w&&(f("delete"),f("has"),a&&f("get")),(w||k!==S)&&f(h,!0)}else n=u?function(t){_(this,n,e),St(this,c,v++),l(this,t)}:function(t){var i=this;_(i,n,e),St(i,p,Ye(null)),St(i,g,0),St(i,d,r),St(i,m,r),l(i,t)},D(D(n[pe],i),o),u||tt(n[pe],"size",{get:function(){return I(this[g])}});return s(n,e),y[e]=n,X(Bt+Wt+Dt*!Xe(n),y),u||H(n,e,function(n,e){St(this,Ot,{o:n,k:e})},function(){for(var n=this[Ot],e=n.o,t=n.k,i=n.l;i&&i.r;)i=i.p;return e&&(n.l=i=i?i.n:e[m])?t==Rt?W(0,i.k):t==It?W(0,i.v):W(0,[i.k,i.v]):(n.o=r,W(1))},a?Rt+It:It,!a),n}function e(n,e){if(!i(n))return("string"==typeof n?"S":"P")+n;if(!at(n,c)){if(!e)return"";xt(n,c,++v)}return"O"+n[c]}function o(n,t,r){var i,o=e(t,!0),s=n[p],a=n[d];return o in s?s[o].v=r:(i=s[o]={k:t,v:r,p:a},n[m]||(n[m]=i),a&&(a.n=i),n[d]=i,n[g]++),n}function a(n,e){var t=n[p],r=t[e],i=r.n,o=r.p;delete t[e],r.r=!0,o&&(o.n=i),i&&(i.p=o),n[m]==r&&(n[m]=i),n[d]==r&&(n[d]=o),n[g]--}function u(n,e,t){return at(q(e),h)||xt(e,h,{}),e[h][n[c]]=t,n}function l(n){return i(n)&&at(n,h)&&at(n[h],this[c])}var c=kt("uid"),p=kt("data"),h=kt("weak"),d=kt("last"),m=kt("first"),g=yt?kt("size"):"size",v=0,b={clear:function(){for(var n in this[p])a(this,n)},"delete":function(n){var t=e(n),r=t in this[p];return r&&a(this,t),r},forEach:function(n){for(var e,t=f(n,arguments[1],3);e=e?e.n:this[m];)for(t(e.v,e.k,this);e&&e.r;)e=e.p},has:function(n){return e(n)in this[p]}};Re=n(Re,ie,{get:function(n){var t=this[p][e(n)];return t&&t.v},set:function(n,e){return o(this,0===n?0:n,e)}},b,!0),Ie=n(Ie,oe,{add:function(n){return o(this,n=0===n?0:n,n)}},b);var y={"delete":function(n){return l.call(this,n)&&delete n[h][this[c]]},has:l};Me=n(Me,se,{get:function(n){return i(n)&&at(n,h)?n[h][this[c]]:void 0},set:function(n,e){return u(this,n,e)}},y,!0,!0),qe=n(qe,ae,{add:function(n){return u(this,n,!0)}},y,!1,!0)}(),!function(){function n(n){var e,t=[];for(e in n)t.push(e);St(this,Ot,{o:n,a:t,i:0})}function e(n){return function(e){q(e);try{return n.apply(r,arguments),!0}catch(t){return!1}}}function t(n,e,o){o===r&&(o=n);var s,a=rt(q(n),e);return a?a.get?a.get.call(o):a.value:i(s=nt(n))?t(s,e,o):r}function o(n,e,t,s){s===r&&(s=n);var a,u=rt(q(n),e);if(u){if(u.writable===!1)return!1;if(u.set)return u.set.call(s,t),!0}return i(a=nt(n))?o(a,e,t,s):(u=rt(s,e)||C(0),u.value=t,tt(s,e,u),!0)}F(n,Z,function(){var n,e=this[Ot],t=e.a;do if(e.i>=t.length)return W(1);while(!((n=t[e.i++])in e.o));return W(0,n)});var s={apply:f(Ze,Ke,3),construct:h,defineProperty:e(tt),deleteProperty:function(n,e){var t=rt(q(n),e);return t&&!t.configurable?!1:delete n[e]},enumerate:function(e){return new n(q(e))},get:t,getOwnPropertyDescriptor:rt,getPrototypeOf:nt,has:function(n,e){return e in n},isExtensible:ke.isExtensible||function(n){return!!q(n)},ownKeys:g,preventExtensions:e(ke.preventExtensions||d),set:o};et&&(s.setPrototypeOf=function(n,e){return et(q(n),e),!0}),X(Bt,{Reflect:{}}),X(Ft,"Reflect",s)}(),!function(){function n(n){return function(e){var t,r=ut(e),i=it(e),o=i.length,s=0,a=Ee(o);if(n)for(;o>s;)a[s]=[t=i[s++],r[t]];else for(;o>s;)a[s]=r[i[s++]];return a}}X(zt,Y,{includes:w(!0)}),X(zt,ne,{at:O(!0)}),X(Ft,Z,{values:n(!1),entries:n(!0)}),X(Ft,te,{escape:T(/([\\\-[\]{}()*+?.,^$|])/g,"\\$1",!0)})}(),!function(n){function t(n){if(n){var e=n[pe];xt(e,V,e.get),xt(e,r,e.set),xt(e,i,e["delete"])}}V=A(n+"Get",!0);var r=A(n+oe,!0),i=A(n+"Delete",!0);X(Ft,ue,{referenceGet:V,referenceSet:r,referenceDelete:i}),xt($e,V,e),t(Re),t(Me)}("reference"),!function(n){function e(e,t){ft.call(b(e),function(e){e in We&&(n[e]=f(Ze,We[e],t))})}e("pop,reverse,shift,keys,values,entries",1),e("indexOf,every,some,forEach,map,filter,find,findIndex,includes",3),e("join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill,turn"),X(Ft,Y,n)}({})}(Function("return this"),!0)},function(n,e){!function(){function n(n,e,t,r){return new i(n,e,t||null,r||[])}function t(){}function r(){}function i(n,e,t,r){function i(e,r){if(u===g)throw new Error("Generator is already running");if(u===v)return l();for(;;){var i=s.delegate;if(i){try{var o=i.iterator[e](r);e="next",r=c}catch(a){s.delegate=null,e="throw",r=a;continue}if(!o.done)return u=m,o;s[i.resultName]=o.value,s.next=i.nextLoc,s.delegate=null}if("next"===e){if(u===d&&"undefined"!=typeof r)throw new TypeError("attempt to send "+JSON.stringify(r)+" to newborn generator");u===m?s.sent=r:delete s.sent}else if("throw"===e){if(u===d)throw u=v,r;s.dispatchException(r)&&(e="next",r=c)}else"return"===e&&s.abrupt("return",r);u=g;try{var f=n.call(t,s);u=s.done?v:m;var o={value:f,done:s.done};if(f!==b)return o;s.delegate&&"next"===e&&(r=c)}catch(p){u=v,"next"===e?s.dispatchException(p):r=p}}}var o=e?Object.create(e.prototype):this,s=new a(r),u=d;return o.next=i.bind(o,"next"),o["throw"]=i.bind(o,"throw"),o["return"]=i.bind(o,"return"),o}function o(n){var e={tryLoc:n[0]};1 in n&&(e.catchLoc=n[1]),2 in n&&(e.finallyLoc=n[2]),this.tryEntries.push(e)}function s(n,e){var t=n.completion||{};t.type=0===e?"normal":"return",delete t.arg,n.completion=t}function a(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(o,this),this.reset()}function u(n){function e(){for(;++r<n.length;)if(f.call(n,r))return e.value=n[r],e.done=!1,e;return e.value=c,e.done=!0,e}if(n){var t=n[p];if(t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1;return e.next=e}}return{next:l}}function l(){return{value:c,done:!0}}var c,f=Object.prototype.hasOwnProperty,p="function"==typeof Symbol&&Symbol.iterator||"@@iterator";if("object"!=typeof regeneratorRuntime){var h=regeneratorRuntime=e;h.wrap=n;var d="suspendedStart",m="suspendedYield",g="executing",v="completed",b={},y=r.prototype=i.prototype;t.prototype=y.constructor=r,r.constructor=t,t.displayName="GeneratorFunction",h.isGeneratorFunction=function(n){var e="function"==typeof n&&n.constructor;return e?e===t||"GeneratorFunction"===(e.displayName||e.name):!1},h.mark=function(n){return n.__proto__=r,n.prototype=Object.create(y),n},h.async=function(e,t,r,i){return new Promise(function(o,s){function a(n){try{var e=this(n),t=e.value}catch(r){return s(r)}e.done?o(t):Promise.resolve(t).then(l,c)}var u=n(e,t,r,i),l=a.bind(u.next),c=a.bind(u["throw"]);l()})},y[p]=function(){return this},y.toString=function(){return"[object Generator]"},h.keys=function(n){var e=[];for(var t in n)e.push(t);return e.reverse(),function r(){for(;e.length;){var t=e.pop();if(t in n)return r.value=t,r.done=!1,r}return r.done=!0,r}},h.values=u,a.prototype={constructor:a,reset:function(){this.prev=0,this.next=0,this.sent=c,this.done=!1,this.delegate=null,this.tryEntries.forEach(s);for(var n,e=0;f.call(this,n="t"+e)||20>e;++e)this[n]=null},stop:function(){this.done=!0;var n=this.tryEntries[0],e=n.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){function e(e,r){return o.type="throw",o.arg=n,t.next=e,!!r}if(this.done)throw n;for(var t=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var s=f.call(i,"catchLoc"),a=f.call(i,"finallyLoc");if(s&&a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},_findFinallyEntry:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc<=this.prev&&f.call(t,"finallyLoc")&&(t.finallyLoc===n||this.prev<t.finallyLoc))return t}},abrupt:function(n,e){var t=this._findFinallyEntry(),r=t?t.completion:{};return r.type=n,r.arg=e,t?this.next=t.finallyLoc:this.complete(r),b},complete:function(n){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type&&(this.rval=n.arg,this.next="end"),b},finish:function(n){var e=this._findFinallyEntry(n);return this.complete(e.completion)},"catch":function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===n){var r=t.completion;if("throw"===r.type){var i=r.arg;s(t,e)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(n,e,t){return this.delegate={iterator:u(n),resultName:e,nextLoc:t},b}}}}()},function(n,e,t){n.exports=t(6)},function(n,e,t){t(13)()},function(n,e,t){(function(e){n.exports=function(n){"use strict";n||(n=e.Promise),n||(t(12),n=e.Promise),n.prototype.all=function(){var e=this.constructor||n;return this.then(function(n){return e.all(n)})},n.join=function(){var e=this||n;return e.all(arguments)},n.prototype.map=function(e,t){var r=this.constructor||n;return r.map(this,e,t)};var r=Array.prototype.map;n.map=function(e,t,i){var o=this||n;return o.resolve(e).then(function(n){return o.all(r.call(n,function(n,e,r){return o.resolve(n).then(function(n){var o=void 0===i?this:i;return t.call(o,n,e,r)})}))})},n.prototype.filter=function(e,t){var r=this.constructor||n;return r.filter(this,e,t)};Array.prototype.filter;n.filter=function(e,t,i){var o=this||n;return o.resolve(e).then(function(n){var e=new Array(n.length);return o.all(r.call(n,function(n,r,s){return o.resolve(n).then(function(n){var a=void 0===i?this:i,u=t.call(a,n,r,s);return o.resolve(u).then(function(t){return e[r]=t,n})})})).then(function(n){return n.filter(function(n,t){return e[t]})})})},n.prototype.props=function(){var e=this.constructor||n;return e.props(this)},n.props=function(e){var t=this||n;return t.resolve(e).then(function(n){var e={},r=Object.keys(n);if(Object(n)!==n)throw new TypeError("not an object");return t.all(r.map(function(e){return n[e]})).then(function(n){return r.forEach(function(t,r){e[t]=n[r]}),e})})},n.prototype.race=function(){var e=this.constructor||n;return this.then(function(n){return e.race(n)})};var i=function(n,e){return function(t,r,i,o){return n.resolve(t).then(function(t){return n.resolve(r).then(function(n){return e.call(this,t,n,i,o)})})}};n.prototype.reduce=function(e){var t=this.constructor||n;return arguments.length<=1?t.reduce(this,e):t.reduce(this,e,arguments[1])};var o=Array.prototype.reduce;n.reduce=function(e,t){var r=this||n;if(arguments.length<=2)return r.resolve(e).then(function(n){return o.call(n,i(r,t))});var s=r.resolve(arguments[2]);return r.resolve(e).then(function(n){return o.call(n,i(r,t),s)})},n.prototype.reduceRight=function(e){var t=this.constructor||n;return arguments.length<=1?t.reduceRight(this,e):t.reduceRight(this,e,arguments[1])};var s=Array.prototype.reduceRight;n.reduceRight=function(e,t){var r=this||n;if(arguments.length<=2)return r.resolve(e).then(function(n){return s.call(n,i(r,t))});var o=r.resolve(arguments[2]);return r.resolve(e).then(function(n){return s.call(n,i(r,t),o)})},n.prototype.spread=function(e,t){var r=this.constructor||n,i=e?function(n){return r.all(n).then(function(n){return e.apply(this,n)})}:void 0,o=t?function(n){return r.all(n).then(function(n){return t.apply(this,n)})}:void 0;return this.then(i,o)};var a=function(){};Object.defineProperties(a.prototype,{resolver:{enumerable:!0,get:function(){return{resolve:this.resolve,reject:this.reject}}},callback:{enumerable:!0,get:function(){var n=this.resolve,e=this.reject;return function(t,r){return t?e(t):n(r)}}}}),n.defer=function(){var e=this||n,t=new a;return t.promise=new e(function(n,e){t.resolve=n,t.reject=e}),t},n.prototype.call=function(e){var t=this.constructor||n,r=Array.prototype.slice.call(arguments,1);return this.then(function(n){return t.all(r).then(function(t){return n[e].apply(n,t)})})},n.prototype.get=function(n){return this.then(function(e){return e[n]})},n.prototype["return"]=function(n){return this.then(function(){return n})},n.prototype.tap=function(e){var t=this.constructor||n;return this.then(function(n){return t.resolve(e(n))["return"](n)})},n.prototype["throw"]=function(n){return this["return"](n).then(function(n){throw n})},n.prototype.done=function(){return arguments.length>0?this.then.apply(this,arguments).done():void this["catch"](function(n){setTimeout(function(){throw n},0)})},n.prototype.delay=function(e){var t=this.constructor||n;return t.delay(this,e)},n.delay=function(e,t){var r=this||n;return 1===arguments.length&&(t=e,e=void 0),r.resolve(e).then(function(n){return new r(function(e){setTimeout(function(){e(n)},t)})})};var u=n.TimeoutError=function(n){this.message="string"==typeof n?n:"timeout",this.name="TimeoutError",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};u.prototype=Object.create(Error.prototype);var l=function(n,e,t){var r=setTimeout(function(){n(new u(e))},t);return function(){clearTimeout(r)}};return n.prototype.timeout=function(e,t){var r=this.constructor||n,i=this;return new r(function(n,r){i.then(n,r);var o=l(r,t,e);i.then(o,o)})},n["try"]=function(){var e=this||n;return e.all(arguments).then(function(n){var t=n[0],r=n[1],i=n.slice(2);return new e(function(n,e){try{n(t.apply(r,i))}catch(o){e(o)}})})},n.prototype.caught=function(n,e){var t=this;if(arguments.length<=1)return t["catch"](n);var r=Array.prototype.slice.call(arguments);return e=r.pop(),r=r.map(function(n){var e=n===Error||null!=n&&n.prototype instanceof Error;return e?function(e){return e instanceof n}:"function"==typeof n?function(e){return!!n(e)}:function(){throw new TypeError("caught filter must inherit from Error or be a simple predicate function")}}),t["catch"](function(n){for(var t=0;t<r.length;t++)if(r[t](n))return e.call(this,n);throw n})},n.prototype["finally"]=function(e){var t=this,r=this.constructor||n;return new r(function(n,i){t.then(function(t){var o=function(){n(t)};r.resolve().then(e).then(o,i)},function(n){var t=function(){i(n)};r.resolve().then(e).then(t,i)})})},n.method=function(e){var t=this||n;if("function"!=typeof e)throw new TypeError("must wrap a function");return function(){var n=[e,this];return Array.prototype.push.apply(n,arguments),t["try"].apply(t,n)}},n.prototype.nodify=function(n){var e=this;if(n){var t=function(n){setTimeout(function(){throw n},0)};e.then(function(e){try{n.call(this,null,e)}catch(r){t(r)}},function(e){try{n.call(this,e)}catch(r){t(r)}})}return e},n.promisify=function(e,t,r){var i=this||n,o=arguments.length>2;return function(){var n=o?r:this,s=Array.prototype.slice.call(arguments);return new i(function(r,i){s.push(function(n,e){if(n)i(n);else if(t===!0)r(Array.prototype.slice.call(arguments,1));else if(t){var o={};for(var s in t)o[t[s]]=arguments[+s+1];r(o)}else r(e)});try{e.apply(n,s)}catch(o){i(o)}})}},n.guard=function(e,t){var r=this||n;return"number"==typeof e&&(e=r.guard.n(e)),function(){var n,i;return n=this,i=arguments,r.resolve(e()).then(function(e){return r.resolve(t.apply(n,i))["finally"](e)})}},n.guard.n=function(e){var t,r;t=0,r=[];var i=function(){t>0&&t--,r.length&&r.shift()(i)};return function(){return new n(function(n){e>t?n(i):r.push(n),t+=1
})}},n.bind=function(n){return this.resolve().bind(n)},n.prototype.bind=function(e){var t=this._bindSuper||this.constructor||n,r=function(n){return t.call(this,n)};return Object.setPrototypeOf(r,t),r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.prototype._bindSuper=t,r.prototype.then=function(n){return function(t,r){var i=t&&t.bind(e),o=r&&r.bind(e);return n.call(this,i,o)}}(r.prototype.then),e?r.resolve(this):t.resolve(this)},n.async=function(e){var t=this||n;return function(){function n(n,e){var s;try{s=r[n](e)}catch(a){return t.reject(a)}return s.done?s.value:t.resolve(s.value).then(i,o)}var r,i,o;return r=e.apply(this,arguments),i=n.bind(n,"next"),o=n.bind(n,"throw"),i()}},n}}).call(e,function(){return this}())},function(n,e,t){var r,i;(function(o){/*!
	  * https://github.com/paulmillr/es6-shim
	  * @license es6-shim Copyright 2013-2014 by Paul Miller (http://paulmillr.com)
	  *   and contributors,  MIT License
	  * es6-shim: v0.22.2
	  * see https://github.com/paulmillr/es6-shim/blob/0.22.2/LICENSE
	  * Details and documentation:
	  * https://github.com/paulmillr/es6-shim/
	  */
!function(o,s){r=s,i="function"==typeof r?r.call(e,t,e,n):r,!(void 0!==i&&(n.exports=i))}(this,function(){"use strict";var n,e=function(n){try{n()}catch(e){return!1}return!0},t=function(n,e){try{var t=function(){n.apply(this,arguments)};return t.__proto__?(Object.setPrototypeOf(t,n),t.prototype=Object.create(n.prototype,{constructor:{value:n}}),e(t)):!1}catch(r){return!1}},r=function(){try{return Object.defineProperty({},"x",{}),!0}catch(n){return!1}},i=function(){var n=!1;if(String.prototype.startsWith)try{"/a/".startsWith(/a/)}catch(e){n=!0}return n},s=new Function("return this;"),a=s(),u=a.isFinite,l=!!Object.defineProperty&&r(),c=i(),f=Function.call.bind(String.prototype.indexOf),p=Function.call.bind(Object.prototype.toString),h=Function.call.bind(Object.prototype.hasOwnProperty),d=function(){},m=a.Symbol||{},g={string:function(n){return"[object String]"===p(n)},regex:function(n){return"[object RegExp]"===p(n)},symbol:function(n){return"function"==typeof a.Symbol&&"symbol"==typeof n}},v=function(n,e,t,r){!r&&e in n||(l?Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:!0,value:t}):n[e]=t)},b={getter:function(n,e,t){if(!l)throw new TypeError("getters require true ES5 support");Object.defineProperty(n,e,{configurable:!0,enumerable:!1,get:t})},proxy:function(n,e,t){if(!l)throw new TypeError("getters require true ES5 support");var r=Object.getOwnPropertyDescriptor(n,e);Object.defineProperty(t,e,{configurable:r.configurable,enumerable:r.enumerable,get:function(){return n[e]},set:function(t){n[e]=t}})},redefine:function(n,e,t){if(l){var r=Object.getOwnPropertyDescriptor(n,e);r.value=t,Object.defineProperty(n,e,r)}else n[e]=t}},y=function(n,e){Object.keys(e).forEach(function(t){var r=e[t];v(n,t,r,!1)})},w=Object.create||function(n,e){function t(){}t.prototype=n;var r=new t;return"undefined"!=typeof e&&y(r,e),r},x=g.symbol(m.iterator)?m.iterator:"_es6-shim iterator_";a.Set&&"function"==typeof(new a.Set)["@@iterator"]&&(x="@@iterator");var S=function(n,e){e||(e=function(){return this});var t={};t[x]=e,y(n,t),!n[x]&&g.symbol(x)&&(n[x]=e)},k=function(n){var e=p(n),t="[object Arguments]"===e;return t||(t="[object Array]"!==e&&null!==n&&"object"==typeof n&&"number"==typeof n.length&&n.length>=0&&"[object Function]"===p(n.callee)),t},E={CheckObjectCoercible:function(n,e){if(null==n)throw new TypeError(e||"Cannot call method on "+n);return n},TypeIsObject:function(n){return null!=n&&Object(n)===n},ToObject:function(n,e){return Object(E.CheckObjectCoercible(n,e))},IsCallable:function(n){return"function"==typeof n&&"[object Function]"===p(n)},ToInt32:function(n){return E.ToNumber(n)>>0},ToUint32:function(n){return E.ToNumber(n)>>>0},ToNumber:function(n){if("[object Symbol]"===p(n))throw new TypeError("Cannot convert a Symbol value to a number");return+n},ToInteger:function(n){var e=E.ToNumber(n);return Number.isNaN(e)?0:0!==e&&Number.isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e},ToLength:function(n){var e=E.ToInteger(n);return 0>=e?0:e>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e},SameValue:function(n,e){return n===e?0===n?1/n===1/e:!0:Number.isNaN(n)&&Number.isNaN(e)},SameValueZero:function(n,e){return n===e||Number.isNaN(n)&&Number.isNaN(e)},IsIterable:function(n){return E.TypeIsObject(n)&&("undefined"!=typeof n[x]||k(n))},GetIterator:function(e){if(k(e))return new n(e,"value");var t=e[x];if(!E.IsCallable(t))throw new TypeError("value is not an iterable");var r=t.call(e);if(!E.TypeIsObject(r))throw new TypeError("bad iterator");return r},IteratorNext:function(n){var e=arguments.length>1?n.next(arguments[1]):n.next();if(!E.TypeIsObject(e))throw new TypeError("bad iterator");return e},Construct:function(n,e){var t;t=E.IsCallable(n["@@create"])?n["@@create"]():w(n.prototype||null),y(t,{_es6construct:!0});var r=n.apply(t,e);return E.TypeIsObject(r)?r:t}},j=function(n){if(!E.TypeIsObject(n))throw new TypeError("bad object");return n._es6construct||(n.constructor&&E.IsCallable(n.constructor["@@create"])&&(n=n.constructor["@@create"](n)),y(n,{_es6construct:!0})),n},T=function(){function n(n){var e=Math.floor(n),t=n-e;return.5>t?e:t>.5?e+1:e%2?e+1:e}function e(e,t,r){var i,o,s,a,u,l,c,f=(1<<t-1)-1;for(e!==e?(o=(1<<t)-1,s=Math.pow(2,r-1),i=0):1/0===e||e===-1/0?(o=(1<<t)-1,s=0,i=0>e?1:0):0===e?(o=0,s=0,i=1/e===-1/0?1:0):(i=0>e,e=Math.abs(e),e>=Math.pow(2,1-f)?(o=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),s=n(e/Math.pow(2,o)*Math.pow(2,r)),s/Math.pow(2,r)>=2&&(o+=1,s=1),o>f?(o=(1<<t)-1,s=0):(o+=f,s-=Math.pow(2,r))):(o=0,s=n(e/Math.pow(2,1-f-r)))),u=[],a=r;a;a-=1)u.push(s%2?1:0),s=Math.floor(s/2);for(a=t;a;a-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(u.push(i?1:0),u.reverse(),l=u.join(""),c=[];l.length;)c.push(parseInt(l.slice(0,8),2)),l=l.slice(8);return c}function t(n,e,t){var r,i,o,s,a,u,l,c,f=[];for(r=n.length;r;r-=1)for(o=n[r-1],i=8;i;i-=1)f.push(o%2?1:0),o>>=1;return f.reverse(),s=f.join(""),a=(1<<e-1)-1,u=parseInt(s.slice(0,1),2)?-1:1,l=parseInt(s.slice(1,1+e),2),c=parseInt(s.slice(1+e),2),l===(1<<e)-1?0!==c?0/0:1/0*u:l>0?u*Math.pow(2,l-a)*(1+c/Math.pow(2,t)):0!==c?u*Math.pow(2,-(a-1))*(c/Math.pow(2,t)):0>u?-0:0}function r(n){return t(n,8,23)}function i(n){return e(n,8,23)}var o={toFloat32:function(n){return r(i(n))}};if("undefined"!=typeof Float32Array){var s=new Float32Array(1);o.toFloat32=function(n){return s[0]=n,s[0]}}return o}();if(y(String,{fromCodePoint:function(){for(var n,e=[],t=0,r=arguments.length;r>t;t++){if(n=Number(arguments[t]),!E.SameValue(n,E.ToInteger(n))||0>n||n>1114111)throw new RangeError("Invalid code point "+n);65536>n?e.push(String.fromCharCode(n)):(n-=65536,e.push(String.fromCharCode((n>>10)+55296)),e.push(String.fromCharCode(n%1024+56320)))}return e.join("")},raw:function(n){var e=E.ToObject(n,"bad callSite"),t=e.raw,r=E.ToObject(t,"bad raw value"),i=r.length,o=E.ToLength(i);if(0>=o)return"";for(var s,a,u,l,c=[],f=0;o>f&&(s=String(f),a=r[s],u=String(a),c.push(u),!(f+1>=o));)a=f+1<arguments.length?arguments[f+1]:"",l=String(a),c.push(l),f++;return c.join("")}}),1!==String.fromCodePoint.length){var O=Function.apply.bind(String.fromCodePoint);v(String,"fromCodePoint",function(){return O(this,arguments)},!0)}var R={repeat:function(){var n=function(e,t){if(1>t)return"";if(t%2)return n(e,t-1)+e;var r=n(e,t/2);return r+r};return function(e){var t=String(E.CheckObjectCoercible(this));if(e=E.ToInteger(e),0>e||1/0===e)throw new RangeError("Invalid String#repeat value");return n(t,e)}}(),startsWith:function(n){var e=String(E.CheckObjectCoercible(this));if(g.regex(n))throw new TypeError('Cannot call method "startsWith" with a regex');n=String(n);var t=arguments.length>1?arguments[1]:void 0,r=Math.max(E.ToInteger(t),0);return e.slice(r,r+n.length)===n},endsWith:function(n){var e=String(E.CheckObjectCoercible(this));if(g.regex(n))throw new TypeError('Cannot call method "endsWith" with a regex');n=String(n);var t=e.length,r=arguments.length>1?arguments[1]:void 0,i="undefined"==typeof r?t:E.ToInteger(r),o=Math.min(Math.max(i,0),t);return e.slice(o-n.length,o)===n},includes:function(n){var e=arguments.length>1?arguments[1]:void 0;return-1!==f(this,n,e)},codePointAt:function(n){var e=String(E.CheckObjectCoercible(this)),t=E.ToInteger(n),r=e.length;if(t>=0&&r>t){var i=e.charCodeAt(t),o=t+1===r;if(55296>i||i>56319||o)return i;var s=e.charCodeAt(t+1);return 56320>s||s>57343?i:1024*(i-55296)+(s-56320)+65536}}};y(String.prototype,R);var I=1!=="".trim().length;if(I){delete String.prototype.trim;var M=["	\n\f\r   ᠎    ","         　\u2028","\u2029﻿"].join(""),q=new RegExp("(^["+M+"]+)|(["+M+"]+$)","g");y(String.prototype,{trim:function(){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(q,"")}})}var _=function(n){this._s=String(E.CheckObjectCoercible(n)),this._i=0};_.prototype.next=function(){var n=this._s,e=this._i;if("undefined"==typeof n||e>=n.length)return this._s=void 0,{value:void 0,done:!0};var t,r,i=n.charCodeAt(e);return 55296>i||i>56319||e+1===n.length?r=1:(t=n.charCodeAt(e+1),r=56320>t||t>57343?1:2),this._i=e+r,{value:n.substr(e,r),done:!1}},S(_.prototype),S(String.prototype,function(){return new _(this)}),c||y(String.prototype,{startsWith:R.startsWith,endsWith:R.endsWith});var C={from:function(n){var e=arguments.length>1?arguments[1]:void 0,t=E.ToObject(n,"bad iterable");if("undefined"!=typeof e&&!E.IsCallable(e))throw new TypeError("Array.from: when provided, the second argument must be a function");var r,i,o,s,a=arguments.length>2,u=a?arguments[2]:void 0,l=E.IsIterable(t);if(l){o=0,i=E.IsCallable(this)?Object(new this):[];var c,f=l?E.GetIterator(t):null;do c=E.IteratorNext(f),c.done||(s=c.value,i[o]=e?a?e.call(u,s,o):e(s,o):s,o+=1);while(!c.done);r=o}else for(r=E.ToLength(t.length),i=E.IsCallable(this)?Object(new this(r)):new Array(r),o=0;r>o;++o)s=t[o],i[o]=e?a?e.call(u,s,o):e(s,o):s;return i.length=r,i},of:function(){return Array.from(arguments)}};y(Array,C);var N=function(){try{return 0===Array.from({length:-1}).length}catch(n){return!1}};N()||v(Array,"from",C.from,!0),n=function(n,e){this.i=0,this.array=n,this.kind=e},y(n.prototype,{next:function(){var e=this.i,t=this.array;if(!(this instanceof n))throw new TypeError("Not an ArrayIterator");if("undefined"!=typeof t)for(var r=E.ToLength(t.length);r>e;e++){var i,o=this.kind;return"key"===o?i=e:"value"===o?i=t[e]:"entry"===o&&(i=[e,t[e]]),this.i=e+1,{value:i,done:!1}}return this.array=void 0,{value:void 0,done:!0}}}),S(n.prototype);var P={copyWithin:function(n,e){var t=arguments[2],r=E.ToObject(this),i=E.ToLength(r.length);n=E.ToInteger(n),e=E.ToInteger(e);var o=0>n?Math.max(i+n,0):Math.min(n,i),s=0>e?Math.max(i+e,0):Math.min(e,i);t="undefined"==typeof t?i:E.ToInteger(t);var a=0>t?Math.max(i+t,0):Math.min(t,i),u=Math.min(a-s,i-o),l=1;for(o>s&&s+u>o&&(l=-1,s+=u-1,o+=u-1);u>0;)h(r,s)?r[o]=r[s]:delete r[s],s+=l,o+=l,u-=1;return r},fill:function(n){var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,r=E.ToObject(this),i=E.ToLength(r.length);e=E.ToInteger("undefined"==typeof e?0:e),t=E.ToInteger("undefined"==typeof t?i:t);for(var o=0>e?Math.max(i+e,0):Math.min(e,i),s=0>t?i+t:t,a=o;i>a&&s>a;++a)r[a]=n;return r},find:function(n){var e=E.ToObject(this),t=E.ToLength(e.length);if(!E.IsCallable(n))throw new TypeError("Array#find: predicate must be a function");for(var r,i=arguments.length>1?arguments[1]:null,o=0;t>o;o++)if(r=e[o],i){if(n.call(i,r,o,e))return r}else if(n(r,o,e))return r},findIndex:function(n){var e=E.ToObject(this),t=E.ToLength(e.length);if(!E.IsCallable(n))throw new TypeError("Array#findIndex: predicate must be a function");for(var r=arguments.length>1?arguments[1]:null,i=0;t>i;i++)if(r){if(n.call(r,e[i],i,e))return i}else if(n(e[i],i,e))return i;return-1},keys:function(){return new n(this,"key")},values:function(){return new n(this,"value")},entries:function(){return new n(this,"entry")}};Array.prototype.keys&&!E.IsCallable([1].keys().next)&&delete Array.prototype.keys,Array.prototype.entries&&!E.IsCallable([1].entries().next)&&delete Array.prototype.entries,Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[x]&&(y(Array.prototype,{values:Array.prototype[x]}),g.symbol(m.unscopables)&&(Array.prototype[m.unscopables].values=!0)),y(Array.prototype,P),S(Array.prototype,function(){return this.values()}),Object.getPrototypeOf&&S(Object.getPrototypeOf([].values()));var L=Math.pow(2,53)-1;y(Number,{MAX_SAFE_INTEGER:L,MIN_SAFE_INTEGER:-L,EPSILON:2.220446049250313e-16,parseInt:a.parseInt,parseFloat:a.parseFloat,isFinite:function(n){return"number"==typeof n&&u(n)},isInteger:function(n){return Number.isFinite(n)&&E.ToInteger(n)===n},isSafeInteger:function(n){return Number.isInteger(n)&&Math.abs(n)<=Number.MAX_SAFE_INTEGER},isNaN:function(n){return n!==n}}),[,1].find(function(n,e){return 0===e})||v(Array.prototype,"find",P.find,!0),0!==[,1].findIndex(function(n,e){return 0===e})&&v(Array.prototype,"findIndex",P.findIndex,!0),l&&y(Object,{assign:function(n){if(!E.TypeIsObject(n))throw new TypeError("target must be an object");return Array.prototype.reduce.call(arguments,function(n,e){return Object.keys(Object(e)).reduce(function(n,t){return n[t]=e[t],n},n)})},is:function(n,e){return E.SameValue(n,e)},setPrototypeOf:function(n,e){var t,r=function(n,e){if(!E.TypeIsObject(n))throw new TypeError("cannot set prototype on a non-object");if(null!==e&&!E.TypeIsObject(e))throw new TypeError("can only set prototype to an object or null"+e)},i=function(n,e){return r(n,e),t.call(n,e),n};try{t=n.getOwnPropertyDescriptor(n.prototype,e).set,t.call({},null)}catch(o){if(n.prototype!=={}[e])return;t=function(n){this[e]=n},i.polyfill=i(i({},null),n.prototype)instanceof n}return i}(Object,"__proto__")}),Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&!function(){var n=Object.create(null),e=Object.getPrototypeOf,t=Object.setPrototypeOf;Object.getPrototypeOf=function(t){var r=e(t);return r===n?null:r},Object.setPrototypeOf=function(e,r){return null===r&&(r=n),t(e,r)},Object.setPrototypeOf.polyfill=!1}();try{Object.keys("foo")}catch(A){var D=Object.keys;Object.keys=function(n){return D(E.ToObject(n))}}if(!RegExp.prototype.flags&&l){var B=function(){if(!E.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var n="";return this.global&&(n+="g"),this.ignoreCase&&(n+="i"),this.multiline&&(n+="m"),this.unicode&&(n+="u"),this.sticky&&(n+="y"),n};b.getter(RegExp.prototype,"flags",B)}var F=function(){try{return"/a/i"===String(new RegExp(/a/g,"i"))}catch(n){return!1}}();if(!F&&l){var z=RegExp,H=function ne(n,e){return g.regex(n)&&g.string(e)?new ne(n.source,e):new z(n,e)};v(H,"toString",z.toString.bind(z),!0),Object.setPrototypeOf&&Object.setPrototypeOf(z,H),Object.getOwnPropertyNames(z).forEach(function(n){"$input"!==n&&(n in d||b.proxy(z,n,H))}),H.prototype=z.prototype,b.redefine(z.prototype,"constructor",H),RegExp=H,b.redefine(a,"RegExp",H)}var W={acosh:function(n){return n=Number(n),Number.isNaN(n)||1>n?0/0:1===n?0:1/0===n?n:Math.log(n+Math.sqrt(n*n-1))},asinh:function(n){return n=Number(n),0!==n&&u(n)?0>n?-Math.asinh(-n):Math.log(n+Math.sqrt(n*n+1)):n},atanh:function(n){return n=Number(n),Number.isNaN(n)||-1>n||n>1?0/0:-1===n?-1/0:1===n?1/0:0===n?n:.5*Math.log((1+n)/(1-n))},cbrt:function(n){if(n=Number(n),0===n)return n;var e,t=0>n;return t&&(n=-n),e=Math.pow(n,1/3),t?-e:e},clz32:function(n){n=Number(n);var e=E.ToUint32(n);return 0===e?32:32-e.toString(2).length},cosh:function(n){return n=Number(n),0===n?1:Number.isNaN(n)?0/0:u(n)?(0>n&&(n=-n),n>21?Math.exp(n)/2:(Math.exp(n)+Math.exp(-n))/2):1/0},expm1:function(n){return n=Number(n),n===-1/0?-1:u(n)&&0!==n?Math.exp(n)-1:n},hypot:function(){var n=!1,e=!0,t=!1,r=[];if(Array.prototype.every.call(arguments,function(i){var o=Number(i);return Number.isNaN(o)?n=!0:1/0===o||o===-1/0?t=!0:0!==o&&(e=!1),t?!1:(n||r.push(Math.abs(o)),!0)}),t)return 1/0;if(n)return 0/0;if(e)return 0;r.sort(function(n,e){return e-n});var i=r[0],o=r.map(function(n){return n/i}),s=o.reduce(function(n,e){return n+e*e},0);return i*Math.sqrt(s)},log2:function(n){return Math.log(n)*Math.LOG2E},log10:function(n){return Math.log(n)*Math.LOG10E},log1p:function(n){if(n=Number(n),-1>n||Number.isNaN(n))return 0/0;if(0===n||1/0===n)return n;if(-1===n)return-1/0;var e=0,t=50;if(0>n||n>1)return Math.log(1+n);for(var r=1;t>r;r++)r%2===0?e-=Math.pow(n,r)/r:e+=Math.pow(n,r)/r;return e},sign:function(n){var e=+n;return 0===e?e:Number.isNaN(e)?e:0>e?-1:1},sinh:function(n){return n=Number(n),u(n)&&0!==n?(Math.exp(n)-Math.exp(-n))/2:n},tanh:function(n){return n=Number(n),Number.isNaN(n)||0===n?n:1/0===n?1:n===-1/0?-1:(Math.exp(n)-Math.exp(-n))/(Math.exp(n)+Math.exp(-n))},trunc:function(n){var e=Number(n);return 0>e?-Math.floor(-e):Math.floor(e)},imul:function(n,e){n=E.ToUint32(n),e=E.ToUint32(e);var t=n>>>16&65535,r=65535&n,i=e>>>16&65535,o=65535&e;return r*o+(t*o+r*i<<16>>>0)|0},fround:function(n){if(0===n||1/0===n||n===-1/0||Number.isNaN(n))return n;var e=Number(n);return T.toFloat32(e)}};y(Math,W),-5!==Math.imul(4294967295,5)&&(Math.imul=W.imul);var U=function(){var n,e;E.IsPromise=function(n){return E.TypeIsObject(n)&&n._promiseConstructor?"undefined"==typeof n._status?!1:!0:!1};var t,r=function(n){if(!E.IsCallable(n))throw new TypeError("bad promise constructor");var e=this,t=function(n,t){e.resolve=n,e.reject=t};if(e.promise=E.Construct(n,[t]),!e.promise._es6construct)throw new TypeError("bad promise constructor");if(!E.IsCallable(e.resolve)||!E.IsCallable(e.reject))throw new TypeError("bad promise constructor")},i=a.setTimeout;"undefined"!=typeof window&&E.IsCallable(window.postMessage)&&(t=function(){var n=[],e="zero-timeout-message",t=function(t){n.push(t),window.postMessage(e,"*")},r=function(t){if(t.source===window&&t.data===e){if(t.stopPropagation(),0===n.length)return;var r=n.shift();r()}};return window.addEventListener("message",r,!0),t});var s=function(){var n=a.Promise;return n&&n.resolve&&function(e){return n.resolve().then(e)}},u=E.IsCallable(a.setImmediate)?a.setImmediate.bind(a):"object"==typeof o&&o.nextTick?o.nextTick:s()||(E.IsCallable(t)?t():function(n){i(n,0)}),l=function(n,e){if(!E.TypeIsObject(n))return!1;var t=e.resolve,r=e.reject;try{var i=n.then;if(!E.IsCallable(i))return!1;i.call(n,t,r)}catch(o){r(o)}return!0},c=function(n,e){n.forEach(function(n){u(function(){var t=n.handler,r=n.capability,i=r.resolve,o=r.reject;try{var s=t(e);if(s===r.promise)throw new TypeError("self resolution");var a=l(s,r);a||i(s)}catch(u){o(u)}})})},f=function(n,e,t){return function(i){if(i===n)return t(new TypeError("self resolution"));var o=n._promiseConstructor,s=new r(o),a=l(i,s);return a?s.promise.then(e,t):e(i)}};n=function(n){var e=this;if(e=j(e),!e._promiseConstructor)throw new TypeError("bad promise");if("undefined"!=typeof e._status)throw new TypeError("promise already initialized");if(!E.IsCallable(n))throw new TypeError("not a valid resolver");e._status="unresolved",e._resolveReactions=[],e._rejectReactions=[];var t=function(n){if("unresolved"===e._status){var t=e._resolveReactions;e._result=n,e._resolveReactions=void 0,e._rejectReactions=void 0,e._status="has-resolution",c(t,n)}},r=function(n){if("unresolved"===e._status){var t=e._rejectReactions;e._result=n,e._resolveReactions=void 0,e._rejectReactions=void 0,e._status="has-rejection",c(t,n)}};try{n(t,r)}catch(i){r(i)}return e},e=n.prototype;var p=function(n,e,t,r){var i=!1;return function(o){if(!i&&(i=!0,e[n]=o,0===--r.count)){var s=t.resolve;s(e)}}};return y(n,{"@@create":function(n){var t=this,r=t.prototype||e;return n=n||w(r),y(n,{_status:void 0,_result:void 0,_resolveReactions:void 0,_rejectReactions:void 0,_promiseConstructor:void 0}),n._promiseConstructor=t,n},all:function(n){var e=this,t=new r(e),i=t.resolve,o=t.reject;try{if(!E.IsIterable(n))throw new TypeError("bad iterable");for(var s=E.GetIterator(n),a=[],u={count:1},l=0;;l++){var c=E.IteratorNext(s);if(c.done)break;var f=e.resolve(c.value),h=p(l,a,t,u);u.count++,f.then(h,t.reject)}0===--u.count&&i(a)}catch(d){o(d)}return t.promise},race:function(n){var e=this,t=new r(e),i=t.resolve,o=t.reject;try{if(!E.IsIterable(n))throw new TypeError("bad iterable");for(var s=E.GetIterator(n);;){var a=E.IteratorNext(s);if(a.done)break;var u=e.resolve(a.value);u.then(i,o)}}catch(l){o(l)}return t.promise},reject:function(n){var e=this,t=new r(e),i=t.reject;return i(n),t.promise},resolve:function(n){var e=this;if(E.IsPromise(n)){var t=n._promiseConstructor;if(t===e)return n}var i=new r(e),o=i.resolve;return o(n),i.promise}}),y(e,{"catch":function(n){return this.then(void 0,n)},then:function(n,e){var t=this;if(!E.IsPromise(t))throw new TypeError("not a promise");var i=this.constructor,o=new r(i);E.IsCallable(e)||(e=function(n){throw n}),E.IsCallable(n)||(n=function(n){return n});var s=f(t,n,e),a={capability:o,handler:s},u={capability:o,handler:e};switch(t._status){case"unresolved":t._resolveReactions.push(a),t._rejectReactions.push(u);break;case"has-resolution":c([a],t._result);break;case"has-rejection":c([u],t._result);break;default:throw new TypeError("unexpected")}return o.promise}}),n}();a.Promise&&(delete a.Promise.accept,delete a.Promise.defer,delete a.Promise.prototype.chain),y(a,{Promise:U});var $=t(a.Promise,function(n){return n.resolve(42)instanceof n}),J=function(){try{return a.Promise.reject(42).then(null,5).then(null,d),!0}catch(n){return!1}}(),G=function(){try{Promise.call(3,d)}catch(n){return!0}return!1}();$&&J&&G||(Promise=U,v(a,"Promise",U,!0));var X=function(n){var e=Object.keys(n.reduce(function(n,e){return n[e]=!0,n},{}));return n.join(":")===e.join(":")},V=X(["z","a","bb"]),Q=X(["z",1,"a","3",2]);if(l){var Z=function(n){if(!V)return null;var e=typeof n;return"string"===e?"$"+n:"number"===e?Q?n:"n"+n:null},K=function(){return Object.create?Object.create(null):{}},Y={Map:function(){function n(n,e){this.key=n,this.value=e,this.next=null,this.prev=null}function e(n,e){this.head=n._head,this.i=this.head,this.kind=e}function t(e){var t=this;if(!E.TypeIsObject(t))throw new TypeError("Map does not accept arguments when called as a function");if(t=j(t),!t._es6map)throw new TypeError("bad map");var r=new n(null,null);if(r.next=r.prev=r,y(t,{_head:r,_storage:K(),_size:0}),"undefined"!=typeof e&&null!==e){var i=E.GetIterator(e),o=t.set;if(!E.IsCallable(o))throw new TypeError("bad map");for(;;){var s=E.IteratorNext(i);if(s.done)break;var a=s.value;if(!E.TypeIsObject(a))throw new TypeError("expected iterable of pairs");o.call(t,a[0],a[1])}}return t}var r={};n.prototype.isRemoved=function(){return this.key===r},e.prototype={next:function(){var n,e=this.i,t=this.kind,r=this.head;if("undefined"==typeof this.i)return{value:void 0,done:!0};for(;e.isRemoved()&&e!==r;)e=e.prev;for(;e.next!==r;)if(e=e.next,!e.isRemoved())return n="key"===t?e.key:"value"===t?e.value:[e.key,e.value],this.i=e,{value:n,done:!1};return this.i=void 0,{value:void 0,done:!0}}},S(e.prototype);var i=t.prototype;return y(t,{"@@create":function(n){var e=this,t=e.prototype||i;return n=n||w(t),y(n,{_es6map:!0}),n}}),b.getter(t.prototype,"size",function(){if("undefined"==typeof this._size)throw new TypeError("size method called on incompatible Map");return this._size}),y(t.prototype,{get:function(n){var e=Z(n);if(null!==e){var t=this._storage[e];return t?t.value:void 0}for(var r=this._head,i=r;(i=i.next)!==r;)if(E.SameValueZero(i.key,n))return i.value},has:function(n){var e=Z(n);if(null!==e)return"undefined"!=typeof this._storage[e];for(var t=this._head,r=t;(r=r.next)!==t;)if(E.SameValueZero(r.key,n))return!0;return!1},set:function(e,t){var r,i=this._head,o=i,s=Z(e);if(null!==s){if("undefined"!=typeof this._storage[s])return this._storage[s].value=t,this;r=this._storage[s]=new n(e,t),o=i.prev}for(;(o=o.next)!==i;)if(E.SameValueZero(o.key,e))return o.value=t,this;return r=r||new n(e,t),E.SameValue(-0,e)&&(r.key=0),r.next=this._head,r.prev=this._head.prev,r.prev.next=r,r.next.prev=r,this._size+=1,this},"delete":function(n){var e=this._head,t=e,i=Z(n);if(null!==i){if("undefined"==typeof this._storage[i])return!1;t=this._storage[i].prev,delete this._storage[i]}for(;(t=t.next)!==e;)if(E.SameValueZero(t.key,n))return t.key=t.value=r,t.prev.next=t.next,t.next.prev=t.prev,this._size-=1,!0;return!1},clear:function(){this._size=0,this._storage=K();for(var n=this._head,e=n,t=e.next;(e=t)!==n;)e.key=e.value=r,t=e.next,e.next=e.prev=n;n.next=n.prev=n},keys:function(){return new e(this,"key")},values:function(){return new e(this,"value")},entries:function(){return new e(this,"key+value")},forEach:function(n){for(var e=arguments.length>1?arguments[1]:null,t=this.entries(),r=t.next();!r.done;r=t.next())e?n.call(e,r.value[1],r.value[0],this):n(r.value[1],r.value[0],this)}}),S(t.prototype,function(){return this.entries()}),t}(),Set:function(){var n=function(n){var e=this;if(!E.TypeIsObject(e))throw new TypeError("Set does not accept arguments when called as a function");if(e=j(e),!e._es6set)throw new TypeError("bad set");if(y(e,{"[[SetData]]":null,_storage:K()}),"undefined"!=typeof n&&null!==n){var t=E.GetIterator(n),r=e.add;if(!E.IsCallable(r))throw new TypeError("bad set");for(;;){var i=E.IteratorNext(t);if(i.done)break;var o=i.value;r.call(e,o)}}return e},e=n.prototype;y(n,{"@@create":function(n){var t=this,r=t.prototype||e;return n=n||w(r),y(n,{_es6set:!0}),n}});var t=function(n){if(!n["[[SetData]]"]){var e=n["[[SetData]]"]=new Y.Map;Object.keys(n._storage).forEach(function(n){n=36===n.charCodeAt(0)?n.slice(1):"n"===n.charAt(0)?+n.slice(1):+n,e.set(n,n)}),n._storage=null}};return b.getter(n.prototype,"size",function(){if("undefined"==typeof this._storage)throw new TypeError("size method called on incompatible Set");return t(this),this["[[SetData]]"].size}),y(n.prototype,{has:function(n){var e;return this._storage&&null!==(e=Z(n))?!!this._storage[e]:(t(this),this["[[SetData]]"].has(n))},add:function(n){var e;return this._storage&&null!==(e=Z(n))?(this._storage[e]=!0,this):(t(this),this["[[SetData]]"].set(n,n),this)},"delete":function(n){var e;if(this._storage&&null!==(e=Z(n))){var r=h(this._storage,e);return delete this._storage[e]&&r}return t(this),this["[[SetData]]"]["delete"](n)},clear:function(){this._storage?this._storage=K():this["[[SetData]]"].clear()},values:function(){return t(this),this["[[SetData]]"].values()},entries:function(){return t(this),this["[[SetData]]"].entries()},forEach:function(n){var e=arguments.length>1?arguments[1]:null,r=this;t(r),this["[[SetData]]"].forEach(function(t,i){e?n.call(e,i,i,r):n(i,i,r)})}}),v(n,"keys",n.values,!0),S(n.prototype,function(){return this.values()}),n}()};y(a,Y),(a.Map||a.Set)&&("function"!=typeof a.Map.prototype.clear||0!==(new a.Set).size||0!==(new a.Map).size||"function"!=typeof a.Map.prototype.keys||"function"!=typeof a.Set.prototype.keys||"function"!=typeof a.Map.prototype.forEach||"function"!=typeof a.Set.prototype.forEach||e(a.Map)||e(a.Set)||!t(a.Map,function(n){var e=new n([]);return e.set(42,42),e instanceof n}))&&(a.Map=Y.Map,a.Set=Y.Set),a.Set.prototype.keys!==a.Set.prototype.values&&v(a.Set.prototype,"keys",a.Set.prototype.values,!0),S(Object.getPrototypeOf((new a.Map).keys())),S(Object.getPrototypeOf((new a.Set).keys()))}return a})}).call(e,t(3))},function(n,e,t){n.exports=t(11)},,,function(n,e,t){"use strict";function r(){i(),o(),s()}function i(){var n=document.createElement("div");n.id="mocha",document.body.appendChild(n),mocha.setup("bdd")}function o(){t(43)}function s(){var n=[];mocha.run().on("test end",function(n){n.err&&(console.log("%cFailed Spec: %c%s\n %c%s","color: black; font: 16px sans-serif","color: black; font: bold 16px sans-serif",n.title,"color: red; font: bold 1em sans-serif",n.err.message),console.error(n.err.stack))}).on("test end",function(e){n.push("passed"===e.state?{fullName:e.title,status:"passed"}:e.pending?{fullName:e.title,status:"pending"}:{fullName:e.title,status:"failed",failedExpectations:[{message:e.err.message,stack:e.err.stack}]})}).on("suite end",function(e){if(e.root){var t=window.__coverage__||null,r=JSON.stringify({specs:n,coverage:t}),i=new XMLHttpRequest;i.open("POST","/api/test",!0),i.setRequestHeader("Content-Type","application/json"),i.send(r)}})}e.main=r,t(5),t(32),t(38),t(40),t(27)},,function(n,e,t){"use strict";function r(n){return Promise.resolve(n).then(function(){throw new Error("should not be success")},function(){return"ok, error is thrown"})}var i=t(4).Cachier;describe("Cachier",function(){var n=void 0,e=0,t=function(n){return function(e){return function(){var t=function(r){var i=Promise.resolve().then(e);return r>=n?i:i["catch"](function(){return t(r+1)})};return t(1)}}};beforeEach(function(){return n=new i("test."+(new Date).getTime()+"."+ ++e)}),afterEach(t(2)(function(){return n.destroyDatabase()})),describe(".connection",function(){it("should be a promise which fullfill with the db connection",function(){return n.connection.then(function(n){expect(n.constructor+"").toMatch(/DBDatabase/)})})}),describe("#save",function(){it("stores a blob",function(){var e=new Blob(["hello"]);return n.save("wow",e).then(function(n){return expect(n).toBeTruthy()})}),it("rejects when key is invalid",function(){var e=new Blob(["hello"]);return r(n.save(void 0,e))})}),describe("with a blob saved",function(){beforeEach(function(){var e=new Blob(["hello"]);return n.save("wow2",e,{name:"example1"}).delay(10)}),describe("#load",function(){it("should return the blob value",function(){return n.load("wow2").then(function(n){var e=n.blob,t=n.metadata;expect(e.size).toBe(5),expect(t).toEqual({name:"example1"})})})}),describe("#save",function(){it("should replace content with a new blob",function(){var e=new Blob(["world!"]);return n.save("wow2",e).delay(10).then(function(){return n.load("wow2")}).then(function(n){var e=n.blob,t=n.metadata;expect(e.size).toBe(6),expect(t).toBe(void 0)})})}),describe("#delete",function(){it("should remove the blob",function(){return r(n["delete"]("wow3").then(function(){return n.load("wow3")}))})})}),describe("#destroyDatabase",function(){it("may be called twice",function(){return n.destroyDatabase()})}),describe("without blob support in IndexedDB",function(){it("still works",function(){var e=new Blob(["hello"],{type:"text/plain"});return n._NO_BLOB=!0,n.save("wow4",e).delay(10).then(function(){return n.load("wow4")}).then(function(n){var e=n.blob;expect(e.size).toBe(5),expect(e.type).toBe("text/plain")})})})})},function(){"use strict";describe("The specs",function(){it("runs",function(){expect({runs:!0}.runs).toBe(!0)})})},,,,function(n,e,t){e=n.exports=t(2)(),e.push([n.id,"@charset \"utf-8\";body{margin:0}#mocha{font:20px/1.5 \"Helvetica Neue\",Helvetica,Arial,sans-serif;margin:60px 50px}#mocha ul,#mocha li{margin:0;padding:0}#mocha ul{list-style:none}#mocha h2{margin:0}#mocha h1{margin:15px 0 0;font-size:1em;font-weight:200}#mocha h1 a{text-decoration:none;color:inherit}#mocha h1 a:hover{text-decoration:underline}#mocha .suite .suite h1{margin-top:0;font-size:.8em}#mocha .hidden{display:none}#mocha h2{font-size:12px;font-weight:400;cursor:pointer}#mocha .suite,#mocha .test{margin-left:15px}#mocha .test{overflow:hidden}#mocha .test.pending:hover h2::after{content:'(pending)';font-family:arial,sans-serif}#mocha .test.pass.medium .duration{background:#c09853}#mocha .test.pass.slow .duration{background:#b94a48}#mocha .test.pass::before{content:'✓';font-size:12px;display:block;float:left;margin-right:5px;color:#00d6b2}#mocha .test.pass .duration{font-size:9px;margin-left:5px;padding:2px 5px;color:#fff;box-shadow:inset 0 1px 1px rgba(0,0,0,.2);-o-border-radius:5px;border-radius:5px}#mocha .test.pass.fast .duration{display:none}#mocha .test.pending{color:#0b97c4}#mocha .test.pending::before{content:'◦';color:#0b97c4}#mocha .test.fail{color:#c00}#mocha .test.fail pre{color:#000}#mocha .test.fail::before{content:'✖';font-size:12px;display:block;float:left;margin-right:5px;color:#c00}#mocha .test pre.error{color:#c00;max-height:300px;overflow:auto}#mocha .test pre{display:block;float:left;clear:left;font:12px/1.5 monaco,monospace;margin:5px;padding:15px;border:1px solid #eee;max-width:calc(100% - 42px);word-wrap:break-word;border-bottom-color:#ddd;-webkit-border-radius:3px;-webkit-box-shadow:0 1px 3px #eee;-moz-border-radius:3px;-moz-box-shadow:0 1px 3px #eee;border-radius:3px}#mocha .test h2{position:relative}#mocha .test a.replay{position:absolute;top:3px;right:0;text-decoration:none;vertical-align:middle;display:block;width:15px;height:15px;line-height:15px;text-align:center;background:#eee;font-size:15px;border-radius:15px;transition:opacity 200ms;opacity:.3;color:#888}#mocha .test:hover a.replay{opacity:1}#mocha-report.pass .test.fail,#mocha-report.fail .test.pass,#mocha-report.pending .test.pass,#mocha-report.pending .test.fail{display:none}#mocha-report.pending .test.pass.pending{display:block}#mocha-error{color:#c00;font-size:1.5em;font-weight:100;letter-spacing:1px}#mocha-stats{position:fixed;top:15px;right:10px;font-size:12px;margin:0;color:#888;z-index:1}#mocha-stats .progress{float:right;padding-top:0}#mocha-stats em{color:#000}#mocha-stats a{text-decoration:none;color:inherit}#mocha-stats a:hover{border-bottom:1px solid #eee}#mocha-stats li{display:inline-block;margin:0 5px;list-style:none;padding-top:11px}#mocha-stats canvas{width:40px;height:40px}#mocha code .comment{color:#ddd}#mocha code .init{color:#2f6fad}#mocha code .string{color:#5890ad}#mocha code .keyword{color:#8a6343}#mocha code .number{color:#2f6fad}@media screen and (max-device-width:480px){#mocha{margin:60px 0}#mocha #stats{position:absolute}}",""])
},,,function(n,e,t){e=n.exports=t(2)(),e.push([n.id,"#mocha-stats em{color:#fff}",""])},function(n,e,t){(function(e){!function(r,i){"use strict";var o=function(n){this.message=n.message};o.prototype=Error.prototype,o.prototype.toString=function(){return this.message},n.exports=i(e,t(44).AssertionError)}(this,function(n,e){"use strict";function t(n,e,r){function i(n){return r.indexOf(n)>-1&&r.indexOf(n)!==r.length-1}if(r=r||[],"undefined"==typeof n)return e?"":"undefined";if("function"==typeof n)return"function "+n.name+"(){}";if("string"==typeof n)return'"'+n+'"';if(null===n)return"null";if(n instanceof Date)return"[Date "+n.toUTCString()+"]";if(n instanceof RegExp)return n.toString();if(n instanceof Array){var o=[];if(!i(n,r)&&r.length<10)for(var s=0;s<n.length;s++)o.push(t(n[s],!1,r)),r.push(n[s]);else o.push(n.toString());return"["+o.join(", ")+"]"}return 1==n.nodeType?"<"+n.nodeName.toLowerCase()+" />":"object"==typeof n&&r.length<10?"[object Object]"!==n.toString()?n instanceof Error?"[Error: "+n.toString()+"]":"["+n.toString()+"]":i(n,r)?"[Circular]":"{"+Object.keys(n).map(function(e){return['"',e,'": ',t(n[e],!1,r.concat(n))].join("")}).join(", ")+"}":n.toString()}function r(n,e,t){if(n===e)return 0!==n||1/n==1/e;if(null==n||null==e)return n==e;if(n.isEqual&&"function"==typeof n.isEqual)return n.isEqual(e);if(e.isEqual&&"function"==typeof e.isEqual)return e.isEqual(n);var i=o.call(n);if(i!=o.call(e))return!1;switch(i){case"[object String]":return n==String(e);case"[object Number]":return n!=+n?e!=+e:n?1/n==1/e:n==+e;case"[object Date]":case"[object Boolean]":return+n==+e;case"[object RegExp]":return n.source==e.source&&n.global==e.global&&n.multiline==e.multiline&&n.ignoreCase==e.ignoreCase}if("object"!=typeof n||"object"!=typeof e)return!1;for(var a=t.length;a--;)if(t[a]==n)return!0;t.push(n);var u=0,l=!0;if("[object Array]"==i){if(u=n.length,l=u==e.length)for(;u--&&(l=u in n==u in e&&r(n[u],e[u],t)););}else{if("constructor"in n!="constructor"in e||n.constructor!=e.constructor)return!1;for(var c in n)if(s.call(n,c)&&void 0!==n[c]&&(u++,!(l=s.call(e,c)&&r(n[c],e[c],t))))break;if(l){for(c in e)if(s.call(e,c)&&void 0!==e[c]&&!u--)break;l=!u}}return t.pop(),l}function i(n,t,r,o){r=r||"",this.value=n,this.assertions=t||{pass:function(){},fail:function(n){throw new e({message:n})}},this.expr=r,this.parent=o,this.not=o||new i(n,{fail:this.assertions.pass,pass:this.assertions.fail},"not ",this)}var o=Object.prototype.toString,s=Object.prototype.hasOwnProperty;return i.prototype.generateMessage=function(n,e,r,i){return("expected "+t(n)+" "+e+r+" "+t(i,!0)).replace(/\s\s/g," ").replace(/(^\s|\s$)/g,"")},i.prototype.toEqual=function(n){var e=this.generateMessage(this.value,this.expr,"to equal",n);return r(this.value,n,[])?void this.assertions.pass(e):this.assertions.fail(e)},i.prototype.toNotEqual=function(n){return this.not.toEqual(n)},i.prototype.toBe=function(n){var e=this.generateMessage(this.value,this.expr,"to equal",n);return this.value!==n?this.assertions.fail(e):void this.assertions.pass(e)},i.prototype.toBeTruthy=function(){var n=this.generateMessage(this.value,this.expr,"to be truthy");return this.value?this.assertions.pass(n):void this.assertions.fail(n)},i.prototype.toBeFalsey=i.prototype.toBeFalsy=function(){var n=this.generateMessage(this.value,this.expr,"to be falsey");return this.value?void this.assertions.fail(n):this.assertions.pass(n)},i.prototype.toBeGreaterThan=function(n){var e=this.generateMessage(this.value,this.expr,"to be greater than",n);return this.value>n?this.assertions.pass(e):void this.assertions.fail(e)},i.prototype.toBeLessThan=function(n){var e=this.generateMessage(this.value,this.expr,"to be less than",n);return this.value<n?this.assertions.pass(e):void this.assertions.fail(e)},i.prototype.toContain=function(n){var e,t=this.generateMessage(this.value,this.expr,"to contain",n);if(this.value.indexOf(n)>-1)return this.assertions.pass(t);for(e=0;e<this.value.length;e++)if(r(this.value[e],n,[]))return this.assertions.pass(t);this.assertions.fail(t)},i.prototype.toMatch=function(n){var e=this.generateMessage(this.value,this.expr,"to match",n);return n.test(this.value)?this.assertions.pass(e):this.assertions.fail(e)},i.prototype.toBeDefined=function(){var n=this.generateMessage(this.value,this.expr,"to be defined");return"undefined"!=typeof this.value?this.assertions.pass(n):void this.assertions.fail(n)},i.prototype.toBeUndefined=function(){var n=this.generateMessage(this.value,this.expr,"to be undefined");return"undefined"==typeof this.value?this.assertions.pass(n):void this.assertions.fail(n)},i.prototype.toBeNull=function(){return null===this.value?this.assertions.pass():void this.assertions.fail("to be null")},i.prototype.toThrow=function(n){var e,t;if("function"!=typeof this.value)return this.fail("to be a function");"string"==typeof n?e=n:n instanceof Error&&(e=n.message);try{this.value()}catch(r){t=r}return t?e&&t.message!==e?this.fail("to throw",e):void this.assertions.pass():this.fail("to throw an exception")},i.prototype.pass=function(){this.assertions.pass()},i.prototype.fail=function(n,e){var t=this.generateMessage(this.value,this.expr,n||"",e);this.assertions.fail(t)},n.expect=function(n){return new i(n)},n.expect.addAssertion=function(n,e){i.prototype[n]=e},n.expect})}).call(e,function(){return this}())},,,,function(n){n.exports=function(n){"function"==typeof execScript?execScript(n):eval.call(null,n)}},function(n,e,t){t(31)(t(33))},function(n){n.exports=";(function(){\n\n// CommonJS require()\n\nfunction require(p){\n    var path = require.resolve(p)\n      , mod = require.modules[path];\n    if (!mod) throw new Error('failed to require \"' + p + '\"');\n    if (!mod.exports) {\n      mod.exports = {};\n      mod.call(mod.exports, mod, mod.exports, require.relative(path));\n    }\n    return mod.exports;\n  }\n\nrequire.modules = {};\n\nrequire.resolve = function (path){\n    var orig = path\n      , reg = path + '.js'\n      , index = path + '/index.js';\n    return require.modules[reg] && reg\n      || require.modules[index] && index\n      || orig;\n  };\n\nrequire.register = function (path, fn){\n    require.modules[path] = fn;\n  };\n\nrequire.relative = function (parent) {\n    return function(p){\n      if ('.' != p.charAt(0)) return require(p);\n\n      var path = parent.split('/')\n        , segs = p.split('/');\n      path.pop();\n\n      for (var i = 0; i < segs.length; i++) {\n        var seg = segs[i];\n        if ('..' == seg) path.pop();\n        else if ('.' != seg) path.push(seg);\n      }\n\n      return require(path.join('/'));\n    };\n  };\n\n\nrequire.register(\"browser/debug.js\", function(module, exports, require){\nmodule.exports = function(type){\n  return function(){\n  }\n};\n\n}); // module: browser/debug.js\n\nrequire.register(\"browser/diff.js\", function(module, exports, require){\n/* See LICENSE file for terms of use */\n\n/*\n * Text diff implementation.\n *\n * This library supports the following APIS:\n * JsDiff.diffChars: Character by character diff\n * JsDiff.diffWords: Word (as defined by \\b regex) diff which ignores whitespace\n * JsDiff.diffLines: Line based diff\n *\n * JsDiff.diffCss: Diff targeted at CSS content\n *\n * These methods are based on the implementation proposed in\n * \"An O(ND) Difference Algorithm and its Variations\" (Myers, 1986).\n * http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.4.6927\n */\nvar JsDiff = (function() {\n  /*jshint maxparams: 5*/\n  function clonePath(path) {\n    return { newPos: path.newPos, components: path.components.slice(0) };\n  }\n  function removeEmpty(array) {\n    var ret = [];\n    for (var i = 0; i < array.length; i++) {\n      if (array[i]) {\n        ret.push(array[i]);\n      }\n    }\n    return ret;\n  }\n  function escapeHTML(s) {\n    var n = s;\n    n = n.replace(/&/g, '&amp;');\n    n = n.replace(/</g, '&lt;');\n    n = n.replace(/>/g, '&gt;');\n    n = n.replace(/\"/g, '&quot;');\n\n    return n;\n  }\n\n  var Diff = function(ignoreWhitespace) {\n    this.ignoreWhitespace = ignoreWhitespace;\n  };\n  Diff.prototype = {\n      diff: function(oldString, newString) {\n        // Handle the identity case (this is due to unrolling editLength == 0\n        if (newString === oldString) {\n          return [{ value: newString }];\n        }\n        if (!newString) {\n          return [{ value: oldString, removed: true }];\n        }\n        if (!oldString) {\n          return [{ value: newString, added: true }];\n        }\n\n        newString = this.tokenize(newString);\n        oldString = this.tokenize(oldString);\n\n        var newLen = newString.length, oldLen = oldString.length;\n        var maxEditLength = newLen + oldLen;\n        var bestPath = [{ newPos: -1, components: [] }];\n\n        // Seed editLength = 0\n        var oldPos = this.extractCommon(bestPath[0], newString, oldString, 0);\n        if (bestPath[0].newPos+1 >= newLen && oldPos+1 >= oldLen) {\n          return bestPath[0].components;\n        }\n\n        for (var editLength = 1; editLength <= maxEditLength; editLength++) {\n          for (var diagonalPath = -1*editLength; diagonalPath <= editLength; diagonalPath+=2) {\n            var basePath;\n            var addPath = bestPath[diagonalPath-1],\n                removePath = bestPath[diagonalPath+1];\n            oldPos = (removePath ? removePath.newPos : 0) - diagonalPath;\n            if (addPath) {\n              // No one else is going to attempt to use this value, clear it\n              bestPath[diagonalPath-1] = undefined;\n            }\n\n            var canAdd = addPath && addPath.newPos+1 < newLen;\n            var canRemove = removePath && 0 <= oldPos && oldPos < oldLen;\n            if (!canAdd && !canRemove) {\n              bestPath[diagonalPath] = undefined;\n              continue;\n            }\n\n            // Select the diagonal that we want to branch from. We select the prior\n            // path whose position in the new string is the farthest from the origin\n            // and does not pass the bounds of the diff graph\n            if (!canAdd || (canRemove && addPath.newPos < removePath.newPos)) {\n              basePath = clonePath(removePath);\n              this.pushComponent(basePath.components, oldString[oldPos], undefined, true);\n            } else {\n              basePath = clonePath(addPath);\n              basePath.newPos++;\n              this.pushComponent(basePath.components, newString[basePath.newPos], true, undefined);\n            }\n\n            var oldPos = this.extractCommon(basePath, newString, oldString, diagonalPath);\n\n            if (basePath.newPos+1 >= newLen && oldPos+1 >= oldLen) {\n              return basePath.components;\n            } else {\n              bestPath[diagonalPath] = basePath;\n            }\n          }\n        }\n      },\n\n      pushComponent: function(components, value, added, removed) {\n        var last = components[components.length-1];\n        if (last && last.added === added && last.removed === removed) {\n          // We need to clone here as the component clone operation is just\n          // as shallow array clone\n          components[components.length-1] =\n            {value: this.join(last.value, value), added: added, removed: removed };\n        } else {\n          components.push({value: value, added: added, removed: removed });\n        }\n      },\n      extractCommon: function(basePath, newString, oldString, diagonalPath) {\n        var newLen = newString.length,\n            oldLen = oldString.length,\n            newPos = basePath.newPos,\n            oldPos = newPos - diagonalPath;\n        while (newPos+1 < newLen && oldPos+1 < oldLen && this.equals(newString[newPos+1], oldString[oldPos+1])) {\n          newPos++;\n          oldPos++;\n\n          this.pushComponent(basePath.components, newString[newPos], undefined, undefined);\n        }\n        basePath.newPos = newPos;\n        return oldPos;\n      },\n\n      equals: function(left, right) {\n        var reWhitespace = /\\S/;\n        if (this.ignoreWhitespace && !reWhitespace.test(left) && !reWhitespace.test(right)) {\n          return true;\n        } else {\n          return left === right;\n        }\n      },\n      join: function(left, right) {\n        return left + right;\n      },\n      tokenize: function(value) {\n        return value;\n      }\n  };\n\n  var CharDiff = new Diff();\n\n  var WordDiff = new Diff(true);\n  var WordWithSpaceDiff = new Diff();\n  WordDiff.tokenize = WordWithSpaceDiff.tokenize = function(value) {\n    return removeEmpty(value.split(/(\\s+|\\b)/));\n  };\n\n  var CssDiff = new Diff(true);\n  CssDiff.tokenize = function(value) {\n    return removeEmpty(value.split(/([{}:;,]|\\s+)/));\n  };\n\n  var LineDiff = new Diff();\n  LineDiff.tokenize = function(value) {\n    var retLines = [],\n        lines = value.split(/^/m);\n\n    for(var i = 0; i < lines.length; i++) {\n      var line = lines[i],\n          lastLine = lines[i - 1];\n\n      // Merge lines that may contain windows new lines\n      if (line == '\\n' && lastLine && lastLine[lastLine.length - 1] === '\\r') {\n        retLines[retLines.length - 1] += '\\n';\n      } else if (line) {\n        retLines.push(line);\n      }\n    }\n\n    return retLines;\n  };\n\n  return {\n    Diff: Diff,\n\n    diffChars: function(oldStr, newStr) { return CharDiff.diff(oldStr, newStr); },\n    diffWords: function(oldStr, newStr) { return WordDiff.diff(oldStr, newStr); },\n    diffWordsWithSpace: function(oldStr, newStr) { return WordWithSpaceDiff.diff(oldStr, newStr); },\n    diffLines: function(oldStr, newStr) { return LineDiff.diff(oldStr, newStr); },\n\n    diffCss: function(oldStr, newStr) { return CssDiff.diff(oldStr, newStr); },\n\n    createPatch: function(fileName, oldStr, newStr, oldHeader, newHeader) {\n      var ret = [];\n\n      ret.push('Index: ' + fileName);\n      ret.push('===================================================================');\n      ret.push('--- ' + fileName + (typeof oldHeader === 'undefined' ? '' : '\\t' + oldHeader));\n      ret.push('+++ ' + fileName + (typeof newHeader === 'undefined' ? '' : '\\t' + newHeader));\n\n      var diff = LineDiff.diff(oldStr, newStr);\n      if (!diff[diff.length-1].value) {\n        diff.pop();   // Remove trailing newline add\n      }\n      diff.push({value: '', lines: []});   // Append an empty value to make cleanup easier\n\n      function contextLines(lines) {\n        return lines.map(function(entry) { return ' ' + entry; });\n      }\n      function eofNL(curRange, i, current) {\n        var last = diff[diff.length-2],\n            isLast = i === diff.length-2,\n            isLastOfType = i === diff.length-3 && (current.added !== last.added || current.removed !== last.removed);\n\n        // Figure out if this is the last line for the given file and missing NL\n        if (!/\\n$/.test(current.value) && (isLast || isLastOfType)) {\n          curRange.push('\\\\ No newline at end of file');\n        }\n      }\n\n      var oldRangeStart = 0, newRangeStart = 0, curRange = [],\n          oldLine = 1, newLine = 1;\n      for (var i = 0; i < diff.length; i++) {\n        var current = diff[i],\n            lines = current.lines || current.value.replace(/\\n$/, '').split('\\n');\n        current.lines = lines;\n\n        if (current.added || current.removed) {\n          if (!oldRangeStart) {\n            var prev = diff[i-1];\n            oldRangeStart = oldLine;\n            newRangeStart = newLine;\n\n            if (prev) {\n              curRange = contextLines(prev.lines.slice(-4));\n              oldRangeStart -= curRange.length;\n              newRangeStart -= curRange.length;\n            }\n          }\n          curRange.push.apply(curRange, lines.map(function(entry) { return (current.added?'+':'-') + entry; }));\n          eofNL(curRange, i, current);\n\n          if (current.added) {\n            newLine += lines.length;\n          } else {\n            oldLine += lines.length;\n          }\n        } else {\n          if (oldRangeStart) {\n            // Close out any changes that have been output (or join overlapping)\n            if (lines.length <= 8 && i < diff.length-2) {\n              // Overlapping\n              curRange.push.apply(curRange, contextLines(lines));\n            } else {\n              // end the range and output\n              var contextSize = Math.min(lines.length, 4);\n              ret.push(\n                  '@@ -' + oldRangeStart + ',' + (oldLine-oldRangeStart+contextSize)\n                  + ' +' + newRangeStart + ',' + (newLine-newRangeStart+contextSize)\n                  + ' @@');\n              ret.push.apply(ret, curRange);\n              ret.push.apply(ret, contextLines(lines.slice(0, contextSize)));\n              if (lines.length <= 4) {\n                eofNL(ret, i, current);\n              }\n\n              oldRangeStart = 0;  newRangeStart = 0; curRange = [];\n            }\n          }\n          oldLine += lines.length;\n          newLine += lines.length;\n        }\n      }\n\n      return ret.join('\\n') + '\\n';\n    },\n\n    applyPatch: function(oldStr, uniDiff) {\n      var diffstr = uniDiff.split('\\n');\n      var diff = [];\n      var remEOFNL = false,\n          addEOFNL = false;\n\n      for (var i = (diffstr[0][0]==='I'?4:0); i < diffstr.length; i++) {\n        if(diffstr[i][0] === '@') {\n          var meh = diffstr[i].split(/@@ -(\\d+),(\\d+) \\+(\\d+),(\\d+) @@/);\n          diff.unshift({\n            start:meh[3],\n            oldlength:meh[2],\n            oldlines:[],\n            newlength:meh[4],\n            newlines:[]\n          });\n        } else if(diffstr[i][0] === '+') {\n          diff[0].newlines.push(diffstr[i].substr(1));\n        } else if(diffstr[i][0] === '-') {\n          diff[0].oldlines.push(diffstr[i].substr(1));\n        } else if(diffstr[i][0] === ' ') {\n          diff[0].newlines.push(diffstr[i].substr(1));\n          diff[0].oldlines.push(diffstr[i].substr(1));\n        } else if(diffstr[i][0] === '\\\\') {\n          if (diffstr[i-1][0] === '+') {\n            remEOFNL = true;\n          } else if(diffstr[i-1][0] === '-') {\n            addEOFNL = true;\n          }\n        }\n      }\n\n      var str = oldStr.split('\\n');\n      for (var i = diff.length - 1; i >= 0; i--) {\n        var d = diff[i];\n        for (var j = 0; j < d.oldlength; j++) {\n          if(str[d.start-1+j] !== d.oldlines[j]) {\n            return false;\n          }\n        }\n        Array.prototype.splice.apply(str,[d.start-1,+d.oldlength].concat(d.newlines));\n      }\n\n      if (remEOFNL) {\n        while (!str[str.length-1]) {\n          str.pop();\n        }\n      } else if (addEOFNL) {\n        str.push('');\n      }\n      return str.join('\\n');\n    },\n\n    convertChangesToXML: function(changes){\n      var ret = [];\n      for ( var i = 0; i < changes.length; i++) {\n        var change = changes[i];\n        if (change.added) {\n          ret.push('<ins>');\n        } else if (change.removed) {\n          ret.push('<del>');\n        }\n\n        ret.push(escapeHTML(change.value));\n\n        if (change.added) {\n          ret.push('</ins>');\n        } else if (change.removed) {\n          ret.push('</del>');\n        }\n      }\n      return ret.join('');\n    },\n\n    // See: http://code.google.com/p/google-diff-match-patch/wiki/API\n    convertChangesToDMP: function(changes){\n      var ret = [], change;\n      for ( var i = 0; i < changes.length; i++) {\n        change = changes[i];\n        ret.push([(change.added ? 1 : change.removed ? -1 : 0), change.value]);\n      }\n      return ret;\n    }\n  };\n})();\n\nif (typeof module !== 'undefined') {\n    module.exports = JsDiff;\n}\n\n}); // module: browser/diff.js\n\nrequire.register(\"browser/escape-string-regexp.js\", function(module, exports, require){\n'use strict';\n\nvar matchOperatorsRe = /[|\\\\{}()[\\]^$+*?.]/g;\n\nmodule.exports = function (str) {\n  if (typeof str !== 'string') {\n    throw new TypeError('Expected a string');\n  }\n\n  return str.replace(matchOperatorsRe,  '\\\\$&');\n};\n\n}); // module: browser/escape-string-regexp.js\n\nrequire.register(\"browser/events.js\", function(module, exports, require){\n/**\n * Module exports.\n */\n\nexports.EventEmitter = EventEmitter;\n\n/**\n * Check if `obj` is an array.\n */\n\nfunction isArray(obj) {\n  return '[object Array]' == {}.toString.call(obj);\n}\n\n/**\n * Event emitter constructor.\n *\n * @api public\n */\n\nfunction EventEmitter(){};\n\n/**\n * Adds a listener.\n *\n * @api public\n */\n\nEventEmitter.prototype.on = function (name, fn) {\n  if (!this.$events) {\n    this.$events = {};\n  }\n\n  if (!this.$events[name]) {\n    this.$events[name] = fn;\n  } else if (isArray(this.$events[name])) {\n    this.$events[name].push(fn);\n  } else {\n    this.$events[name] = [this.$events[name], fn];\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n/**\n * Adds a volatile listener.\n *\n * @api public\n */\n\nEventEmitter.prototype.once = function (name, fn) {\n  var self = this;\n\n  function on () {\n    self.removeListener(name, on);\n    fn.apply(this, arguments);\n  };\n\n  on.listener = fn;\n  this.on(name, on);\n\n  return this;\n};\n\n/**\n * Removes a listener.\n *\n * @api public\n */\n\nEventEmitter.prototype.removeListener = function (name, fn) {\n  if (this.$events && this.$events[name]) {\n    var list = this.$events[name];\n\n    if (isArray(list)) {\n      var pos = -1;\n\n      for (var i = 0, l = list.length; i < l; i++) {\n        if (list[i] === fn || (list[i].listener && list[i].listener === fn)) {\n          pos = i;\n          break;\n        }\n      }\n\n      if (pos < 0) {\n        return this;\n      }\n\n      list.splice(pos, 1);\n\n      if (!list.length) {\n        delete this.$events[name];\n      }\n    } else if (list === fn || (list.listener && list.listener === fn)) {\n      delete this.$events[name];\n    }\n  }\n\n  return this;\n};\n\n/**\n * Removes all listeners for an event.\n *\n * @api public\n */\n\nEventEmitter.prototype.removeAllListeners = function (name) {\n  if (name === undefined) {\n    this.$events = {};\n    return this;\n  }\n\n  if (this.$events && this.$events[name]) {\n    this.$events[name] = null;\n  }\n\n  return this;\n};\n\n/**\n * Gets all listeners for a certain event.\n *\n * @api public\n */\n\nEventEmitter.prototype.listeners = function (name) {\n  if (!this.$events) {\n    this.$events = {};\n  }\n\n  if (!this.$events[name]) {\n    this.$events[name] = [];\n  }\n\n  if (!isArray(this.$events[name])) {\n    this.$events[name] = [this.$events[name]];\n  }\n\n  return this.$events[name];\n};\n\n/**\n * Emits an event.\n *\n * @api public\n */\n\nEventEmitter.prototype.emit = function (name) {\n  if (!this.$events) {\n    return false;\n  }\n\n  var handler = this.$events[name];\n\n  if (!handler) {\n    return false;\n  }\n\n  var args = [].slice.call(arguments, 1);\n\n  if ('function' == typeof handler) {\n    handler.apply(this, args);\n  } else if (isArray(handler)) {\n    var listeners = handler.slice();\n\n    for (var i = 0, l = listeners.length; i < l; i++) {\n      listeners[i].apply(this, args);\n    }\n  } else {\n    return false;\n  }\n\n  return true;\n};\n\n}); // module: browser/events.js\n\nrequire.register(\"browser/fs.js\", function(module, exports, require){\n\n}); // module: browser/fs.js\n\nrequire.register(\"browser/glob.js\", function(module, exports, require){\n\n}); // module: browser/glob.js\n\nrequire.register(\"browser/path.js\", function(module, exports, require){\n\n}); // module: browser/path.js\n\nrequire.register(\"browser/progress.js\", function(module, exports, require){\n/**\n * Expose `Progress`.\n */\n\nmodule.exports = Progress;\n\n/**\n * Initialize a new `Progress` indicator.\n */\n\nfunction Progress() {\n  this.percent = 0;\n  this.size(0);\n  this.fontSize(11);\n  this.font('helvetica, arial, sans-serif');\n}\n\n/**\n * Set progress size to `n`.\n *\n * @param {Number} n\n * @return {Progress} for chaining\n * @api public\n */\n\nProgress.prototype.size = function(n){\n  this._size = n;\n  return this;\n};\n\n/**\n * Set text to `str`.\n *\n * @param {String} str\n * @return {Progress} for chaining\n * @api public\n */\n\nProgress.prototype.text = function(str){\n  this._text = str;\n  return this;\n};\n\n/**\n * Set font size to `n`.\n *\n * @param {Number} n\n * @return {Progress} for chaining\n * @api public\n */\n\nProgress.prototype.fontSize = function(n){\n  this._fontSize = n;\n  return this;\n};\n\n/**\n * Set font `family`.\n *\n * @param {String} family\n * @return {Progress} for chaining\n */\n\nProgress.prototype.font = function(family){\n  this._font = family;\n  return this;\n};\n\n/**\n * Update percentage to `n`.\n *\n * @param {Number} n\n * @return {Progress} for chaining\n */\n\nProgress.prototype.update = function(n){\n  this.percent = n;\n  return this;\n};\n\n/**\n * Draw on `ctx`.\n *\n * @param {CanvasRenderingContext2d} ctx\n * @return {Progress} for chaining\n */\n\nProgress.prototype.draw = function(ctx){\n  try {\n    var percent = Math.min(this.percent, 100)\n      , size = this._size\n      , half = size / 2\n      , x = half\n      , y = half\n      , rad = half - 1\n      , fontSize = this._fontSize;\n\n    ctx.font = fontSize + 'px ' + this._font;\n\n    var angle = Math.PI * 2 * (percent / 100);\n    ctx.clearRect(0, 0, size, size);\n\n    // outer circle\n    ctx.strokeStyle = '#9f9f9f';\n    ctx.beginPath();\n    ctx.arc(x, y, rad, 0, angle, false);\n    ctx.stroke();\n\n    // inner circle\n    ctx.strokeStyle = '#eee';\n    ctx.beginPath();\n    ctx.arc(x, y, rad - 1, 0, angle, true);\n    ctx.stroke();\n\n    // text\n    var text = this._text || (percent | 0) + '%'\n      , w = ctx.measureText(text).width;\n\n    ctx.fillText(\n        text\n      , x - w / 2 + 1\n      , y + fontSize / 2 - 1);\n  } catch (ex) {} //don't fail if we can't render progress\n  return this;\n};\n\n}); // module: browser/progress.js\n\nrequire.register(\"browser/tty.js\", function(module, exports, require){\nexports.isatty = function(){\n  return true;\n};\n\nexports.getWindowSize = function(){\n  if ('innerHeight' in global) {\n    return [global.innerHeight, global.innerWidth];\n  } else {\n    // In a Web Worker, the DOM Window is not available.\n    return [640, 480];\n  }\n};\n\n}); // module: browser/tty.js\n\nrequire.register(\"context.js\", function(module, exports, require){\n/**\n * Expose `Context`.\n */\n\nmodule.exports = Context;\n\n/**\n * Initialize a new `Context`.\n *\n * @api private\n */\n\nfunction Context(){}\n\n/**\n * Set or get the context `Runnable` to `runnable`.\n *\n * @param {Runnable} runnable\n * @return {Context}\n * @api private\n */\n\nContext.prototype.runnable = function(runnable){\n  if (0 == arguments.length) return this._runnable;\n  this.test = this._runnable = runnable;\n  return this;\n};\n\n/**\n * Set test timeout `ms`.\n *\n * @param {Number} ms\n * @return {Context} self\n * @api private\n */\n\nContext.prototype.timeout = function(ms){\n  if (arguments.length === 0) return this.runnable().timeout();\n  this.runnable().timeout(ms);\n  return this;\n};\n\n/**\n * Set test timeout `enabled`.\n *\n * @param {Boolean} enabled\n * @return {Context} self\n * @api private\n */\n\nContext.prototype.enableTimeouts = function (enabled) {\n  this.runnable().enableTimeouts(enabled);\n  return this;\n};\n\n\n/**\n * Set test slowness threshold `ms`.\n *\n * @param {Number} ms\n * @return {Context} self\n * @api private\n */\n\nContext.prototype.slow = function(ms){\n  this.runnable().slow(ms);\n  return this;\n};\n\n/**\n * Inspect the context void of `._runnable`.\n *\n * @return {String}\n * @api private\n */\n\nContext.prototype.inspect = function(){\n  return JSON.stringify(this, function(key, val){\n    if ('_runnable' == key) return;\n    if ('test' == key) return;\n    return val;\n  }, 2);\n};\n\n}); // module: context.js\n\nrequire.register(\"hook.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Runnable = require('./runnable');\n\n/**\n * Expose `Hook`.\n */\n\nmodule.exports = Hook;\n\n/**\n * Initialize a new `Hook` with the given `title` and callback `fn`.\n *\n * @param {String} title\n * @param {Function} fn\n * @api private\n */\n\nfunction Hook(title, fn) {\n  Runnable.call(this, title, fn);\n  this.type = 'hook';\n}\n\n/**\n * Inherit from `Runnable.prototype`.\n */\n\nfunction F(){};\nF.prototype = Runnable.prototype;\nHook.prototype = new F;\nHook.prototype.constructor = Hook;\n\n\n/**\n * Get or set the test `err`.\n *\n * @param {Error} err\n * @return {Error}\n * @api public\n */\n\nHook.prototype.error = function(err){\n  if (0 == arguments.length) {\n    var err = this._error;\n    this._error = null;\n    return err;\n  }\n\n  this._error = err;\n};\n\n}); // module: hook.js\n\nrequire.register(\"interfaces/bdd.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Suite = require('../suite')\n  , Test = require('../test')\n  , utils = require('../utils')\n  , escapeRe = require('browser/escape-string-regexp');\n\n/**\n * BDD-style interface:\n *\n *      describe('Array', function(){\n *        describe('#indexOf()', function(){\n *          it('should return -1 when not present', function(){\n *\n *          });\n *\n *          it('should return the index when present', function(){\n *\n *          });\n *        });\n *      });\n *\n */\n\nmodule.exports = function(suite){\n  var suites = [suite];\n\n  suite.on('pre-require', function(context, file, mocha){\n\n    /**\n     * Execute before running tests.\n     */\n\n    context.before = function(name, fn){\n      suites[0].beforeAll(name, fn);\n    };\n\n    /**\n     * Execute after running tests.\n     */\n\n    context.after = function(name, fn){\n      suites[0].afterAll(name, fn);\n    };\n\n    /**\n     * Execute before each test case.\n     */\n\n    context.beforeEach = function(name, fn){\n      suites[0].beforeEach(name, fn);\n    };\n\n    /**\n     * Execute after each test case.\n     */\n\n    context.afterEach = function(name, fn){\n      suites[0].afterEach(name, fn);\n    };\n\n    /**\n     * Describe a \"suite\" with the given `title`\n     * and callback `fn` containing nested suites\n     * and/or tests.\n     */\n\n    context.describe = context.context = function(title, fn){\n      var suite = Suite.create(suites[0], title);\n      suite.file = file;\n      suites.unshift(suite);\n      fn.call(suite);\n      suites.shift();\n      return suite;\n    };\n\n    /**\n     * Pending describe.\n     */\n\n    context.xdescribe =\n    context.xcontext =\n    context.describe.skip = function(title, fn){\n      var suite = Suite.create(suites[0], title);\n      suite.pending = true;\n      suites.unshift(suite);\n      fn.call(suite);\n      suites.shift();\n    };\n\n    /**\n     * Exclusive suite.\n     */\n\n    context.describe.only = function(title, fn){\n      var suite = context.describe(title, fn);\n      mocha.grep(suite.fullTitle());\n      return suite;\n    };\n\n    /**\n     * Describe a specification or test-case\n     * with the given `title` and callback `fn`\n     * acting as a thunk.\n     */\n\n    context.it = context.specify = function(title, fn){\n      var suite = suites[0];\n      if (suite.pending) fn = null;\n      var test = new Test(title, fn);\n      test.file = file;\n      suite.addTest(test);\n      return test;\n    };\n\n    /**\n     * Exclusive test-case.\n     */\n\n    context.it.only = function(title, fn){\n      var test = context.it(title, fn);\n      var reString = '^' + escapeRe(test.fullTitle()) + '$';\n      mocha.grep(new RegExp(reString));\n      return test;\n    };\n\n    /**\n     * Pending test case.\n     */\n\n    context.xit =\n    context.xspecify =\n    context.it.skip = function(title){\n      context.it(title);\n    };\n  });\n};\n\n}); // module: interfaces/bdd.js\n\nrequire.register(\"interfaces/exports.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Suite = require('../suite')\n  , Test = require('../test');\n\n/**\n * TDD-style interface:\n *\n *     exports.Array = {\n *       '#indexOf()': {\n *         'should return -1 when the value is not present': function(){\n *\n *         },\n *\n *         'should return the correct index when the value is present': function(){\n *\n *         }\n *       }\n *     };\n *\n */\n\nmodule.exports = function(suite){\n  var suites = [suite];\n\n  suite.on('require', visit);\n\n  function visit(obj, file) {\n    var suite;\n    for (var key in obj) {\n      if ('function' == typeof obj[key]) {\n        var fn = obj[key];\n        switch (key) {\n          case 'before':\n            suites[0].beforeAll(fn);\n            break;\n          case 'after':\n            suites[0].afterAll(fn);\n            break;\n          case 'beforeEach':\n            suites[0].beforeEach(fn);\n            break;\n          case 'afterEach':\n            suites[0].afterEach(fn);\n            break;\n          default:\n            var test = new Test(key, fn);\n            test.file = file;\n            suites[0].addTest(test);\n        }\n      } else {\n        suite = Suite.create(suites[0], key);\n        suites.unshift(suite);\n        visit(obj[key]);\n        suites.shift();\n      }\n    }\n  }\n};\n\n}); // module: interfaces/exports.js\n\nrequire.register(\"interfaces/index.js\", function(module, exports, require){\nexports.bdd = require('./bdd');\nexports.tdd = require('./tdd');\nexports.qunit = require('./qunit');\nexports.exports = require('./exports');\n\n}); // module: interfaces/index.js\n\nrequire.register(\"interfaces/qunit.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Suite = require('../suite')\n  , Test = require('../test')\n  , escapeRe = require('browser/escape-string-regexp')\n  , utils = require('../utils');\n\n/**\n * QUnit-style interface:\n *\n *     suite('Array');\n *\n *     test('#length', function(){\n *       var arr = [1,2,3];\n *       ok(arr.length == 3);\n *     });\n *\n *     test('#indexOf()', function(){\n *       var arr = [1,2,3];\n *       ok(arr.indexOf(1) == 0);\n *       ok(arr.indexOf(2) == 1);\n *       ok(arr.indexOf(3) == 2);\n *     });\n *\n *     suite('String');\n *\n *     test('#length', function(){\n *       ok('foo'.length == 3);\n *     });\n *\n */\n\nmodule.exports = function(suite){\n  var suites = [suite];\n\n  suite.on('pre-require', function(context, file, mocha){\n\n    /**\n     * Execute before running tests.\n     */\n\n    context.before = function(name, fn){\n      suites[0].beforeAll(name, fn);\n    };\n\n    /**\n     * Execute after running tests.\n     */\n\n    context.after = function(name, fn){\n      suites[0].afterAll(name, fn);\n    };\n\n    /**\n     * Execute before each test case.\n     */\n\n    context.beforeEach = function(name, fn){\n      suites[0].beforeEach(name, fn);\n    };\n\n    /**\n     * Execute after each test case.\n     */\n\n    context.afterEach = function(name, fn){\n      suites[0].afterEach(name, fn);\n    };\n\n    /**\n     * Describe a \"suite\" with the given `title`.\n     */\n\n    context.suite = function(title){\n      if (suites.length > 1) suites.shift();\n      var suite = Suite.create(suites[0], title);\n      suite.file = file;\n      suites.unshift(suite);\n      return suite;\n    };\n\n    /**\n     * Exclusive test-case.\n     */\n\n    context.suite.only = function(title, fn){\n      var suite = context.suite(title, fn);\n      mocha.grep(suite.fullTitle());\n    };\n\n    /**\n     * Describe a specification or test-case\n     * with the given `title` and callback `fn`\n     * acting as a thunk.\n     */\n\n    context.test = function(title, fn){\n      var test = new Test(title, fn);\n      test.file = file;\n      suites[0].addTest(test);\n      return test;\n    };\n\n    /**\n     * Exclusive test-case.\n     */\n\n    context.test.only = function(title, fn){\n      var test = context.test(title, fn);\n      var reString = '^' + escapeRe(test.fullTitle()) + '$';\n      mocha.grep(new RegExp(reString));\n    };\n\n    /**\n     * Pending test case.\n     */\n\n    context.test.skip = function(title){\n      context.test(title);\n    };\n  });\n};\n\n}); // module: interfaces/qunit.js\n\nrequire.register(\"interfaces/tdd.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Suite = require('../suite')\n  , Test = require('../test')\n  , escapeRe = require('browser/escape-string-regexp')\n  , utils = require('../utils');\n\n/**\n * TDD-style interface:\n *\n *      suite('Array', function(){\n *        suite('#indexOf()', function(){\n *          suiteSetup(function(){\n *\n *          });\n *\n *          test('should return -1 when not present', function(){\n *\n *          });\n *\n *          test('should return the index when present', function(){\n *\n *          });\n *\n *          suiteTeardown(function(){\n *\n *          });\n *        });\n *      });\n *\n */\n\nmodule.exports = function(suite){\n  var suites = [suite];\n\n  suite.on('pre-require', function(context, file, mocha){\n\n    /**\n     * Execute before each test case.\n     */\n\n    context.setup = function(name, fn){\n      suites[0].beforeEach(name, fn);\n    };\n\n    /**\n     * Execute after each test case.\n     */\n\n    context.teardown = function(name, fn){\n      suites[0].afterEach(name, fn);\n    };\n\n    /**\n     * Execute before the suite.\n     */\n\n    context.suiteSetup = function(name, fn){\n      suites[0].beforeAll(name, fn);\n    };\n\n    /**\n     * Execute after the suite.\n     */\n\n    context.suiteTeardown = function(name, fn){\n      suites[0].afterAll(name, fn);\n    };\n\n    /**\n     * Describe a \"suite\" with the given `title`\n     * and callback `fn` containing nested suites\n     * and/or tests.\n     */\n\n    context.suite = function(title, fn){\n      var suite = Suite.create(suites[0], title);\n      suite.file = file;\n      suites.unshift(suite);\n      fn.call(suite);\n      suites.shift();\n      return suite;\n    };\n\n    /**\n     * Pending suite.\n     */\n    context.suite.skip = function(title, fn) {\n      var suite = Suite.create(suites[0], title);\n      suite.pending = true;\n      suites.unshift(suite);\n      fn.call(suite);\n      suites.shift();\n    };\n\n    /**\n     * Exclusive test-case.\n     */\n\n    context.suite.only = function(title, fn){\n      var suite = context.suite(title, fn);\n      mocha.grep(suite.fullTitle());\n    };\n\n    /**\n     * Describe a specification or test-case\n     * with the given `title` and callback `fn`\n     * acting as a thunk.\n     */\n\n    context.test = function(title, fn){\n      var suite = suites[0];\n      if (suite.pending) fn = null;\n      var test = new Test(title, fn);\n      test.file = file;\n      suite.addTest(test);\n      return test;\n    };\n\n    /**\n     * Exclusive test-case.\n     */\n\n    context.test.only = function(title, fn){\n      var test = context.test(title, fn);\n      var reString = '^' + escapeRe(test.fullTitle()) + '$';\n      mocha.grep(new RegExp(reString));\n    };\n\n    /**\n     * Pending test case.\n     */\n\n    context.test.skip = function(title){\n      context.test(title);\n    };\n  });\n};\n\n}); // module: interfaces/tdd.js\n\nrequire.register(\"mocha.js\", function(module, exports, require){\n/*!\n * mocha\n * Copyright(c) 2011 TJ Holowaychuk <tj@vision-media.ca>\n * MIT Licensed\n */\n\n/**\n * Module dependencies.\n */\n\nvar path = require('browser/path')\n  , escapeRe = require('browser/escape-string-regexp')\n  , utils = require('./utils');\n\n/**\n * Expose `Mocha`.\n */\n\nexports = module.exports = Mocha;\n\n/**\n * To require local UIs and reporters when running in node.\n */\n\nif (typeof process !== 'undefined' && typeof process.cwd === 'function') {\n  var join = path.join\n    , cwd = process.cwd();\n  module.paths.push(cwd, join(cwd, 'node_modules'));\n}\n\n/**\n * Expose internals.\n */\n\nexports.utils = utils;\nexports.interfaces = require('./interfaces');\nexports.reporters = require('./reporters');\nexports.Runnable = require('./runnable');\nexports.Context = require('./context');\nexports.Runner = require('./runner');\nexports.Suite = require('./suite');\nexports.Hook = require('./hook');\nexports.Test = require('./test');\n\n/**\n * Return image `name` path.\n *\n * @param {String} name\n * @return {String}\n * @api private\n */\n\nfunction image(name) {\n  return __dirname + '/../images/' + name + '.png';\n}\n\n/**\n * Setup mocha with `options`.\n *\n * Options:\n *\n *   - `ui` name \"bdd\", \"tdd\", \"exports\" etc\n *   - `reporter` reporter instance, defaults to `mocha.reporters.spec`\n *   - `globals` array of accepted globals\n *   - `timeout` timeout in milliseconds\n *   - `bail` bail on the first test failure\n *   - `slow` milliseconds to wait before considering a test slow\n *   - `ignoreLeaks` ignore global leaks\n *   - `grep` string or regexp to filter tests with\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Mocha(options) {\n  options = options || {};\n  this.files = [];\n  this.options = options;\n  this.grep(options.grep);\n  this.suite = new exports.Suite('', new exports.Context);\n  this.ui(options.ui);\n  this.bail(options.bail);\n  this.reporter(options.reporter, options.reporterOptions);\n  if (null != options.timeout) this.timeout(options.timeout);\n  this.useColors(options.useColors)\n  if (options.enableTimeouts !== null) this.enableTimeouts(options.enableTimeouts);\n  if (options.slow) this.slow(options.slow);\n\n  this.suite.on('pre-require', function (context) {\n    exports.afterEach = context.afterEach || context.teardown;\n    exports.after = context.after || context.suiteTeardown;\n    exports.beforeEach = context.beforeEach || context.setup;\n    exports.before = context.before || context.suiteSetup;\n    exports.describe = context.describe || context.suite;\n    exports.it = context.it || context.test;\n    exports.setup = context.setup || context.beforeEach;\n    exports.suiteSetup = context.suiteSetup || context.before;\n    exports.suiteTeardown = context.suiteTeardown || context.after;\n    exports.suite = context.suite || context.describe;\n    exports.teardown = context.teardown || context.afterEach;\n    exports.test = context.test || context.it;\n  });\n}\n\n/**\n * Enable or disable bailing on the first failure.\n *\n * @param {Boolean} [bail]\n * @api public\n */\n\nMocha.prototype.bail = function(bail){\n  if (0 == arguments.length) bail = true;\n  this.suite.bail(bail);\n  return this;\n};\n\n/**\n * Add test `file`.\n *\n * @param {String} file\n * @api public\n */\n\nMocha.prototype.addFile = function(file){\n  this.files.push(file);\n  return this;\n};\n\n/**\n * Set reporter to `reporter`, defaults to \"spec\".\n *\n * @param {String|Function} reporter name or constructor\n * @param {Object} reporterOptions optional options\n * @api public\n */\nMocha.prototype.reporter = function(reporter, reporterOptions){\n  if ('function' == typeof reporter) {\n    this._reporter = reporter;\n  } else {\n    reporter = reporter || 'spec';\n    var _reporter;\n    try { _reporter = require('./reporters/' + reporter); } catch (err) {};\n    if (!_reporter) try { _reporter = require(reporter); } catch (err) {};\n    if (!_reporter && reporter === 'teamcity')\n      console.warn('The Teamcity reporter was moved to a package named ' +\n        'mocha-teamcity-reporter ' +\n        '(https://npmjs.org/package/mocha-teamcity-reporter).');\n    if (!_reporter) throw new Error('invalid reporter \"' + reporter + '\"');\n    this._reporter = _reporter;\n  }\n  this.options.reporterOptions = reporterOptions;\n  return this;\n};\n\n/**\n * Set test UI `name`, defaults to \"bdd\".\n *\n * @param {String} bdd\n * @api public\n */\n\nMocha.prototype.ui = function(name){\n  name = name || 'bdd';\n  this._ui = exports.interfaces[name];\n  if (!this._ui) try { this._ui = require(name); } catch (err) {};\n  if (!this._ui) throw new Error('invalid interface \"' + name + '\"');\n  this._ui = this._ui(this.suite);\n  return this;\n};\n\n/**\n * Load registered files.\n *\n * @api private\n */\n\nMocha.prototype.loadFiles = function(fn){\n  var self = this;\n  var suite = this.suite;\n  var pending = this.files.length;\n  this.files.forEach(function(file){\n    file = path.resolve(file);\n    suite.emit('pre-require', global, file, self);\n    suite.emit('require', require(file), file, self);\n    suite.emit('post-require', global, file, self);\n    --pending || (fn && fn());\n  });\n};\n\n/**\n * Enable growl support.\n *\n * @api private\n */\n\nMocha.prototype._growl = function(runner, reporter) {\n  var notify = require('growl');\n\n  runner.on('end', function(){\n    var stats = reporter.stats;\n    if (stats.failures) {\n      var msg = stats.failures + ' of ' + runner.total + ' tests failed';\n      notify(msg, { name: 'mocha', title: 'Failed', image: image('error') });\n    } else {\n      notify(stats.passes + ' tests passed in ' + stats.duration + 'ms', {\n          name: 'mocha'\n        , title: 'Passed'\n        , image: image('ok')\n      });\n    }\n  });\n};\n\n/**\n * Add regexp to grep, if `re` is a string it is escaped.\n *\n * @param {RegExp|String} re\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.grep = function(re){\n  this.options.grep = 'string' == typeof re\n    ? new RegExp(escapeRe(re))\n    : re;\n  return this;\n};\n\n/**\n * Invert `.grep()` matches.\n *\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.invert = function(){\n  this.options.invert = true;\n  return this;\n};\n\n/**\n * Ignore global leaks.\n *\n * @param {Boolean} ignore\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.ignoreLeaks = function(ignore){\n  this.options.ignoreLeaks = !!ignore;\n  return this;\n};\n\n/**\n * Enable global leak checking.\n *\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.checkLeaks = function(){\n  this.options.ignoreLeaks = false;\n  return this;\n};\n\n/**\n * Enable growl support.\n *\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.growl = function(){\n  this.options.growl = true;\n  return this;\n};\n\n/**\n * Ignore `globals` array or string.\n *\n * @param {Array|String} globals\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.globals = function(globals){\n  this.options.globals = (this.options.globals || []).concat(globals);\n  return this;\n};\n\n/**\n * Emit color output.\n *\n * @param {Boolean} colors\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.useColors = function(colors){\n  if (colors !== undefined) {\n    this.options.useColors = colors;\n  }\n  return this;\n};\n\n/**\n * Use inline diffs rather than +/-.\n *\n * @param {Boolean} inlineDiffs\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.useInlineDiffs = function(inlineDiffs) {\n  this.options.useInlineDiffs = arguments.length && inlineDiffs != undefined\n  ? inlineDiffs\n  : false;\n  return this;\n};\n\n/**\n * Set the timeout in milliseconds.\n *\n * @param {Number} timeout\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.timeout = function(timeout){\n  this.suite.timeout(timeout);\n  return this;\n};\n\n/**\n * Set slowness threshold in milliseconds.\n *\n * @param {Number} slow\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.slow = function(slow){\n  this.suite.slow(slow);\n  return this;\n};\n\n/**\n * Enable timeouts.\n *\n * @param {Boolean} enabled\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.enableTimeouts = function(enabled) {\n  this.suite.enableTimeouts(arguments.length && enabled !== undefined\n    ? enabled\n    : true);\n  return this\n};\n\n/**\n * Makes all tests async (accepting a callback)\n *\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.asyncOnly = function(){\n  this.options.asyncOnly = true;\n  return this;\n};\n\n/**\n * Disable syntax highlighting (in browser).\n * @returns {Mocha}\n * @api public\n */\nMocha.prototype.noHighlighting = function() {\n  this.options.noHighlighting = true;\n  return this;\n};\n\n/**\n * Run tests and invoke `fn()` when complete.\n *\n * @param {Function} fn\n * @return {Runner}\n * @api public\n */\n\nMocha.prototype.run = function(fn){\n  if (this.files.length) this.loadFiles();\n  var suite = this.suite;\n  var options = this.options;\n  options.files = this.files;\n  var runner = new exports.Runner(suite);\n  var reporter = new this._reporter(runner, options);\n  runner.ignoreLeaks = false !== options.ignoreLeaks;\n  runner.asyncOnly = options.asyncOnly;\n  if (options.grep) runner.grep(options.grep, options.invert);\n  if (options.globals) runner.globals(options.globals);\n  if (options.growl) this._growl(runner, reporter);\n  if (options.useColors !== undefined) {\n    exports.reporters.Base.useColors = options.useColors;\n  }\n  exports.reporters.Base.inlineDiffs = options.useInlineDiffs;\n\n  function done(failures) {\n      if (reporter.done) {\n          reporter.done(failures, fn);\n      } else {\n          fn(failures);\n      }\n  }\n\n  return runner.run(done);\n};\n\n}); // module: mocha.js\n\nrequire.register(\"ms.js\", function(module, exports, require){\n/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} options\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options){\n  options = options || {};\n  if ('string' == typeof val) return parse(val);\n  return options['long'] ? longFormat(val) : shortFormat(val);\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  var match = /^((?:\\d+)?\\.?\\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(str);\n  if (!match) return;\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 's':\n      return n * s;\n    case 'ms':\n      return n;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction shortFormat(ms) {\n  if (ms >= d) return Math.round(ms / d) + 'd';\n  if (ms >= h) return Math.round(ms / h) + 'h';\n  if (ms >= m) return Math.round(ms / m) + 'm';\n  if (ms >= s) return Math.round(ms / s) + 's';\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction longFormat(ms) {\n  return plural(ms, d, 'day')\n    || plural(ms, h, 'hour')\n    || plural(ms, m, 'minute')\n    || plural(ms, s, 'second')\n    || ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) return;\n  if (ms < n * 1.5) return Math.floor(ms / n) + ' ' + name;\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n\n}); // module: ms.js\n\nrequire.register(\"reporters/base.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar tty = require('browser/tty')\n  , diff = require('browser/diff')\n  , ms = require('../ms')\n  , utils = require('../utils');\n\n/**\n * Save timer references to avoid Sinon interfering (see GH-237).\n */\n\nvar Date = global.Date\n  , setTimeout = global.setTimeout\n  , setInterval = global.setInterval\n  , clearTimeout = global.clearTimeout\n  , clearInterval = global.clearInterval;\n\n/**\n * Check if both stdio streams are associated with a tty.\n */\n\nvar isatty = tty.isatty(1) && tty.isatty(2);\n\n/**\n * Expose `Base`.\n */\n\nexports = module.exports = Base;\n\n/**\n * Enable coloring by default.\n */\n\nexports.useColors = isatty || (process.env.MOCHA_COLORS !== undefined);\n\n/**\n * Inline diffs instead of +/-\n */\n\nexports.inlineDiffs = false;\n\n/**\n * Default color map.\n */\n\nexports.colors = {\n    'pass': 90\n  , 'fail': 31\n  , 'bright pass': 92\n  , 'bright fail': 91\n  , 'bright yellow': 93\n  , 'pending': 36\n  , 'suite': 0\n  , 'error title': 0\n  , 'error message': 31\n  , 'error stack': 90\n  , 'checkmark': 32\n  , 'fast': 90\n  , 'medium': 33\n  , 'slow': 31\n  , 'green': 32\n  , 'light': 90\n  , 'diff gutter': 90\n  , 'diff added': 42\n  , 'diff removed': 41\n};\n\n/**\n * Default symbol map.\n */\n\nexports.symbols = {\n  ok: '✓',\n  err: '✖',\n  dot: '․'\n};\n\n// With node.js on Windows: use symbols available in terminal default fonts\nif ('win32' == process.platform) {\n  exports.symbols.ok = '\\u221A';\n  exports.symbols.err = '\\u00D7';\n  exports.symbols.dot = '.';\n}\n\n/**\n * Color `str` with the given `type`,\n * allowing colors to be disabled,\n * as well as user-defined color\n * schemes.\n *\n * @param {String} type\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nvar color = exports.color = function(type, str) {\n  if (!exports.useColors) return String(str);\n  return '\\u001b[' + exports.colors[type] + 'm' + str + '\\u001b[0m';\n};\n\n/**\n * Expose term window size, with some\n * defaults for when stderr is not a tty.\n */\n\nexports.window = {\n  width: isatty\n    ? process.stdout.getWindowSize\n      ? process.stdout.getWindowSize(1)[0]\n      : tty.getWindowSize()[1]\n    : 75\n};\n\n/**\n * Expose some basic cursor interactions\n * that are common among reporters.\n */\n\nexports.cursor = {\n  hide: function(){\n    isatty && process.stdout.write('\\u001b[?25l');\n  },\n\n  show: function(){\n    isatty && process.stdout.write('\\u001b[?25h');\n  },\n\n  deleteLine: function(){\n    isatty && process.stdout.write('\\u001b[2K');\n  },\n\n  beginningOfLine: function(){\n    isatty && process.stdout.write('\\u001b[0G');\n  },\n\n  CR: function(){\n    if (isatty) {\n      exports.cursor.deleteLine();\n      exports.cursor.beginningOfLine();\n    } else {\n      process.stdout.write('\\r');\n    }\n  }\n};\n\n/**\n * Outut the given `failures` as a list.\n *\n * @param {Array} failures\n * @api public\n */\n\nexports.list = function(failures){\n  console.log();\n  failures.forEach(function(test, i){\n    // format\n    var fmt = color('error title', '  %s) %s:\\n')\n      + color('error message', '     %s')\n      + color('error stack', '\\n%s\\n');\n\n    // msg\n    var err = test.err\n      , message = err.message || ''\n      , stack = err.stack || message\n      , index = stack.indexOf(message) + message.length\n      , msg = stack.slice(0, index)\n      , actual = err.actual\n      , expected = err.expected\n      , escape = true;\n\n    // uncaught\n    if (err.uncaught) {\n      msg = 'Uncaught ' + msg;\n    }\n\n    // explicitly show diff\n    if (err.showDiff && sameType(actual, expected)) {\n\n      if ('string' !== typeof actual) {\n        escape = false;\n        err.actual = actual = utils.stringify(actual);\n        err.expected = expected = utils.stringify(expected);\n      }\n\n      fmt = color('error title', '  %s) %s:\\n%s') + color('error stack', '\\n%s\\n');\n      var match = message.match(/^([^:]+): expected/);\n      msg = '\\n      ' + color('error message', match ? match[1] : msg);\n\n      if (exports.inlineDiffs) {\n        msg += inlineDiff(err, escape);\n      } else {\n        msg += unifiedDiff(err, escape);\n      }\n    }\n\n    // indent stack trace without msg\n    stack = stack.slice(index ? index + 1 : index)\n      .replace(/^/gm, '  ');\n\n    console.log(fmt, (i + 1), test.fullTitle(), msg, stack);\n  });\n};\n\n/**\n * Initialize a new `Base` reporter.\n *\n * All other reporters generally\n * inherit from this reporter, providing\n * stats such as test duration, number\n * of tests passed / failed etc.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction Base(runner) {\n  var self = this\n    , stats = this.stats = { suites: 0, tests: 0, passes: 0, pending: 0, failures: 0 }\n    , failures = this.failures = [];\n\n  if (!runner) return;\n  this.runner = runner;\n\n  runner.stats = stats;\n\n  runner.on('start', function(){\n    stats.start = new Date;\n  });\n\n  runner.on('suite', function(suite){\n    stats.suites = stats.suites || 0;\n    suite.root || stats.suites++;\n  });\n\n  runner.on('test end', function(test){\n    stats.tests = stats.tests || 0;\n    stats.tests++;\n  });\n\n  runner.on('pass', function(test){\n    stats.passes = stats.passes || 0;\n\n    var medium = test.slow() / 2;\n    test.speed = test.duration > test.slow()\n      ? 'slow'\n      : test.duration > medium\n        ? 'medium'\n        : 'fast';\n\n    stats.passes++;\n  });\n\n  runner.on('fail', function(test, err){\n    stats.failures = stats.failures || 0;\n    stats.failures++;\n    test.err = err;\n    failures.push(test);\n  });\n\n  runner.on('end', function(){\n    stats.end = new Date;\n    stats.duration = new Date - stats.start;\n  });\n\n  runner.on('pending', function(){\n    stats.pending++;\n  });\n}\n\n/**\n * Output common epilogue used by many of\n * the bundled reporters.\n *\n * @api public\n */\n\nBase.prototype.epilogue = function(){\n  var stats = this.stats;\n  var tests;\n  var fmt;\n\n  console.log();\n\n  // passes\n  fmt = color('bright pass', ' ')\n    + color('green', ' %d passing')\n    + color('light', ' (%s)');\n\n  console.log(fmt,\n    stats.passes || 0,\n    ms(stats.duration));\n\n  // pending\n  if (stats.pending) {\n    fmt = color('pending', ' ')\n      + color('pending', ' %d pending');\n\n    console.log(fmt, stats.pending);\n  }\n\n  // failures\n  if (stats.failures) {\n    fmt = color('fail', '  %d failing');\n\n    console.log(fmt, stats.failures);\n\n    Base.list(this.failures);\n    console.log();\n  }\n\n  console.log();\n};\n\n/**\n * Pad the given `str` to `len`.\n *\n * @param {String} str\n * @param {String} len\n * @return {String}\n * @api private\n */\n\nfunction pad(str, len) {\n  str = String(str);\n  return Array(len - str.length + 1).join(' ') + str;\n}\n\n\n/**\n * Returns an inline diff between 2 strings with coloured ANSI output\n *\n * @param {Error} Error with actual/expected\n * @return {String} Diff\n * @api private\n */\n\nfunction inlineDiff(err, escape) {\n  var msg = errorDiff(err, 'WordsWithSpace', escape);\n\n  // linenos\n  var lines = msg.split('\\n');\n  if (lines.length > 4) {\n    var width = String(lines.length).length;\n    msg = lines.map(function(str, i){\n      return pad(++i, width) + ' |' + ' ' + str;\n    }).join('\\n');\n  }\n\n  // legend\n  msg = '\\n'\n    + color('diff removed', 'actual')\n    + ' '\n    + color('diff added', 'expected')\n    + '\\n\\n'\n    + msg\n    + '\\n';\n\n  // indent\n  msg = msg.replace(/^/gm, '      ');\n  return msg;\n}\n\n/**\n * Returns a unified diff between 2 strings\n *\n * @param {Error} Error with actual/expected\n * @return {String} Diff\n * @api private\n */\n\nfunction unifiedDiff(err, escape) {\n  var indent = '      ';\n  function cleanUp(line) {\n    if (escape) {\n      line = escapeInvisibles(line);\n    }\n    if (line[0] === '+') return indent + colorLines('diff added', line);\n    if (line[0] === '-') return indent + colorLines('diff removed', line);\n    if (line.match(/\\@\\@/)) return null;\n    if (line.match(/\\\\ No newline/)) return null;\n    else return indent + line;\n  }\n  function notBlank(line) {\n    return line != null;\n  }\n  msg = diff.createPatch('string', err.actual, err.expected);\n  var lines = msg.split('\\n').splice(4);\n  return '\\n      '\n         + colorLines('diff added',   '+ expected') + ' '\n         + colorLines('diff removed', '- actual')\n         + '\\n\\n'\n         + lines.map(cleanUp).filter(notBlank).join('\\n');\n}\n\n/**\n * Return a character diff for `err`.\n *\n * @param {Error} err\n * @return {String}\n * @api private\n */\n\nfunction errorDiff(err, type, escape) {\n  var actual   = escape ? escapeInvisibles(err.actual)   : err.actual;\n  var expected = escape ? escapeInvisibles(err.expected) : err.expected;\n  return diff['diff' + type](actual, expected).map(function(str){\n    if (str.added) return colorLines('diff added', str.value);\n    if (str.removed) return colorLines('diff removed', str.value);\n    return str.value;\n  }).join('');\n}\n\n/**\n * Returns a string with all invisible characters in plain text\n *\n * @param {String} line\n * @return {String}\n * @api private\n */\nfunction escapeInvisibles(line) {\n    return line.replace(/\\t/g, '<tab>')\n               .replace(/\\r/g, '<CR>')\n               .replace(/\\n/g, '<LF>\\n');\n}\n\n/**\n * Color lines for `str`, using the color `name`.\n *\n * @param {String} name\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nfunction colorLines(name, str) {\n  return str.split('\\n').map(function(str){\n    return color(name, str);\n  }).join('\\n');\n}\n\n/**\n * Check that a / b have the same type.\n *\n * @param {Object} a\n * @param {Object} b\n * @return {Boolean}\n * @api private\n */\n\nfunction sameType(a, b) {\n  a = Object.prototype.toString.call(a);\n  b = Object.prototype.toString.call(b);\n  return a == b;\n}\n\n}); // module: reporters/base.js\n\nrequire.register(\"reporters/doc.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , utils = require('../utils');\n\n/**\n * Expose `Doc`.\n */\n\nexports = module.exports = Doc;\n\n/**\n * Initialize a new `Doc` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction Doc(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , total = runner.total\n    , indents = 2;\n\n  function indent() {\n    return Array(indents).join('  ');\n  }\n\n  runner.on('suite', function(suite){\n    if (suite.root) return;\n    ++indents;\n    console.log('%s<section class=\"suite\">', indent());\n    ++indents;\n    console.log('%s<h1>%s</h1>', indent(), utils.escape(suite.title));\n    console.log('%s<dl>', indent());\n  });\n\n  runner.on('suite end', function(suite){\n    if (suite.root) return;\n    console.log('%s</dl>', indent());\n    --indents;\n    console.log('%s</section>', indent());\n    --indents;\n  });\n\n  runner.on('pass', function(test){\n    console.log('%s  <dt>%s</dt>', indent(), utils.escape(test.title));\n    var code = utils.escape(utils.clean(test.fn.toString()));\n    console.log('%s  <dd><pre><code>%s</code></pre></dd>', indent(), code);\n  });\n\n  runner.on('fail', function(test, err){\n    console.log('%s  <dt class=\"error\">%s</dt>', indent(), utils.escape(test.title));\n    var code = utils.escape(utils.clean(test.fn.toString()));\n    console.log('%s  <dd class=\"error\"><pre><code>%s</code></pre></dd>', indent(), code);\n    console.log('%s  <dd class=\"error\">%s</dd>', indent(), utils.escape(err));\n  });\n}\n\n}); // module: reporters/doc.js\n\nrequire.register(\"reporters/dot.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , color = Base.color;\n\n/**\n * Expose `Dot`.\n */\n\nexports = module.exports = Dot;\n\n/**\n * Initialize a new `Dot` matrix test reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction Dot(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , width = Base.window.width * .75 | 0\n    , n = -1;\n\n  runner.on('start', function(){\n    process.stdout.write('\\n  ');\n  });\n\n  runner.on('pending', function(test){\n    if (++n % width == 0) process.stdout.write('\\n  ');\n    process.stdout.write(color('pending', Base.symbols.dot));\n  });\n\n  runner.on('pass', function(test){\n    if (++n % width == 0) process.stdout.write('\\n  ');\n    if ('slow' == test.speed) {\n      process.stdout.write(color('bright yellow', Base.symbols.dot));\n    } else {\n      process.stdout.write(color(test.speed, Base.symbols.dot));\n    }\n  });\n\n  runner.on('fail', function(test, err){\n    if (++n % width == 0) process.stdout.write('\\n  ');\n    process.stdout.write(color('fail', Base.symbols.dot));\n  });\n\n  runner.on('end', function(){\n    console.log();\n    self.epilogue();\n  });\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nDot.prototype = new F;\nDot.prototype.constructor = Dot;\n\n\n}); // module: reporters/dot.js\n\nrequire.register(\"reporters/html-cov.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar JSONCov = require('./json-cov')\n  , fs = require('browser/fs');\n\n/**\n * Expose `HTMLCov`.\n */\n\nexports = module.exports = HTMLCov;\n\n/**\n * Initialize a new `JsCoverage` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction HTMLCov(runner) {\n  var jade = require('jade')\n    , file = __dirname + '/templates/coverage.jade'\n    , str = fs.readFileSync(file, 'utf8')\n    , fn = jade.compile(str, { filename: file })\n    , self = this;\n\n  JSONCov.call(this, runner, false);\n\n  runner.on('end', function(){\n    process.stdout.write(fn({\n        cov: self.cov\n      , coverageClass: coverageClass\n    }));\n  });\n}\n\n/**\n * Return coverage class for `n`.\n *\n * @return {String}\n * @api private\n */\n\nfunction coverageClass(n) {\n  if (n >= 75) return 'high';\n  if (n >= 50) return 'medium';\n  if (n >= 25) return 'low';\n  return 'terrible';\n}\n\n}); // module: reporters/html-cov.js\n\nrequire.register(\"reporters/html.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , utils = require('../utils')\n  , Progress = require('../browser/progress')\n  , escape = utils.escape;\n\n/**\n * Save timer references to avoid Sinon interfering (see GH-237).\n */\n\nvar Date = global.Date\n  , setTimeout = global.setTimeout\n  , setInterval = global.setInterval\n  , clearTimeout = global.clearTimeout\n  , clearInterval = global.clearInterval;\n\n/**\n * Expose `HTML`.\n */\n\nexports = module.exports = HTML;\n\n/**\n * Stats template.\n */\n\nvar statsTemplate = '<ul id=\"mocha-stats\">'\n  + '<li class=\"progress\"><canvas width=\"40\" height=\"40\"></canvas></li>'\n  + '<li class=\"passes\"><a href=\"#\">passes:</a> <em>0</em></li>'\n  + '<li class=\"failures\"><a href=\"#\">failures:</a> <em>0</em></li>'\n  + '<li class=\"duration\">duration: <em>0</em>s</li>'\n  + '</ul>';\n\n/**\n * Initialize a new `HTML` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction HTML(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , total = runner.total\n    , stat = fragment(statsTemplate)\n    , items = stat.getElementsByTagName('li')\n    , passes = items[1].getElementsByTagName('em')[0]\n    , passesLink = items[1].getElementsByTagName('a')[0]\n    , failures = items[2].getElementsByTagName('em')[0]\n    , failuresLink = items[2].getElementsByTagName('a')[0]\n    , duration = items[3].getElementsByTagName('em')[0]\n    , canvas = stat.getElementsByTagName('canvas')[0]\n    , report = fragment('<ul id=\"mocha-report\"></ul>')\n    , stack = [report]\n    , progress\n    , ctx\n    , root = document.getElementById('mocha');\n\n  if (canvas.getContext) {\n    var ratio = window.devicePixelRatio || 1;\n    canvas.style.width = canvas.width;\n    canvas.style.height = canvas.height;\n    canvas.width *= ratio;\n    canvas.height *= ratio;\n    ctx = canvas.getContext('2d');\n    ctx.scale(ratio, ratio);\n    progress = new Progress;\n  }\n\n  if (!root) return error('#mocha div missing, add it to your document');\n\n  // pass toggle\n  on(passesLink, 'click', function(){\n    unhide();\n    var name = /pass/.test(report.className) ? '' : ' pass';\n    report.className = report.className.replace(/fail|pass/g, '') + name;\n    if (report.className.trim()) hideSuitesWithout('test pass');\n  });\n\n  // failure toggle\n  on(failuresLink, 'click', function(){\n    unhide();\n    var name = /fail/.test(report.className) ? '' : ' fail';\n    report.className = report.className.replace(/fail|pass/g, '') + name;\n    if (report.className.trim()) hideSuitesWithout('test fail');\n  });\n\n  root.appendChild(stat);\n  root.appendChild(report);\n\n  if (progress) progress.size(40);\n\n  runner.on('suite', function(suite){\n    if (suite.root) return;\n\n    // suite\n    var url = self.suiteURL(suite);\n    var el = fragment('<li class=\"suite\"><h1><a href=\"%s\">%s</a></h1></li>', url, escape(suite.title));\n\n    // container\n    stack[0].appendChild(el);\n    stack.unshift(document.createElement('ul'));\n    el.appendChild(stack[0]);\n  });\n\n  runner.on('suite end', function(suite){\n    if (suite.root) return;\n    stack.shift();\n  });\n\n  runner.on('fail', function(test, err){\n    if ('hook' == test.type) runner.emit('test end', test);\n  });\n\n  runner.on('test end', function(test){\n    // TODO: add to stats\n    var percent = stats.tests / this.total * 100 | 0;\n    if (progress) progress.update(percent).draw(ctx);\n\n    // update stats\n    var ms = new Date - stats.start;\n    text(passes, stats.passes);\n    text(failures, stats.failures);\n    text(duration, (ms / 1000).toFixed(2));\n\n    // test\n    if ('passed' == test.state) {\n      var url = self.testURL(test);\n      var el = fragment('<li class=\"test pass %e\"><h2>%e<span class=\"duration\">%ems</span> <a href=\"%s\" class=\"replay\">‣</a></h2></li>', test.speed, test.title, test.duration, url);\n    } else if (test.pending) {\n      var el = fragment('<li class=\"test pass pending\"><h2>%e</h2></li>', test.title);\n    } else {\n      var el = fragment('<li class=\"test fail\"><h2>%e <a href=\"%e\" class=\"replay\">‣</a></h2></li>', test.title, self.testURL(test));\n      var str = test.err.stack || test.err.toString();\n\n      // FF / Opera do not add the message\n      if (!~str.indexOf(test.err.message)) {\n        str = test.err.message + '\\n' + str;\n      }\n\n      // <=IE7 stringifies to [Object Error]. Since it can be overloaded, we\n      // check for the result of the stringifying.\n      if ('[object Error]' == str) str = test.err.message;\n\n      // Safari doesn't give you a stack. Let's at least provide a source line.\n      if (!test.err.stack && test.err.sourceURL && test.err.line !== undefined) {\n        str += \"\\n(\" + test.err.sourceURL + \":\" + test.err.line + \")\";\n      }\n\n      el.appendChild(fragment('<pre class=\"error\">%e</pre>', str));\n    }\n\n    // toggle code\n    // TODO: defer\n    if (!test.pending) {\n      var h2 = el.getElementsByTagName('h2')[0];\n\n      on(h2, 'click', function(){\n        pre.style.display = 'none' == pre.style.display\n          ? 'block'\n          : 'none';\n      });\n\n      var pre = fragment('<pre><code>%e</code></pre>', utils.clean(test.fn.toString()));\n      el.appendChild(pre);\n      pre.style.display = 'none';\n    }\n\n    // Don't call .appendChild if #mocha-report was already .shift()'ed off the stack.\n    if (stack[0]) stack[0].appendChild(el);\n  });\n}\n\n/**\n * Makes a URL, preserving querystring (\"search\") parameters.\n * @param {string} s\n * @returns {string} your new URL\n */\nvar makeUrl = function makeUrl(s) {\n  var search = window.location.search;\n  return window.location.pathname + (search ? search + '&' : '?' ) + 'grep=' + encodeURIComponent(s);\n};\n\n/**\n * Provide suite URL\n *\n * @param {Object} [suite]\n */\nHTML.prototype.suiteURL = function(suite){\n  return makeUrl(suite.fullTitle());\n};\n\n/**\n * Provide test URL\n *\n * @param {Object} [test]\n */\n\nHTML.prototype.testURL = function(test){\n  return makeUrl(test.fullTitle());\n};\n\n/**\n * Display error `msg`.\n */\n\nfunction error(msg) {\n  document.body.appendChild(fragment('<div id=\"mocha-error\">%s</div>', msg));\n}\n\n/**\n * Return a DOM fragment from `html`.\n */\n\nfunction fragment(html) {\n  var args = arguments\n    , div = document.createElement('div')\n    , i = 1;\n\n  div.innerHTML = html.replace(/%([se])/g, function(_, type){\n    switch (type) {\n      case 's': return String(args[i++]);\n      case 'e': return escape(args[i++]);\n    }\n  });\n\n  return div.firstChild;\n}\n\n/**\n * Check for suites that do not have elements\n * with `classname`, and hide them.\n */\n\nfunction hideSuitesWithout(classname) {\n  var suites = document.getElementsByClassName('suite');\n  for (var i = 0; i < suites.length; i++) {\n    var els = suites[i].getElementsByClassName(classname);\n    if (0 == els.length) suites[i].className += ' hidden';\n  }\n}\n\n/**\n * Unhide .hidden suites.\n */\n\nfunction unhide() {\n  var els = document.getElementsByClassName('suite hidden');\n  for (var i = 0; i < els.length; ++i) {\n    els[i].className = els[i].className.replace('suite hidden', 'suite');\n  }\n}\n\n/**\n * Set `el` text to `str`.\n */\n\nfunction text(el, str) {\n  if (el.textContent) {\n    el.textContent = str;\n  } else {\n    el.innerText = str;\n  }\n}\n\n/**\n * Listen on `event` with callback `fn`.\n */\n\nfunction on(el, event, fn) {\n  if (el.addEventListener) {\n    el.addEventListener(event, fn, false);\n  } else {\n    el.attachEvent('on' + event, fn);\n  }\n}\n\n}); // module: reporters/html.js\n\nrequire.register(\"reporters/index.js\", function(module, exports, require){\nexports.Base = require('./base');\nexports.Dot = require('./dot');\nexports.Doc = require('./doc');\nexports.TAP = require('./tap');\nexports.JSON = require('./json');\nexports.HTML = require('./html');\nexports.List = require('./list');\nexports.Min = require('./min');\nexports.Spec = require('./spec');\nexports.Nyan = require('./nyan');\nexports.XUnit = require('./xunit');\nexports.Markdown = require('./markdown');\nexports.Progress = require('./progress');\nexports.Landing = require('./landing');\nexports.JSONCov = require('./json-cov');\nexports.HTMLCov = require('./html-cov');\nexports.JSONStream = require('./json-stream');\n\n}); // module: reporters/index.js\n\nrequire.register(\"reporters/json-cov.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base');\n\n/**\n * Expose `JSONCov`.\n */\n\nexports = module.exports = JSONCov;\n\n/**\n * Initialize a new `JsCoverage` reporter.\n *\n * @param {Runner} runner\n * @param {Boolean} output\n * @api public\n */\n\nfunction JSONCov(runner, output) {\n  var self = this\n    , output = 1 == arguments.length ? true : output;\n\n  Base.call(this, runner);\n\n  var tests = []\n    , failures = []\n    , passes = [];\n\n  runner.on('test end', function(test){\n    tests.push(test);\n  });\n\n  runner.on('pass', function(test){\n    passes.push(test);\n  });\n\n  runner.on('fail', function(test){\n    failures.push(test);\n  });\n\n  runner.on('end', function(){\n    var cov = global._$jscoverage || {};\n    var result = self.cov = map(cov);\n    result.stats = self.stats;\n    result.tests = tests.map(clean);\n    result.failures = failures.map(clean);\n    result.passes = passes.map(clean);\n    if (!output) return;\n    process.stdout.write(JSON.stringify(result, null, 2 ));\n  });\n}\n\n/**\n * Map jscoverage data to a JSON structure\n * suitable for reporting.\n *\n * @param {Object} cov\n * @return {Object}\n * @api private\n */\n\nfunction map(cov) {\n  var ret = {\n      instrumentation: 'node-jscoverage'\n    , sloc: 0\n    , hits: 0\n    , misses: 0\n    , coverage: 0\n    , files: []\n  };\n\n  for (var filename in cov) {\n    var data = coverage(filename, cov[filename]);\n    ret.files.push(data);\n    ret.hits += data.hits;\n    ret.misses += data.misses;\n    ret.sloc += data.sloc;\n  }\n\n  ret.files.sort(function(a, b) {\n    return a.filename.localeCompare(b.filename);\n  });\n\n  if (ret.sloc > 0) {\n    ret.coverage = (ret.hits / ret.sloc) * 100;\n  }\n\n  return ret;\n}\n\n/**\n * Map jscoverage data for a single source file\n * to a JSON structure suitable for reporting.\n *\n * @param {String} filename name of the source file\n * @param {Object} data jscoverage coverage data\n * @return {Object}\n * @api private\n */\n\nfunction coverage(filename, data) {\n  var ret = {\n    filename: filename,\n    coverage: 0,\n    hits: 0,\n    misses: 0,\n    sloc: 0,\n    source: {}\n  };\n\n  data.source.forEach(function(line, num){\n    num++;\n\n    if (data[num] === 0) {\n      ret.misses++;\n      ret.sloc++;\n    } else if (data[num] !== undefined) {\n      ret.hits++;\n      ret.sloc++;\n    }\n\n    ret.source[num] = {\n        source: line\n      , coverage: data[num] === undefined\n        ? ''\n        : data[num]\n    };\n  });\n\n  ret.coverage = ret.hits / ret.sloc * 100;\n\n  return ret;\n}\n\n/**\n * Return a plain-object representation of `test`\n * free of cyclic properties etc.\n *\n * @param {Object} test\n * @return {Object}\n * @api private\n */\n\nfunction clean(test) {\n  return {\n      title: test.title\n    , fullTitle: test.fullTitle()\n    , duration: test.duration\n  }\n}\n\n}); // module: reporters/json-cov.js\n\nrequire.register(\"reporters/json-stream.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , color = Base.color;\n\n/**\n * Expose `List`.\n */\n\nexports = module.exports = List;\n\n/**\n * Initialize a new `List` test reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction List(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , total = runner.total;\n\n  runner.on('start', function(){\n    console.log(JSON.stringify(['start', { total: total }]));\n  });\n\n  runner.on('pass', function(test){\n    console.log(JSON.stringify(['pass', clean(test)]));\n  });\n\n  runner.on('fail', function(test, err){\n    test = clean(test);\n    test.err = err.message;\n    console.log(JSON.stringify(['fail', test]));\n  });\n\n  runner.on('end', function(){\n    process.stdout.write(JSON.stringify(['end', self.stats]));\n  });\n}\n\n/**\n * Return a plain-object representation of `test`\n * free of cyclic properties etc.\n *\n * @param {Object} test\n * @return {Object}\n * @api private\n */\n\nfunction clean(test) {\n  return {\n      title: test.title\n    , fullTitle: test.fullTitle()\n    , duration: test.duration\n  }\n}\n\n}); // module: reporters/json-stream.js\n\nrequire.register(\"reporters/json.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , cursor = Base.cursor\n  , color = Base.color;\n\n/**\n * Expose `JSON`.\n */\n\nexports = module.exports = JSONReporter;\n\n/**\n * Initialize a new `JSON` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction JSONReporter(runner) {\n  var self = this;\n  Base.call(this, runner);\n\n  var tests = []\n    , pending = []\n    , failures = []\n    , passes = [];\n\n  runner.on('test end', function(test){\n    tests.push(test);\n  });\n\n  runner.on('pass', function(test){\n    passes.push(test);\n  });\n\n  runner.on('fail', function(test){\n    failures.push(test);\n  });\n\n  runner.on('pending', function(test){\n    pending.push(test);\n  });\n\n  runner.on('end', function(){\n    var obj = {\n      stats: self.stats,\n      tests: tests.map(clean),\n      pending: pending.map(clean),\n      failures: failures.map(clean),\n      passes: passes.map(clean)\n    };\n\n    runner.testResults = obj;\n\n    process.stdout.write(JSON.stringify(obj, null, 2));\n  });\n}\n\n/**\n * Return a plain-object representation of `test`\n * free of cyclic properties etc.\n *\n * @param {Object} test\n * @return {Object}\n * @api private\n */\n\nfunction clean(test) {\n  return {\n    title: test.title,\n    fullTitle: test.fullTitle(),\n    duration: test.duration,\n    err: errorJSON(test.err || {})\n  }\n}\n\n/**\n * Transform `error` into a JSON object.\n * @param {Error} err\n * @return {Object}\n */\n\nfunction errorJSON(err) {\n  var res = {};\n  Object.getOwnPropertyNames(err).forEach(function(key) {\n    res[key] = err[key];\n  }, err);\n  return res;\n}\n\n}); // module: reporters/json.js\n\nrequire.register(\"reporters/landing.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , cursor = Base.cursor\n  , color = Base.color;\n\n/**\n * Expose `Landing`.\n */\n\nexports = module.exports = Landing;\n\n/**\n * Airplane color.\n */\n\nBase.colors.plane = 0;\n\n/**\n * Airplane crash color.\n */\n\nBase.colors['plane crash'] = 31;\n\n/**\n * Runway color.\n */\n\nBase.colors.runway = 90;\n\n/**\n * Initialize a new `Landing` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction Landing(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , width = Base.window.width * .75 | 0\n    , total = runner.total\n    , stream = process.stdout\n    , plane = color('plane', '✈')\n    , crashed = -1\n    , n = 0;\n\n  function runway() {\n    var buf = Array(width).join('-');\n    return '  ' + color('runway', buf);\n  }\n\n  runner.on('start', function(){\n    stream.write('\\n\\n\\n  ');\n    cursor.hide();\n  });\n\n  runner.on('test end', function(test){\n    // check if the plane crashed\n    var col = -1 == crashed\n      ? width * ++n / total | 0\n      : crashed;\n\n    // show the crash\n    if ('failed' == test.state) {\n      plane = color('plane crash', '✈');\n      crashed = col;\n    }\n\n    // render landing strip\n    stream.write('\\u001b['+(width+1)+'D\\u001b[2A');\n    stream.write(runway());\n    stream.write('\\n  ');\n    stream.write(color('runway', Array(col).join('⋅')));\n    stream.write(plane)\n    stream.write(color('runway', Array(width - col).join('⋅') + '\\n'));\n    stream.write(runway());\n    stream.write('\\u001b[0m');\n  });\n\n  runner.on('end', function(){\n    cursor.show();\n    console.log();\n    self.epilogue();\n  });\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nLanding.prototype = new F;\nLanding.prototype.constructor = Landing;\n\n\n}); // module: reporters/landing.js\n\nrequire.register(\"reporters/list.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , cursor = Base.cursor\n  , color = Base.color;\n\n/**\n * Expose `List`.\n */\n\nexports = module.exports = List;\n\n/**\n * Initialize a new `List` test reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction List(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , n = 0;\n\n  runner.on('start', function(){\n    console.log();\n  });\n\n  runner.on('test', function(test){\n    process.stdout.write(color('pass', '    ' + test.fullTitle() + ': '));\n  });\n\n  runner.on('pending', function(test){\n    var fmt = color('checkmark', '  -')\n      + color('pending', ' %s');\n    console.log(fmt, test.fullTitle());\n  });\n\n  runner.on('pass', function(test){\n    var fmt = color('checkmark', '  '+Base.symbols.dot)\n      + color('pass', ' %s: ')\n      + color(test.speed, '%dms');\n    cursor.CR();\n    console.log(fmt, test.fullTitle(), test.duration);\n  });\n\n  runner.on('fail', function(test, err){\n    cursor.CR();\n    console.log(color('fail', '  %d) %s'), ++n, test.fullTitle());\n  });\n\n  runner.on('end', self.epilogue.bind(self));\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nList.prototype = new F;\nList.prototype.constructor = List;\n\n\n}); // module: reporters/list.js\n\nrequire.register(\"reporters/markdown.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , utils = require('../utils');\n\n/**\n * Constants\n */\n\nvar SUITE_PREFIX = '$';\n\n/**\n * Expose `Markdown`.\n */\n\nexports = module.exports = Markdown;\n\n/**\n * Initialize a new `Markdown` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction Markdown(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , level = 0\n    , buf = '';\n\n  function title(str) {\n    return Array(level).join('#') + ' ' + str;\n  }\n\n  function indent() {\n    return Array(level).join('  ');\n  }\n\n  function mapTOC(suite, obj) {\n    var ret = obj,\n        key = SUITE_PREFIX + suite.title;\n    obj = obj[key] = obj[key] || { suite: suite };\n    suite.suites.forEach(function(suite){\n      mapTOC(suite, obj);\n    });\n    return ret;\n  }\n\n  function stringifyTOC(obj, level) {\n    ++level;\n    var buf = '';\n    var link;\n    for (var key in obj) {\n      if ('suite' == key) continue;\n      if (key !== SUITE_PREFIX) {\n        link = ' - [' + key.substring(1) + ']';\n        link += '(#' + utils.slug(obj[key].suite.fullTitle()) + ')\\n';\n        buf += Array(level).join('  ') + link;\n      }\n      buf += stringifyTOC(obj[key], level);\n    }\n    return buf;\n  }\n\n  function generateTOC(suite) {\n    var obj = mapTOC(suite, {});\n    return stringifyTOC(obj, 0);\n  }\n\n  generateTOC(runner.suite);\n\n  runner.on('suite', function(suite){\n    ++level;\n    var slug = utils.slug(suite.fullTitle());\n    buf += '<a name=\"' + slug + '\"></a>' + '\\n';\n    buf += title(suite.title) + '\\n';\n  });\n\n  runner.on('suite end', function(suite){\n    --level;\n  });\n\n  runner.on('pass', function(test){\n    var code = utils.clean(test.fn.toString());\n    buf += test.title + '.\\n';\n    buf += '\\n```js\\n';\n    buf += code + '\\n';\n    buf += '```\\n\\n';\n  });\n\n  runner.on('end', function(){\n    process.stdout.write('# TOC\\n');\n    process.stdout.write(generateTOC(runner.suite));\n    process.stdout.write(buf);\n  });\n}\n\n}); // module: reporters/markdown.js\n\nrequire.register(\"reporters/min.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base');\n\n/**\n * Expose `Min`.\n */\n\nexports = module.exports = Min;\n\n/**\n * Initialize a new `Min` minimal test reporter (best used with --watch).\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction Min(runner) {\n  Base.call(this, runner);\n\n  runner.on('start', function(){\n    // clear screen\n    process.stdout.write('\\u001b[2J');\n    // set cursor position\n    process.stdout.write('\\u001b[1;3H');\n  });\n\n  runner.on('end', this.epilogue.bind(this));\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nMin.prototype = new F;\nMin.prototype.constructor = Min;\n\n\n}); // module: reporters/min.js\n\nrequire.register(\"reporters/nyan.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base');\n\n/**\n * Expose `Dot`.\n */\n\nexports = module.exports = NyanCat;\n\n/**\n * Initialize a new `Dot` matrix test reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction NyanCat(runner) {\n  Base.call(this, runner);\n  var self = this\n    , stats = this.stats\n    , width = Base.window.width * .75 | 0\n    , rainbowColors = this.rainbowColors = self.generateColors()\n    , colorIndex = this.colorIndex = 0\n    , numerOfLines = this.numberOfLines = 4\n    , trajectories = this.trajectories = [[], [], [], []]\n    , nyanCatWidth = this.nyanCatWidth = 11\n    , trajectoryWidthMax = this.trajectoryWidthMax = (width - nyanCatWidth)\n    , scoreboardWidth = this.scoreboardWidth = 5\n    , tick = this.tick = 0\n    , n = 0;\n\n  runner.on('start', function(){\n    Base.cursor.hide();\n    self.draw();\n  });\n\n  runner.on('pending', function(test){\n    self.draw();\n  });\n\n  runner.on('pass', function(test){\n    self.draw();\n  });\n\n  runner.on('fail', function(test, err){\n    self.draw();\n  });\n\n  runner.on('end', function(){\n    Base.cursor.show();\n    for (var i = 0; i < self.numberOfLines; i++) write('\\n');\n    self.epilogue();\n  });\n}\n\n/**\n * Draw the nyan cat\n *\n * @api private\n */\n\nNyanCat.prototype.draw = function(){\n  this.appendRainbow();\n  this.drawScoreboard();\n  this.drawRainbow();\n  this.drawNyanCat();\n  this.tick = !this.tick;\n};\n\n/**\n * Draw the \"scoreboard\" showing the number\n * of passes, failures and pending tests.\n *\n * @api private\n */\n\nNyanCat.prototype.drawScoreboard = function(){\n  var stats = this.stats;\n\n  function draw(type, n) {\n    write(' ');\n    write(Base.color(type, n));\n    write('\\n');\n  }\n\n  draw('green', stats.passes);\n  draw('fail', stats.failures);\n  draw('pending', stats.pending);\n  write('\\n');\n\n  this.cursorUp(this.numberOfLines);\n};\n\n/**\n * Append the rainbow.\n *\n * @api private\n */\n\nNyanCat.prototype.appendRainbow = function(){\n  var segment = this.tick ? '_' : '-';\n  var rainbowified = this.rainbowify(segment);\n\n  for (var index = 0; index < this.numberOfLines; index++) {\n    var trajectory = this.trajectories[index];\n    if (trajectory.length >= this.trajectoryWidthMax) trajectory.shift();\n    trajectory.push(rainbowified);\n  }\n};\n\n/**\n * Draw the rainbow.\n *\n * @api private\n */\n\nNyanCat.prototype.drawRainbow = function(){\n  var self = this;\n\n  this.trajectories.forEach(function(line, index) {\n    write('\\u001b[' + self.scoreboardWidth + 'C');\n    write(line.join(''));\n    write('\\n');\n  });\n\n  this.cursorUp(this.numberOfLines);\n};\n\n/**\n * Draw the nyan cat\n *\n * @api private\n */\n\nNyanCat.prototype.drawNyanCat = function() {\n  var self = this;\n  var startWidth = this.scoreboardWidth + this.trajectories[0].length;\n  var dist = '\\u001b[' + startWidth + 'C';\n  var padding = '';\n\n  write(dist);\n  write('_,------,');\n  write('\\n');\n\n  write(dist);\n  padding = self.tick ? '  ' : '   ';\n  write('_|' + padding + '/\\\\_/\\\\ ');\n  write('\\n');\n\n  write(dist);\n  padding = self.tick ? '_' : '__';\n  var tail = self.tick ? '~' : '^';\n  var face;\n  write(tail + '|' + padding + this.face() + ' ');\n  write('\\n');\n\n  write(dist);\n  padding = self.tick ? ' ' : '  ';\n  write(padding + '\"\"  \"\" ');\n  write('\\n');\n\n  this.cursorUp(this.numberOfLines);\n};\n\n/**\n * Draw nyan cat face.\n *\n * @return {String}\n * @api private\n */\n\nNyanCat.prototype.face = function() {\n  var stats = this.stats;\n  if (stats.failures) {\n    return '( x .x)';\n  } else if (stats.pending) {\n    return '( o .o)';\n  } else if(stats.passes) {\n    return '( ^ .^)';\n  } else {\n    return '( - .-)';\n  }\n};\n\n/**\n * Move cursor up `n`.\n *\n * @param {Number} n\n * @api private\n */\n\nNyanCat.prototype.cursorUp = function(n) {\n  write('\\u001b[' + n + 'A');\n};\n\n/**\n * Move cursor down `n`.\n *\n * @param {Number} n\n * @api private\n */\n\nNyanCat.prototype.cursorDown = function(n) {\n  write('\\u001b[' + n + 'B');\n};\n\n/**\n * Generate rainbow colors.\n *\n * @return {Array}\n * @api private\n */\n\nNyanCat.prototype.generateColors = function(){\n  var colors = [];\n\n  for (var i = 0; i < (6 * 7); i++) {\n    var pi3 = Math.floor(Math.PI / 3);\n    var n = (i * (1.0 / 6));\n    var r = Math.floor(3 * Math.sin(n) + 3);\n    var g = Math.floor(3 * Math.sin(n + 2 * pi3) + 3);\n    var b = Math.floor(3 * Math.sin(n + 4 * pi3) + 3);\n    colors.push(36 * r + 6 * g + b + 16);\n  }\n\n  return colors;\n};\n\n/**\n * Apply rainbow to the given `str`.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nNyanCat.prototype.rainbowify = function(str){\n  if (!Base.useColors)\n    return str;\n  var color = this.rainbowColors[this.colorIndex % this.rainbowColors.length];\n  this.colorIndex += 1;\n  return '\\u001b[38;5;' + color + 'm' + str + '\\u001b[0m';\n};\n\n/**\n * Stdout helper.\n */\n\nfunction write(string) {\n  process.stdout.write(string);\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nNyanCat.prototype = new F;\nNyanCat.prototype.constructor = NyanCat;\n\n\n}); // module: reporters/nyan.js\n\nrequire.register(\"reporters/progress.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , cursor = Base.cursor\n  , color = Base.color;\n\n/**\n * Expose `Progress`.\n */\n\nexports = module.exports = Progress;\n\n/**\n * General progress bar color.\n */\n\nBase.colors.progress = 90;\n\n/**\n * Initialize a new `Progress` bar test reporter.\n *\n * @param {Runner} runner\n * @param {Object} options\n * @api public\n */\n\nfunction Progress(runner, options) {\n  Base.call(this, runner);\n\n  var self = this\n    , options = options || {}\n    , stats = this.stats\n    , width = Base.window.width * .50 | 0\n    , total = runner.total\n    , complete = 0\n    , max = Math.max\n    , lastN = -1;\n\n  // default chars\n  options.open = options.open || '[';\n  options.complete = options.complete || '▬';\n  options.incomplete = options.incomplete || Base.symbols.dot;\n  options.close = options.close || ']';\n  options.verbose = false;\n\n  // tests started\n  runner.on('start', function(){\n    console.log();\n    cursor.hide();\n  });\n\n  // tests complete\n  runner.on('test end', function(){\n    complete++;\n    var incomplete = total - complete\n      , percent = complete / total\n      , n = width * percent | 0\n      , i = width - n;\n\n    if (lastN === n && !options.verbose) {\n      // Don't re-render the line if it hasn't changed\n      return;\n    }\n    lastN = n;\n\n    cursor.CR();\n    process.stdout.write('\\u001b[J');\n    process.stdout.write(color('progress', '  ' + options.open));\n    process.stdout.write(Array(n).join(options.complete));\n    process.stdout.write(Array(i).join(options.incomplete));\n    process.stdout.write(color('progress', options.close));\n    if (options.verbose) {\n      process.stdout.write(color('progress', ' ' + complete + ' of ' + total));\n    }\n  });\n\n  // tests are complete, output some stats\n  // and the failures if any\n  runner.on('end', function(){\n    cursor.show();\n    console.log();\n    self.epilogue();\n  });\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nProgress.prototype = new F;\nProgress.prototype.constructor = Progress;\n\n\n}); // module: reporters/progress.js\n\nrequire.register(\"reporters/spec.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , cursor = Base.cursor\n  , color = Base.color;\n\n/**\n * Expose `Spec`.\n */\n\nexports = module.exports = Spec;\n\n/**\n * Initialize a new `Spec` test reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction Spec(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , indents = 0\n    , n = 0;\n\n  function indent() {\n    return Array(indents).join('  ')\n  }\n\n  runner.on('start', function(){\n    console.log();\n  });\n\n  runner.on('suite', function(suite){\n    ++indents;\n    console.log(color('suite', '%s%s'), indent(), suite.title);\n  });\n\n  runner.on('suite end', function(suite){\n    --indents;\n    if (1 == indents) console.log();\n  });\n\n  runner.on('pending', function(test){\n    var fmt = indent() + color('pending', '  - %s');\n    console.log(fmt, test.title);\n  });\n\n  runner.on('pass', function(test){\n    if ('fast' == test.speed) {\n      var fmt = indent()\n        + color('checkmark', '  ' + Base.symbols.ok)\n        + color('pass', ' %s ');\n      cursor.CR();\n      console.log(fmt, test.title);\n    } else {\n      var fmt = indent()\n        + color('checkmark', '  ' + Base.symbols.ok)\n        + color('pass', ' %s ')\n        + color(test.speed, '(%dms)');\n      cursor.CR();\n      console.log(fmt, test.title, test.duration);\n    }\n  });\n\n  runner.on('fail', function(test, err){\n    cursor.CR();\n    console.log(indent() + color('fail', '  %d) %s'), ++n, test.title);\n  });\n\n  runner.on('end', self.epilogue.bind(self));\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nSpec.prototype = new F;\nSpec.prototype.constructor = Spec;\n\n\n}); // module: reporters/spec.js\n\nrequire.register(\"reporters/tap.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , cursor = Base.cursor\n  , color = Base.color;\n\n/**\n * Expose `TAP`.\n */\n\nexports = module.exports = TAP;\n\n/**\n * Initialize a new `TAP` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction TAP(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , n = 1\n    , passes = 0\n    , failures = 0;\n\n  runner.on('start', function(){\n    var total = runner.grepTotal(runner.suite);\n    console.log('%d..%d', 1, total);\n  });\n\n  runner.on('test end', function(){\n    ++n;\n  });\n\n  runner.on('pending', function(test){\n    console.log('ok %d %s # SKIP -', n, title(test));\n  });\n\n  runner.on('pass', function(test){\n    passes++;\n    console.log('ok %d %s', n, title(test));\n  });\n\n  runner.on('fail', function(test, err){\n    failures++;\n    console.log('not ok %d %s', n, title(test));\n    if (err.stack) console.log(err.stack.replace(/^/gm, '  '));\n  });\n\n  runner.on('end', function(){\n    console.log('# tests ' + (passes + failures));\n    console.log('# pass ' + passes);\n    console.log('# fail ' + failures);\n  });\n}\n\n/**\n * Return a TAP-safe title of `test`\n *\n * @param {Object} test\n * @return {String}\n * @api private\n */\n\nfunction title(test) {\n  return test.fullTitle().replace(/#/g, '');\n}\n\n}); // module: reporters/tap.js\n\nrequire.register(\"reporters/xunit.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , utils = require('../utils')\n  , fs = require('browser/fs')\n  , escape = utils.escape;\n\n/**\n * Save timer references to avoid Sinon interfering (see GH-237).\n */\n\nvar Date = global.Date\n  , setTimeout = global.setTimeout\n  , setInterval = global.setInterval\n  , clearTimeout = global.clearTimeout\n  , clearInterval = global.clearInterval;\n\n/**\n * Expose `XUnit`.\n */\n\nexports = module.exports = XUnit;\n\n/**\n * Initialize a new `XUnit` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction XUnit(runner, options) {\n  Base.call(this, runner);\n  var stats = this.stats\n    , tests = []\n    , self = this;\n\n  if (options.reporterOptions && options.reporterOptions.output) {\n      if (! fs.createWriteStream) {\n          throw new Error('file output not supported in browser');\n      }\n      self.fileStream = fs.createWriteStream(options.reporterOptions.output);\n  }\n\n  runner.on('pending', function(test){\n    tests.push(test);\n  });\n\n  runner.on('pass', function(test){\n    tests.push(test);\n  });\n\n  runner.on('fail', function(test){\n    tests.push(test);\n  });\n\n  runner.on('end', function(){\n    self.write(tag('testsuite', {\n        name: 'Mocha Tests'\n      , tests: stats.tests\n      , failures: stats.failures\n      , errors: stats.failures\n      , skipped: stats.tests - stats.failures - stats.passes\n      , timestamp: (new Date).toUTCString()\n      , time: (stats.duration / 1000) || 0\n    }, false));\n\n    tests.forEach(function(t) { self.test(t); });\n    self.write('</testsuite>');\n  });\n}\n\n/**\n * Override done to close the stream (if it's a file).\n */\nXUnit.prototype.done = function(failures, fn) {\n    if (this.fileStream) {\n        this.fileStream.end(function() {\n            fn(failures);\n        });\n    } else {\n        fn(failures);\n    }\n};\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nXUnit.prototype = new F;\nXUnit.prototype.constructor = XUnit;\n\n\n/**\n * Write out the given line\n */\nXUnit.prototype.write = function(line) {\n    if (this.fileStream) {\n        this.fileStream.write(line + '\\n');\n    } else {\n        console.log(line);\n    }\n};\n\n/**\n * Output tag for the given `test.`\n */\n\nXUnit.prototype.test = function(test, ostream) {\n  var attrs = {\n      classname: test.parent.fullTitle()\n    , name: test.title\n    , time: (test.duration / 1000) || 0\n  };\n\n  if ('failed' == test.state) {\n    var err = test.err;\n    this.write(tag('testcase', attrs, false, tag('failure', {}, false, cdata(escape(err.message) + \"\\n\" + err.stack))));\n  } else if (test.pending) {\n    this.write(tag('testcase', attrs, false, tag('skipped', {}, true)));\n  } else {\n    this.write(tag('testcase', attrs, true) );\n  }\n};\n\n/**\n * HTML tag helper.\n */\n\nfunction tag(name, attrs, close, content) {\n  var end = close ? '/>' : '>'\n    , pairs = []\n    , tag;\n\n  for (var key in attrs) {\n    pairs.push(key + '=\"' + escape(attrs[key]) + '\"');\n  }\n\n  tag = '<' + name + (pairs.length ? ' ' + pairs.join(' ') : '') + end;\n  if (content) tag += content + '</' + name + end;\n  return tag;\n}\n\n/**\n * Return cdata escaped CDATA `str`.\n */\n\nfunction cdata(str) {\n  return '<![CDATA[' + escape(str) + ']]>';\n}\n\n}); // module: reporters/xunit.js\n\nrequire.register(\"runnable.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar EventEmitter = require('browser/events').EventEmitter\n  , debug = require('browser/debug')('mocha:runnable')\n  , milliseconds = require('./ms')\n  , utils = require('./utils');\n\n/**\n * Save timer references to avoid Sinon interfering (see GH-237).\n */\n\nvar Date = global.Date\n  , setTimeout = global.setTimeout\n  , setInterval = global.setInterval\n  , clearTimeout = global.clearTimeout\n  , clearInterval = global.clearInterval;\n\n/**\n * Object#toString().\n */\n\nvar toString = Object.prototype.toString;\n\n/**\n * Expose `Runnable`.\n */\n\nmodule.exports = Runnable;\n\n/**\n * Initialize a new `Runnable` with the given `title` and callback `fn`.\n *\n * @param {String} title\n * @param {Function} fn\n * @api private\n */\n\nfunction Runnable(title, fn) {\n  this.title = title;\n  this.fn = fn;\n  this.async = fn && fn.length;\n  this.sync = ! this.async;\n  this._timeout = 2000;\n  this._slow = 75;\n  this._enableTimeouts = true;\n  this.timedOut = false;\n  this._trace = new Error('done() called multiple times')\n}\n\n/**\n * Inherit from `EventEmitter.prototype`.\n */\n\nfunction F(){};\nF.prototype = EventEmitter.prototype;\nRunnable.prototype = new F;\nRunnable.prototype.constructor = Runnable;\n\n\n/**\n * Set & get timeout `ms`.\n *\n * @param {Number|String} ms\n * @return {Runnable|Number} ms or self\n * @api private\n */\n\nRunnable.prototype.timeout = function(ms){\n  if (0 == arguments.length) return this._timeout;\n  if (ms === 0) this._enableTimeouts = false;\n  if ('string' == typeof ms) ms = milliseconds(ms);\n  debug('timeout %d', ms);\n  this._timeout = ms;\n  if (this.timer) this.resetTimeout();\n  return this;\n};\n\n/**\n * Set & get slow `ms`.\n *\n * @param {Number|String} ms\n * @return {Runnable|Number} ms or self\n * @api private\n */\n\nRunnable.prototype.slow = function(ms){\n  if (0 === arguments.length) return this._slow;\n  if ('string' == typeof ms) ms = milliseconds(ms);\n  debug('timeout %d', ms);\n  this._slow = ms;\n  return this;\n};\n\n/**\n * Set and & get timeout `enabled`.\n *\n * @param {Boolean} enabled\n * @return {Runnable|Boolean} enabled or self\n * @api private\n */\n\nRunnable.prototype.enableTimeouts = function(enabled){\n  if (arguments.length === 0) return this._enableTimeouts;\n  debug('enableTimeouts %s', enabled);\n  this._enableTimeouts = enabled;\n  return this;\n};\n\n/**\n * Return the full title generated by recursively\n * concatenating the parent's full title.\n *\n * @return {String}\n * @api public\n */\n\nRunnable.prototype.fullTitle = function(){\n  return this.parent.fullTitle() + ' ' + this.title;\n};\n\n/**\n * Clear the timeout.\n *\n * @api private\n */\n\nRunnable.prototype.clearTimeout = function(){\n  clearTimeout(this.timer);\n};\n\n/**\n * Inspect the runnable void of private properties.\n *\n * @return {String}\n * @api private\n */\n\nRunnable.prototype.inspect = function(){\n  return JSON.stringify(this, function(key, val){\n    if ('_' == key[0]) return;\n    if ('parent' == key) return '#<Suite>';\n    if ('ctx' == key) return '#<Context>';\n    return val;\n  }, 2);\n};\n\n/**\n * Reset the timeout.\n *\n * @api private\n */\n\nRunnable.prototype.resetTimeout = function(){\n  var self = this;\n  var ms = this.timeout() || 1e9;\n\n  if (!this._enableTimeouts) return;\n  this.clearTimeout();\n  this.timer = setTimeout(function(){\n    if (!self._enableTimeouts) return;\n    self.callback(new Error('timeout of ' + ms + 'ms exceeded'));\n    self.timedOut = true;\n  }, ms);\n};\n\n/**\n * Whitelist these globals for this test run\n *\n * @api private\n */\nRunnable.prototype.globals = function(arr){\n  var self = this;\n  this._allowedGlobals = arr;\n};\n\n/**\n * Run the test and invoke `fn(err)`.\n *\n * @param {Function} fn\n * @api private\n */\n\nRunnable.prototype.run = function(fn){\n  var self = this\n    , start = new Date\n    , ctx = this.ctx\n    , finished\n    , emitted;\n\n  // Some times the ctx exists but it is not runnable\n  if (ctx && ctx.runnable) ctx.runnable(this);\n\n  // called multiple times\n  function multiple(err) {\n    if (emitted) return;\n    emitted = true;\n    self.emit('error', err || new Error('done() called multiple times; stacktrace may be inaccurate'));\n  }\n\n  // finished\n  function done(err) {\n    var ms = self.timeout();\n    if (self.timedOut) return;\n    if (finished) return multiple(err || self._trace);\n    self.clearTimeout();\n    self.duration = new Date - start;\n    finished = true;\n    if (!err && self.duration > ms && self._enableTimeouts) err = new Error('timeout of ' + ms + 'ms exceeded');\n    fn(err);\n  }\n\n  // for .resetTimeout()\n  this.callback = done;\n\n  // explicit async with `done` argument\n  if (this.async) {\n    this.resetTimeout();\n\n    try {\n      this.fn.call(ctx, function(err){\n        if (err instanceof Error || toString.call(err) === \"[object Error]\") return done(err);\n        if (null != err) {\n          if (Object.prototype.toString.call(err) === '[object Object]') {\n            return done(new Error('done() invoked with non-Error: ' + JSON.stringify(err)));\n          } else {\n            return done(new Error('done() invoked with non-Error: ' + err));\n          }\n        }\n        done();\n      });\n    } catch (err) {\n      done(utils.getError(err));\n    }\n    return;\n  }\n\n  if (this.asyncOnly) {\n    return done(new Error('--async-only option in use without declaring `done()`'));\n  }\n\n  // sync or promise-returning\n  try {\n    if (this.pending) {\n      done();\n    } else {\n      callFn(this.fn);\n    }\n  } catch (err) {\n    done(utils.getError(err));\n  }\n\n  function callFn(fn) {\n    var result = fn.call(ctx);\n    if (result && typeof result.then === 'function') {\n      self.resetTimeout();\n      result\n        .then(function() {\n          done()\n        },\n        function(reason) {\n          done(reason || new Error('Promise rejected with no or falsy reason'))\n        });\n    } else {\n      done();\n    }\n  }\n};\n\n}); // module: runnable.js\n\nrequire.register(\"runner.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar EventEmitter = require('browser/events').EventEmitter\n  , debug = require('browser/debug')('mocha:runner')\n  , Test = require('./test')\n  , utils = require('./utils')\n  , filter = utils.filter\n  , keys = utils.keys;\n\n/**\n * Non-enumerable globals.\n */\n\nvar globals = [\n  'setTimeout',\n  'clearTimeout',\n  'setInterval',\n  'clearInterval',\n  'XMLHttpRequest',\n  'Date',\n  'setImmediate',\n  'clearImmediate'\n];\n\n/**\n * Expose `Runner`.\n */\n\nmodule.exports = Runner;\n\n/**\n * Initialize a `Runner` for the given `suite`.\n *\n * Events:\n *\n *   - `start`  execution started\n *   - `end`  execution complete\n *   - `suite`  (suite) test suite execution started\n *   - `suite end`  (suite) all tests (and sub-suites) have finished\n *   - `test`  (test) test execution started\n *   - `test end`  (test) test completed\n *   - `hook`  (hook) hook execution started\n *   - `hook end`  (hook) hook complete\n *   - `pass`  (test) test passed\n *   - `fail`  (test, err) test failed\n *   - `pending`  (test) test pending\n *\n * @api public\n */\n\nfunction Runner(suite) {\n  var self = this;\n  this._globals = [];\n  this._abort = false;\n  this.suite = suite;\n  this.total = suite.total();\n  this.failures = 0;\n  this.on('test end', function(test){ self.checkGlobals(test); });\n  this.on('hook end', function(hook){ self.checkGlobals(hook); });\n  this.grep(/.*/);\n  this.globals(this.globalProps().concat(extraGlobals()));\n}\n\n/**\n * Wrapper for setImmediate, process.nextTick, or browser polyfill.\n *\n * @param {Function} fn\n * @api private\n */\n\nRunner.immediately = global.setImmediate || process.nextTick;\n\n/**\n * Inherit from `EventEmitter.prototype`.\n */\n\nfunction F(){};\nF.prototype = EventEmitter.prototype;\nRunner.prototype = new F;\nRunner.prototype.constructor = Runner;\n\n\n/**\n * Run tests with full titles matching `re`. Updates runner.total\n * with number of tests matched.\n *\n * @param {RegExp} re\n * @param {Boolean} invert\n * @return {Runner} for chaining\n * @api public\n */\n\nRunner.prototype.grep = function(re, invert){\n  debug('grep %s', re);\n  this._grep = re;\n  this._invert = invert;\n  this.total = this.grepTotal(this.suite);\n  return this;\n};\n\n/**\n * Returns the number of tests matching the grep search for the\n * given suite.\n *\n * @param {Suite} suite\n * @return {Number}\n * @api public\n */\n\nRunner.prototype.grepTotal = function(suite) {\n  var self = this;\n  var total = 0;\n\n  suite.eachTest(function(test){\n    var match = self._grep.test(test.fullTitle());\n    if (self._invert) match = !match;\n    if (match) total++;\n  });\n\n  return total;\n};\n\n/**\n * Return a list of global properties.\n *\n * @return {Array}\n * @api private\n */\n\nRunner.prototype.globalProps = function() {\n  var props = utils.keys(global);\n\n  // non-enumerables\n  for (var i = 0; i < globals.length; ++i) {\n    if (~utils.indexOf(props, globals[i])) continue;\n    props.push(globals[i]);\n  }\n\n  return props;\n};\n\n/**\n * Allow the given `arr` of globals.\n *\n * @param {Array} arr\n * @return {Runner} for chaining\n * @api public\n */\n\nRunner.prototype.globals = function(arr){\n  if (0 == arguments.length) return this._globals;\n  debug('globals %j', arr);\n  this._globals = this._globals.concat(arr);\n  return this;\n};\n\n/**\n * Check for global variable leaks.\n *\n * @api private\n */\n\nRunner.prototype.checkGlobals = function(test){\n  if (this.ignoreLeaks) return;\n  var ok = this._globals;\n\n  var globals = this.globalProps();\n  var leaks;\n\n  if (test) {\n    ok = ok.concat(test._allowedGlobals || []);\n  }\n\n  if(this.prevGlobalsLength == globals.length) return;\n  this.prevGlobalsLength = globals.length;\n\n  leaks = filterLeaks(ok, globals);\n  this._globals = this._globals.concat(leaks);\n\n  if (leaks.length > 1) {\n    this.fail(test, new Error('global leaks detected: ' + leaks.join(', ') + ''));\n  } else if (leaks.length) {\n    this.fail(test, new Error('global leak detected: ' + leaks[0]));\n  }\n};\n\n/**\n * Fail the given `test`.\n *\n * @param {Test} test\n * @param {Error} err\n * @api private\n */\n\nRunner.prototype.fail = function(test, err){\n  ++this.failures;\n  test.state = 'failed';\n\n  if ('string' == typeof err) {\n    err = new Error('the string \"' + err + '\" was thrown, throw an Error :)');\n  }\n\n  this.emit('fail', test, err);\n};\n\n/**\n * Fail the given `hook` with `err`.\n *\n * Hook failures work in the following pattern:\n * - If bail, then exit\n * - Failed `before` hook skips all tests in a suite and subsuites,\n *   but jumps to corresponding `after` hook\n * - Failed `before each` hook skips remaining tests in a\n *   suite and jumps to corresponding `after each` hook,\n *   which is run only once\n * - Failed `after` hook does not alter\n *   execution order\n * - Failed `after each` hook skips remaining tests in a\n *   suite and subsuites, but executes other `after each`\n *   hooks\n *\n * @param {Hook} hook\n * @param {Error} err\n * @api private\n */\n\nRunner.prototype.failHook = function(hook, err){\n  this.fail(hook, err);\n  if (this.suite.bail()) {\n    this.emit('end');\n  }\n};\n\n/**\n * Run hook `name` callbacks and then invoke `fn()`.\n *\n * @param {String} name\n * @param {Function} function\n * @api private\n */\n\nRunner.prototype.hook = function(name, fn){\n  var suite = this.suite\n    , hooks = suite['_' + name]\n    , self = this\n    , timer;\n\n  function next(i) {\n    var hook = hooks[i];\n    if (!hook) return fn();\n    self.currentRunnable = hook;\n\n    hook.ctx.currentTest = self.test;\n\n    self.emit('hook', hook);\n\n    hook.on('error', function(err){\n      self.failHook(hook, err);\n    });\n\n    hook.run(function(err){\n      hook.removeAllListeners('error');\n      var testError = hook.error();\n      if (testError) self.fail(self.test, testError);\n      if (err) {\n        self.failHook(hook, err);\n\n        // stop executing hooks, notify callee of hook err\n        return fn(err);\n      }\n      self.emit('hook end', hook);\n      delete hook.ctx.currentTest;\n      next(++i);\n    });\n  }\n\n  Runner.immediately(function(){\n    next(0);\n  });\n};\n\n/**\n * Run hook `name` for the given array of `suites`\n * in order, and callback `fn(err, errSuite)`.\n *\n * @param {String} name\n * @param {Array} suites\n * @param {Function} fn\n * @api private\n */\n\nRunner.prototype.hooks = function(name, suites, fn){\n  var self = this\n    , orig = this.suite;\n\n  function next(suite) {\n    self.suite = suite;\n\n    if (!suite) {\n      self.suite = orig;\n      return fn();\n    }\n\n    self.hook(name, function(err){\n      if (err) {\n        var errSuite = self.suite;\n        self.suite = orig;\n        return fn(err, errSuite);\n      }\n\n      next(suites.pop());\n    });\n  }\n\n  next(suites.pop());\n};\n\n/**\n * Run hooks from the top level down.\n *\n * @param {String} name\n * @param {Function} fn\n * @api private\n */\n\nRunner.prototype.hookUp = function(name, fn){\n  var suites = [this.suite].concat(this.parents()).reverse();\n  this.hooks(name, suites, fn);\n};\n\n/**\n * Run hooks from the bottom up.\n *\n * @param {String} name\n * @param {Function} fn\n * @api private\n */\n\nRunner.prototype.hookDown = function(name, fn){\n  var suites = [this.suite].concat(this.parents());\n  this.hooks(name, suites, fn);\n};\n\n/**\n * Return an array of parent Suites from\n * closest to furthest.\n *\n * @return {Array}\n * @api private\n */\n\nRunner.prototype.parents = function(){\n  var suite = this.suite\n    , suites = [];\n  while (suite = suite.parent) suites.push(suite);\n  return suites;\n};\n\n/**\n * Run the current test and callback `fn(err)`.\n *\n * @param {Function} fn\n * @api private\n */\n\nRunner.prototype.runTest = function(fn){\n  var test = this.test\n    , self = this;\n\n  if (this.asyncOnly) test.asyncOnly = true;\n\n  try {\n    test.on('error', function(err){\n      self.fail(test, err);\n    });\n    test.run(fn);\n  } catch (err) {\n    fn(err);\n  }\n};\n\n/**\n * Run tests in the given `suite` and invoke\n * the callback `fn()` when complete.\n *\n * @param {Suite} suite\n * @param {Function} fn\n * @api private\n */\n\nRunner.prototype.runTests = function(suite, fn){\n  var self = this\n    , tests = suite.tests.slice()\n    , test;\n\n\n  function hookErr(err, errSuite, after) {\n    // before/after Each hook for errSuite failed:\n    var orig = self.suite;\n\n    // for failed 'after each' hook start from errSuite parent,\n    // otherwise start from errSuite itself\n    self.suite = after ? errSuite.parent : errSuite;\n\n    if (self.suite) {\n      // call hookUp afterEach\n      self.hookUp('afterEach', function(err2, errSuite2) {\n        self.suite = orig;\n        // some hooks may fail even now\n        if (err2) return hookErr(err2, errSuite2, true);\n        // report error suite\n        fn(errSuite);\n      });\n    } else {\n      // there is no need calling other 'after each' hooks\n      self.suite = orig;\n      fn(errSuite);\n    }\n  }\n\n  function next(err, errSuite) {\n    // if we bail after first err\n    if (self.failures && suite._bail) return fn();\n\n    if (self._abort) return fn();\n\n    if (err) return hookErr(err, errSuite, true);\n\n    // next test\n    test = tests.shift();\n\n    // all done\n    if (!test) return fn();\n\n    // grep\n    var match = self._grep.test(test.fullTitle());\n    if (self._invert) match = !match;\n    if (!match) return next();\n\n    // pending\n    if (test.pending) {\n      self.emit('pending', test);\n      self.emit('test end', test);\n      return next();\n    }\n\n    // execute test and hook(s)\n    self.emit('test', self.test = test);\n    self.hookDown('beforeEach', function(err, errSuite){\n\n      if (err) return hookErr(err, errSuite, false);\n\n      self.currentRunnable = self.test;\n      self.runTest(function(err){\n        test = self.test;\n\n        if (err) {\n          self.fail(test, err);\n          self.emit('test end', test);\n          return self.hookUp('afterEach', next);\n        }\n\n        test.state = 'passed';\n        self.emit('pass', test);\n        self.emit('test end', test);\n        self.hookUp('afterEach', next);\n      });\n    });\n  }\n\n  this.next = next;\n  next();\n};\n\n/**\n * Run the given `suite` and invoke the\n * callback `fn()` when complete.\n *\n * @param {Suite} suite\n * @param {Function} fn\n * @api private\n */\n\nRunner.prototype.runSuite = function(suite, fn){\n  var total = this.grepTotal(suite)\n    , self = this\n    , i = 0;\n\n  debug('run suite %s', suite.fullTitle());\n\n  if (!total) return fn();\n\n  this.emit('suite', this.suite = suite);\n\n  function next(errSuite) {\n    if (errSuite) {\n      // current suite failed on a hook from errSuite\n      if (errSuite == suite) {\n        // if errSuite is current suite\n        // continue to the next sibling suite\n        return done();\n      } else {\n        // errSuite is among the parents of current suite\n        // stop execution of errSuite and all sub-suites\n        return done(errSuite);\n      }\n    }\n\n    if (self._abort) return done();\n\n    var curr = suite.suites[i++];\n    if (!curr) return done();\n    self.runSuite(curr, next);\n  }\n\n  function done(errSuite) {\n    self.suite = suite;\n    self.hook('afterAll', function(){\n      self.emit('suite end', suite);\n      fn(errSuite);\n    });\n  }\n\n  this.hook('beforeAll', function(err){\n    if (err) return done();\n    self.runTests(suite, next);\n  });\n};\n\n/**\n * Handle uncaught exceptions.\n *\n * @param {Error} err\n * @api private\n */\n\nRunner.prototype.uncaught = function(err){\n  if (err) {\n    debug('uncaught exception %s', err !== function () {\n      return this;\n    }.call(err) ? err : ( err.message || err ));\n  } else {\n    debug('uncaught undefined exception');\n    err = utils.undefinedError();\n  }\n  err.uncaught = true;\n\n  var runnable = this.currentRunnable;\n  if (!runnable) return;\n\n  var wasAlreadyDone = runnable.state;\n  this.fail(runnable, err);\n\n  runnable.clearTimeout();\n\n  if (wasAlreadyDone) return;\n\n  // recover from test\n  if ('test' == runnable.type) {\n    this.emit('test end', runnable);\n    this.hookUp('afterEach', this.next);\n    return;\n  }\n\n  // bail on hooks\n  this.emit('end');\n};\n\n/**\n * Run the root suite and invoke `fn(failures)`\n * on completion.\n *\n * @param {Function} fn\n * @return {Runner} for chaining\n * @api public\n */\n\nRunner.prototype.run = function(fn){\n  var self = this\n    , fn = fn || function(){};\n\n  function uncaught(err){\n    self.uncaught(err);\n  }\n\n  debug('start');\n\n  // callback\n  this.on('end', function(){\n    debug('end');\n    process.removeListener('uncaughtException', uncaught);\n    fn(self.failures);\n  });\n\n  // run suites\n  this.emit('start');\n  this.runSuite(this.suite, function(){\n    debug('finished running');\n    self.emit('end');\n  });\n\n  // uncaught exception\n  process.on('uncaughtException', uncaught);\n\n  return this;\n};\n\n/**\n * Cleanly abort execution\n *\n * @return {Runner} for chaining\n * @api public\n */\nRunner.prototype.abort = function(){\n  debug('aborting');\n  this._abort = true;\n};\n\n/**\n * Filter leaks with the given globals flagged as `ok`.\n *\n * @param {Array} ok\n * @param {Array} globals\n * @return {Array}\n * @api private\n */\n\nfunction filterLeaks(ok, globals) {\n  return filter(globals, function(key){\n    // Firefox and Chrome exposes iframes as index inside the window object\n    if (/^d+/.test(key)) return false;\n\n    // in firefox\n    // if runner runs in an iframe, this iframe's window.getInterface method not init at first\n    // it is assigned in some seconds\n    if (global.navigator && /^getInterface/.test(key)) return false;\n\n    // an iframe could be approached by window[iframeIndex]\n    // in ie6,7,8 and opera, iframeIndex is enumerable, this could cause leak\n    if (global.navigator && /^\\d+/.test(key)) return false;\n\n    // Opera and IE expose global variables for HTML element IDs (issue #243)\n    if (/^mocha-/.test(key)) return false;\n\n    var matched = filter(ok, function(ok){\n      if (~ok.indexOf('*')) return 0 == key.indexOf(ok.split('*')[0]);\n      return key == ok;\n    });\n    return matched.length == 0 && (!global.navigator || 'onerror' !== key);\n  });\n}\n\n/**\n * Array of globals dependent on the environment.\n *\n * @return {Array}\n * @api private\n */\n\n function extraGlobals() {\n  if (typeof(process) === 'object' &&\n      typeof(process.version) === 'string') {\n\n    var nodeVersion = process.version.split('.').reduce(function(a, v) {\n      return a << 8 | v;\n    });\n\n    // 'errno' was renamed to process._errno in v0.9.11.\n\n    if (nodeVersion < 0x00090B) {\n      return ['errno'];\n    }\n  }\n\n  return [];\n }\n\n}); // module: runner.js\n\nrequire.register(\"suite.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar EventEmitter = require('browser/events').EventEmitter\n  , debug = require('browser/debug')('mocha:suite')\n  , milliseconds = require('./ms')\n  , utils = require('./utils')\n  , Hook = require('./hook');\n\n/**\n * Expose `Suite`.\n */\n\nexports = module.exports = Suite;\n\n/**\n * Create a new `Suite` with the given `title`\n * and parent `Suite`. When a suite with the\n * same title is already present, that suite\n * is returned to provide nicer reporter\n * and more flexible meta-testing.\n *\n * @param {Suite} parent\n * @param {String} title\n * @return {Suite}\n * @api public\n */\n\nexports.create = function(parent, title){\n  var suite = new Suite(title, parent.ctx);\n  suite.parent = parent;\n  if (parent.pending) suite.pending = true;\n  title = suite.fullTitle();\n  parent.addSuite(suite);\n  return suite;\n};\n\n/**\n * Initialize a new `Suite` with the given\n * `title` and `ctx`.\n *\n * @param {String} title\n * @param {Context} ctx\n * @api private\n */\n\nfunction Suite(title, parentContext) {\n  this.title = title;\n  var context = function() {};\n  context.prototype = parentContext;\n  this.ctx = new context();\n  this.suites = [];\n  this.tests = [];\n  this.pending = false;\n  this._beforeEach = [];\n  this._beforeAll = [];\n  this._afterEach = [];\n  this._afterAll = [];\n  this.root = !title;\n  this._timeout = 2000;\n  this._enableTimeouts = true;\n  this._slow = 75;\n  this._bail = false;\n}\n\n/**\n * Inherit from `EventEmitter.prototype`.\n */\n\nfunction F(){};\nF.prototype = EventEmitter.prototype;\nSuite.prototype = new F;\nSuite.prototype.constructor = Suite;\n\n\n/**\n * Return a clone of this `Suite`.\n *\n * @return {Suite}\n * @api private\n */\n\nSuite.prototype.clone = function(){\n  var suite = new Suite(this.title);\n  debug('clone');\n  suite.ctx = this.ctx;\n  suite.timeout(this.timeout());\n  suite.enableTimeouts(this.enableTimeouts());\n  suite.slow(this.slow());\n  suite.bail(this.bail());\n  return suite;\n};\n\n/**\n * Set timeout `ms` or short-hand such as \"2s\".\n *\n * @param {Number|String} ms\n * @return {Suite|Number} for chaining\n * @api private\n */\n\nSuite.prototype.timeout = function(ms){\n  if (0 == arguments.length) return this._timeout;\n  if (ms.toString() === '0') this._enableTimeouts = false;\n  if ('string' == typeof ms) ms = milliseconds(ms);\n  debug('timeout %d', ms);\n  this._timeout = parseInt(ms, 10);\n  return this;\n};\n\n/**\n  * Set timeout `enabled`.\n  *\n  * @param {Boolean} enabled\n  * @return {Suite|Boolean} self or enabled\n  * @api private\n  */\n\nSuite.prototype.enableTimeouts = function(enabled){\n  if (arguments.length === 0) return this._enableTimeouts;\n  debug('enableTimeouts %s', enabled);\n  this._enableTimeouts = enabled;\n  return this;\n};\n\n/**\n * Set slow `ms` or short-hand such as \"2s\".\n *\n * @param {Number|String} ms\n * @return {Suite|Number} for chaining\n * @api private\n */\n\nSuite.prototype.slow = function(ms){\n  if (0 === arguments.length) return this._slow;\n  if ('string' == typeof ms) ms = milliseconds(ms);\n  debug('slow %d', ms);\n  this._slow = ms;\n  return this;\n};\n\n/**\n * Sets whether to bail after first error.\n *\n * @param {Boolean} bail\n * @return {Suite|Number} for chaining\n * @api private\n */\n\nSuite.prototype.bail = function(bail){\n  if (0 == arguments.length) return this._bail;\n  debug('bail %s', bail);\n  this._bail = bail;\n  return this;\n};\n\n/**\n * Run `fn(test[, done])` before running tests.\n *\n * @param {Function} fn\n * @return {Suite} for chaining\n * @api private\n */\n\nSuite.prototype.beforeAll = function(title, fn){\n  if (this.pending) return this;\n  if ('function' === typeof title) {\n    fn = title;\n    title = fn.name;\n  }\n  title = '\"before all\" hook' + (title ? ': ' + title : '');\n\n  var hook = new Hook(title, fn);\n  hook.parent = this;\n  hook.timeout(this.timeout());\n  hook.enableTimeouts(this.enableTimeouts());\n  hook.slow(this.slow());\n  hook.ctx = this.ctx;\n  this._beforeAll.push(hook);\n  this.emit('beforeAll', hook);\n  return this;\n};\n\n/**\n * Run `fn(test[, done])` after running tests.\n *\n * @param {Function} fn\n * @return {Suite} for chaining\n * @api private\n */\n\nSuite.prototype.afterAll = function(title, fn){\n  if (this.pending) return this;\n  if ('function' === typeof title) {\n    fn = title;\n    title = fn.name;\n  }\n  title = '\"after all\" hook' + (title ? ': ' + title : '');\n\n  var hook = new Hook(title, fn);\n  hook.parent = this;\n  hook.timeout(this.timeout());\n  hook.enableTimeouts(this.enableTimeouts());\n  hook.slow(this.slow());\n  hook.ctx = this.ctx;\n  this._afterAll.push(hook);\n  this.emit('afterAll', hook);\n  return this;\n};\n\n/**\n * Run `fn(test[, done])` before each test case.\n *\n * @param {Function} fn\n * @return {Suite} for chaining\n * @api private\n */\n\nSuite.prototype.beforeEach = function(title, fn){\n  if (this.pending) return this;\n  if ('function' === typeof title) {\n    fn = title;\n    title = fn.name;\n  }\n  title = '\"before each\" hook' + (title ? ': ' + title : '');\n\n  var hook = new Hook(title, fn);\n  hook.parent = this;\n  hook.timeout(this.timeout());\n  hook.enableTimeouts(this.enableTimeouts());\n  hook.slow(this.slow());\n  hook.ctx = this.ctx;\n  this._beforeEach.push(hook);\n  this.emit('beforeEach', hook);\n  return this;\n};\n\n/**\n * Run `fn(test[, done])` after each test case.\n *\n * @param {Function} fn\n * @return {Suite} for chaining\n * @api private\n */\n\nSuite.prototype.afterEach = function(title, fn){\n  if (this.pending) return this;\n  if ('function' === typeof title) {\n    fn = title;\n    title = fn.name;\n  }\n  title = '\"after each\" hook' + (title ? ': ' + title : '');\n\n  var hook = new Hook(title, fn);\n  hook.parent = this;\n  hook.timeout(this.timeout());\n  hook.enableTimeouts(this.enableTimeouts());\n  hook.slow(this.slow());\n  hook.ctx = this.ctx;\n  this._afterEach.push(hook);\n  this.emit('afterEach', hook);\n  return this;\n};\n\n/**\n * Add a test `suite`.\n *\n * @param {Suite} suite\n * @return {Suite} for chaining\n * @api private\n */\n\nSuite.prototype.addSuite = function(suite){\n  suite.parent = this;\n  suite.timeout(this.timeout());\n  suite.enableTimeouts(this.enableTimeouts());\n  suite.slow(this.slow());\n  suite.bail(this.bail());\n  this.suites.push(suite);\n  this.emit('suite', suite);\n  return this;\n};\n\n/**\n * Add a `test` to this suite.\n *\n * @param {Test} test\n * @return {Suite} for chaining\n * @api private\n */\n\nSuite.prototype.addTest = function(test){\n  test.parent = this;\n  test.timeout(this.timeout());\n  test.enableTimeouts(this.enableTimeouts());\n  test.slow(this.slow());\n  test.ctx = this.ctx;\n  this.tests.push(test);\n  this.emit('test', test);\n  return this;\n};\n\n/**\n * Return the full title generated by recursively\n * concatenating the parent's full title.\n *\n * @return {String}\n * @api public\n */\n\nSuite.prototype.fullTitle = function(){\n  if (this.parent) {\n    var full = this.parent.fullTitle();\n    if (full) return full + ' ' + this.title;\n  }\n  return this.title;\n};\n\n/**\n * Return the total number of tests.\n *\n * @return {Number}\n * @api public\n */\n\nSuite.prototype.total = function(){\n  return utils.reduce(this.suites, function(sum, suite){\n    return sum + suite.total();\n  }, 0) + this.tests.length;\n};\n\n/**\n * Iterates through each suite recursively to find\n * all tests. Applies a function in the format\n * `fn(test)`.\n *\n * @param {Function} fn\n * @return {Suite}\n * @api private\n */\n\nSuite.prototype.eachTest = function(fn){\n  utils.forEach(this.tests, fn);\n  utils.forEach(this.suites, function(suite){\n    suite.eachTest(fn);\n  });\n  return this;\n};\n\n}); // module: suite.js\n\nrequire.register(\"test.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Runnable = require('./runnable');\n\n/**\n * Expose `Test`.\n */\n\nmodule.exports = Test;\n\n/**\n * Initialize a new `Test` with the given `title` and callback `fn`.\n *\n * @param {String} title\n * @param {Function} fn\n * @api private\n */\n\nfunction Test(title, fn) {\n  Runnable.call(this, title, fn);\n  this.pending = !fn;\n  this.type = 'test';\n}\n\n/**\n * Inherit from `Runnable.prototype`.\n */\n\nfunction F(){};\nF.prototype = Runnable.prototype;\nTest.prototype = new F;\nTest.prototype.constructor = Test;\n\n\n}); // module: test.js\n\nrequire.register(\"utils.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar fs = require('browser/fs')\n  , path = require('browser/path')\n  , basename = path.basename\n  , exists = fs.existsSync || path.existsSync\n  , glob = require('browser/glob')\n  , join = path.join\n  , debug = require('browser/debug')('mocha:watch');\n\n/**\n * Ignored directories.\n */\n\nvar ignore = ['node_modules', '.git'];\n\n/**\n * Escape special characters in the given string of html.\n *\n * @param  {String} html\n * @return {String}\n * @api private\n */\n\nexports.escape = function(html){\n  return String(html)\n    .replace(/&/g, '&amp;')\n    .replace(/\"/g, '&quot;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;');\n};\n\n/**\n * Array#forEach (<=IE8)\n *\n * @param {Array} array\n * @param {Function} fn\n * @param {Object} scope\n * @api private\n */\n\nexports.forEach = function(arr, fn, scope){\n  for (var i = 0, l = arr.length; i < l; i++)\n    fn.call(scope, arr[i], i);\n};\n\n/**\n * Array#map (<=IE8)\n *\n * @param {Array} array\n * @param {Function} fn\n * @param {Object} scope\n * @api private\n */\n\nexports.map = function(arr, fn, scope){\n  var result = [];\n  for (var i = 0, l = arr.length; i < l; i++)\n    result.push(fn.call(scope, arr[i], i));\n  return result;\n};\n\n/**\n * Array#indexOf (<=IE8)\n *\n * @parma {Array} arr\n * @param {Object} obj to find index of\n * @param {Number} start\n * @api private\n */\n\nexports.indexOf = function(arr, obj, start){\n  for (var i = start || 0, l = arr.length; i < l; i++) {\n    if (arr[i] === obj)\n      return i;\n  }\n  return -1;\n};\n\n/**\n * Array#reduce (<=IE8)\n *\n * @param {Array} array\n * @param {Function} fn\n * @param {Object} initial value\n * @api private\n */\n\nexports.reduce = function(arr, fn, val){\n  var rval = val;\n\n  for (var i = 0, l = arr.length; i < l; i++) {\n    rval = fn(rval, arr[i], i, arr);\n  }\n\n  return rval;\n};\n\n/**\n * Array#filter (<=IE8)\n *\n * @param {Array} array\n * @param {Function} fn\n * @api private\n */\n\nexports.filter = function(arr, fn){\n  var ret = [];\n\n  for (var i = 0, l = arr.length; i < l; i++) {\n    var val = arr[i];\n    if (fn(val, i, arr)) ret.push(val);\n  }\n\n  return ret;\n};\n\n/**\n * Object.keys (<=IE8)\n *\n * @param {Object} obj\n * @return {Array} keys\n * @api private\n */\n\nexports.keys = Object.keys || function(obj) {\n  var keys = []\n    , has = Object.prototype.hasOwnProperty // for `window` on <=IE8\n\n  for (var key in obj) {\n    if (has.call(obj, key)) {\n      keys.push(key);\n    }\n  }\n\n  return keys;\n};\n\n/**\n * Watch the given `files` for changes\n * and invoke `fn(file)` on modification.\n *\n * @param {Array} files\n * @param {Function} fn\n * @api private\n */\n\nexports.watch = function(files, fn){\n  var options = { interval: 100 };\n  files.forEach(function(file){\n    debug('file %s', file);\n    fs.watchFile(file, options, function(curr, prev){\n      if (prev.mtime < curr.mtime) fn(file);\n    });\n  });\n};\n\n/**\n * Ignored files.\n */\n\nfunction ignored(path){\n  return !~ignore.indexOf(path);\n}\n\n/**\n * Lookup files in the given `dir`.\n *\n * @return {Array}\n * @api private\n */\n\nexports.files = function(dir, ext, ret){\n  ret = ret || [];\n  ext = ext || ['js'];\n\n  var re = new RegExp('\\\\.(' + ext.join('|') + ')$');\n\n  fs.readdirSync(dir)\n  .filter(ignored)\n  .forEach(function(path){\n    path = join(dir, path);\n    if (fs.statSync(path).isDirectory()) {\n      exports.files(path, ext, ret);\n    } else if (path.match(re)) {\n      ret.push(path);\n    }\n  });\n\n  return ret;\n};\n\n/**\n * Compute a slug from the given `str`.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nexports.slug = function(str){\n  return str\n    .toLowerCase()\n    .replace(/ +/g, '-')\n    .replace(/[^-\\w]/g, '');\n};\n\n/**\n * Strip the function definition from `str`,\n * and re-indent for pre whitespace.\n */\n\nexports.clean = function(str) {\n  str = str\n    .replace(/\\r\\n?|[\\n\\u2028\\u2029]/g, \"\\n\").replace(/^\\uFEFF/, '')\n    .replace(/^function *\\(.*\\) *{|\\(.*\\) *=> *{?/, '')\n    .replace(/\\s+\\}$/, '');\n\n  var spaces = str.match(/^\\n?( *)/)[1].length\n    , tabs = str.match(/^\\n?(\\t*)/)[1].length\n    , re = new RegExp('^\\n?' + (tabs ? '\\t' : ' ') + '{' + (tabs ? tabs : spaces) + '}', 'gm');\n\n  str = str.replace(re, '');\n\n  return exports.trim(str);\n};\n\n/**\n * Trim the given `str`.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nexports.trim = function(str){\n  return str.replace(/^\\s+|\\s+$/g, '');\n};\n\n/**\n * Parse the given `qs`.\n *\n * @param {String} qs\n * @return {Object}\n * @api private\n */\n\nexports.parseQuery = function(qs){\n  return exports.reduce(qs.replace('?', '').split('&'), function(obj, pair){\n    var i = pair.indexOf('=')\n      , key = pair.slice(0, i)\n      , val = pair.slice(++i);\n\n    obj[key] = decodeURIComponent(val);\n    return obj;\n  }, {});\n};\n\n/**\n * Highlight the given string of `js`.\n *\n * @param {String} js\n * @return {String}\n * @api private\n */\n\nfunction highlight(js) {\n  return js\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\\/\\/(.*)/gm, '<span class=\"comment\">//$1</span>')\n    .replace(/('.*?')/gm, '<span class=\"string\">$1</span>')\n    .replace(/(\\d+\\.\\d+)/gm, '<span class=\"number\">$1</span>')\n    .replace(/(\\d+)/gm, '<span class=\"number\">$1</span>')\n    .replace(/\\bnew[ \\t]+(\\w+)/gm, '<span class=\"keyword\">new</span> <span class=\"init\">$1</span>')\n    .replace(/\\b(function|new|throw|return|var|if|else)\\b/gm, '<span class=\"keyword\">$1</span>')\n}\n\n/**\n * Highlight the contents of tag `name`.\n *\n * @param {String} name\n * @api private\n */\n\nexports.highlightTags = function(name) {\n  var code = document.getElementById('mocha').getElementsByTagName(name);\n  for (var i = 0, len = code.length; i < len; ++i) {\n    code[i].innerHTML = highlight(code[i].innerHTML);\n  }\n};\n\n/**\n * If a value could have properties, and has none, this function is called, which returns\n * a string representation of the empty value.\n *\n * Functions w/ no properties return `'[Function]'`\n * Arrays w/ length === 0 return `'[]'`\n * Objects w/ no properties return `'{}'`\n * All else: return result of `value.toString()`\n *\n * @param {*} value Value to inspect\n * @param {string} [type] The type of the value, if known.\n * @returns {string}\n */\nvar emptyRepresentation = function emptyRepresentation(value, type) {\n  type = type || exports.type(value);\n\n  switch(type) {\n    case 'function':\n      return '[Function]';\n    case 'object':\n      return '{}';\n    case 'array':\n      return '[]';\n    default:\n      return value.toString();\n  }\n};\n\n/**\n * Takes some variable and asks `{}.toString()` what it thinks it is.\n * @param {*} value Anything\n * @example\n * type({}) // 'object'\n * type([]) // 'array'\n * type(1) // 'number'\n * type(false) // 'boolean'\n * type(Infinity) // 'number'\n * type(null) // 'null'\n * type(new Date()) // 'date'\n * type(/foo/) // 'regexp'\n * type('type') // 'string'\n * type(global) // 'global'\n * @api private\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/toString\n * @returns {string}\n */\nexports.type = function type(value) {\n  if (typeof Buffer !== 'undefined' && Buffer.isBuffer(value)) {\n    return 'buffer';\n  }\n  return Object.prototype.toString.call(value)\n    .replace(/^\\[.+\\s(.+?)\\]$/, '$1')\n    .toLowerCase();\n};\n\n/**\n * @summary Stringify `value`.\n * @description Different behavior depending on type of value.\n * - If `value` is undefined or null, return `'[undefined]'` or `'[null]'`, respectively.\n * - If `value` is not an object, function or array, return result of `value.toString()` wrapped in double-quotes.\n * - If `value` is an *empty* object, function, or array, return result of function\n *   {@link emptyRepresentation}.\n * - If `value` has properties, call {@link exports.canonicalize} on it, then return result of\n *   JSON.stringify().\n *\n * @see exports.type\n * @param {*} value\n * @return {string}\n * @api private\n */\n\nexports.stringify = function(value) {\n  var prop,\n    type = exports.type(value);\n\n  if (type === 'null' || type === 'undefined') {\n    return '[' + type + ']';\n  }\n\n  if (type === 'date') {\n    return '[Date: ' + value.toISOString() + ']';\n  }\n\n  if (!~exports.indexOf(['object', 'array', 'function'], type)) {\n    return value.toString();\n  }\n\n  for (prop in value) {\n    if (value.hasOwnProperty(prop)) {\n      return JSON.stringify(exports.canonicalize(value), null, 2).replace(/,(\\n|$)/g, '$1');\n    }\n  }\n\n  return emptyRepresentation(value, type);\n};\n\n/**\n * Return if obj is a Buffer\n * @param {Object} arg\n * @return {Boolean}\n * @api private\n */\nexports.isBuffer = function (arg) {\n  return typeof Buffer !== 'undefined' && Buffer.isBuffer(arg);\n};\n\n/**\n * @summary Return a new Thing that has the keys in sorted order.  Recursive.\n * @description If the Thing...\n * - has already been seen, return string `'[Circular]'`\n * - is `undefined`, return string `'[undefined]'`\n * - is `null`, return value `null`\n * - is some other primitive, return the value\n * - is not a primitive or an `Array`, `Object`, or `Function`, return the value of the Thing's `toString()` method\n * - is a non-empty `Array`, `Object`, or `Function`, return the result of calling this function again.\n * - is an empty `Array`, `Object`, or `Function`, return the result of calling `emptyRepresentation()`\n *\n * @param {*} value Thing to inspect.  May or may not have properties.\n * @param {Array} [stack=[]] Stack of seen values\n * @return {(Object|Array|Function|string|undefined)}\n * @see {@link exports.stringify}\n * @api private\n */\n\nexports.canonicalize = function(value, stack) {\n  var canonicalizedObj,\n    type = exports.type(value),\n    prop,\n    withStack = function withStack(value, fn) {\n      stack.push(value);\n      fn();\n      stack.pop();\n    };\n\n  stack = stack || [];\n\n  if (exports.indexOf(stack, value) !== -1) {\n    return '[Circular]';\n  }\n\n  switch(type) {\n    case 'undefined':\n      canonicalizedObj = '[undefined]';\n      break;\n    case 'buffer':\n    case 'null':\n      canonicalizedObj = value;\n      break;\n    case 'array':\n      withStack(value, function () {\n        canonicalizedObj = exports.map(value, function (item) {\n          return exports.canonicalize(item, stack);\n        });\n      });\n      break;\n    case 'date':\n      canonicalizedObj = '[Date: ' + value.toISOString() + ']';\n      break;\n    case 'function':\n      for (prop in value) {\n        canonicalizedObj = {};\n        break;\n      }\n      if (!canonicalizedObj) {\n        canonicalizedObj = emptyRepresentation(value, type);\n        break;\n      }\n    /* falls through */\n    case 'object':\n      canonicalizedObj = canonicalizedObj || {};\n      withStack(value, function () {\n        exports.forEach(exports.keys(value).sort(), function (key) {\n          canonicalizedObj[key] = exports.canonicalize(value[key], stack);\n        });\n      });\n      break;\n    case 'number':\n    case 'boolean':\n      canonicalizedObj = value;\n      break;\n    default:\n      canonicalizedObj = value.toString();\n  }\n\n  return canonicalizedObj;\n};\n\n/**\n * Lookup file names at the given `path`.\n */\nexports.lookupFiles = function lookupFiles(path, extensions, recursive) {\n  var files = [];\n  var re = new RegExp('\\\\.(' + extensions.join('|') + ')$');\n\n  if (!exists(path)) {\n    if (exists(path + '.js')) {\n      path += '.js';\n    } else {\n      files = glob.sync(path);\n      if (!files.length) throw new Error(\"cannot resolve path (or pattern) '\" + path + \"'\");\n      return files;\n    }\n  }\n\n  try {\n    var stat = fs.statSync(path);\n    if (stat.isFile()) return path;\n  }\n  catch (ignored) {\n    return;\n  }\n\n  fs.readdirSync(path).forEach(function(file){\n    file = join(path, file);\n    try {\n      var stat = fs.statSync(file);\n      if (stat.isDirectory()) {\n        if (recursive) {\n          files = files.concat(lookupFiles(file, extensions, recursive));\n        }\n        return;\n      }\n    }\n    catch (ignored) {\n      return;\n    }\n    if (!stat.isFile() || !re.test(file) || basename(file)[0] === '.') return;\n    files.push(file);\n  });\n\n  return files;\n};\n\n/**\n * Generate an undefined error with a message warning the user.\n *\n * @return {Error}\n */\n\nexports.undefinedError = function(){\n  return new Error('Caught undefined error, did you throw without specifying what?');\n};\n\n/**\n * Generate an undefined error if `err` is not defined.\n *\n * @param {Error} err\n * @return {Error}\n */\n\nexports.getError = function(err){\n  return err || exports.undefinedError();\n};\n\n\n}); // module: utils.js\n// The global object is \"self\" in Web Workers.\nvar global = (function() { return this; })();\n\n/**\n * Save timer references to avoid Sinon interfering (see GH-237).\n */\n\nvar Date = global.Date;\nvar setTimeout = global.setTimeout;\nvar setInterval = global.setInterval;\nvar clearTimeout = global.clearTimeout;\nvar clearInterval = global.clearInterval;\n\n/**\n * Node shims.\n *\n * These are meant only to allow\n * mocha.js to run untouched, not\n * to allow running node code in\n * the browser.\n */\n\nvar process = {};\nprocess.exit = function(status){};\nprocess.stdout = {};\n\nvar uncaughtExceptionHandlers = [];\n\nvar originalOnerrorHandler = global.onerror;\n\n/**\n * Remove uncaughtException listener.\n * Revert to original onerror handler if previously defined.\n */\n\nprocess.removeListener = function(e, fn){\n  if ('uncaughtException' == e) {\n    if (originalOnerrorHandler) {\n      global.onerror = originalOnerrorHandler;\n    } else {\n      global.onerror = function() {};\n    }\n    var i = Mocha.utils.indexOf(uncaughtExceptionHandlers, fn);\n    if (i != -1) { uncaughtExceptionHandlers.splice(i, 1); }\n  }\n};\n\n/**\n * Implements uncaughtException listener.\n */\n\nprocess.on = function(e, fn){\n  if ('uncaughtException' == e) {\n    global.onerror = function(err, url, line){\n      fn(new Error(err + ' (' + url + ':' + line + ')'));\n      return true;\n    };\n    uncaughtExceptionHandlers.push(fn);\n  }\n};\n\n/**\n * Expose mocha.\n */\n\nvar Mocha = global.Mocha = require('mocha'),\n    mocha = global.mocha = new Mocha({ reporter: 'html' });\n\n// The BDD UI is registered by default, but no UI will be functional in the\n// browser without an explicit call to the overridden `mocha.ui` (see below).\n// Ensure that this default UI does not expose its methods to the global scope.\nmocha.suite.removeAllListeners('pre-require');\n\nvar immediateQueue = []\n  , immediateTimeout;\n\nfunction timeslice() {\n  var immediateStart = new Date().getTime();\n  while (immediateQueue.length && (new Date().getTime() - immediateStart) < 100) {\n    immediateQueue.shift()();\n  }\n  if (immediateQueue.length) {\n    immediateTimeout = setTimeout(timeslice, 0);\n  } else {\n    immediateTimeout = null;\n  }\n}\n\n/**\n * High-performance override of Runner.immediately.\n */\n\nMocha.Runner.immediately = function(callback) {\n  immediateQueue.push(callback);\n  if (!immediateTimeout) {\n    immediateTimeout = setTimeout(timeslice, 0);\n  }\n};\n\n/**\n * Function to allow assertion libraries to throw errors directly into mocha.\n * This is useful when running tests in a browser because window.onerror will\n * only receive the 'message' attribute of the Error.\n */\nmocha.throwError = function(err) {\n  Mocha.utils.forEach(uncaughtExceptionHandlers, function (fn) {\n    fn(err);\n  });\n  throw err;\n};\n\n/**\n * Override ui to ensure that the ui functions are initialized.\n * Normally this would happen in Mocha.prototype.loadFiles.\n */\n\nmocha.ui = function(ui){\n  Mocha.prototype.ui.call(this, ui);\n  this.suite.emit('pre-require', global, null, this);\n  return this;\n};\n\n/**\n * Setup mocha with the given setting options.\n */\n\nmocha.setup = function(opts){\n  if ('string' == typeof opts) opts = { ui: opts };\n  for (var opt in opts) this[opt](opts[opt]);\n  return this;\n};\n\n/**\n * Run mocha, returning the Runner.\n */\n\nmocha.run = function(fn){\n  var options = mocha.options;\n  mocha.globals('location');\n\n  var query = Mocha.utils.parseQuery(global.location.search || '');\n  if (query.grep) mocha.grep(query.grep);\n  if (query.invert) mocha.invert();\n\n  return Mocha.prototype.run.call(mocha, function(err){\n    // The DOM Document is not available in Web Workers.\n    var document = global.document;\n    if (document && document.getElementById('mocha') && options.noHighlighting !== true) {\n      Mocha.utils.highlightTags('code');\n    }\n    if (fn) fn(err);\n  });\n};\n\n/**\n * Expose the process shim.\n */\n\nMocha.process = process;\n})();\n"
},function(n,e,t){var r=t(23);"string"==typeof r&&(r=[[n.id,r,""]]);t(1)(r,{})},,,function(n,e,t){var r=t(26);"string"==typeof r&&(r=[[n.id,r,""]]);t(1)(r,{})},function(n,e,t){var r=t(34);"string"==typeof r&&(r=[[n.id,r,""]]);t(1)(r,{})},,function(n,e,t){var r=t(37);"string"==typeof r&&(r=[[n.id,r,""]]);t(1)(r,{})},,,function(n,e,t){t(18),t(19)},function(n,e,t){function r(n,e){return h.isUndefined(e)?""+e:h.isNumber(e)&&!isFinite(e)?e.toString():h.isFunction(e)||h.isRegExp(e)?e.toString():e}function i(n,e){return h.isString(n)?n.length<e?n:n.slice(0,e):n}function o(n){return i(JSON.stringify(n.actual,r),128)+" "+n.operator+" "+i(JSON.stringify(n.expected,r),128)}function s(n,e,t,r,i){throw new g.AssertionError({message:t,actual:n,expected:e,operator:r,stackStartFunction:i})}function a(n,e){n||s(n,!0,e,"==",g.ok)}function u(n,e){if(n===e)return!0;if(h.isBuffer(n)&&h.isBuffer(e)){if(n.length!=e.length)return!1;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return h.isDate(n)&&h.isDate(e)?n.getTime()===e.getTime():h.isRegExp(n)&&h.isRegExp(e)?n.source===e.source&&n.global===e.global&&n.multiline===e.multiline&&n.lastIndex===e.lastIndex&&n.ignoreCase===e.ignoreCase:h.isObject(n)||h.isObject(e)?c(n,e):n==e}function l(n){return"[object Arguments]"==Object.prototype.toString.call(n)}function c(n,e){if(h.isNullOrUndefined(n)||h.isNullOrUndefined(e))return!1;if(n.prototype!==e.prototype)return!1;if(h.isPrimitive(n)||h.isPrimitive(e))return n===e;var t=l(n),r=l(e);if(t&&!r||!t&&r)return!1;if(t)return n=d.call(n),e=d.call(e),u(n,e);var i,o,s=v(n),a=v(e);if(s.length!=a.length)return!1;for(s.sort(),a.sort(),o=s.length-1;o>=0;o--)if(s[o]!=a[o])return!1;for(o=s.length-1;o>=0;o--)if(i=s[o],!u(n[i],e[i]))return!1;return!0}function f(n,e){return n&&e?"[object RegExp]"==Object.prototype.toString.call(e)?e.test(n):n instanceof e?!0:e.call({},n)===!0?!0:!1:!1}function p(n,e,t,r){var i;h.isString(t)&&(r=t,t=null);try{e()}catch(o){i=o}if(r=(t&&t.name?" ("+t.name+").":".")+(r?" "+r:"."),n&&!i&&s(i,t,"Missing expected exception"+r),!n&&f(i,t)&&s(i,t,"Got unwanted exception"+r),n&&i&&t&&!f(i,t)||!n&&i)throw i}var h=t(47),d=Array.prototype.slice,m=Object.prototype.hasOwnProperty,g=n.exports=a;g.AssertionError=function(n){this.name="AssertionError",this.actual=n.actual,this.expected=n.expected,this.operator=n.operator,n.message?(this.message=n.message,this.generatedMessage=!1):(this.message=o(this),this.generatedMessage=!0);var e=n.stackStartFunction||s;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var t=new Error;if(t.stack){var r=t.stack,i=e.name,a=r.indexOf("\n"+i);if(a>=0){var u=r.indexOf("\n",a+1);r=r.substring(u+1)}this.stack=r}}},h.inherits(g.AssertionError,Error),g.fail=s,g.ok=a,g.equal=function(n,e,t){n!=e&&s(n,e,t,"==",g.equal)},g.notEqual=function(n,e,t){n==e&&s(n,e,t,"!=",g.notEqual)},g.deepEqual=function(n,e,t){u(n,e)||s(n,e,t,"deepEqual",g.deepEqual)},g.notDeepEqual=function(n,e,t){u(n,e)&&s(n,e,t,"notDeepEqual",g.notDeepEqual)},g.strictEqual=function(n,e,t){n!==e&&s(n,e,t,"===",g.strictEqual)},g.notStrictEqual=function(n,e,t){n===e&&s(n,e,t,"!==",g.notStrictEqual)},g["throws"]=function(){p.apply(this,[!0].concat(d.call(arguments)))},g.doesNotThrow=function(){p.apply(this,[!1].concat(d.call(arguments)))},g.ifError=function(n){if(n)throw n};var v=Object.keys||function(n){var e=[];for(var t in n)m.call(n,t)&&e.push(t);return e}},function(n){n.exports="function"==typeof Object.create?function(n,e){n.super_=e,n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}})}:function(n,e){n.super_=e;var t=function(){};t.prototype=e.prototype,n.prototype=new t,n.prototype.constructor=n}},function(n){n.exports=function(n){return n&&"object"==typeof n&&"function"==typeof n.copy&&"function"==typeof n.fill&&"function"==typeof n.readUInt8}},function(n,e,t){(function(n,r){function i(n,t){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(t)?r.showHidden=t:t&&e._extend(r,t),x(r.showHidden)&&(r.showHidden=!1),x(r.depth)&&(r.depth=2),x(r.colors)&&(r.colors=!1),x(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),u(r,n,r.depth)}function o(n,e){var t=i.styles[e];return t?"["+i.colors[t][0]+"m"+n+"["+i.colors[t][1]+"m":n}function s(n){return n}function a(n){var e={};return n.forEach(function(n){e[n]=!0}),e}function u(n,t,r){if(n.customInspect&&t&&T(t.inspect)&&t.inspect!==e.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,n);return y(i)||(i=u(n,i,r)),i}var o=l(n,t);if(o)return o;var s=Object.keys(t),m=a(s);if(n.showHidden&&(s=Object.getOwnPropertyNames(t)),j(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(t);if(0===s.length){if(T(t)){var g=t.name?": "+t.name:"";return n.stylize("[Function"+g+"]","special")}if(S(t))return n.stylize(RegExp.prototype.toString.call(t),"regexp");if(E(t))return n.stylize(Date.prototype.toString.call(t),"date");if(j(t))return c(t)}var v="",b=!1,w=["{","}"];if(d(t)&&(b=!0,w=["[","]"]),T(t)){var x=t.name?": "+t.name:"";v=" [Function"+x+"]"}if(S(t)&&(v=" "+RegExp.prototype.toString.call(t)),E(t)&&(v=" "+Date.prototype.toUTCString.call(t)),j(t)&&(v=" "+c(t)),0===s.length&&(!b||0==t.length))return w[0]+v+w[1];if(0>r)return S(t)?n.stylize(RegExp.prototype.toString.call(t),"regexp"):n.stylize("[Object]","special");n.seen.push(t);var k;return k=b?f(n,t,r,m,s):s.map(function(e){return p(n,t,r,m,e,b)}),n.seen.pop(),h(k,v,w)}function l(n,e){if(x(e))return n.stylize("undefined","undefined");if(y(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return n.stylize(t,"string")}return b(e)?n.stylize(""+e,"number"):m(e)?n.stylize(""+e,"boolean"):g(e)?n.stylize("null","null"):void 0}function c(n){return"["+Error.prototype.toString.call(n)+"]"}function f(n,e,t,r,i){for(var o=[],s=0,a=e.length;a>s;++s)o.push(q(e,String(s))?p(n,e,t,r,String(s),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||o.push(p(n,e,t,r,i,!0))}),o}function p(n,e,t,r,i,o){var s,a,l;if(l=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},l.get?a=l.set?n.stylize("[Getter/Setter]","special"):n.stylize("[Getter]","special"):l.set&&(a=n.stylize("[Setter]","special")),q(r,i)||(s="["+i+"]"),a||(n.seen.indexOf(l.value)<0?(a=g(t)?u(n,l.value,null):u(n,l.value,t-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(n){return"  "+n}).join("\n").substr(2):"\n"+a.split("\n").map(function(n){return"   "+n}).join("\n"))):a=n.stylize("[Circular]","special")),x(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=n.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=n.stylize(s,"string"))}return s+": "+a}function h(n,e,t){var r=0,i=n.reduce(function(n,e){return r++,e.indexOf("\n")>=0&&r++,n+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?t[0]+(""===e?"":e+"\n ")+" "+n.join(",\n  ")+" "+t[1]:t[0]+e+" "+n.join(", ")+" "+t[1]}function d(n){return Array.isArray(n)}function m(n){return"boolean"==typeof n}function g(n){return null===n}function v(n){return null==n}function b(n){return"number"==typeof n}function y(n){return"string"==typeof n}function w(n){return"symbol"==typeof n}function x(n){return void 0===n}function S(n){return k(n)&&"[object RegExp]"===R(n)}function k(n){return"object"==typeof n&&null!==n}function E(n){return k(n)&&"[object Date]"===R(n)}function j(n){return k(n)&&("[object Error]"===R(n)||n instanceof Error)}function T(n){return"function"==typeof n}function O(n){return null===n||"boolean"==typeof n||"number"==typeof n||"string"==typeof n||"symbol"==typeof n||"undefined"==typeof n}function R(n){return Object.prototype.toString.call(n)}function I(n){return 10>n?"0"+n.toString(10):n.toString(10)}function M(){var n=new Date,e=[I(n.getHours()),I(n.getMinutes()),I(n.getSeconds())].join(":");return[n.getDate(),P[n.getMonth()],e].join(" ")}function q(n,e){return Object.prototype.hasOwnProperty.call(n,e)}var _=/%[sdj%]/g;e.format=function(n){if(!y(n)){for(var e=[],t=0;t<arguments.length;t++)e.push(i(arguments[t]));return e.join(" ")}for(var t=1,r=arguments,o=r.length,s=String(n).replace(_,function(n){if("%%"===n)return"%";if(t>=o)return n;switch(n){case"%s":return String(r[t++]);case"%d":return Number(r[t++]);case"%j":try{return JSON.stringify(r[t++])}catch(e){return"[Circular]"}default:return n}}),a=r[t];o>t;a=r[++t])s+=g(a)||!k(a)?" "+a:" "+i(a);return s},e.deprecate=function(t,i){function o(){if(!s){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),s=!0}return t.apply(this,arguments)}if(x(n.process))return function(){return e.deprecate(t,i).apply(this,arguments)};if(r.noDeprecation===!0)return t;var s=!1;return o};var C,N={};e.debuglog=function(n){if(x(C)&&(C=r.env.NODE_DEBUG||""),n=n.toUpperCase(),!N[n])if(new RegExp("\\b"+n+"\\b","i").test(C)){var t=r.pid;N[n]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",n,t,r)}}else N[n]=function(){};return N[n]},e.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=m,e.isNull=g,e.isNullOrUndefined=v,e.isNumber=b,e.isString=y,e.isSymbol=w,e.isUndefined=x,e.isRegExp=S,e.isObject=k,e.isDate=E,e.isError=j,e.isFunction=T,e.isPrimitive=O,e.isBuffer=t(46);var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",M(),e.format.apply(e,arguments))},e.inherits=t(45),e._extend=function(n,e){if(!e||!k(e))return n;for(var t=Object.keys(e),r=t.length;r--;)n[t[r]]=e[t[r]];return n}}).call(e,function(){return this}(),t(3))}]);
//# sourceMappingURL=0.0.js.map