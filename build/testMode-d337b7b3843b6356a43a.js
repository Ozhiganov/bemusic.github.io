webpackJsonp([0,8],[,,function(t){(function(){"use strict";var e={ramda:"placeholder"},n=function(t,e){return t+e},r=function(t,e){for(var n=-1;++n<e.length;)if(!t(e[n]))return!1;return!0},i=function(t,e){for(var n=-1;++n<e.length;)if(t(e[n]))return!0;return!1},o=function(t,e,n){var r={};for(var i in n)r[i]=n[i];return r[t]=e,r},s=function(t){return new RegExp(t.source,(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.sticky?"y":"")+(t.unicode?"u":""))},a=function(t){return function(){return!t.apply(this,arguments)}},u=function(t,e){return function(){return t.call(this,e.apply(this,arguments))}},c=function(t,e){t=t||[],e=e||[];var n,r=t.length,i=e.length,o=[];for(n=-1;++n<r;)o[o.length]=t[n];for(n=-1;++n<i;)o[o.length]=e[n];return o},l=function(t,e,n){for(var r=-1,i=n.length;++r<i;)if(t(e,n[r]))return!0;return!1},h=function(t,e){var n={};return n[t]=e,n},f=function(t){return function(e,n){if(n&&n.length>0){for(var r,i=0,o=n[i],s=e(o);++i<n.length;)r=e(n[i]),t(r,s)&&(s=r,o=n[i]);return o}}},p=function(t){return function n(r){return 0===arguments.length?n:r===e?n:t(r)}},d=function(t){return function n(r,i){var o=arguments.length;return 0===o?n:1===o&&r===e?n:1===o?p(function(e){return t(r,e)}):2===o&&r===e&&i===e?n:2===o&&r===e?p(function(e){return t(e,i)}):2===o&&i===e?p(function(e){return t(r,e)}):t(r,i)}},m=function(t){return function n(r,i,o){var s=arguments.length;return 0===s?n:1===s&&r===e?n:1===s?d(function(e,n){return t(r,e,n)}):2===s&&r===e&&i===e?n:2===s&&r===e?d(function(e,n){return t(e,i,n)}):2===s&&i===e?d(function(e,n){return t(r,e,n)}):2===s?p(function(e){return t(r,i,e)}):3===s&&r===e&&i===e&&o===e?n:3===s&&r===e&&i===e?d(function(e,n){return t(e,n,o)}):3===s&&r===e&&o===e?d(function(e,n){return t(e,i,n)}):3===s&&i===e&&o===e?d(function(e,n){return t(r,e,n)}):3===s&&r===e?p(function(e){return t(e,i,o)}):3===s&&i===e?p(function(e){return t(r,e,o)}):3===s&&o===e?p(function(e){return t(r,i,e)}):t(r,i,o)}},g=function(t,e){var n={};for(var r in e)r!==t&&(n[r]=e[r]);return n},v=function(t,e){for(var n=-1,r=e.length,i=[];++n<r;)t(e[n])&&(i[i.length]=e[n]);return i},y=function(t,e){for(var n=-1,r=e.length,i=[];++n<r;)t(e[n],n,e)&&(i[i.length]=e[n]);return i},b=function(t,e){for(var n=-1,r=e.length;++n<r;)t(e[n]);return e},x=function(t){return function(e){return v(function(t){return"function"==typeof e[t]},t(e))}},w=function(t,e){return t>e},_=function(t,e){return Object.prototype.hasOwnProperty.call(e,t)},T=function(t){return t},S=function(t,e,n){var r=0,i=t.length;for("number"==typeof n&&(r=0>n?Math.max(0,i+n):n);i>r;){if(t[r]===e)return r;++r}return-1},E=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)},C=Number.isInteger||function(t){return t<<0===t},A=function(t){return null!=t&&t===Object(t)&&"function"==typeof t.then},j=function(t){return"function"==typeof t.step&&"function"==typeof t.result},k=function(t,e,n){var r=t.length;for("number"==typeof n&&(r=0>n?r+n+1:Math.min(r,n+1));--r>=0;)if(t[r]===e)return r;return-1},O=function(t,e){return e>t},M=function(t,e){for(var n=-1,r=e.length,i=[];++n<r;)i[n]=t(e[n]);return i},R=function(t,e){return t*e},P=function(t,e){return 0>t?e[e.length+t]:e[t]},I=function(t,e){if(null!=e&&0!==t.length){for(var n=e,r=0,i=t.length;i>r&&null!=n;r+=1)n=n[t[r]];return n}},L=function(t,e){return c([t],e)},F=function(t){return t&&t.__transducers_reduced__?t:{value:t,__transducers_reduced__:!0}},B=function(t,e,n){if(t===n)return!0;if(null==n)return!1;e.fn=e.fn||[],e.obj=e.obj||[];for(var r,i,o=-1,s=e.fn.length,a=-1,u=e.obj.length;++o<s;){if(r=e.fn[o],i=t[r],!(r in n))return!1;if(!i(n[r],n))return!1}for(;++a<u;)if(r=e.obj[a],t[r]!==n[r])return!1;return!0},D=function fo(t,e,n){switch(arguments.length){case 1:return fo(t,0,t.length);case 2:return fo(t,e,t.length);default:for(var r=Math.max(0,n-e),i=[],o=-1;++o<r;)i[o]=t[e+o];return i}},N=function(){function t(t,e){this.xf=e,this.f=t,this.all=!0}return t.prototype.init=function(){return this.xf.init()},t.prototype.result=function(t){return this.all&&(t=this.xf.step(t,!0)),this.xf.result(t)},t.prototype.step=function(t,e){return this.f(e)||(this.all=!1,t=F(this.xf.step(t,!1))),t},d(function(e,n){return new t(e,n)})}(),q=function(){function t(t,e){this.xf=e,this.f=t,this.any=!1}return t.prototype.init=function(){return this.xf.init()},t.prototype.result=function(t){return this.any||(t=this.xf.step(t,!1)),this.xf.result(t)},t.prototype.step=function(t,e){return this.f(e)&&(this.any=!0,t=F(this.xf.step(t,!0))),t},d(function(e,n){return new t(e,n)})}(),U=function(){function t(t,e){this.xf=e,this.n=t}return t.prototype.init=function(){return this.xf.init()},t.prototype.result=function(t){return this.xf.result(t)},t.prototype.step=function(t,e){return this.n>0?(this.n-=1,t):this.xf.step(t,e)},d(function(e,n){return new t(e,n)})}(),W=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype.init=function(){return this.xf.init()},t.prototype.result=function(t){return this.xf.result(t)},t.prototype.step=function(t,e){if(this.f){if(this.f(e))return t;this.f=null}return this.xf.step(t,e)},d(function(e,n){return new t(e,n)})}(),G=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype.init=function(){return this.xf.init()},t.prototype.result=function(t){return this.xf.result(t)},t.prototype.step=function(t,e){return this.f(e)?this.xf.step(t,e):t},d(function(e,n){return new t(e,n)})}(),V=function(){function t(t,e){this.xf=e,this.f=t,this.found=!1}return t.prototype.init=function(){return this.xf.init()},t.prototype.result=function(t){return this.found||(t=this.xf.step(t,void 0)),this.xf.result(t)},t.prototype.step=function(t,e){return this.f(e)&&(this.found=!0,t=F(this.xf.step(t,e))),t},d(function(e,n){return new t(e,n)})}(),H=function(){function t(t,e){this.xf=e,this.f=t,this.idx=-1,this.found=!1}return t.prototype.init=function(){return this.xf.init()},t.prototype.result=function(t){return this.found||(t=this.xf.step(t,-1)),this.xf.result(t)},t.prototype.step=function(t,e){return this.idx+=1,this.f(e)&&(this.found=!0,t=F(this.xf.step(t,this.idx))),t},d(function(e,n){return new t(e,n)})}(),z=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype.init=function(){return this.xf.init()},t.prototype.result=function(t){return this.xf.result(this.xf.step(t,this.last))},t.prototype.step=function(t,e){return this.f(e)&&(this.last=e),t},d(function(e,n){return new t(e,n)})}(),Y=function(){function t(t,e){this.xf=e,this.f=t,this.idx=-1,this.lastIdx=-1}return t.prototype.init=function(){return this.xf.init()},t.prototype.result=function(t){return this.xf.result(this.xf.step(t,this.lastIdx))},t.prototype.step=function(t,e){return this.idx+=1,this.f(e)&&(this.lastIdx=this.idx),t},d(function(e,n){return new t(e,n)})}(),X=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype.init=function(){return this.xf.init()},t.prototype.result=function(t){return this.xf.result(t)},t.prototype.step=function(t,e){return this.xf.step(t,this.f(e))},d(function(e,n){return new t(e,n)})}(),$=function(){function t(t,e){this.xf=e,this.n=t}return t.prototype.init=function(){return this.xf.init()},t.prototype.result=function(t){return this.xf.result(t)},t.prototype.step=function(t,e){return this.n-=1,0===this.n?F(this.xf.step(t,e)):this.xf.step(t,e)},d(function(e,n){return new t(e,n)})}(),J=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype.init=function(){return this.xf.init()},t.prototype.result=function(t){return this.xf.result(t)},t.prototype.step=function(t,e){return this.f(e)?this.xf.step(t,e):F(t)},d(function(e,n){return new t(e,n)})}(),K=function(){function t(t){this.f=t}return t.prototype.init=function(){throw new Error("init not implemented on XWrap")},t.prototype.result=function(t){return t},t.prototype.step=function(t,e){return this.f(t,e)},function(e){return new t(e)}}(),Q=d(n),Z=p(function(t){return function(){return t}}),te=d(function(t,e){return t&&e}),ee=d(function(t,e){for(var n=-1,r=e.length-(t-1),i=new Array(r>=0?r:0);++n<r;)i[n]=D(e,n,n+t);return i}),ne=d(function(t,e){return t.apply(this,e)}),re=d(function(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,r){return e.apply(this,arguments)};case 4:return function(t,n,r,i){return e.apply(this,arguments)};case 5:return function(t,n,r,i,o){return e.apply(this,arguments)};case 6:return function(t,n,r,i,o,s){return e.apply(this,arguments)};case 7:return function(t,n,r,i,o,s,a){return e.apply(this,arguments)};case 8:return function(t,n,r,i,o,s,a,u){return e.apply(this,arguments)};case 9:return function(t,n,r,i,o,s,a,u,c){return e.apply(this,arguments)};case 10:return function(t,n,r,i,o,s,a,u,c,l){return e.apply(this,arguments)};default:throw new Error("First argument to arity must be a non-negative integer no greater than ten")}}),ie=m(o),oe=d(function(t,e){return re(t.length,function(){return t.apply(e,arguments)})}),se=d(function(t,e){return function(){return t.apply(this,arguments)&&e.apply(this,arguments)}}),ae=p(function(t){return function(e,n){return t(e,n)?-1:t(n,e)?1:0}}),ue=p(a),ce=function(){var t=arguments;return function(){for(var e=-1;++e<t.length;)if(t[e][0].apply(this,arguments))return t[e][1].apply(this,arguments)}},le=m(l),he=d(function(t,e){for(var n={},r=e.length,i=-1;++i<r;){var o=t(e[i]);n[o]=(_(o,n)?n[o]:0)+1}return n}),fe=d(h),pe=d(function po(t,n){return re(t,function(){for(var r=arguments.length,i=t-r,o=r;--o>=0;)arguments[o]===e&&(i+=1);if(0>=i)return n.apply(this,arguments);var s=D(arguments);return po(i,function(){for(var t=D(arguments),i=[],o=-1;++o<r;){var a=s[o];i[o]=a===e?t.shift():a}return n.apply(this,i.concat(t))})})}),de=Q(-1),me=d(function(t,e){return null==e?t:e}),ge=m(function(t,e,n){for(var r=[],i=-1,o=e.length,s=le(t);++i<o;)s(e[i],n)||s(e[i],r)||(r[i]=e[i]);return r}),ve=d(g),ye=d(function(t,e){return t/e}),be=d(function(t,e){return function(){return t.apply(this,arguments)||e.apply(this,arguments)}}),xe=d(function(t,e){return 0===t?1/t===1/e:t===e||t!==t&&e!==e}),we=m(function(t,e,n){return e[t]===n[t]}),_e=d(y),Te=d(b),Se=d(function(t,e){for(var n=-1,r=e.length;++n<r;)t(e[n],n,e);return e}),Ee=p(function(t){for(var e=-1,n=t.length,r={};++e<n;)E(t[e])&&t[e].length&&(r[t[e][0]]=t[e][1]);return r}),Ce=d(w),Ae=d(function(t,e){return t>=e}),je=d(_),ke=d(function(t,e){return t in e}),Oe=p(T),Me=m(function(t,e,n){return pe(Math.max(t.length,e.length,n.length),function(){return t.apply(this,arguments)?e.apply(this,arguments):n.apply(this,arguments)})}),Re=Q(1),Pe=d(function(t,e){return S(e,t)}),Ie=m(function(t,e,n){return t=t<n.length&&t>=0?t:n.length,c(c(D(n,0,t),e),D(n,t))}),Le=d(function(t,e){return null!=e&&e.constructor===t||e instanceof t}),Fe=p(function(t){return E(t)?!0:t?"object"!=typeof t?!1:t instanceof String?!1:1===t.nodeType?!!t.length:0===t.length?!0:t.length>0?t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1):!1:!1}),Be=p(function(t){return 0===Object(t).length}),De=p(function(t){return"number"==typeof t&&t!==t}),Ne=p(function(t){return null==t}),qe=p(function(t){for(var e=t.length,n=-1;++n<e;)if(S(t,t[n],n+1)>=0)return!1;return!0}),Ue=p(function(t){var e,n=[];for(e in t)n[n.length]=e;return n}),We=d(function(t,e){return k(e,t)}),Ge=p(function(t){return null!=t&&Le(Number,t.length)?t.length:0/0}),Ve=d(function(t,e){var n=function(e){return t(e)};return n.set=d(e),n.map=d(function(n,r){return e(n(t(r)),r)}),n}),He=m(function(t,e,n){var r=function(){return t(n)};return r.set=e,r.map=function(r){return e(r(t(n)))},r}),ze=d(O),Ye=d(function(t,e){return e>=t}),Xe=m(function(t,e,n){for(var r=-1,i=n.length,o=[],s=[e];++r<i;)s=t(s[0],n[r]),o[r]=s[1];return[s[0],o]}),$e=m(function(t,e,n){for(var r=n.length,i=[],o=[e];--r>=0;)o=t(o[0],n[r]),i[r]=o[1];return[o[0],i]}),Je=d(function(t,e){for(var n=-1,r=e.length,i=[];++n<r;)i[n]=t(e[n],n,e);return i}),Ke=d(function(t,e){return C(t)?!C(e)||1>e?0/0:(t%e+e)%e:0/0}),Qe=d(f(w)),Ze=function(){var t=function(t){return t+"::"+Object.prototype.toString.call(t)},e=function(e){return e.length+":{"+M(t,e).join(",")+"}"};return p(function(t){var n={};return function(){var r=e(arguments);return _(r,n)||(n[r]=t.apply(this,arguments)),n[r]}})}(),tn=d(f(O)),en=d(function(t,e){return t%e}),nn=d(R),rn=d(function(t,e){switch(t){case 0:return function(){return e.call(this)};case 1:return function(t){return e.call(this,t)};case 2:return function(t,n){return e.call(this,t,n)};case 3:return function(t,n,r){return e.call(this,t,n,r)};case 4:return function(t,n,r,i){return e.call(this,t,n,r,i)};case 5:return function(t,n,r,i,o){return e.call(this,t,n,r,i,o)};case 6:return function(t,n,r,i,o,s){return e.call(this,t,n,r,i,o,s)};case 7:return function(t,n,r,i,o,s,a){return e.call(this,t,n,r,i,o,s,a)};case 8:return function(t,n,r,i,o,s,a,u){return e.call(this,t,n,r,i,o,s,a,u)};case 9:return function(t,n,r,i,o,s,a,u,c){return e.call(this,t,n,r,i,o,s,a,u,c)};case 10:return function(t,n,r,i,o,s,a,u,c,l){return e.call(this,t,n,r,i,o,s,a,u,c,l)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}}),on=p(function(t){return-t}),sn=p(function(t){return!t}),an=d(P),un=p(function(t){return function(){return P(t,arguments)}}),cn=d(function(t,e){return e.charAt(0>t?e.length+t:t)}),ln=d(function(t,e){return e.charCodeAt(0>t?e.length+t:t)}),hn=p(function(t){return[t]}),fn=d(function(t,e){var n={};for(var r in e)S(t,r)<0&&(n[r]=e[r]);return n}),pn=p(function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments))}}),dn=d(function(t,e){return t||e}),mn=d(I),gn=m(function(t,e,n){return I(t,n)===e}),vn=d(function(t,e){var n={};for(var r in e)S(t,r)>=0&&(n[r]=e[r]);return n}),yn=d(function(t,e){for(var n={},r=-1,i=t.length;++r<i;){var o=t[r];n[o]=e[o]}return n}),bn=d(function(t,e){var n={};for(var r in e)t(e[r],r,e)&&(n[r]=e[r]);return n}),xn=d(L),wn=d(function(t,e){return e[t]}),_n=m(function(t,e,n){return n[t]===e}),Tn=m(function(t,e,n){return _(e,n)?n[e]:t}),Sn=d(function(t,e){for(var n=t.length,r=[],i=-1;++i<n;)r[i]=e[t[i]];return r}),En=d(function(t,e){for(var n=[],r=t;e>r;)n[n.length]=r,r+=1;return n}),Cn=m(function(t,e,n){for(var r=-1,i=n.length;++r<i;)e=t(e,n[r],r,n);return e}),An=m(function(t,e,n){for(var r=n.length;--r>=0;)e=t(e,n[r]);return e}),jn=m(function(t,e,n){for(var r=n.length;--r>=0;)e=t(e,n[r],r,n);return e}),kn=d(function(t,e){return y(a(t),e)}),On=m(function(t,e,n){return c(D(n,0,Math.min(t,n.length)),D(n,Math.min(n.length,t+e)))}),Mn=m(function(t,e,n){return n.replace(t,e)}),Rn=p(function(t){return D(t).reverse()}),Pn=m(function(t,e,n){for(var r=0,i=n.length+1,o=[e];++r<i;)e=t(e,n[r-1]),o[r]=e;return o}),In=d(function(t,e){return D(e).sort(function(e,n){var r=t(e),i=t(n);return i>r?-1:r>i?1:0})}),Ln=d(function(t,e){return e.indexOf(t)}),Fn=d(function(t,e){return e.lastIndexOf(t)}),Bn=d(function(t,e){return t-e}),Dn=d(function(t,e){return t(e),e}),Nn=d(function(t,e){return s(t).test(e)}),qn=d(function(t,e){for(var n=Number(e),r=new Array(n),i=0;n>i;)r[i]=t(i),i+=1;return r}),Un=p(function(t){var e=[];for(var n in t)_(n,t)&&(e[e.length]=[n,t[n]]);return e}),Wn=p(function(t){var e=[];for(var n in t)e[e.length]=[n,t[n]];return e}),Gn=function(){var t="	\n\f\r   ᠎             　\u2028\u2029﻿",e="​",n="function"==typeof String.prototype.trim;return p(n&&!t.trim()&&e.trim()?function(t){return t.trim()}:function(e){var n=new RegExp("^["+t+"]["+t+"]*"),r=new RegExp("["+t+"]["+t+"]*$");return e.replace(n,"").replace(r,"")})}(),Vn=p(function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}),Hn=p(function(t){return function(){return t(D(arguments))}}),zn=p(function(t){return rn(1,t)}),Yn=d(function(t,e){for(var n=t(e),r=[];n&&n.length;)r[r.length]=n[0],n=t(n[1]);return r}),Xn=d(function(t,e){for(var n,r=-1,i=e.length,o=[];++r<i;)n=e[r],l(t,n,o)||(o[o.length]=n);return o}),$n=p(function(t){var e,n=[];for(e in t)n[n.length]=t[e];return n}),Jn=d(function(t,e){return pe(t.length,function(){return e.apply(this,c([t],arguments))})}),Kn=d(function(t,e){for(var n,r=-1,i=t.length,o=e.length,s=[];++r<i;)for(n=-1;++n<o;)s[s.length]=[t[r],e[n]];return s}),Qn=d(function(t,e){for(var n=[],r=-1,i=Math.min(t.length,e.length);++r<i;)n[r]=[t[r],e[r]];return n}),Zn=d(function(t,e){for(var n=-1,r=t.length,i={};++n<r;)i[t[n]]=e[n];return i}),tr=m(function(t,e,n){for(var r=[],i=-1,o=Math.min(e.length,n.length);++i<o;)r[i]=t(e[i],n[i]);return r}),er=Z(!1),nr=Z(!0),rr=function(t,e){return c(e,[t])},ir=function mo(t,e,n){switch(t.length){case 0:return n;case 1:return o(t[0],e,n);default:return o(t[0],mo(D(t,1),e,Object(n[t[0]])),n)}},or=function go(t,e,n){var r=function(r){for(var i=e.length,o=-1;++o<i;)if(t===e[o])return n[o];e[o+1]=t,n[o+1]=r;for(var s in t)r[s]=go(t[s],e,n);return r};switch(Vn(t)){case"Object":return r({});case"Array":return r([]);case"Date":return new Date(t);case"RegExp":return s(t);default:return t}},sr=function(t,e){return function(){var n=arguments.length;if(0===n)return e();var r=arguments[n-1];return E(r)||"function"!=typeof r[t]?e.apply(this,arguments):r[t].apply(r,D(arguments,0,n-1))}},ar=function(t,e){return function(){var n=this,r=e.apply(this,arguments);return A(r)?r.then(function(e){return t.call(n,e)}):t.call(this,r)}},ur=function(t,e){return S(e,t)>=0},cr=function(t){return function(){for(var e=arguments.length-1,n=arguments[e],r=n.length;--e>=0;)n=t(arguments[e],n);return re(r,n)}},lr=function(t,e){return p(function(n){for(var r,i=-1,o=e;++i<n.length;)r=+n[i],t(r,o)&&(o=r);return o})},hr=function(t){return function(e){var n=D(arguments,1);return re(Math.max(0,e.length-n.length),function(){return e.apply(this,t(n,arguments))})}},fr=function(t,e,n){return function(){var r=arguments.length;if(0===r)return n();var i=arguments[r-1];if(!E(i)){var o=D(arguments,0,r-1);if("function"==typeof i[t])return i[t].apply(i,o);if(j(i)){var s=e.apply(null,o);return s(i)}}return n.apply(this,arguments)}},pr=function vo(t,e){switch(t.length){case 0:return e;case 1:return g(t[0],e);default:var n=t[0],r=D(t,1);return null==e[n]?e:o(n,vo(r,e[n]),e)}},dr=function(t,e){return null!=e&&!E(e)&&"function"==typeof e[t]},mr=function(t){return function e(n){for(var r,i,o,s=[],a=-1,u=n.length;++a<u;)if(Fe(n[a]))for(r=t?e(n[a]):n[a],i=-1,o=r.length;++i<o;)s[s.length]=r[i];else s[s.length]=n[a];return s}},gr=function(t,e){return M(wn(t),e)},vr=function(){function t(t,e,n){for(var r=-1,i=n.length;++r<i;)if(e=t.step(e,n[r]),e&&e.__transducers_reduced__){e=e.value;break}return t.result(e)}function e(t,e,n){for(var r=n.next();!r.done;){if(e=t.step(e,r.value),e&&e.__transducers_reduced__){e=e.value;break}r=n.next()}return t.result(e)}function n(t,e,n){return t.result(n.reduce(oe(t.step,t),e))}var r="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";return function(i,o,s){if("function"==typeof i&&(i=K(i)),Fe(s))return t(i,o,s);if("function"==typeof s.reduce)return n(i,o,s);if(null!=s[r])return e(i,o,s[r]());if("function"==typeof s.next)return e(i,o,s);throw new TypeError("reduce: list must be array or iterable")}}(),yr=function(){function t(t,e){this.xf=e,this.f=t,this.inputs={}}return t.prototype.init=function(){return this.xf.init()},t.prototype.result=function(t){var e;for(e in this.inputs)if(_(e,this.inputs)&&(t=this.xf.step(t,this.inputs[e]),t.__transducers_reduced__)){t=t.value;break}return this.xf.result(t)},t.prototype.step=function(t,e){var n=this.f(e);return this.inputs[n]=this.inputs[n]||[n,[]],this.inputs[n][1]=rr(e,this.inputs[n][1]),t},d(function(e,n){return new t(e,n)})}(),br=d(fr("all",N,r)),xr=d(fr("any",q,i)),wr=d(rr),_r=m(ir),Tr=p(function(t){return rn(2,t)}),Sr=p(function(t){return or(t,[],[])}),Er=cr(u),Cr=cr(ar),Ar=d(function(t,e){if(E(e))return c(t,e);if(dr("concat",t))return t.concat(e);throw new TypeError("can't concat "+typeof t)}),jr=d(ur),kr=pe(3,function(t){var e=D(arguments,1);return function(){var n=arguments;return t.apply(this,M(function(t){return t.apply(this,n)},e))}}),Or=p(function(t){return pe(t.length,t)}),Mr=d(function(t,e){for(var n=[],r=-1,i=t.length;++r<i;)ur(t[r],e)||ur(t[r],n)||(n[n.length]=t[r]);return n}),Rr=d(pr),Pr=d(fr("drop",U,function(t,e){return t<e.length?D(e,t):[]})),Ir=d(fr("dropWhile",W,function(t,e){for(var n=-1,r=e.length;++n<r&&t(e[n]););return D(e,n)})),Lr=p(function(t){return dr("empty",t)?t.empty():[]}),Fr=d(fr("filter",G,v)),Br=d(fr("find",V,function(t,e){for(var n=-1,r=e.length;++n<r;)if(t(e[n]))return e[n]})),Dr=d(fr("findIndex",H,function(t,e){for(var n=-1,r=e.length;++n<r;)if(t(e[n]))return n;return-1})),Nr=d(fr("findLast",z,function(t,e){for(var n=e.length;--n>=0;)if(t(e[n]))return e[n]})),qr=d(fr("findLastIndex",Y,function(t,e){for(var n=e.length;--n>=0;)if(t(e[n]))return n;return-1})),Ur=p(mr(!0)),Wr=p(function(t){return Or(function(e,n){var r=D(arguments);return r[0]=n,r[1]=e,t.apply(this,r)})}),Gr=Or(function(t,e){return e[t].apply(e,D(arguments,2))}),Vr=p(x(Ue)),Hr=d(fr("groupBy",yr,function(t,e){return vr(function(e,n){var r=t(n);return e[r]=rr(n,e[r]||(e[r]=[])),e},{},e)})),zr=an(0),Yr=m(function(t,e,n){return t=t<n.length&&t>=0?t:n.length,c(rr(e,D(n,0,t)),D(n,t))}),Xr=m(function(t,e,n){for(var r=[],i=-1;++i<e.length;)l(t,e[i],n)&&(r[r.length]=e[i]);return Xn(t,r)}),$r=Or(function(t,e,n){return n[t].apply(n,e)}),Jr=Or(function(t,e){var n=D(arguments,2),r=t-n.length;return pe(r+1,function(){var t=arguments[r],i=n.concat(D(arguments,0,r));return t[e].apply(t,i)})}),Kr=Jr(1,"join"),Qr=function(){var t=!{toString:null}.propertyIsEnumerable("toString"),e=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];return p(function(n){if(Object(n)!==n)return[];if(Object.keys)return Object.keys(n);var r,i,o=[];for(r in n)_(r,n)&&(o[o.length]=r);if(t)for(i=e.length;--i>=0;)r=e[i],_(r,n)&&!ur(r,o)&&(o[o.length]=r);return o})}(),Zr=an(-1),ti=d(fr("map",X,M)),ei=d(function(t,e){return vr(function(n,r){return n[r]=t(e[r]),n},{},Qr(e))}),ni=d(function(t,e){return vr(function(n,r){return n[r]=t(e[r],r,e),n},{},Qr(e))}),ri=Jr(1,"match"),ii=lr(w,-1/0),oi=lr(O,1/0),si=d(a(fr("any",q,i))),ai=Or(hr(c)),ui=Or(hr(Wr(c))),ci=d(function(t,e){return vr(function(e,n){var r=e[t(n)?0:1];return r[r.length]=n,e},[[],[]],e)}),li=function(){return Er.apply(this,Rn(arguments))},hi=function(){return Cr.apply(this,Rn(arguments))},fi=d(gr),pi=m(vr),di=d(function(t,e){return Fr(a(t),e)}),mi=d(function(t,e){return qn(Z(t),e)}),gi=m(sr("slice",function(t,e,n){return Array.prototype.slice.call(n,t,e)})),vi=d(function(t,e){return Sr(e).sort(t)}),yi=Jr(1,"split"),bi=gi,xi=bi(e,1/0),wi=bi(0),_i=pi(n,0),Ti=sr("tail",function(t){return D(t,1)}),Si=d(fr("take",$,function(t,e){return D(e,0,Math.min(t,e.length))})),Ei=d(fr("takeWhile",J,function(t,e){for(var n=-1,r=e.length;++n<r&&t(e[n]););return D(e,0,n)})),Ci=Jr(0,"toLowerCase"),Ai=Jr(0,"toUpperCase"),ji=pe(4,function(t,e,n,r){return vr(t("function"==typeof e?K(e):e),n,r)}),ki=m(function(t,e,n){return Xn(t,c(e,n))}),Oi=p(function(t){for(var e,n=-1,r=t.length,i=[];++n<r;)e=t[n],ur(e,i)||(i[i.length]=e);return i}),Mi=p(mr(!1)),Ri=Or(function(t){var e=D(arguments,1),n=e.length;return Or(re(n,function(){for(var r=[],i=-1;++i<n;)r[i]=e[i](arguments[i]);return t.apply(this,r.concat(D(arguments,n)))}))}),Pi=p(function(t){for(var e=Qr(t),n=e.length,r=[],i=-1;++i<n;)r[i]=t[e[i]];return r}),Ii=d(function(t,e){var n=Hr(function(e){return"function"==typeof t[e]?"fn":"obj"},Qr(t));return B(t,n,e)}),Li=function yo(t,e,n,r){var i=Vn(t);if(i!==Vn(e))return!1;if(xe(t,e))return!0;if("RegExp"==i)return t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline&&t.sticky===e.sticky&&t.unicode===e.unicode;if(Object(t)===t){if("Date"===i&&t.getTime()!=e.getTime())return!1;var o=Qr(t);if(o.length!==Qr(e).length)return!1;for(var s=n.length;--s>=0;)if(n[s]===t)return r[s]===e;for(n[n.length]=t,r[r.length]=e,s=o.length;--s>=0;){var a=o[s];if(!_(a,e)||!yo(e[a],t[a],n,r))return!1}return n.pop(),r.pop(),!0}return!1},Fi=function(t,e){for(var n=Qr(e),r=-1,i=n.length;++r<i;)t[n[r]]=e[n[r]];return t},Bi=function(t){return function(e){var n=function(){var n=arguments;return t(function(t){return t.apply(null,n)},e)};return arguments.length>1?n.apply(null,D(arguments,1)):re(ii(gr("length",e)),n)}},Di=Or(Bi(r)),Ni=Or(Bi(i)),qi=d(function(t,e){return dr("ap",t)?t.ap(e):vr(function(t,n){return c(t,ti(n,e))},[],t)}),Ui=Or(function(t){return t.apply(this,D(arguments,1))}),Wi=d(sr("chain",function(t,e){return Mi(M(t,e))})),Gi=Jr(1,"charAt"),Vi=Jr(1,"charCodeAt"),Hi=m(function(t,e,n){function r(e,n){return qi(ti(wr,t(n)),e)}return vr(r,e([]),n)}),zi=d(function(t,e){if(t>10)throw new Error("Constructor with greater than ten arguments");return 0===t?function(){return new e}:Or(rn(t,function(t,n,r,i,o,s,a,u,c,l){switch(arguments.length){case 1:return new e(t);case 2:return new e(t,n);case 3:return new e(t,n,r);case 4:return new e(t,n,r,i);case 5:return new e(t,n,r,i,o);case 6:return new e(t,n,r,i,o,s);case 7:return new e(t,n,r,i,o,s,a);case 8:return new e(t,n,r,i,o,s,a,u);case 9:return new e(t,n,r,i,o,s,a,u,c);case 10:return new e(t,n,r,i,o,s,a,u,c,l)}}))}),Yi=d(function(t,e){return Li(t,e,[],[])}),Xi=d(function(t,e){return Fi(Fi({},e),ni(function(t,n){return t(e[n])},t))}),$i=p(x(Qr)),Ji=gi(0,-1),Ki=d(function(t,e){return Oi(v(Wr(ur)(t),e))}),Qi=p(function(t){for(var e=Qr(t),n=e.length,r=-1,i={};++r<n;){var o=e[r],s=t[o],a=_(s,i)?i[s]:i[s]=[];a[a.length]=o}return i}),Zi=p(function(t){for(var e=Qr(t),n=e.length,r=-1,i={};++r<n;){var o=e[r];i[t[o]]=o}return i}),to=d(function(t,e){var n=pe(t,e);return pe(t,function(){return vr(qi,ti(n,arguments[0]),D(arguments,1))})}),eo=d(function(t,e){return Fi(Fi({},t),e)}),no=p(function(t){return pi(eo,{},t)}),ro=pi(R,1),io=Ri(M,yn,Oe),oo=d(Er(Oi,c)),so=function(){var t={init:Array,step:function(t,e){return c(t,[e])},result:T},e={init:String,step:n,result:T},r={init:Object,step:function(t,e){return eo(t,Fe(e)?h(e[0],e[1]):e)},result:T};return function(n){if(j(n))return n;if(Fe(n))return t;if("string"==typeof n)return e;if("object"==typeof n)return r;throw new Error("Cannot create transformer for "+n)}}(),ao=Hi(ti(Oe)),uo=p(function(t){return zi(t.length,t)}),co=m(function(t,e,n){return j(t)?vr(e(t),t.init(),n):vr(e(so(t)),t,n)}),lo=p(function(t){return to(t.length,t)}),ho={F:er,T:nr,__:e,add:Q,all:br,allPass:Di,always:Z,and:te,any:xr,anyPass:Ni,ap:qi,aperture:ee,append:wr,apply:ne,arity:re,assoc:ie,assocPath:_r,binary:Tr,bind:oe,both:se,call:Ui,chain:Wi,charAt:Gi,charCodeAt:Vi,clone:Sr,commute:ao,commuteMap:Hi,comparator:ae,complement:ue,compose:Er,composeP:Cr,concat:Ar,cond:ce,construct:uo,constructN:zi,contains:jr,containsWith:le,converge:kr,countBy:he,createMapEntry:fe,curry:Or,curryN:pe,dec:de,defaultTo:me,difference:Mr,differenceWith:ge,dissoc:ve,dissocPath:Rr,divide:ye,drop:Pr,dropWhile:Ir,either:be,empty:Lr,eq:xe,eqDeep:Yi,eqProps:we,evolve:Xi,filter:Fr,filterIndexed:_e,find:Br,findIndex:Dr,findLast:Nr,findLastIndex:qr,flatten:Ur,flip:Wr,forEach:Te,forEachIndexed:Se,fromPairs:Ee,func:Gr,functions:$i,functionsIn:Vr,groupBy:Hr,gt:Ce,gte:Ae,has:je,hasIn:ke,head:zr,identity:Oe,ifElse:Me,inc:Re,indexOf:Pe,init:Ji,insert:Yr,insertAll:Ie,intersection:Ki,intersectionWith:Xr,into:co,invert:Qi,invertObj:Zi,invoke:$r,invoker:Jr,is:Le,isArrayLike:Fe,isEmpty:Be,isNaN:De,isNil:Ne,isSet:qe,join:Kr,keys:Qr,keysIn:Ue,last:Zr,lastIndexOf:We,length:Ge,lens:Ve,lensOn:He,lift:lo,liftN:to,lt:ze,lte:Ye,map:ti,mapAccum:Xe,mapAccumRight:$e,mapIndexed:Je,mapObj:ei,mapObjIndexed:ni,match:ri,mathMod:Ke,max:ii,maxBy:Qe,memoize:Ze,merge:eo,mergeAll:no,min:oi,minBy:tn,modulo:en,multiply:nn,nAry:rn,negate:on,none:si,not:sn,nth:an,nthArg:un,nthChar:cn,nthCharCode:ln,of:hn,omit:fn,once:pn,or:dn,partial:ai,partialRight:ui,partition:ci,path:mn,pathEq:gn,pick:vn,pickAll:yn,pickBy:bn,pipe:li,pipeP:hi,pluck:fi,prepend:xn,product:ro,project:io,prop:wn,propEq:_n,propOr:Tn,props:Sn,range:En,reduce:pi,reduceIndexed:Cn,reduceRight:An,reduceRightIndexed:jn,reject:di,rejectIndexed:kn,remove:On,repeat:mi,replace:Mn,reverse:Rn,scan:Pn,slice:gi,sort:vi,sortBy:In,split:yi,strIndexOf:Ln,strLastIndexOf:Fn,substring:bi,substringFrom:xi,substringTo:wi,subtract:Bn,sum:_i,tail:Ti,take:Si,takeWhile:Ei,tap:Dn,test:Nn,times:qn,toLower:Ci,toPairs:Un,toPairsIn:Wn,toUpper:Ai,transduce:ji,trim:Gn,type:Vn,unapply:Hn,unary:zn,unfold:Yn,union:oo,unionWith:ki,uniq:Oi,uniqWith:Xn,unnest:Mi,useWith:Ri,values:Pi,valuesIn:$n,where:Ii,wrap:Jn,xprod:Kn,zip:Qn,zipObj:Zn,zipWith:tr};t.exports=ho}).call(this)},function(t,e){/**
	 * @license
	 * pixi.js - v2.2.7
	 * Copyright (c) 2012-2014, Mat Groves
	 * http://goodboydigital.com/
	 *
	 * Compiled: 2015-02-25
	 *
	 * pixi.js is licensed under the MIT License.
	 * http://www.opensource.org/licenses/mit-license.php
	 */
(function(){var n=n||{};n.WEBGL_RENDERER=0,n.CANVAS_RENDERER=1,n.VERSION="v2.2.7",n.blendModes={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},n.scaleModes={DEFAULT:0,LINEAR:0,NEAREST:1},n._UID=0,"undefined"!=typeof Float32Array?(n.Float32Array=Float32Array,n.Uint16Array=Uint16Array,n.Uint32Array=Uint32Array,n.ArrayBuffer=ArrayBuffer):(n.Float32Array=Array,n.Uint16Array=Array),n.INTERACTION_FREQUENCY=30,n.AUTO_PREVENT_DEFAULT=!0,n.PI_2=2*Math.PI,n.RAD_TO_DEG=180/Math.PI,n.DEG_TO_RAD=Math.PI/180,n.RETINA_PREFIX="@2x",n.dontSayHello=!1,n.defaultRenderOptions={view:null,transparent:!1,antialias:!1,preserveDrawingBuffer:!1,resolution:1,clearBeforeRender:!0,autoResize:!1},n.sayHello=function(t){if(!n.dontSayHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["%c %c %c Pixi.js "+n.VERSION+" - "+t+"  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ ","background: #ff66a5","background: #ff66a5","color: #ff66a5; background: #030307;","background: #ff66a5","background: #ffc3dc","background: #ff66a5","color: #ff2424; background: #fff","color: #ff2424; background: #fff","color: #ff2424; background: #fff"];console.log.apply(console,e)}else window.console&&console.log("Pixi.js "+n.VERSION+" - http://www.pixijs.com/");n.dontSayHello=!0}},n.Point=function(t,e){this.x=t||0,this.y=e||0},n.Point.prototype.clone=function(){return new n.Point(this.x,this.y)},n.Point.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},n.Point.prototype.constructor=n.Point,n.Rectangle=function(t,e,n,r){this.x=t||0,this.y=e||0,this.width=n||0,this.height=r||0},n.Rectangle.prototype.clone=function(){return new n.Rectangle(this.x,this.y,this.width,this.height)},n.Rectangle.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var n=this.x;if(t>=n&&t<=n+this.width){var r=this.y;if(e>=r&&e<=r+this.height)return!0}return!1},n.Rectangle.prototype.constructor=n.Rectangle,n.EmptyRectangle=new n.Rectangle(0,0,0,0),n.Polygon=function(t){if(t instanceof Array||(t=Array.prototype.slice.call(arguments)),t[0]instanceof n.Point){for(var e=[],r=0,i=t.length;i>r;r++)e.push(t[r].x,t[r].y);t=e}this.closed=!0,this.points=t},n.Polygon.prototype.clone=function(){var t=this.points.slice();return new n.Polygon(t)},n.Polygon.prototype.contains=function(t,e){for(var n=!1,r=this.points.length/2,i=0,o=r-1;r>i;o=i++){var s=this.points[2*i],a=this.points[2*i+1],u=this.points[2*o],c=this.points[2*o+1],l=a>e!=c>e&&(u-s)*(e-a)/(c-a)+s>t;l&&(n=!n)}return n},n.Polygon.prototype.constructor=n.Polygon,n.Circle=function(t,e,n){this.x=t||0,this.y=e||0,this.radius=n||0},n.Circle.prototype.clone=function(){return new n.Circle(this.x,this.y,this.radius)},n.Circle.prototype.contains=function(t,e){if(this.radius<=0)return!1;var n=this.x-t,r=this.y-e,i=this.radius*this.radius;return n*=n,r*=r,i>=n+r},n.Circle.prototype.getBounds=function(){return new n.Rectangle(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},n.Circle.prototype.constructor=n.Circle,n.Ellipse=function(t,e,n,r){this.x=t||0,this.y=e||0,this.width=n||0,this.height=r||0},n.Ellipse.prototype.clone=function(){return new n.Ellipse(this.x,this.y,this.width,this.height)},n.Ellipse.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var n=(t-this.x)/this.width,r=(e-this.y)/this.height;return n*=n,r*=r,1>=n+r},n.Ellipse.prototype.getBounds=function(){return new n.Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)},n.Ellipse.prototype.constructor=n.Ellipse,n.RoundedRectangle=function(t,e,n,r,i){this.x=t||0,this.y=e||0,this.width=n||0,this.height=r||0,this.radius=i||20},n.RoundedRectangle.prototype.clone=function(){return new n.RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},n.RoundedRectangle.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var n=this.x;if(t>=n&&t<=n+this.width){var r=this.y;if(e>=r&&e<=r+this.height)return!0}return!1},n.RoundedRectangle.prototype.constructor=n.RoundedRectangle,n.Matrix=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0},n.Matrix.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},n.Matrix.prototype.toArray=function(t){this.array||(this.array=new n.Float32Array(9));var e=this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty,e[8]=1):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0,e[8]=1),e},n.Matrix.prototype.apply=function(t,e){return e=e||new n.Point,e.x=this.a*t.x+this.c*t.y+this.tx,e.y=this.b*t.x+this.d*t.y+this.ty,e},n.Matrix.prototype.applyInverse=function(t,e){e=e||new n.Point;var r=1/(this.a*this.d+this.c*-this.b);return e.x=this.d*r*t.x+-this.c*r*t.y+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t.y+-this.b*r*t.x+(-this.ty*this.a+this.tx*this.b)*r,e},n.Matrix.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},n.Matrix.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},n.Matrix.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),r=this.a,i=this.c,o=this.tx;return this.a=r*e-this.b*n,this.b=r*n+this.b*e,this.c=i*e-this.d*n,this.d=i*n+this.d*e,this.tx=o*e-this.ty*n,this.ty=o*n+this.ty*e,this},n.Matrix.prototype.append=function(t){var e=this.a,n=this.b,r=this.c,i=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*n+t.b*i,this.c=t.c*e+t.d*r,this.d=t.c*n+t.d*i,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*n+t.ty*i+this.ty,this},n.Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},n.identityMatrix=new n.Matrix,n.DisplayObject=function(){this.position=new n.Point,this.scale=new n.Point(1,1),this.pivot=new n.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.buttonMode=!1,this.renderable=!1,this.parent=null,this.stage=null,this.worldAlpha=1,this._interactive=!1,this.defaultCursor="pointer",this.worldTransform=new n.Matrix,this._sr=0,this._cr=1,this.filterArea=null,this._bounds=new n.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cacheIsDirty=!1},n.DisplayObject.prototype.constructor=n.DisplayObject,Object.defineProperty(n.DisplayObject.prototype,"interactive",{get:function(){return this._interactive},set:function(t){this._interactive=t,this.stage&&(this.stage.dirty=!0)}}),Object.defineProperty(n.DisplayObject.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}}),Object.defineProperty(n.DisplayObject.prototype,"mask",{get:function(){return this._mask},set:function(t){this._mask&&(this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.isMask=!0)}}),Object.defineProperty(n.DisplayObject.prototype,"filters",{get:function(){return this._filters},set:function(t){if(t){for(var e=[],n=0;n<t.length;n++)for(var r=t[n].passes,i=0;i<r.length;i++)e.push(r[i]);this._filterBlock={target:this,filterPasses:e}}this._filters=t}}),Object.defineProperty(n.DisplayObject.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap!==t&&(t?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=t)}}),n.DisplayObject.prototype.updateTransform=function(){var t,e,r,i,o,s,a=this.parent.worldTransform,u=this.worldTransform;this.rotation%n.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),t=this._cr*this.scale.x,e=this._sr*this.scale.x,r=-this._sr*this.scale.y,i=this._cr*this.scale.y,o=this.position.x,s=this.position.y,(this.pivot.x||this.pivot.y)&&(o-=this.pivot.x*t+this.pivot.y*r,s-=this.pivot.x*e+this.pivot.y*i),u.a=t*a.a+e*a.c,u.b=t*a.b+e*a.d,u.c=r*a.a+i*a.c,u.d=r*a.b+i*a.d,u.tx=o*a.a+s*a.c+a.tx,u.ty=o*a.b+s*a.d+a.ty):(t=this.scale.x,i=this.scale.y,o=this.position.x-this.pivot.x*t,s=this.position.y-this.pivot.y*i,u.a=t*a.a,u.b=t*a.b,u.c=i*a.c,u.d=i*a.d,u.tx=o*a.a+s*a.c+a.tx,u.ty=o*a.b+s*a.d+a.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha},n.DisplayObject.prototype.displayObjectUpdateTransform=n.DisplayObject.prototype.updateTransform,n.DisplayObject.prototype.getBounds=function(t){return t=t,n.EmptyRectangle},n.DisplayObject.prototype.getLocalBounds=function(){return this.getBounds(n.identityMatrix)},n.DisplayObject.prototype.setStageReference=function(t){this.stage=t,this._interactive&&(this.stage.dirty=!0)},n.DisplayObject.prototype.generateTexture=function(t,e,r){var i=this.getLocalBounds(),o=new n.RenderTexture(0|i.width,0|i.height,r,e,t);return n.DisplayObject._tempMatrix.tx=-i.x,n.DisplayObject._tempMatrix.ty=-i.y,o.render(this,n.DisplayObject._tempMatrix),o},n.DisplayObject.prototype.updateCache=function(){this._generateCachedSprite()},n.DisplayObject.prototype.toGlobal=function(t){return this.displayObjectUpdateTransform(),this.worldTransform.apply(t)},n.DisplayObject.prototype.toLocal=function(t,e){return e&&(t=e.toGlobal(t)),this.displayObjectUpdateTransform(),this.worldTransform.applyInverse(t)},n.DisplayObject.prototype._renderCachedSprite=function(t){this._cachedSprite.worldAlpha=this.worldAlpha,t.gl?n.Sprite.prototype._renderWebGL.call(this._cachedSprite,t):n.Sprite.prototype._renderCanvas.call(this._cachedSprite,t)},n.DisplayObject.prototype._generateCachedSprite=function(){this._cacheAsBitmap=!1;var t=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.texture.resize(0|t.width,0|t.height);else{var e=new n.RenderTexture(0|t.width,0|t.height);this._cachedSprite=new n.Sprite(e),this._cachedSprite.worldTransform=this.worldTransform}var r=this._filters;this._filters=null,this._cachedSprite.filters=r,n.DisplayObject._tempMatrix.tx=-t.x,n.DisplayObject._tempMatrix.ty=-t.y,this._cachedSprite.texture.render(this,n.DisplayObject._tempMatrix,!0),this._cachedSprite.anchor.x=-(t.x/t.width),this._cachedSprite.anchor.y=-(t.y/t.height),this._filters=r,this._cacheAsBitmap=!0},n.DisplayObject.prototype._destroyCachedSprite=function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)},n.DisplayObject.prototype._renderWebGL=function(t){t=t},n.DisplayObject.prototype._renderCanvas=function(t){t=t},n.DisplayObject._tempMatrix=new n.Matrix,Object.defineProperty(n.DisplayObject.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t}}),Object.defineProperty(n.DisplayObject.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t}}),n.DisplayObjectContainer=function(){n.DisplayObject.call(this),this.children=[]},n.DisplayObjectContainer.prototype=Object.create(n.DisplayObject.prototype),n.DisplayObjectContainer.prototype.constructor=n.DisplayObjectContainer,Object.defineProperty(n.DisplayObjectContainer.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}}),Object.defineProperty(n.DisplayObjectContainer.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}),n.DisplayObjectContainer.prototype.addChild=function(t){return this.addChildAt(t,this.children.length)},n.DisplayObjectContainer.prototype.addChildAt=function(t,e){if(e>=0&&e<=this.children.length)return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),this.stage&&t.setStageReference(this.stage),t;throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length)},n.DisplayObjectContainer.prototype.swapChildren=function(t,e){if(t!==e){var n=this.getChildIndex(t),r=this.getChildIndex(e);if(0>n||0>r)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.children[n]=e,this.children[r]=t}},n.DisplayObjectContainer.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},n.DisplayObjectContainer.prototype.setChildIndex=function(t,e){if(0>e||e>=this.children.length)throw new Error("The supplied index is out of bounds");var n=this.getChildIndex(t);this.children.splice(n,1),this.children.splice(e,0,t)},n.DisplayObjectContainer.prototype.getChildAt=function(t){if(0>t||t>=this.children.length)throw new Error("getChildAt: Supplied index "+t+" does not exist in the child list, or the supplied DisplayObject must be a child of the caller");return this.children[t]},n.DisplayObjectContainer.prototype.removeChild=function(t){var e=this.children.indexOf(t);if(-1!==e)return this.removeChildAt(e)},n.DisplayObjectContainer.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return this.stage&&e.removeStageReference(),e.parent=void 0,this.children.splice(t,1),e},n.DisplayObjectContainer.prototype.removeChildren=function(t,e){var n=t||0,r="number"==typeof e?e:this.children.length,i=r-n;if(i>0&&r>=i){for(var o=this.children.splice(n,i),s=0;s<o.length;s++){var a=o[s];this.stage&&a.removeStageReference(),a.parent=void 0}return o}if(0===i&&0===this.children.length)return[];throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range")},n.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible&&(this.displayObjectUpdateTransform(),!this._cacheAsBitmap))for(var t=0,e=this.children.length;e>t;t++)this.children[t].updateTransform()},n.DisplayObjectContainer.prototype.displayObjectContainerUpdateTransform=n.DisplayObjectContainer.prototype.updateTransform,n.DisplayObjectContainer.prototype.getBounds=function(){if(0===this.children.length)return n.EmptyRectangle;for(var t,e,r,i=1/0,o=1/0,s=-1/0,a=-1/0,u=!1,c=0,l=this.children.length;l>c;c++){var h=this.children[c];h.visible&&(u=!0,t=this.children[c].getBounds(),i=i<t.x?i:t.x,o=o<t.y?o:t.y,e=t.width+t.x,r=t.height+t.y,s=s>e?s:e,a=a>r?a:r)}if(!u)return n.EmptyRectangle;var f=this._bounds;return f.x=i,f.y=o,f.width=s-i,f.height=a-o,f},n.DisplayObjectContainer.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=n.identityMatrix;for(var e=0,r=this.children.length;r>e;e++)this.children[e].updateTransform();var i=this.getBounds();return this.worldTransform=t,i},n.DisplayObjectContainer.prototype.setStageReference=function(t){this.stage=t,this._interactive&&(this.stage.dirty=!0);for(var e=0,n=this.children.length;n>e;e++){var r=this.children[e];r.setStageReference(t)}},n.DisplayObjectContainer.prototype.removeStageReference=function(){for(var t=0,e=this.children.length;e>t;t++){var n=this.children[t];n.removeStageReference()}this._interactive&&(this.stage.dirty=!0),this.stage=null},n.DisplayObjectContainer.prototype._renderWebGL=function(t){if(this.visible&&!(this.alpha<=0)){if(this._cacheAsBitmap)return void this._renderCachedSprite(t);var e,n;if(this._mask||this._filters){for(this._filters&&(t.spriteBatch.flush(),t.filterManager.pushFilter(this._filterBlock)),this._mask&&(t.spriteBatch.stop(),t.maskManager.pushMask(this.mask,t),t.spriteBatch.start()),e=0,n=this.children.length;n>e;e++)this.children[e]._renderWebGL(t);t.spriteBatch.stop(),this._mask&&t.maskManager.popMask(this._mask,t),this._filters&&t.filterManager.popFilter(),t.spriteBatch.start()}else for(e=0,n=this.children.length;n>e;e++)this.children[e]._renderWebGL(t)}},n.DisplayObjectContainer.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha){if(this._cacheAsBitmap)return void this._renderCachedSprite(t);this._mask&&t.maskManager.pushMask(this._mask,t);for(var e=0,n=this.children.length;n>e;e++){var r=this.children[e];r._renderCanvas(t)}this._mask&&t.maskManager.popMask(t)}},n.Sprite=function(t){n.DisplayObjectContainer.call(this),this.anchor=new n.Point,this.texture=t||n.Texture.emptyTexture,this._width=0,this._height=0,this.tint=16777215,this.blendMode=n.blendModes.NORMAL,this.shader=null,this.texture.baseTexture.hasLoaded?this.onTextureUpdate():this.texture.on("update",this.onTextureUpdate.bind(this)),this.renderable=!0},n.Sprite.prototype=Object.create(n.DisplayObjectContainer.prototype),n.Sprite.prototype.constructor=n.Sprite,Object.defineProperty(n.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(n.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),n.Sprite.prototype.setTexture=function(t){this.texture=t,this.cachedTint=16777215},n.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},n.Sprite.prototype.getBounds=function(t){var e=this.texture.frame.width,n=this.texture.frame.height,r=e*(1-this.anchor.x),i=e*-this.anchor.x,o=n*(1-this.anchor.y),s=n*-this.anchor.y,a=t||this.worldTransform,u=a.a,c=a.b,l=a.c,h=a.d,f=a.tx,p=a.ty,d=-1/0,m=-1/0,g=1/0,v=1/0;if(0===c&&0===l)0>u&&(u*=-1),0>h&&(h*=-1),g=u*i+f,d=u*r+f,v=h*s+p,m=h*o+p;else{var y=u*i+l*s+f,b=h*s+c*i+p,x=u*r+l*s+f,w=h*s+c*r+p,_=u*r+l*o+f,T=h*o+c*r+p,S=u*i+l*o+f,E=h*o+c*i+p;g=g>y?y:g,g=g>x?x:g,g=g>_?_:g,g=g>S?S:g,v=v>b?b:v,v=v>w?w:v,v=v>T?T:v,v=v>E?E:v,d=y>d?y:d,d=x>d?x:d,d=_>d?_:d,d=S>d?S:d,m=b>m?b:m,m=w>m?w:m,m=T>m?T:m,m=E>m?E:m}var C=this._bounds;return C.x=g,C.width=d-g,C.y=v,C.height=m-v,this._currentBounds=C,C},n.Sprite.prototype._renderWebGL=function(t){if(this.visible&&!(this.alpha<=0)){var e,n;if(this._mask||this._filters){var r=t.spriteBatch;for(this._filters&&(r.flush(),t.filterManager.pushFilter(this._filterBlock)),this._mask&&(r.stop(),t.maskManager.pushMask(this.mask,t),r.start()),r.render(this),e=0,n=this.children.length;n>e;e++)this.children[e]._renderWebGL(t);r.stop(),this._mask&&t.maskManager.popMask(this._mask,t),this._filters&&t.filterManager.popFilter(),r.start()}else for(t.spriteBatch.render(this),e=0,n=this.children.length;n>e;e++)this.children[e]._renderWebGL(t)}},n.Sprite.prototype._renderCanvas=function(t){if(!(this.visible===!1||0===this.alpha||this.texture.crop.width<=0||this.texture.crop.height<=0)){if(this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,t.context.globalCompositeOperation=n.blendModesCanvas[t.currentBlendMode]),this._mask&&t.maskManager.pushMask(this._mask,t),this.texture.valid){var e=this.texture.baseTexture.resolution/t.resolution;t.context.globalAlpha=this.worldAlpha,t.smoothProperty&&t.scaleMode!==this.texture.baseTexture.scaleMode&&(t.scaleMode=this.texture.baseTexture.scaleMode,t.context[t.smoothProperty]=t.scaleMode===n.scaleModes.LINEAR);var r=this.texture.trim?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture.frame.width,i=this.texture.trim?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture.frame.height;t.roundPixels?(t.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*t.resolution|0,this.worldTransform.ty*t.resolution|0),r=0|r,i=0|i):t.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*t.resolution,this.worldTransform.ty*t.resolution),16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=n.CanvasTinter.getTintedTexture(this,this.tint)),t.context.drawImage(this.tintedTexture,0,0,this.texture.crop.width,this.texture.crop.height,r/e,i/e,this.texture.crop.width/e,this.texture.crop.height/e)):t.context.drawImage(this.texture.baseTexture.source,this.texture.crop.x,this.texture.crop.y,this.texture.crop.width,this.texture.crop.height,r/e,i/e,this.texture.crop.width/e,this.texture.crop.height/e)}for(var o=0,s=this.children.length;s>o;o++)this.children[o]._renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},n.Sprite.fromFrame=function(t){var e=n.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache'+this);return new n.Sprite(e)},n.Sprite.fromImage=function(t,e,r){var i=n.Texture.fromImage(t,e,r);return new n.Sprite(i)},n.SpriteBatch=function(t){n.DisplayObjectContainer.call(this),this.textureThing=t,this.ready=!1},n.SpriteBatch.prototype=Object.create(n.DisplayObjectContainer.prototype),n.SpriteBatch.prototype.constructor=n.SpriteBatch,n.SpriteBatch.prototype.initWebGL=function(t){this.fastSpriteBatch=new n.WebGLFastSpriteBatch(t),this.ready=!0},n.SpriteBatch.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},n.SpriteBatch.prototype._renderWebGL=function(t){!this.visible||this.alpha<=0||!this.children.length||(this.ready||this.initWebGL(t.gl),this.fastSpriteBatch.gl!==t.gl&&this.fastSpriteBatch.setContext(t.gl),t.spriteBatch.stop(),t.shaderManager.setShader(t.shaderManager.fastShader),this.fastSpriteBatch.begin(this,t),this.fastSpriteBatch.render(this),t.spriteBatch.start())},n.SpriteBatch.prototype._renderCanvas=function(t){if(this.visible&&!(this.alpha<=0)&&this.children.length){var e=t.context;e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var n=this.worldTransform,r=!0,i=0;i<this.children.length;i++){var o=this.children[i];if(o.visible){var s=o.texture,a=s.frame;if(e.globalAlpha=this.worldAlpha*o.alpha,o.rotation%(2*Math.PI)===0)r&&(e.setTransform(n.a,n.b,n.c,n.d,n.tx,n.ty),r=!1),e.drawImage(s.baseTexture.source,a.x,a.y,a.width,a.height,o.anchor.x*-a.width*o.scale.x+o.position.x+.5|0,o.anchor.y*-a.height*o.scale.y+o.position.y+.5|0,a.width*o.scale.x,a.height*o.scale.y);else{r||(r=!0),o.displayObjectUpdateTransform();var u=o.worldTransform;t.roundPixels?e.setTransform(u.a,u.b,u.c,u.d,0|u.tx,0|u.ty):e.setTransform(u.a,u.b,u.c,u.d,u.tx,u.ty),e.drawImage(s.baseTexture.source,a.x,a.y,a.width,a.height,o.anchor.x*-a.width+.5|0,o.anchor.y*-a.height+.5|0,a.width,a.height)}}}}},n.MovieClip=function(t){n.Sprite.call(this,t[0]),this.textures=t,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this.currentFrame=0,this.playing=!1},n.MovieClip.prototype=Object.create(n.Sprite.prototype),n.MovieClip.prototype.constructor=n.MovieClip,Object.defineProperty(n.MovieClip.prototype,"totalFrames",{get:function(){return this.textures.length}}),n.MovieClip.prototype.stop=function(){this.playing=!1},n.MovieClip.prototype.play=function(){this.playing=!0},n.MovieClip.prototype.gotoAndStop=function(t){this.playing=!1,this.currentFrame=t;var e=this.currentFrame+.5|0;this.setTexture(this.textures[e%this.textures.length])},n.MovieClip.prototype.gotoAndPlay=function(t){this.currentFrame=t,this.playing=!0},n.MovieClip.prototype.updateTransform=function(){if(this.displayObjectContainerUpdateTransform(),this.playing){this.currentFrame+=this.animationSpeed;var t=this.currentFrame+.5|0;this.currentFrame=this.currentFrame%this.textures.length,this.loop||t<this.textures.length?this.setTexture(this.textures[t%this.textures.length]):t>=this.textures.length&&(this.gotoAndStop(this.textures.length-1),this.onComplete&&this.onComplete())}},n.MovieClip.fromFrames=function(t){for(var e=[],r=0;r<t.length;r++)e.push(new n.Texture.fromFrame(t[r]));return new n.MovieClip(e)},n.MovieClip.fromImages=function(t){for(var e=[],r=0;r<t.length;r++)e.push(new n.Texture.fromImage(t[r]));return new n.MovieClip(e)},n.FilterBlock=function(){this.visible=!0,this.renderable=!0},n.FilterBlock.prototype.constructor=n.FilterBlock,n.Text=function(t,e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=1,n.Sprite.call(this,n.Texture.fromCanvas(this.canvas)),this.setText(t),this.setStyle(e)},n.Text.prototype=Object.create(n.Sprite.prototype),n.Text.prototype.constructor=n.Text,Object.defineProperty(n.Text.prototype,"width",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(n.Text.prototype,"height",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),n.Text.prototype.setStyle=function(t){t=t||{},t.font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.wordWrapWidth=t.wordWrapWidth||100,t.dropShadow=t.dropShadow||!1,t.dropShadowAngle=t.dropShadowAngle||Math.PI/6,t.dropShadowDistance=t.dropShadowDistance||4,t.dropShadowColor=t.dropShadowColor||"black",this.style=t,this.dirty=!0},n.Text.prototype.setText=function(t){this.text=t.toString()||" ",this.dirty=!0},n.Text.prototype.updateText=function(){this.texture.baseTexture.resolution=this.resolution,this.context.font=this.style.font;var t=this.text;this.style.wordWrap&&(t=this.wordWrap(this.text));for(var e=t.split(/(?:\r\n|\r|\n)/),n=[],r=0,i=this.determineFontProperties(this.style.font),o=0;o<e.length;o++){var s=this.context.measureText(e[o]).width;n[o]=s,r=Math.max(r,s)}var a=r+this.style.strokeThickness;this.style.dropShadow&&(a+=this.style.dropShadowDistance),this.canvas.width=(a+this.context.lineWidth)*this.resolution;var u=i.fontSize+this.style.strokeThickness,c=u*e.length;this.style.dropShadow&&(c+=this.style.dropShadowDistance),this.canvas.height=c*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline="alphabetic";var l,h;if(this.style.dropShadow){this.context.fillStyle=this.style.dropShadowColor;var f=Math.sin(this.style.dropShadowAngle)*this.style.dropShadowDistance,p=Math.cos(this.style.dropShadowAngle)*this.style.dropShadowDistance;for(o=0;o<e.length;o++)l=this.style.strokeThickness/2,h=this.style.strokeThickness/2+o*u+i.ascent,"right"===this.style.align?l+=r-n[o]:"center"===this.style.align&&(l+=(r-n[o])/2),this.style.fill&&this.context.fillText(e[o],l+f,h+p)}for(this.context.fillStyle=this.style.fill,o=0;o<e.length;o++)l=this.style.strokeThickness/2,h=this.style.strokeThickness/2+o*u+i.ascent,"right"===this.style.align?l+=r-n[o]:"center"===this.style.align&&(l+=(r-n[o])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(e[o],l,h),this.style.fill&&this.context.fillText(e[o],l,h);this.updateTexture()},n.Text.prototype.updateTexture=function(){this.texture.baseTexture.width=this.canvas.width,this.texture.baseTexture.height=this.canvas.height,this.texture.crop.width=this.texture.frame.width=this.canvas.width,this.texture.crop.height=this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height,this.texture.baseTexture.dirty()},n.Text.prototype._renderWebGL=function(t){this.dirty&&(this.resolution=t.resolution,this.updateText(),this.dirty=!1),n.Sprite.prototype._renderWebGL.call(this,t)},n.Text.prototype._renderCanvas=function(t){this.dirty&&(this.resolution=t.resolution,this.updateText(),this.dirty=!1),n.Sprite.prototype._renderCanvas.call(this,t)},n.Text.prototype.determineFontProperties=function(t){var e=n.Text.fontPropertiesCache[t];if(!e){e={};var r=n.Text.fontPropertiesCanvas,i=n.Text.fontPropertiesContext;i.font=t;var o=Math.ceil(i.measureText("|Mq").width),s=Math.ceil(i.measureText("M").width),a=2*s;s=1.4*s|0,r.width=o,r.height=a,i.fillStyle="#f00",i.fillRect(0,0,o,a),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText("|MÉq",0,s);var u,c,l=i.getImageData(0,0,o,a).data,h=l.length,f=4*o,p=0,d=!1;for(u=0;s>u;u++){for(c=0;f>c;c+=4)if(255!==l[p+c]){d=!0;break}if(d)break;p+=f}for(e.ascent=s-u,p=h-f,d=!1,u=a;u>s;u--){for(c=0;f>c;c+=4)if(255!==l[p+c]){d=!0;break}if(d)break;p-=f}e.descent=u-s,e.descent+=6,e.fontSize=e.ascent+e.descent,n.Text.fontPropertiesCache[t]=e}return e},n.Text.prototype.wordWrap=function(t){for(var e="",n=t.split("\n"),r=0;r<n.length;r++){for(var i=this.style.wordWrapWidth,o=n[r].split(" "),s=0;s<o.length;s++){var a=this.context.measureText(o[s]).width,u=a+this.context.measureText(" ").width;0===s||u>i?(s>0&&(e+="\n"),e+=o[s],i=this.style.wordWrapWidth-a):(i-=u,e+=" "+o[s])}r<n.length-1&&(e+="\n")}return e},n.Text.prototype.getBounds=function(t){return this.dirty&&(this.updateText(),this.dirty=!1),n.Sprite.prototype.getBounds.call(this,t)},n.Text.prototype.destroy=function(t){this.context=null,this.canvas=null,this.texture.destroy(void 0===t?!0:t)},n.Text.fontPropertiesCache={},n.Text.fontPropertiesCanvas=document.createElement("canvas"),n.Text.fontPropertiesContext=n.Text.fontPropertiesCanvas.getContext("2d"),n.BitmapText=function(t,e){n.DisplayObjectContainer.call(this),this.textWidth=0,this.textHeight=0,this._pool=[],this.setText(t),this.setStyle(e),this.updateText(),this.dirty=!1},n.BitmapText.prototype=Object.create(n.DisplayObjectContainer.prototype),n.BitmapText.prototype.constructor=n.BitmapText,n.BitmapText.prototype.setText=function(t){this.text=t||" ",this.dirty=!0},n.BitmapText.prototype.setStyle=function(t){t=t||{},t.align=t.align||"left",this.style=t;var e=t.font.split(" ");this.fontName=e[e.length-1],this.fontSize=e.length>=2?parseInt(e[e.length-2],10):n.BitmapText.fonts[this.fontName].size,this.dirty=!0,this.tint=t.tint},n.BitmapText.prototype.updateText=function(){for(var t=n.BitmapText.fonts[this.fontName],e=new n.Point,r=null,i=[],o=0,s=[],a=0,u=this.fontSize/t.size,c=0;c<this.text.length;c++){var l=this.text.charCodeAt(c);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(c)))s.push(e.x),o=Math.max(o,e.x),a++,e.x=0,e.y+=t.lineHeight,r=null;else{var h=t.chars[l];h&&(r&&h.kerning[r]&&(e.x+=h.kerning[r]),i.push({texture:h.texture,line:a,charCode:l,position:new n.Point(e.x+h.xOffset,e.y+h.yOffset)}),e.x+=h.xAdvance,r=l)}}s.push(e.x),o=Math.max(o,e.x);var f=[];for(c=0;a>=c;c++){var p=0;"right"===this.style.align?p=o-s[c]:"center"===this.style.align&&(p=(o-s[c])/2),f.push(p)}var d=this.children.length,m=i.length,g=this.tint||16777215;for(c=0;m>c;c++){var v=d>c?this.children[c]:this._pool.pop();v?v.setTexture(i[c].texture):v=new n.Sprite(i[c].texture),v.position.x=(i[c].position.x+f[i[c].line])*u,v.position.y=i[c].position.y*u,v.scale.x=v.scale.y=u,v.tint=g,v.parent||this.addChild(v)}for(;this.children.length>m;){var y=this.getChildAt(this.children.length-1);this._pool.push(y),this.removeChild(y)}this.textWidth=o*u,this.textHeight=(e.y+t.lineHeight)*u},n.BitmapText.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),n.DisplayObjectContainer.prototype.updateTransform.call(this)},n.BitmapText.fonts={},n.InteractionData=function(){this.global=new n.Point,this.target=null,this.originalEvent=null},n.InteractionData.prototype.getLocalPosition=function(t,e){var r=t.worldTransform,i=this.global,o=r.a,s=r.c,a=r.tx,u=r.b,c=r.d,l=r.ty,h=1/(o*c+s*-u);return e=e||new n.Point,e.x=c*h*i.x+-s*h*i.y+(l*s-a*c)*h,e.y=o*h*i.y+-u*h*i.x+(-l*o+a*u)*h,e},n.InteractionData.prototype.constructor=n.InteractionData,n.InteractionManager=function(t){this.stage=t,this.mouse=new n.InteractionData,this.touches={},this.tempPoint=new n.Point,this.mouseoverEnabled=!0,this.pool=[],this.interactiveItems=[],this.interactionDOMElement=null,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchCancel=this.onTouchCancel.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this.mouseOut=!1,this.resolution=1,this._tempPoint=new n.Point
},n.InteractionManager.prototype.constructor=n.InteractionManager,n.InteractionManager.prototype.collectInteractiveSprite=function(t,e){for(var n=t.children,r=n.length,i=r-1;i>=0;i--){var o=n[i];o._interactive?(e.interactiveChildren=!0,this.interactiveItems.push(o),o.children.length>0&&this.collectInteractiveSprite(o,o)):(o.__iParent=null,o.children.length>0&&this.collectInteractiveSprite(o,e))}},n.InteractionManager.prototype.setTarget=function(t){this.target=t,this.resolution=t.resolution,null===this.interactionDOMElement&&this.setTargetDomElement(t.view)},n.InteractionManager.prototype.setTargetDomElement=function(t){this.removeEvents(),window.navigator.msPointerEnabled&&(t.style["-ms-content-zooming"]="none",t.style["-ms-touch-action"]="none"),this.interactionDOMElement=t,t.addEventListener("mousemove",this.onMouseMove,!0),t.addEventListener("mousedown",this.onMouseDown,!0),t.addEventListener("mouseout",this.onMouseOut,!0),t.addEventListener("touchstart",this.onTouchStart,!0),t.addEventListener("touchend",this.onTouchEnd,!0),t.addEventListener("touchleave",this.onTouchCancel,!0),t.addEventListener("touchcancel",this.onTouchCancel,!0),t.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0)},n.InteractionManager.prototype.removeEvents=function(){this.interactionDOMElement&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]="",this.interactionDOMElement.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchleave",this.onTouchCancel,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onTouchCancel,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0))},n.InteractionManager.prototype.update=function(){if(this.target){var t=Date.now(),e=t-this.last;if(e=e*n.INTERACTION_FREQUENCY/1e3,!(1>e)){this.last=t;var r=0;this.dirty&&this.rebuildInteractiveGraph();var i=this.interactiveItems.length,o="inherit",s=!1;for(r=0;i>r;r++){var a=this.interactiveItems[r];a.__hit=this.hitTest(a,this.mouse),this.mouse.target=a,a.__hit&&!s?(a.buttonMode&&(o=a.defaultCursor),a.interactiveChildren||(s=!0),a.__isOver||(a.mouseover&&a.mouseover(this.mouse),a.__isOver=!0)):a.__isOver&&(a.mouseout&&a.mouseout(this.mouse),a.__isOver=!1)}this.currentCursorStyle!==o&&(this.currentCursorStyle=o,this.interactionDOMElement.style.cursor=o)}}},n.InteractionManager.prototype.rebuildInteractiveGraph=function(){this.dirty=!1;for(var t=this.interactiveItems.length,e=0;t>e;e++)this.interactiveItems[e].interactiveChildren=!1;this.interactiveItems=[],this.stage.interactive&&this.interactiveItems.push(this.stage),this.collectInteractiveSprite(this.stage,this.stage)},n.InteractionManager.prototype.onMouseMove=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t;var e=this.interactionDOMElement.getBoundingClientRect();this.mouse.global.x=(t.clientX-e.left)*(this.target.width/e.width)/this.resolution,this.mouse.global.y=(t.clientY-e.top)*(this.target.height/e.height)/this.resolution;for(var n=this.interactiveItems.length,r=0;n>r;r++){var i=this.interactiveItems[r];i.mousemove&&i.mousemove(this.mouse)}},n.InteractionManager.prototype.onMouseDown=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t,n.AUTO_PREVENT_DEFAULT&&this.mouse.originalEvent.preventDefault();for(var e=this.interactiveItems.length,r=this.mouse.originalEvent,i=2===r.button||3===r.which,o=i?"rightdown":"mousedown",s=i?"rightclick":"click",a=i?"__rightIsDown":"__mouseIsDown",u=i?"__isRightDown":"__isDown",c=0;e>c;c++){var l=this.interactiveItems[c];if((l[o]||l[s])&&(l[a]=!0,l.__hit=this.hitTest(l,this.mouse),l.__hit&&(l[o]&&l[o](this.mouse),l[u]=!0,!l.interactiveChildren)))break}},n.InteractionManager.prototype.onMouseOut=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t;var e=this.interactiveItems.length;this.interactionDOMElement.style.cursor="inherit";for(var n=0;e>n;n++){var r=this.interactiveItems[n];r.__isOver&&(this.mouse.target=r,r.mouseout&&r.mouseout(this.mouse),r.__isOver=!1)}this.mouseOut=!0,this.mouse.global.x=-1e4,this.mouse.global.y=-1e4},n.InteractionManager.prototype.onMouseUp=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t;for(var e=this.interactiveItems.length,n=!1,r=this.mouse.originalEvent,i=2===r.button||3===r.which,o=i?"rightup":"mouseup",s=i?"rightclick":"click",a=i?"rightupoutside":"mouseupoutside",u=i?"__isRightDown":"__isDown",c=0;e>c;c++){var l=this.interactiveItems[c];(l[s]||l[o]||l[a])&&(l.__hit=this.hitTest(l,this.mouse),l.__hit&&!n?(l[o]&&l[o](this.mouse),l[u]&&l[s]&&l[s](this.mouse),l.interactiveChildren||(n=!0)):l[u]&&l[a]&&l[a](this.mouse),l[u]=!1)}},n.InteractionManager.prototype.hitTest=function(t,e){var r=e.global;if(!t.worldVisible)return!1;t.worldTransform.applyInverse(r,this._tempPoint);var i,o=this._tempPoint.x,s=this._tempPoint.y;if(e.target=t,t.hitArea&&t.hitArea.contains)return t.hitArea.contains(o,s);if(t instanceof n.Sprite){var a,u=t.texture.frame.width,c=t.texture.frame.height,l=-u*t.anchor.x;if(o>l&&l+u>o&&(a=-c*t.anchor.y,s>a&&a+c>s))return!0}else if(t instanceof n.Graphics){var h=t.graphicsData;for(i=0;i<h.length;i++){var f=h[i];if(f.fill&&f.shape&&f.shape.contains(o,s))return!0}}var p=t.children.length;for(i=0;p>i;i++){var d=t.children[i],m=this.hitTest(d,e);if(m)return e.target=t,!0}return!1},n.InteractionManager.prototype.onTouchMove=function(t){this.dirty&&this.rebuildInteractiveGraph();var e,n=this.interactionDOMElement.getBoundingClientRect(),r=t.changedTouches,i=0;for(i=0;i<r.length;i++){var o=r[i];e=this.touches[o.identifier],e.originalEvent=t,e.global.x=(o.clientX-n.left)*(this.target.width/n.width)/this.resolution,e.global.y=(o.clientY-n.top)*(this.target.height/n.height)/this.resolution,!navigator.isCocoonJS||n.left||n.top||t.target.style.width||t.target.style.height||(e.global.x=o.clientX,e.global.y=o.clientY);for(var s=0;s<this.interactiveItems.length;s++){var a=this.interactiveItems[s];a.touchmove&&a.__touchData&&a.__touchData[o.identifier]&&a.touchmove(e)}}},n.InteractionManager.prototype.onTouchStart=function(t){this.dirty&&this.rebuildInteractiveGraph();var e=this.interactionDOMElement.getBoundingClientRect();n.AUTO_PREVENT_DEFAULT&&t.preventDefault();for(var r=t.changedTouches,i=0;i<r.length;i++){var o=r[i],s=this.pool.pop();s||(s=new n.InteractionData),s.originalEvent=t,this.touches[o.identifier]=s,s.global.x=(o.clientX-e.left)*(this.target.width/e.width)/this.resolution,s.global.y=(o.clientY-e.top)*(this.target.height/e.height)/this.resolution,!navigator.isCocoonJS||e.left||e.top||t.target.style.width||t.target.style.height||(s.global.x=o.clientX,s.global.y=o.clientY);for(var a=this.interactiveItems.length,u=0;a>u;u++){var c=this.interactiveItems[u];if((c.touchstart||c.tap)&&(c.__hit=this.hitTest(c,s),c.__hit&&(c.touchstart&&c.touchstart(s),c.__isDown=!0,c.__touchData=c.__touchData||{},c.__touchData[o.identifier]=s,!c.interactiveChildren)))break}}},n.InteractionManager.prototype.onTouchEnd=function(t){this.dirty&&this.rebuildInteractiveGraph();for(var e=this.interactionDOMElement.getBoundingClientRect(),n=t.changedTouches,r=0;r<n.length;r++){var i=n[r],o=this.touches[i.identifier],s=!1;o.global.x=(i.clientX-e.left)*(this.target.width/e.width)/this.resolution,o.global.y=(i.clientY-e.top)*(this.target.height/e.height)/this.resolution,!navigator.isCocoonJS||e.left||e.top||t.target.style.width||t.target.style.height||(o.global.x=i.clientX,o.global.y=i.clientY);for(var a=this.interactiveItems.length,u=0;a>u;u++){var c=this.interactiveItems[u];c.__touchData&&c.__touchData[i.identifier]&&(c.__hit=this.hitTest(c,c.__touchData[i.identifier]),o.originalEvent=t,(c.touchend||c.tap)&&(c.__hit&&!s?(c.touchend&&c.touchend(o),c.__isDown&&c.tap&&c.tap(o),c.interactiveChildren||(s=!0)):c.__isDown&&c.touchendoutside&&c.touchendoutside(o),c.__isDown=!1),c.__touchData[i.identifier]=null)}this.pool.push(o),this.touches[i.identifier]=null}},n.InteractionManager.prototype.onTouchCancel=function(t){this.dirty&&this.rebuildInteractiveGraph();for(var e=this.interactionDOMElement.getBoundingClientRect(),n=t.changedTouches,r=0;r<n.length;r++){var i=n[r],o=this.touches[i.identifier],s=!1;o.global.x=(i.clientX-e.left)*(this.target.width/e.width)/this.resolution,o.global.y=(i.clientY-e.top)*(this.target.height/e.height)/this.resolution,!navigator.isCocoonJS||e.left||e.top||t.target.style.width||t.target.style.height||(o.global.x=i.clientX,o.global.y=i.clientY);for(var a=this.interactiveItems.length,u=0;a>u;u++){var c=this.interactiveItems[u];c.__touchData&&c.__touchData[i.identifier]&&(c.__hit=this.hitTest(c,c.__touchData[i.identifier]),o.originalEvent=t,c.touchcancel&&!s&&(c.touchcancel(o),c.interactiveChildren||(s=!0)),c.__isDown=!1,c.__touchData[i.identifier]=null)}this.pool.push(o),this.touches[i.identifier]=null}},n.Stage=function(t){n.DisplayObjectContainer.call(this),this.worldTransform=new n.Matrix,this.interactive=!0,this.interactionManager=new n.InteractionManager(this),this.dirty=!0,this.stage=this,this.stage.hitArea=new n.Rectangle(0,0,1e5,1e5),this.setBackgroundColor(t)},n.Stage.prototype=Object.create(n.DisplayObjectContainer.prototype),n.Stage.prototype.constructor=n.Stage,n.Stage.prototype.setInteractionDelegate=function(t){this.interactionManager.setTargetDomElement(t)},n.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var t=0,e=this.children.length;e>t;t++)this.children[t].updateTransform();this.dirty&&(this.dirty=!1,this.interactionManager.dirty=!0),this.interactive&&this.interactionManager.update()},n.Stage.prototype.setBackgroundColor=function(t){this.backgroundColor=t||0,this.backgroundColorSplit=n.hex2rgb(this.backgroundColor);var e=this.backgroundColor.toString(16);e="000000".substr(0,6-e.length)+e,this.backgroundColorString="#"+e},n.Stage.prototype.getMousePosition=function(){return this.interactionManager.mouse.global},function(t){for(var e=0,n=["ms","moz","webkit","o"],r=0;r<n.length&&!t.requestAnimationFrame;++r)t.requestAnimationFrame=t[n[r]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[n[r]+"CancelAnimationFrame"]||t[n[r]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(n){var r=(new Date).getTime(),i=Math.max(0,16-(r-e)),o=t.setTimeout(function(){n(r+i)},i);return e=r+i,o}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)}),t.requestAnimFrame=t.requestAnimationFrame}(this),n.hex2rgb=function(t){return[(t>>16&255)/255,(t>>8&255)/255,(255&t)/255]},n.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]},"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(){return function(t){function e(){for(var r=arguments.length,o=new Array(r);r--;)o[r]=arguments[r];return o=i.concat(o),n.apply(this instanceof e?this:t,o)}var n=this,r=arguments.length-1,i=[];if(r>0)for(i.length=r;r--;)i[r]=arguments[r+1];if("function"!=typeof n)throw new TypeError;return e.prototype=function o(t){return t&&(o.prototype=t),this instanceof o?void 0:new o}(n.prototype),e}}()),n.AjaxRequest=function(){var t=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];if(!window.ActiveXObject)return window.XMLHttpRequest?new window.XMLHttpRequest:!1;for(var e=0;e<t.length;e++)try{return new window.ActiveXObject(t[e])}catch(n){}},n.canUseNewCanvasBlendModes=function(){if("undefined"==typeof document)return!1;var t=document.createElement("canvas");t.width=1,t.height=1;var e=t.getContext("2d");return e.fillStyle="#000",e.fillRect(0,0,1,1),e.globalCompositeOperation="multiply",e.fillStyle="#fff",e.fillRect(0,0,1,1),0===e.getImageData(0,0,1,1).data[0]},n.getNextPowerOfTwo=function(t){if(t>0&&0===(t&t-1))return t;for(var e=1;t>e;)e<<=1;return e},n.isPowerOfTwo=function(t,e){return t>0&&0===(t&t-1)&&e>0&&0===(e&e-1)},n.EventTarget={call:function(t){t&&(t=t.prototype||t,n.EventTarget.mixin(t))},mixin:function(t){t.listeners=function(t){return this._listeners=this._listeners||{},this._listeners[t]?this._listeners[t].slice():[]},t.emit=t.dispatchEvent=function(t,e){if(this._listeners=this._listeners||{},"object"==typeof t&&(e=t,t=t.type),e&&e.__isEventObject===!0||(e=new n.Event(this,t,e)),this._listeners&&this._listeners[t]){var r,i=this._listeners[t].slice(0),o=i.length,s=i[0];for(r=0;o>r;s=i[++r])if(s.call(this,e),e.stoppedImmediate)return this;if(e.stopped)return this}return this.parent&&this.parent.emit&&this.parent.emit.call(this.parent,t,e),this},t.on=t.addEventListener=function(t,e){return this._listeners=this._listeners||{},(this._listeners[t]=this._listeners[t]||[]).push(e),this},t.once=function(t,e){function n(){e.apply(r.off(t,n),arguments)}this._listeners=this._listeners||{};var r=this;return n._originalHandler=e,this.on(t,n)},t.off=t.removeEventListener=function(t,e){if(this._listeners=this._listeners||{},!this._listeners[t])return this;for(var n=this._listeners[t],r=e?n.length:0;r-->0;)(n[r]===e||n[r]._originalHandler===e)&&n.splice(r,1);return 0===n.length&&delete this._listeners[t],this},t.removeAllListeners=function(t){return this._listeners=this._listeners||{},this._listeners[t]?(delete this._listeners[t],this):this}}},n.Event=function(t,e,n){this.__isEventObject=!0,this.stopped=!1,this.stoppedImmediate=!1,this.target=t,this.type=e,this.data=n,this.content=n,this.timeStamp=Date.now()},n.Event.prototype.stopPropagation=function(){this.stopped=!0},n.Event.prototype.stopImmediatePropagation=function(){this.stoppedImmediate=!0},n.autoDetectRenderer=function(t,e,r){t||(t=800),e||(e=600);var i=function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(e){return!1}}();return i?new n.WebGLRenderer(t,e,r):new n.CanvasRenderer(t,e,r)},n.autoDetectRecommendedRenderer=function(t,e,r){t||(t=800),e||(e=600);var i=function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(e){return!1}}(),o=/Android/i.test(navigator.userAgent);return i&&!o?new n.WebGLRenderer(t,e,r):new n.CanvasRenderer(t,e,r)},n.PolyK={},n.PolyK.Triangulate=function(t){var e=!0,r=t.length>>1;if(3>r)return[];for(var i=[],o=[],s=0;r>s;s++)o.push(s);s=0;for(var a=r;a>3;){var u=o[(s+0)%a],c=o[(s+1)%a],l=o[(s+2)%a],h=t[2*u],f=t[2*u+1],p=t[2*c],d=t[2*c+1],m=t[2*l],g=t[2*l+1],v=!1;if(n.PolyK._convex(h,f,p,d,m,g,e)){v=!0;for(var y=0;a>y;y++){var b=o[y];if(b!==u&&b!==c&&b!==l&&n.PolyK._PointInTriangle(t[2*b],t[2*b+1],h,f,p,d,m,g)){v=!1;break}}}if(v)i.push(u,c,l),o.splice((s+1)%a,1),a--,s=0;else if(s++>3*a){if(!e)return null;for(i=[],o=[],s=0;r>s;s++)o.push(s);s=0,a=r,e=!1}}return i.push(o[0],o[1],o[2]),i},n.PolyK._PointInTriangle=function(t,e,n,r,i,o,s,a){var u=s-n,c=a-r,l=i-n,h=o-r,f=t-n,p=e-r,d=u*u+c*c,m=u*l+c*h,g=u*f+c*p,v=l*l+h*h,y=l*f+h*p,b=1/(d*v-m*m),x=(v*g-m*y)*b,w=(d*y-m*g)*b;return x>=0&&w>=0&&1>x+w},n.PolyK._convex=function(t,e,n,r,i,o,s){return(e-r)*(i-n)+(n-t)*(o-r)>=0===s},n.initDefaultShaders=function(){},n.CompileVertexShader=function(t,e){return n._CompileShader(t,e,t.VERTEX_SHADER)},n.CompileFragmentShader=function(t,e){return n._CompileShader(t,e,t.FRAGMENT_SHADER)},n._CompileShader=function(t,e,n){var r=e.join("\n"),i=t.createShader(n);return t.shaderSource(i,r),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:(window.console.log(t.getShaderInfoLog(i)),null)},n.compileProgram=function(t,e,r){var i=n.CompileFragmentShader(t,r),o=n.CompileVertexShader(t,e),s=t.createProgram();return t.attachShader(s,o),t.attachShader(s,i),t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||window.console.log("Could not initialise shaders"),s},n.PixiShader=function(t){this._UID=n._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.textureCount=0,this.firstRun=!0,this.dirty=!0,this.attributes=[],this.init()},n.PixiShader.prototype.constructor=n.PixiShader,n.PixiShader.prototype.init=function(){var t=this.gl,e=n.compileProgram(t,this.vertexSrc||n.PixiShader.defaultVertexSrc,this.fragmentSrc);t.useProgram(e),this.uSampler=t.getUniformLocation(e,"uSampler"),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.dimensions=t.getUniformLocation(e,"dimensions"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(e,"aTextureCoord"),this.colorAttribute=t.getAttribLocation(e,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var r in this.uniforms)this.uniforms[r].uniformLocation=t.getUniformLocation(e,r);this.initUniforms(),this.program=e},n.PixiShader.prototype.initUniforms=function(){this.textureCount=1;var t,e=this.gl;for(var n in this.uniforms){t=this.uniforms[n];var r=t.type;"sampler2D"===r?(t._init=!1,null!==t.value&&this.initSampler2D(t)):"mat2"===r||"mat3"===r||"mat4"===r?(t.glMatrix=!0,t.glValueLength=1,"mat2"===r?t.glFunc=e.uniformMatrix2fv:"mat3"===r?t.glFunc=e.uniformMatrix3fv:"mat4"===r&&(t.glFunc=e.uniformMatrix4fv)):(t.glFunc=e["uniform"+r],t.glValueLength="2f"===r||"2i"===r?2:"3f"===r||"3i"===r?3:"4f"===r||"4i"===r?4:1)}},n.PixiShader.prototype.initSampler2D=function(t){if(t.value&&t.value.baseTexture&&t.value.baseTexture.hasLoaded){var e=this.gl;if(e.activeTexture(e["TEXTURE"+this.textureCount]),e.bindTexture(e.TEXTURE_2D,t.value.baseTexture._glTextures[e.id]),t.textureData){var n=t.textureData,r=n.magFilter?n.magFilter:e.LINEAR,i=n.minFilter?n.minFilter:e.LINEAR,o=n.wrapS?n.wrapS:e.CLAMP_TO_EDGE,s=n.wrapT?n.wrapT:e.CLAMP_TO_EDGE,a=n.luminance?e.LUMINANCE:e.RGBA;if(n.repeat&&(o=e.REPEAT,s=e.REPEAT),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!!n.flipY),n.width){var u=n.width?n.width:512,c=n.height?n.height:2,l=n.border?n.border:0;e.texImage2D(e.TEXTURE_2D,0,a,u,c,l,a,e.UNSIGNED_BYTE,null)}else e.texImage2D(e.TEXTURE_2D,0,a,e.RGBA,e.UNSIGNED_BYTE,t.value.baseTexture.source);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,s)}e.uniform1i(t.uniformLocation,this.textureCount),t._init=!0,this.textureCount++}},n.PixiShader.prototype.syncUniforms=function(){this.textureCount=1;var t,e=this.gl;for(var r in this.uniforms)t=this.uniforms[r],1===t.glValueLength?t.glMatrix===!0?t.glFunc.call(e,t.uniformLocation,t.transpose,t.value):t.glFunc.call(e,t.uniformLocation,t.value):2===t.glValueLength?t.glFunc.call(e,t.uniformLocation,t.value.x,t.value.y):3===t.glValueLength?t.glFunc.call(e,t.uniformLocation,t.value.x,t.value.y,t.value.z):4===t.glValueLength?t.glFunc.call(e,t.uniformLocation,t.value.x,t.value.y,t.value.z,t.value.w):"sampler2D"===t.type&&(t._init?(e.activeTexture(e["TEXTURE"+this.textureCount]),t.value.baseTexture._dirty[e.id]?n.instances[e.id].updateTexture(t.value.baseTexture):e.bindTexture(e.TEXTURE_2D,t.value.baseTexture._glTextures[e.id]),e.uniform1i(t.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(t))},n.PixiShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},n.PixiShader.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying vec4 vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"],n.PixiFastShader=function(t){this._UID=n._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform mat3 uMatrix;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   vec2 v;","   vec2 sv = aVertexPosition * aScale;","   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);","   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);","   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;","   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"],this.textureCount=0,this.init()},n.PixiFastShader.prototype.constructor=n.PixiFastShader,n.PixiFastShader.prototype.init=function(){var t=this.gl,e=n.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.uSampler=t.getUniformLocation(e,"uSampler"),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.dimensions=t.getUniformLocation(e,"dimensions"),this.uMatrix=t.getUniformLocation(e,"uMatrix"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.aPositionCoord=t.getAttribLocation(e,"aPositionCoord"),this.aScale=t.getAttribLocation(e,"aScale"),this.aRotation=t.getAttribLocation(e,"aRotation"),this.aTextureCoord=t.getAttribLocation(e,"aTextureCoord"),this.colorAttribute=t.getAttribLocation(e,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aPositionCoord,this.aScale,this.aRotation,this.aTextureCoord,this.colorAttribute],this.program=e},n.PixiFastShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},n.StripShader=function(t){this._UID=n._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * alpha;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"],this.init()},n.StripShader.prototype.constructor=n.StripShader,n.StripShader.prototype.init=function(){var t=this.gl,e=n.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.uSampler=t.getUniformLocation(e,"uSampler"),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.colorAttribute=t.getAttribLocation(e,"aColor"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(e,"aTextureCoord"),this.attributes=[this.aVertexPosition,this.aTextureCoord],this.translationMatrix=t.getUniformLocation(e,"translationMatrix"),this.alpha=t.getUniformLocation(e,"alpha"),this.program=e},n.StripShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},n.PrimitiveShader=function(t){this._UID=n._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"],this.init()},n.PrimitiveShader.prototype.constructor=n.PrimitiveShader,n.PrimitiveShader.prototype.init=function(){var t=this.gl,e=n.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.tintColor=t.getUniformLocation(e,"tint"),this.flipY=t.getUniformLocation(e,"flipY"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.colorAttribute=t.getAttribLocation(e,"aColor"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=t.getUniformLocation(e,"translationMatrix"),this.alpha=t.getUniformLocation(e,"alpha"),this.program=e},n.PrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},n.ComplexPrimitiveShader=function(t){this._UID=n._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","uniform float flipY;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"],this.init()},n.ComplexPrimitiveShader.prototype.constructor=n.ComplexPrimitiveShader,n.ComplexPrimitiveShader.prototype.init=function(){var t=this.gl,e=n.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.tintColor=t.getUniformLocation(e,"tint"),this.color=t.getUniformLocation(e,"color"),this.flipY=t.getUniformLocation(e,"flipY"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=t.getUniformLocation(e,"translationMatrix"),this.alpha=t.getUniformLocation(e,"alpha"),this.program=e},n.ComplexPrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},n.WebGLGraphics=function(){},n.WebGLGraphics.renderGraphics=function(t,e){var r,i=e.gl,o=e.projection,s=e.offset,a=e.shaderManager.primitiveShader;t.dirty&&n.WebGLGraphics.updateGraphics(t,i);for(var u=t._webGL[i.id],c=0;c<u.data.length;c++)1===u.data[c].mode?(r=u.data[c],e.stencilManager.pushStencil(t,r,e),i.drawElements(i.TRIANGLE_FAN,4,i.UNSIGNED_SHORT,2*(r.indices.length-4)),e.stencilManager.popStencil(t,r,e)):(r=u.data[c],e.shaderManager.setShader(a),a=e.shaderManager.primitiveShader,i.uniformMatrix3fv(a.translationMatrix,!1,t.worldTransform.toArray(!0)),i.uniform1f(a.flipY,1),i.uniform2f(a.projectionVector,o.x,-o.y),i.uniform2f(a.offsetVector,-s.x,-s.y),i.uniform3fv(a.tintColor,n.hex2rgb(t.tint)),i.uniform1f(a.alpha,t.worldAlpha),i.bindBuffer(i.ARRAY_BUFFER,r.buffer),i.vertexAttribPointer(a.aVertexPosition,2,i.FLOAT,!1,24,0),i.vertexAttribPointer(a.colorAttribute,4,i.FLOAT,!1,24,8),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,r.indexBuffer),i.drawElements(i.TRIANGLE_STRIP,r.indices.length,i.UNSIGNED_SHORT,0))},n.WebGLGraphics.updateGraphics=function(t,e){var r=t._webGL[e.id];r||(r=t._webGL[e.id]={lastIndex:0,data:[],gl:e}),t.dirty=!1;var i;if(t.clearDirty){for(t.clearDirty=!1,i=0;i<r.data.length;i++){var o=r.data[i];o.reset(),n.WebGLGraphics.graphicsDataPool.push(o)}r.data=[],r.lastIndex=0}var s;for(i=r.lastIndex;i<t.graphicsData.length;i++){var a=t.graphicsData[i];if(a.type===n.Graphics.POLY){if(a.points=a.shape.points.slice(),a.shape.closed&&(a.points[0]!==a.points[a.points.length-2]||a.points[1]!==a.points[a.points.length-1])&&a.points.push(a.points[0],a.points[1]),a.fill&&a.points.length>=6)if(a.points.length<12){s=n.WebGLGraphics.switchMode(r,0);var u=n.WebGLGraphics.buildPoly(a,s);u||(s=n.WebGLGraphics.switchMode(r,1),n.WebGLGraphics.buildComplexPoly(a,s))}else s=n.WebGLGraphics.switchMode(r,1),n.WebGLGraphics.buildComplexPoly(a,s);a.lineWidth>0&&(s=n.WebGLGraphics.switchMode(r,0),n.WebGLGraphics.buildLine(a,s))}else s=n.WebGLGraphics.switchMode(r,0),a.type===n.Graphics.RECT?n.WebGLGraphics.buildRectangle(a,s):a.type===n.Graphics.CIRC||a.type===n.Graphics.ELIP?n.WebGLGraphics.buildCircle(a,s):a.type===n.Graphics.RREC&&n.WebGLGraphics.buildRoundedRectangle(a,s);r.lastIndex++}for(i=0;i<r.data.length;i++)s=r.data[i],s.dirty&&s.upload()},n.WebGLGraphics.switchMode=function(t,e){var r;return t.data.length?(r=t.data[t.data.length-1],(r.mode!==e||1===e)&&(r=n.WebGLGraphics.graphicsDataPool.pop()||new n.WebGLGraphicsData(t.gl),r.mode=e,t.data.push(r))):(r=n.WebGLGraphics.graphicsDataPool.pop()||new n.WebGLGraphicsData(t.gl),r.mode=e,t.data.push(r)),r.dirty=!0,r},n.WebGLGraphics.buildRectangle=function(t,e){var r=t.shape,i=r.x,o=r.y,s=r.width,a=r.height;if(t.fill){var u=n.hex2rgb(t.fillColor),c=t.fillAlpha,l=u[0]*c,h=u[1]*c,f=u[2]*c,p=e.points,d=e.indices,m=p.length/6;p.push(i,o),p.push(l,h,f,c),p.push(i+s,o),p.push(l,h,f,c),p.push(i,o+a),p.push(l,h,f,c),p.push(i+s,o+a),p.push(l,h,f,c),d.push(m,m,m+1,m+2,m+3,m+3)}if(t.lineWidth){var g=t.points;t.points=[i,o,i+s,o,i+s,o+a,i,o+a,i,o],n.WebGLGraphics.buildLine(t,e),t.points=g}},n.WebGLGraphics.buildRoundedRectangle=function(t,e){var r=t.shape,i=r.x,o=r.y,s=r.width,a=r.height,u=r.radius,c=[];if(c.push(i,o+u),c=c.concat(n.WebGLGraphics.quadraticBezierCurve(i,o+a-u,i,o+a,i+u,o+a)),c=c.concat(n.WebGLGraphics.quadraticBezierCurve(i+s-u,o+a,i+s,o+a,i+s,o+a-u)),c=c.concat(n.WebGLGraphics.quadraticBezierCurve(i+s,o+u,i+s,o,i+s-u,o)),c=c.concat(n.WebGLGraphics.quadraticBezierCurve(i+u,o,i,o,i,o+u)),t.fill){var l=n.hex2rgb(t.fillColor),h=t.fillAlpha,f=l[0]*h,p=l[1]*h,d=l[2]*h,m=e.points,g=e.indices,v=m.length/6,y=n.PolyK.Triangulate(c),b=0;for(b=0;b<y.length;b+=3)g.push(y[b]+v),g.push(y[b]+v),g.push(y[b+1]+v),g.push(y[b+2]+v),g.push(y[b+2]+v);for(b=0;b<c.length;b++)m.push(c[b],c[++b],f,p,d,h)}if(t.lineWidth){var x=t.points;t.points=c,n.WebGLGraphics.buildLine(t,e),t.points=x}},n.WebGLGraphics.quadraticBezierCurve=function(t,e,n,r,i,o){function s(t,e,n){var r=e-t;return t+r*n}for(var a,u,c,l,h,f,p=20,d=[],m=0,g=0;p>=g;g++)m=g/p,a=s(t,n,m),u=s(e,r,m),c=s(n,i,m),l=s(r,o,m),h=s(a,c,m),f=s(u,l,m),d.push(h,f);return d},n.WebGLGraphics.buildCircle=function(t,e){var r,i,o=t.shape,s=o.x,a=o.y;t.type===n.Graphics.CIRC?(r=o.radius,i=o.radius):(r=o.width,i=o.height);var u=40,c=2*Math.PI/u,l=0;if(t.fill){var h=n.hex2rgb(t.fillColor),f=t.fillAlpha,p=h[0]*f,d=h[1]*f,m=h[2]*f,g=e.points,v=e.indices,y=g.length/6;for(v.push(y),l=0;u+1>l;l++)g.push(s,a,p,d,m,f),g.push(s+Math.sin(c*l)*r,a+Math.cos(c*l)*i,p,d,m,f),v.push(y++,y++);v.push(y-1)
}if(t.lineWidth){var b=t.points;for(t.points=[],l=0;u+1>l;l++)t.points.push(s+Math.sin(c*l)*r,a+Math.cos(c*l)*i);n.WebGLGraphics.buildLine(t,e),t.points=b}},n.WebGLGraphics.buildLine=function(t,e){var r=0,i=t.points;if(0!==i.length){if(t.lineWidth%2)for(r=0;r<i.length;r++)i[r]+=.5;var o=new n.Point(i[0],i[1]),s=new n.Point(i[i.length-2],i[i.length-1]);if(o.x===s.x&&o.y===s.y){i=i.slice(),i.pop(),i.pop(),s=new n.Point(i[i.length-2],i[i.length-1]);var a=s.x+.5*(o.x-s.x),u=s.y+.5*(o.y-s.y);i.unshift(a,u),i.push(a,u)}var c,l,h,f,p,d,m,g,v,y,b,x,w,_,T,S,E,C,A,j,k,O,M,R=e.points,P=e.indices,I=i.length/2,L=i.length,F=R.length/6,B=t.lineWidth/2,D=n.hex2rgb(t.lineColor),N=t.lineAlpha,q=D[0]*N,U=D[1]*N,W=D[2]*N;for(h=i[0],f=i[1],p=i[2],d=i[3],v=-(f-d),y=h-p,M=Math.sqrt(v*v+y*y),v/=M,y/=M,v*=B,y*=B,R.push(h-v,f-y,q,U,W,N),R.push(h+v,f+y,q,U,W,N),r=1;I-1>r;r++)h=i[2*(r-1)],f=i[2*(r-1)+1],p=i[2*r],d=i[2*r+1],m=i[2*(r+1)],g=i[2*(r+1)+1],v=-(f-d),y=h-p,M=Math.sqrt(v*v+y*y),v/=M,y/=M,v*=B,y*=B,b=-(d-g),x=p-m,M=Math.sqrt(b*b+x*x),b/=M,x/=M,b*=B,x*=B,T=-y+f-(-y+d),S=-v+p-(-v+h),E=(-v+h)*(-y+d)-(-v+p)*(-y+f),C=-x+g-(-x+d),A=-b+p-(-b+m),j=(-b+m)*(-x+d)-(-b+p)*(-x+g),k=T*A-C*S,Math.abs(k)<.1?(k+=10.1,R.push(p-v,d-y,q,U,W,N),R.push(p+v,d+y,q,U,W,N)):(c=(S*j-A*E)/k,l=(C*E-T*j)/k,O=(c-p)*(c-p)+(l-d)+(l-d),O>19600?(w=v-b,_=y-x,M=Math.sqrt(w*w+_*_),w/=M,_/=M,w*=B,_*=B,R.push(p-w,d-_),R.push(q,U,W,N),R.push(p+w,d+_),R.push(q,U,W,N),R.push(p-w,d-_),R.push(q,U,W,N),L++):(R.push(c,l),R.push(q,U,W,N),R.push(p-(c-p),d-(l-d)),R.push(q,U,W,N)));for(h=i[2*(I-2)],f=i[2*(I-2)+1],p=i[2*(I-1)],d=i[2*(I-1)+1],v=-(f-d),y=h-p,M=Math.sqrt(v*v+y*y),v/=M,y/=M,v*=B,y*=B,R.push(p-v,d-y),R.push(q,U,W,N),R.push(p+v,d+y),R.push(q,U,W,N),P.push(F),r=0;L>r;r++)P.push(F++);P.push(F-1)}},n.WebGLGraphics.buildComplexPoly=function(t,e){var r=t.points.slice();if(!(r.length<6)){var i=e.indices;e.points=r,e.alpha=t.fillAlpha,e.color=n.hex2rgb(t.fillColor);for(var o,s,a=1/0,u=-1/0,c=1/0,l=-1/0,h=0;h<r.length;h+=2)o=r[h],s=r[h+1],a=a>o?o:a,u=o>u?o:u,c=c>s?s:c,l=s>l?s:l;r.push(a,c,u,c,u,l,a,l);var f=r.length/2;for(h=0;f>h;h++)i.push(h)}},n.WebGLGraphics.buildPoly=function(t,e){var r=t.points;if(!(r.length<6)){var i=e.points,o=e.indices,s=r.length/2,a=n.hex2rgb(t.fillColor),u=t.fillAlpha,c=a[0]*u,l=a[1]*u,h=a[2]*u,f=n.PolyK.Triangulate(r);if(!f)return!1;var p=i.length/6,d=0;for(d=0;d<f.length;d+=3)o.push(f[d]+p),o.push(f[d]+p),o.push(f[d+1]+p),o.push(f[d+2]+p),o.push(f[d+2]+p);for(d=0;s>d;d++)i.push(r[2*d],r[2*d+1],c,l,h,u);return!0}},n.WebGLGraphics.graphicsDataPool=[],n.WebGLGraphicsData=function(t){this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0},n.WebGLGraphicsData.prototype.reset=function(){this.points=[],this.indices=[]},n.WebGLGraphicsData.prototype.upload=function(){var t=this.gl;this.glPoints=new n.Float32Array(this.points),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,this.glPoints,t.STATIC_DRAW),this.glIndicies=new n.Uint16Array(this.indices),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.glIndicies,t.STATIC_DRAW),this.dirty=!1},n.glContexts=[],n.instances=[],n.WebGLRenderer=function(t,e,r){if(r)for(var i in n.defaultRenderOptions)"undefined"==typeof r[i]&&(r[i]=n.defaultRenderOptions[i]);else r=n.defaultRenderOptions;n.defaultRenderer||(n.sayHello("webGL"),n.defaultRenderer=this),this.type=n.WEBGL_RENDERER,this.resolution=r.resolution,this.transparent=r.transparent,this.autoResize=r.autoResize||!1,this.preserveDrawingBuffer=r.preserveDrawingBuffer,this.clearBeforeRender=r.clearBeforeRender,this.width=t||800,this.height=e||600,this.view=r.view||document.createElement("canvas"),this.contextLostBound=this.handleContextLost.bind(this),this.contextRestoredBound=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.contextLostBound,!1),this.view.addEventListener("webglcontextrestored",this.contextRestoredBound,!1),this._contextOptions={alpha:this.transparent,antialias:r.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer},this.projection=new n.Point,this.offset=new n.Point(0,0),this.shaderManager=new n.WebGLShaderManager,this.spriteBatch=new n.WebGLSpriteBatch,this.maskManager=new n.WebGLMaskManager,this.filterManager=new n.WebGLFilterManager,this.stencilManager=new n.WebGLStencilManager,this.blendModeManager=new n.WebGLBlendModeManager,this.renderSession={},this.renderSession.gl=this.gl,this.renderSession.drawCount=0,this.renderSession.shaderManager=this.shaderManager,this.renderSession.maskManager=this.maskManager,this.renderSession.filterManager=this.filterManager,this.renderSession.blendModeManager=this.blendModeManager,this.renderSession.spriteBatch=this.spriteBatch,this.renderSession.stencilManager=this.stencilManager,this.renderSession.renderer=this,this.renderSession.resolution=this.resolution,this.initContext(),this.mapBlendModes()},n.WebGLRenderer.prototype.constructor=n.WebGLRenderer,n.WebGLRenderer.prototype.initContext=function(){var t=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=t,!t)throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=t.id=n.WebGLRenderer.glContextId++,n.glContexts[this.glContextId]=t,n.instances[this.glContextId]=this,t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),this.shaderManager.setContext(t),this.spriteBatch.setContext(t),this.maskManager.setContext(t),this.filterManager.setContext(t),this.blendModeManager.setContext(t),this.stencilManager.setContext(t),this.renderSession.gl=this.gl,this.resize(this.width,this.height)},n.WebGLRenderer.prototype.render=function(t){if(!this.contextLost){this.__stage!==t&&(t.interactive&&t.interactionManager.removeEvents(),this.__stage=t),t.updateTransform();var e=this.gl;t._interactive?t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this)):t._interactiveEventsAdded&&(t._interactiveEventsAdded=!1,t.interactionManager.setTarget(this)),e.viewport(0,0,this.width,this.height),e.bindFramebuffer(e.FRAMEBUFFER,null),this.clearBeforeRender&&(this.transparent?e.clearColor(0,0,0,0):e.clearColor(t.backgroundColorSplit[0],t.backgroundColorSplit[1],t.backgroundColorSplit[2],1),e.clear(e.COLOR_BUFFER_BIT)),this.renderDisplayObject(t,this.projection)}},n.WebGLRenderer.prototype.renderDisplayObject=function(t,e,r){this.renderSession.blendModeManager.setBlendMode(n.blendModes.NORMAL),this.renderSession.drawCount=0,this.renderSession.flipY=r?-1:1,this.renderSession.projection=e,this.renderSession.offset=this.offset,this.spriteBatch.begin(this.renderSession),this.filterManager.begin(this.renderSession,r),t._renderWebGL(this.renderSession),this.spriteBatch.end()},n.WebGLRenderer.prototype.resize=function(t,e){this.width=t*this.resolution,this.height=e*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px"),this.gl.viewport(0,0,this.width,this.height),this.projection.x=this.width/2/this.resolution,this.projection.y=-this.height/2/this.resolution},n.WebGLRenderer.prototype.updateTexture=function(t){if(t.hasLoaded){var e=this.gl;return t._glTextures[e.id]||(t._glTextures[e.id]=e.createTexture()),e.bindTexture(e.TEXTURE_2D,t._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultipliedAlpha),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t.scaleMode===n.scaleModes.LINEAR?e.LINEAR:e.NEAREST),t.mipmap&&n.isPowerOfTwo(t.width,t.height)?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===n.scaleModes.LINEAR?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST),e.generateMipmap(e.TEXTURE_2D)):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===n.scaleModes.LINEAR?e.LINEAR:e.NEAREST),t._powerOf2?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),t._dirty[e.id]=!1,t._glTextures[e.id]}},n.WebGLRenderer.prototype.handleContextLost=function(t){t.preventDefault(),this.contextLost=!0},n.WebGLRenderer.prototype.handleContextRestored=function(){this.initContext();for(var t in n.TextureCache){var e=n.TextureCache[t].baseTexture;e._glTextures=[]}this.contextLost=!1},n.WebGLRenderer.prototype.destroy=function(){this.view.removeEventListener("webglcontextlost",this.contextLostBound),this.view.removeEventListener("webglcontextrestored",this.contextRestoredBound),n.glContexts[this.glContextId]=null,this.projection=null,this.offset=null,this.shaderManager.destroy(),this.spriteBatch.destroy(),this.maskManager.destroy(),this.filterManager.destroy(),this.shaderManager=null,this.spriteBatch=null,this.maskManager=null,this.filterManager=null,this.gl=null,this.renderSession=null},n.WebGLRenderer.prototype.mapBlendModes=function(){var t=this.gl;n.blendModesWebGL||(n.blendModesWebGL=[],n.blendModesWebGL[n.blendModes.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.ADD]=[t.SRC_ALPHA,t.DST_ALPHA],n.blendModesWebGL[n.blendModes.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.SCREEN]=[t.SRC_ALPHA,t.ONE],n.blendModesWebGL[n.blendModes.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA])},n.WebGLRenderer.glContextId=0,n.WebGLBlendModeManager=function(){this.currentBlendMode=99999},n.WebGLBlendModeManager.prototype.constructor=n.WebGLBlendModeManager,n.WebGLBlendModeManager.prototype.setContext=function(t){this.gl=t},n.WebGLBlendModeManager.prototype.setBlendMode=function(t){if(this.currentBlendMode===t)return!1;this.currentBlendMode=t;var e=n.blendModesWebGL[this.currentBlendMode];return this.gl.blendFunc(e[0],e[1]),!0},n.WebGLBlendModeManager.prototype.destroy=function(){this.gl=null},n.WebGLMaskManager=function(){},n.WebGLMaskManager.prototype.constructor=n.WebGLMaskManager,n.WebGLMaskManager.prototype.setContext=function(t){this.gl=t},n.WebGLMaskManager.prototype.pushMask=function(t,e){var r=e.gl;t.dirty&&n.WebGLGraphics.updateGraphics(t,r),t._webGL[r.id].data.length&&e.stencilManager.pushStencil(t,t._webGL[r.id].data[0],e)},n.WebGLMaskManager.prototype.popMask=function(t,e){var n=this.gl;e.stencilManager.popStencil(t,t._webGL[n.id].data[0],e)},n.WebGLMaskManager.prototype.destroy=function(){this.gl=null},n.WebGLStencilManager=function(){this.stencilStack=[],this.reverse=!0,this.count=0},n.WebGLStencilManager.prototype.setContext=function(t){this.gl=t},n.WebGLStencilManager.prototype.pushStencil=function(t,e,n){var r=this.gl;this.bindGraphics(t,e,n),0===this.stencilStack.length&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),this.reverse=!0,this.count=0),this.stencilStack.push(e);var i=this.count;r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.ALWAYS,0,255),r.stencilOp(r.KEEP,r.KEEP,r.INVERT),1===e.mode?(r.drawElements(r.TRIANGLE_FAN,e.indices.length-4,r.UNSIGNED_SHORT,0),this.reverse?(r.stencilFunc(r.EQUAL,255-i,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)):(r.stencilFunc(r.EQUAL,i,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,2*(e.indices.length-4)),this.reverse?r.stencilFunc(r.EQUAL,255-(i+1),255):r.stencilFunc(r.EQUAL,i+1,255),this.reverse=!this.reverse):(this.reverse?(r.stencilFunc(r.EQUAL,i,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,255-i,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),r.drawElements(r.TRIANGLE_STRIP,e.indices.length,r.UNSIGNED_SHORT,0),this.reverse?r.stencilFunc(r.EQUAL,i+1,255):r.stencilFunc(r.EQUAL,255-(i+1),255)),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),this.count++},n.WebGLStencilManager.prototype.bindGraphics=function(t,e,r){this._currentGraphics=t;var i,o=this.gl,s=r.projection,a=r.offset;1===e.mode?(i=r.shaderManager.complexPrimitiveShader,r.shaderManager.setShader(i),o.uniform1f(i.flipY,r.flipY),o.uniformMatrix3fv(i.translationMatrix,!1,t.worldTransform.toArray(!0)),o.uniform2f(i.projectionVector,s.x,-s.y),o.uniform2f(i.offsetVector,-a.x,-a.y),o.uniform3fv(i.tintColor,n.hex2rgb(t.tint)),o.uniform3fv(i.color,e.color),o.uniform1f(i.alpha,t.worldAlpha*e.alpha),o.bindBuffer(o.ARRAY_BUFFER,e.buffer),o.vertexAttribPointer(i.aVertexPosition,2,o.FLOAT,!1,8,0),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,e.indexBuffer)):(i=r.shaderManager.primitiveShader,r.shaderManager.setShader(i),o.uniformMatrix3fv(i.translationMatrix,!1,t.worldTransform.toArray(!0)),o.uniform1f(i.flipY,r.flipY),o.uniform2f(i.projectionVector,s.x,-s.y),o.uniform2f(i.offsetVector,-a.x,-a.y),o.uniform3fv(i.tintColor,n.hex2rgb(t.tint)),o.uniform1f(i.alpha,t.worldAlpha),o.bindBuffer(o.ARRAY_BUFFER,e.buffer),o.vertexAttribPointer(i.aVertexPosition,2,o.FLOAT,!1,24,0),o.vertexAttribPointer(i.colorAttribute,4,o.FLOAT,!1,24,8),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,e.indexBuffer))},n.WebGLStencilManager.prototype.popStencil=function(t,e,n){var r=this.gl;if(this.stencilStack.pop(),this.count--,0===this.stencilStack.length)r.disable(r.STENCIL_TEST);else{var i=this.count;this.bindGraphics(t,e,n),r.colorMask(!1,!1,!1,!1),1===e.mode?(this.reverse=!this.reverse,this.reverse?(r.stencilFunc(r.EQUAL,255-(i+1),255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,i+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,2*(e.indices.length-4)),r.stencilFunc(r.ALWAYS,0,255),r.stencilOp(r.KEEP,r.KEEP,r.INVERT),r.drawElements(r.TRIANGLE_FAN,e.indices.length-4,r.UNSIGNED_SHORT,0),this.reverse?r.stencilFunc(r.EQUAL,i,255):r.stencilFunc(r.EQUAL,255-i,255)):(this.reverse?(r.stencilFunc(r.EQUAL,i+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)):(r.stencilFunc(r.EQUAL,255-(i+1),255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)),r.drawElements(r.TRIANGLE_STRIP,e.indices.length,r.UNSIGNED_SHORT,0),this.reverse?r.stencilFunc(r.EQUAL,i,255):r.stencilFunc(r.EQUAL,255-i,255)),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)}},n.WebGLStencilManager.prototype.destroy=function(){this.stencilStack=null,this.gl=null},n.WebGLShaderManager=function(){this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var t=0;t<this.maxAttibs;t++)this.attribState[t]=!1;this.stack=[]},n.WebGLShaderManager.prototype.constructor=n.WebGLShaderManager,n.WebGLShaderManager.prototype.setContext=function(t){this.gl=t,this.primitiveShader=new n.PrimitiveShader(t),this.complexPrimitiveShader=new n.ComplexPrimitiveShader(t),this.defaultShader=new n.PixiShader(t),this.fastShader=new n.PixiFastShader(t),this.stripShader=new n.StripShader(t),this.setShader(this.defaultShader)},n.WebGLShaderManager.prototype.setAttribs=function(t){var e;for(e=0;e<this.tempAttribState.length;e++)this.tempAttribState[e]=!1;for(e=0;e<t.length;e++){var n=t[e];this.tempAttribState[n]=!0}var r=this.gl;for(e=0;e<this.attribState.length;e++)this.attribState[e]!==this.tempAttribState[e]&&(this.attribState[e]=this.tempAttribState[e],this.tempAttribState[e]?r.enableVertexAttribArray(e):r.disableVertexAttribArray(e))},n.WebGLShaderManager.prototype.setShader=function(t){return this._currentId===t._UID?!1:(this._currentId=t._UID,this.currentShader=t,this.gl.useProgram(t.program),this.setAttribs(t.attributes),!0)},n.WebGLShaderManager.prototype.destroy=function(){this.attribState=null,this.tempAttribState=null,this.primitiveShader.destroy(),this.complexPrimitiveShader.destroy(),this.defaultShader.destroy(),this.fastShader.destroy(),this.stripShader.destroy(),this.gl=null},n.WebGLSpriteBatch=function(){this.vertSize=5,this.size=2e3;var t=4*this.size*4*this.vertSize,e=6*this.size;this.vertices=new n.ArrayBuffer(t),this.positions=new n.Float32Array(this.vertices),this.colors=new n.Uint32Array(this.vertices),this.indices=new n.Uint16Array(e),this.lastIndexCount=0;for(var r=0,i=0;e>r;r+=6,i+=4)this.indices[r+0]=i+0,this.indices[r+1]=i+1,this.indices[r+2]=i+2,this.indices[r+3]=i+0,this.indices[r+4]=i+2,this.indices[r+5]=i+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.dirty=!0,this.textures=[],this.blendModes=[],this.shaders=[],this.sprites=[],this.defaultShader=new n.AbstractFilter(["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"])},n.WebGLSpriteBatch.prototype.setContext=function(t){this.gl=t,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),this.currentBlendMode=99999;var e=new n.PixiShader(t);e.fragmentSrc=this.defaultShader.fragmentSrc,e.uniforms={},e.init(),this.defaultShader.shaders[t.id]=e},n.WebGLSpriteBatch.prototype.begin=function(t){this.renderSession=t,this.shader=this.renderSession.shaderManager.defaultShader,this.start()},n.WebGLSpriteBatch.prototype.end=function(){this.flush()},n.WebGLSpriteBatch.prototype.render=function(t){var e=t.texture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=e.baseTexture);var n=e._uvs;if(n){var r,i,o,s,a=t.anchor.x,u=t.anchor.y;if(e.trim){var c=e.trim;i=c.x-a*c.width,r=i+e.crop.width,s=c.y-u*c.height,o=s+e.crop.height}else r=e.frame.width*(1-a),i=e.frame.width*-a,o=e.frame.height*(1-u),s=e.frame.height*-u;var l=4*this.currentBatchSize*this.vertSize,h=e.baseTexture.resolution,f=t.worldTransform,p=f.a/h,d=f.b/h,m=f.c/h,g=f.d/h,v=f.tx,y=f.ty,b=this.colors,x=this.positions;this.renderSession.roundPixels?(x[l]=p*i+m*s+v|0,x[l+1]=g*s+d*i+y|0,x[l+5]=p*r+m*s+v|0,x[l+6]=g*s+d*r+y|0,x[l+10]=p*r+m*o+v|0,x[l+11]=g*o+d*r+y|0,x[l+15]=p*i+m*o+v|0,x[l+16]=g*o+d*i+y|0):(x[l]=p*i+m*s+v,x[l+1]=g*s+d*i+y,x[l+5]=p*r+m*s+v,x[l+6]=g*s+d*r+y,x[l+10]=p*r+m*o+v,x[l+11]=g*o+d*r+y,x[l+15]=p*i+m*o+v,x[l+16]=g*o+d*i+y),x[l+2]=n.x0,x[l+3]=n.y0,x[l+7]=n.x1,x[l+8]=n.y1,x[l+12]=n.x2,x[l+13]=n.y2,x[l+17]=n.x3,x[l+18]=n.y3;var w=t.tint;b[l+4]=b[l+9]=b[l+14]=b[l+19]=(w>>16)+(65280&w)+((255&w)<<16)+(255*t.worldAlpha<<24),this.sprites[this.currentBatchSize++]=t}},n.WebGLSpriteBatch.prototype.renderTilingSprite=function(t){var e=t.tilingTexture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=e.baseTexture),t._uvs||(t._uvs=new n.TextureUvs);var r=t._uvs;t.tilePosition.x%=e.baseTexture.width*t.tileScaleOffset.x,t.tilePosition.y%=e.baseTexture.height*t.tileScaleOffset.y;var i=t.tilePosition.x/(e.baseTexture.width*t.tileScaleOffset.x),o=t.tilePosition.y/(e.baseTexture.height*t.tileScaleOffset.y),s=t.width/e.baseTexture.width/(t.tileScale.x*t.tileScaleOffset.x),a=t.height/e.baseTexture.height/(t.tileScale.y*t.tileScaleOffset.y);r.x0=0-i,r.y0=0-o,r.x1=1*s-i,r.y1=0-o,r.x2=1*s-i,r.y2=1*a-o,r.x3=0-i,r.y3=1*a-o;var u=t.tint,c=(u>>16)+(65280&u)+((255&u)<<16)+(255*t.alpha<<24),l=this.positions,h=this.colors,f=t.width,p=t.height,d=t.anchor.x,m=t.anchor.y,g=f*(1-d),v=f*-d,y=p*(1-m),b=p*-m,x=4*this.currentBatchSize*this.vertSize,w=e.baseTexture.resolution,_=t.worldTransform,T=_.a/w,S=_.b/w,E=_.c/w,C=_.d/w,A=_.tx,j=_.ty;l[x++]=T*v+E*b+A,l[x++]=C*b+S*v+j,l[x++]=r.x0,l[x++]=r.y0,h[x++]=c,l[x++]=T*g+E*b+A,l[x++]=C*b+S*g+j,l[x++]=r.x1,l[x++]=r.y1,h[x++]=c,l[x++]=T*g+E*y+A,l[x++]=C*y+S*g+j,l[x++]=r.x2,l[x++]=r.y2,h[x++]=c,l[x++]=T*v+E*y+A,l[x++]=C*y+S*v+j,l[x++]=r.x3,l[x++]=r.y3,h[x++]=c,this.sprites[this.currentBatchSize++]=t},n.WebGLSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var t,e=this.gl;if(this.dirty){this.dirty=!1,e.activeTexture(e.TEXTURE0),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t=this.defaultShader.shaders[e.id];var r=4*this.vertSize;e.vertexAttribPointer(t.aVertexPosition,2,e.FLOAT,!1,r,0),e.vertexAttribPointer(t.aTextureCoord,2,e.FLOAT,!1,r,8),e.vertexAttribPointer(t.colorAttribute,4,e.UNSIGNED_BYTE,!0,r,16)}if(this.currentBatchSize>.5*this.size)e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices);else{var i=this.positions.subarray(0,4*this.currentBatchSize*this.vertSize);e.bufferSubData(e.ARRAY_BUFFER,0,i)}for(var o,s,a,u,c=0,l=0,h=null,f=this.renderSession.blendModeManager.currentBlendMode,p=null,d=!1,m=!1,g=0,v=this.currentBatchSize;v>g;g++){if(u=this.sprites[g],o=u.texture.baseTexture,s=u.blendMode,a=u.shader||this.defaultShader,d=f!==s,m=p!==a,(h!==o||d||m)&&(this.renderBatch(h,c,l),l=g,c=0,h=o,d&&(f=s,this.renderSession.blendModeManager.setBlendMode(f)),m)){p=a,t=p.shaders[e.id],t||(t=new n.PixiShader(e),t.fragmentSrc=p.fragmentSrc,t.uniforms=p.uniforms,t.init(),p.shaders[e.id]=t),this.renderSession.shaderManager.setShader(t),t.dirty&&t.syncUniforms();var y=this.renderSession.projection;e.uniform2f(t.projectionVector,y.x,y.y);var b=this.renderSession.offset;e.uniform2f(t.offsetVector,b.x,b.y)}c++}this.renderBatch(h,c,l),this.currentBatchSize=0}},n.WebGLSpriteBatch.prototype.renderBatch=function(t,e,n){if(0!==e){var r=this.gl;t._dirty[r.id]?this.renderSession.renderer.updateTexture(t):r.bindTexture(r.TEXTURE_2D,t._glTextures[r.id]),r.drawElements(r.TRIANGLES,6*e,r.UNSIGNED_SHORT,6*n*2),this.renderSession.drawCount++}},n.WebGLSpriteBatch.prototype.stop=function(){this.flush(),this.dirty=!0},n.WebGLSpriteBatch.prototype.start=function(){this.dirty=!0},n.WebGLSpriteBatch.prototype.destroy=function(){this.vertices=null,this.indices=null,this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.indexBuffer),this.currentBaseTexture=null,this.gl=null},n.WebGLFastSpriteBatch=function(t){this.vertSize=10,this.maxSize=6e3,this.size=this.maxSize;var e=4*this.size*this.vertSize,r=6*this.maxSize;this.vertices=new n.Float32Array(e),this.indices=new n.Uint16Array(r),this.vertexBuffer=null,this.indexBuffer=null,this.lastIndexCount=0;for(var i=0,o=0;r>i;i+=6,o+=4)this.indices[i+0]=o+0,this.indices[i+1]=o+1,this.indices[i+2]=o+2,this.indices[i+3]=o+0,this.indices[i+4]=o+2,this.indices[i+5]=o+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.currentBlendMode=0,this.renderSession=null,this.shader=null,this.matrix=null,this.setContext(t)},n.WebGLFastSpriteBatch.prototype.constructor=n.WebGLFastSpriteBatch,n.WebGLFastSpriteBatch.prototype.setContext=function(t){this.gl=t,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW)},n.WebGLFastSpriteBatch.prototype.begin=function(t,e){this.renderSession=e,this.shader=this.renderSession.shaderManager.fastShader,this.matrix=t.worldTransform.toArray(!0),this.start()},n.WebGLFastSpriteBatch.prototype.end=function(){this.flush()},n.WebGLFastSpriteBatch.prototype.render=function(t){var e=t.children,n=e[0];if(n.texture._uvs){this.currentBaseTexture=n.texture.baseTexture,n.blendMode!==this.renderSession.blendModeManager.currentBlendMode&&(this.flush(),this.renderSession.blendModeManager.setBlendMode(n.blendMode));for(var r=0,i=e.length;i>r;r++)this.renderSprite(e[r]);this.flush()}},n.WebGLFastSpriteBatch.prototype.renderSprite=function(t){if(t.visible&&(t.texture.baseTexture===this.currentBaseTexture||(this.flush(),this.currentBaseTexture=t.texture.baseTexture,t.texture._uvs))){var e,n,r,i,o,s,a,u,c=this.vertices;if(e=t.texture._uvs,n=t.texture.frame.width,r=t.texture.frame.height,t.texture.trim){var l=t.texture.trim;o=l.x-t.anchor.x*l.width,i=o+t.texture.crop.width,a=l.y-t.anchor.y*l.height,s=a+t.texture.crop.height}else i=t.texture.frame.width*(1-t.anchor.x),o=t.texture.frame.width*-t.anchor.x,s=t.texture.frame.height*(1-t.anchor.y),a=t.texture.frame.height*-t.anchor.y;u=4*this.currentBatchSize*this.vertSize,c[u++]=o,c[u++]=a,c[u++]=t.position.x,c[u++]=t.position.y,c[u++]=t.scale.x,c[u++]=t.scale.y,c[u++]=t.rotation,c[u++]=e.x0,c[u++]=e.y1,c[u++]=t.alpha,c[u++]=i,c[u++]=a,c[u++]=t.position.x,c[u++]=t.position.y,c[u++]=t.scale.x,c[u++]=t.scale.y,c[u++]=t.rotation,c[u++]=e.x1,c[u++]=e.y1,c[u++]=t.alpha,c[u++]=i,c[u++]=s,c[u++]=t.position.x,c[u++]=t.position.y,c[u++]=t.scale.x,c[u++]=t.scale.y,c[u++]=t.rotation,c[u++]=e.x2,c[u++]=e.y2,c[u++]=t.alpha,c[u++]=o,c[u++]=s,c[u++]=t.position.x,c[u++]=t.position.y,c[u++]=t.scale.x,c[u++]=t.scale.y,c[u++]=t.rotation,c[u++]=e.x3,c[u++]=e.y3,c[u++]=t.alpha,this.currentBatchSize++,this.currentBatchSize>=this.size&&this.flush()}},n.WebGLFastSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var t=this.gl;if(this.currentBaseTexture._glTextures[t.id]||this.renderSession.renderer.updateTexture(this.currentBaseTexture,t),t.bindTexture(t.TEXTURE_2D,this.currentBaseTexture._glTextures[t.id]),this.currentBatchSize>.5*this.size)t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices);else{var e=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);t.bufferSubData(t.ARRAY_BUFFER,0,e)}t.drawElements(t.TRIANGLES,6*this.currentBatchSize,t.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderSession.drawCount++}},n.WebGLFastSpriteBatch.prototype.stop=function(){this.flush()},n.WebGLFastSpriteBatch.prototype.start=function(){var t=this.gl;t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.renderSession.projection;t.uniform2f(this.shader.projectionVector,e.x,e.y),t.uniformMatrix3fv(this.shader.uMatrix,!1,this.matrix);var n=4*this.vertSize;t.vertexAttribPointer(this.shader.aVertexPosition,2,t.FLOAT,!1,n,0),t.vertexAttribPointer(this.shader.aPositionCoord,2,t.FLOAT,!1,n,8),t.vertexAttribPointer(this.shader.aScale,2,t.FLOAT,!1,n,16),t.vertexAttribPointer(this.shader.aRotation,1,t.FLOAT,!1,n,24),t.vertexAttribPointer(this.shader.aTextureCoord,2,t.FLOAT,!1,n,28),t.vertexAttribPointer(this.shader.colorAttribute,1,t.FLOAT,!1,n,36)},n.WebGLFilterManager=function(){this.filterStack=[],this.offsetX=0,this.offsetY=0},n.WebGLFilterManager.prototype.constructor=n.WebGLFilterManager,n.WebGLFilterManager.prototype.setContext=function(t){this.gl=t,this.texturePool=[],this.initShaderBuffers()},n.WebGLFilterManager.prototype.begin=function(t,e){this.renderSession=t,this.defaultShader=t.shaderManager.defaultShader;var n=this.renderSession.projection;this.width=2*n.x,this.height=2*-n.y,this.buffer=e},n.WebGLFilterManager.prototype.pushFilter=function(t){var e=this.gl,r=this.renderSession.projection,i=this.renderSession.offset;t._filterArea=t.target.filterArea||t.target.getBounds(),this.filterStack.push(t);var o=t.filterPasses[0];this.offsetX+=t._filterArea.x,this.offsetY+=t._filterArea.y;var s=this.texturePool.pop();s?s.resize(this.width,this.height):s=new n.FilterTexture(this.gl,this.width,this.height),e.bindTexture(e.TEXTURE_2D,s.texture);var a=t._filterArea,u=o.padding;a.x-=u,a.y-=u,a.width+=2*u,a.height+=2*u,a.x<0&&(a.x=0),a.width>this.width&&(a.width=this.width),a.y<0&&(a.y=0),a.height>this.height&&(a.height=this.height),e.bindFramebuffer(e.FRAMEBUFFER,s.frameBuffer),e.viewport(0,0,a.width,a.height),r.x=a.width/2,r.y=-a.height/2,i.x=-a.x,i.y=-a.y,e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),t._glFilterTexture=s},n.WebGLFilterManager.prototype.popFilter=function(){var t=this.gl,e=this.filterStack.pop(),r=e._filterArea,i=e._glFilterTexture,o=this.renderSession.projection,s=this.renderSession.offset;if(e.filterPasses.length>1){t.viewport(0,0,r.width,r.height),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=0,this.vertexArray[1]=r.height,this.vertexArray[2]=r.width,this.vertexArray[3]=r.height,this.vertexArray[4]=0,this.vertexArray[5]=0,this.vertexArray[6]=r.width,this.vertexArray[7]=0,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=r.width/this.width,this.uvArray[5]=r.height/this.height,this.uvArray[6]=r.width/this.width,this.uvArray[7]=r.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray);var a=i,u=this.texturePool.pop();u||(u=new n.FilterTexture(this.gl,this.width,this.height)),u.resize(this.width,this.height),t.bindFramebuffer(t.FRAMEBUFFER,u.frameBuffer),t.clear(t.COLOR_BUFFER_BIT),t.disable(t.BLEND);for(var c=0;c<e.filterPasses.length-1;c++){var l=e.filterPasses[c];t.bindFramebuffer(t.FRAMEBUFFER,u.frameBuffer),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,a.texture),this.applyFilterPass(l,r,r.width,r.height);var h=a;a=u,u=h}t.enable(t.BLEND),i=a,this.texturePool.push(u)}var f=e.filterPasses[e.filterPasses.length-1];this.offsetX-=r.x,this.offsetY-=r.y;var p=this.width,d=this.height,m=0,g=0,v=this.buffer;if(0===this.filterStack.length)t.colorMask(!0,!0,!0,!0);else{var y=this.filterStack[this.filterStack.length-1];r=y._filterArea,p=r.width,d=r.height,m=r.x,g=r.y,v=y._glFilterTexture.frameBuffer}o.x=p/2,o.y=-d/2,s.x=m,s.y=g,r=e._filterArea;var b=r.x-m,x=r.y-g;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=b,this.vertexArray[1]=x+r.height,this.vertexArray[2]=b+r.width,this.vertexArray[3]=x+r.height,this.vertexArray[4]=b,this.vertexArray[5]=x,this.vertexArray[6]=b+r.width,this.vertexArray[7]=x,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=r.width/this.width,this.uvArray[5]=r.height/this.height,this.uvArray[6]=r.width/this.width,this.uvArray[7]=r.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray),t.viewport(0,0,p*this.renderSession.resolution,d*this.renderSession.resolution),t.bindFramebuffer(t.FRAMEBUFFER,v),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,i.texture),this.applyFilterPass(f,r,p,d),this.texturePool.push(i),e._glFilterTexture=null},n.WebGLFilterManager.prototype.applyFilterPass=function(t,e,r,i){var o=this.gl,s=t.shaders[o.id];s||(s=new n.PixiShader(o),s.fragmentSrc=t.fragmentSrc,s.uniforms=t.uniforms,s.init(),t.shaders[o.id]=s),this.renderSession.shaderManager.setShader(s),o.uniform2f(s.projectionVector,r/2,-i/2),o.uniform2f(s.offsetVector,0,0),t.uniforms.dimensions&&(t.uniforms.dimensions.value[0]=this.width,t.uniforms.dimensions.value[1]=this.height,t.uniforms.dimensions.value[2]=this.vertexArray[0],t.uniforms.dimensions.value[3]=this.vertexArray[5]),s.syncUniforms(),o.bindBuffer(o.ARRAY_BUFFER,this.vertexBuffer),o.vertexAttribPointer(s.aVertexPosition,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,this.uvBuffer),o.vertexAttribPointer(s.aTextureCoord,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,this.colorBuffer),o.vertexAttribPointer(s.colorAttribute,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,this.indexBuffer),o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0),this.renderSession.drawCount++},n.WebGLFilterManager.prototype.initShaderBuffers=function(){var t=this.gl;this.vertexBuffer=t.createBuffer(),this.uvBuffer=t.createBuffer(),this.colorBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.vertexArray=new n.Float32Array([0,0,1,0,0,1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertexArray,t.STATIC_DRAW),this.uvArray=new n.Float32Array([0,0,1,0,0,1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvArray,t.STATIC_DRAW),this.colorArray=new n.Float32Array([1,16777215,1,16777215,1,16777215,1,16777215]),t.bindBuffer(t.ARRAY_BUFFER,this.colorBuffer),t.bufferData(t.ARRAY_BUFFER,this.colorArray,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),t.STATIC_DRAW)
},n.WebGLFilterManager.prototype.destroy=function(){var t=this.gl;this.filterStack=null,this.offsetX=0,this.offsetY=0;for(var e=0;e<this.texturePool.length;e++)this.texturePool[e].destroy();this.texturePool=null,t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.uvBuffer),t.deleteBuffer(this.colorBuffer),t.deleteBuffer(this.indexBuffer)},n.FilterTexture=function(t,e,r,i){this.gl=t,this.frameBuffer=t.createFramebuffer(),this.texture=t.createTexture(),i=i||n.scaleModes.DEFAULT,t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,i===n.scaleModes.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,i===n.scaleModes.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0),this.renderBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.renderBuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.renderBuffer),this.resize(e,r)},n.FilterTexture.prototype.constructor=n.FilterTexture,n.FilterTexture.prototype.clear=function(){var t=this.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},n.FilterTexture.prototype.resize=function(t,e){if(this.width!==t||this.height!==e){this.width=t,this.height=e;var n=this.gl;n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t,e,0,n.RGBA,n.UNSIGNED_BYTE,null),n.bindRenderbuffer(n.RENDERBUFFER,this.renderBuffer),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t,e)}},n.FilterTexture.prototype.destroy=function(){var t=this.gl;t.deleteFramebuffer(this.frameBuffer),t.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null},n.CanvasBuffer=function(t,e){this.width=t,this.height=e,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=t,this.canvas.height=e},n.CanvasBuffer.prototype.constructor=n.CanvasBuffer,n.CanvasBuffer.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height)},n.CanvasBuffer.prototype.resize=function(t,e){this.width=this.canvas.width=t,this.height=this.canvas.height=e},n.CanvasMaskManager=function(){},n.CanvasMaskManager.prototype.constructor=n.CanvasMaskManager,n.CanvasMaskManager.prototype.pushMask=function(t,e){var r=e.context;r.save();var i=t.alpha,o=t.worldTransform,s=e.resolution;r.setTransform(o.a*s,o.b*s,o.c*s,o.d*s,o.tx*s,o.ty*s),n.CanvasGraphics.renderGraphicsMask(t,r),r.clip(),t.worldAlpha=i},n.CanvasMaskManager.prototype.popMask=function(t){t.context.restore()},n.CanvasTinter=function(){},n.CanvasTinter.getTintedTexture=function(t,e){var r=t.texture;e=n.CanvasTinter.roundColor(e);var i="#"+("00000"+(0|e).toString(16)).substr(-6);if(r.tintCache=r.tintCache||{},r.tintCache[i])return r.tintCache[i];var o=n.CanvasTinter.canvas||document.createElement("canvas");if(n.CanvasTinter.tintMethod(r,e,o),n.CanvasTinter.convertTintToImage){var s=new Image;s.src=o.toDataURL(),r.tintCache[i]=s}else r.tintCache[i]=o,n.CanvasTinter.canvas=null;return o},n.CanvasTinter.tintWithMultiply=function(t,e,n){var r=n.getContext("2d"),i=t.crop;n.width=i.width,n.height=i.height,r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="multiply",r.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},n.CanvasTinter.tintWithOverlay=function(t,e,n){var r=n.getContext("2d"),i=t.crop;n.width=i.width,n.height=i.height,r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height)},n.CanvasTinter.tintWithPerPixel=function(t,e,r){var i=r.getContext("2d"),o=t.crop;r.width=o.width,r.height=o.height,i.globalCompositeOperation="copy",i.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height);for(var s=n.hex2rgb(e),a=s[0],u=s[1],c=s[2],l=i.getImageData(0,0,o.width,o.height),h=l.data,f=0;f<h.length;f+=4)h[f+0]*=a,h[f+1]*=u,h[f+2]*=c;i.putImageData(l,0,0)},n.CanvasTinter.roundColor=function(t){var e=n.CanvasTinter.cacheStepsPerColorChannel,r=n.hex2rgb(t);return r[0]=Math.min(255,r[0]/e*e),r[1]=Math.min(255,r[1]/e*e),r[2]=Math.min(255,r[2]/e*e),n.rgb2hex(r)},n.CanvasTinter.cacheStepsPerColorChannel=8,n.CanvasTinter.convertTintToImage=!1,n.CanvasTinter.canUseMultiply=n.canUseNewCanvasBlendModes(),n.CanvasTinter.tintMethod=n.CanvasTinter.canUseMultiply?n.CanvasTinter.tintWithMultiply:n.CanvasTinter.tintWithPerPixel,n.CanvasRenderer=function(t,e,r){if(r)for(var i in n.defaultRenderOptions)"undefined"==typeof r[i]&&(r[i]=n.defaultRenderOptions[i]);else r=n.defaultRenderOptions;n.defaultRenderer||(n.sayHello("Canvas"),n.defaultRenderer=this),this.type=n.CANVAS_RENDERER,this.resolution=r.resolution,this.clearBeforeRender=r.clearBeforeRender,this.transparent=r.transparent,this.autoResize=r.autoResize||!1,this.width=t||800,this.height=e||600,this.width*=this.resolution,this.height*=this.resolution,this.view=r.view||document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.view.width=this.width*this.resolution,this.view.height=this.height*this.resolution,this.count=0,this.maskManager=new n.CanvasMaskManager,this.renderSession={context:this.context,maskManager:this.maskManager,scaleMode:null,smoothProperty:null,roundPixels:!1},this.mapBlendModes(),this.resize(t,e),"imageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="oImageSmoothingEnabled":"msImageSmoothingEnabled"in this.context&&(this.renderSession.smoothProperty="msImageSmoothingEnabled")},n.CanvasRenderer.prototype.constructor=n.CanvasRenderer,n.CanvasRenderer.prototype.render=function(t){t.updateTransform(),this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.renderSession.currentBlendMode=n.blendModes.NORMAL,this.context.globalCompositeOperation=n.blendModesCanvas[n.blendModes.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=t.backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(t),t.interactive&&(t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this)))},n.CanvasRenderer.prototype.destroy=function(t){"undefined"==typeof t&&(t=!0),t&&this.view.parent&&this.view.parent.removeChild(this.view),this.view=null,this.context=null,this.maskManager=null,this.renderSession=null},n.CanvasRenderer.prototype.resize=function(t,e){this.width=t*this.resolution,this.height=e*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},n.CanvasRenderer.prototype.renderDisplayObject=function(t,e){this.renderSession.context=e||this.context,this.renderSession.resolution=this.resolution,t._renderCanvas(this.renderSession)},n.CanvasRenderer.prototype.mapBlendModes=function(){n.blendModesCanvas||(n.blendModesCanvas=[],n.canUseNewCanvasBlendModes()?(n.blendModesCanvas[n.blendModes.NORMAL]="source-over",n.blendModesCanvas[n.blendModes.ADD]="lighter",n.blendModesCanvas[n.blendModes.MULTIPLY]="multiply",n.blendModesCanvas[n.blendModes.SCREEN]="screen",n.blendModesCanvas[n.blendModes.OVERLAY]="overlay",n.blendModesCanvas[n.blendModes.DARKEN]="darken",n.blendModesCanvas[n.blendModes.LIGHTEN]="lighten",n.blendModesCanvas[n.blendModes.COLOR_DODGE]="color-dodge",n.blendModesCanvas[n.blendModes.COLOR_BURN]="color-burn",n.blendModesCanvas[n.blendModes.HARD_LIGHT]="hard-light",n.blendModesCanvas[n.blendModes.SOFT_LIGHT]="soft-light",n.blendModesCanvas[n.blendModes.DIFFERENCE]="difference",n.blendModesCanvas[n.blendModes.EXCLUSION]="exclusion",n.blendModesCanvas[n.blendModes.HUE]="hue",n.blendModesCanvas[n.blendModes.SATURATION]="saturation",n.blendModesCanvas[n.blendModes.COLOR]="color",n.blendModesCanvas[n.blendModes.LUMINOSITY]="luminosity"):(n.blendModesCanvas[n.blendModes.NORMAL]="source-over",n.blendModesCanvas[n.blendModes.ADD]="lighter",n.blendModesCanvas[n.blendModes.MULTIPLY]="source-over",n.blendModesCanvas[n.blendModes.SCREEN]="source-over",n.blendModesCanvas[n.blendModes.OVERLAY]="source-over",n.blendModesCanvas[n.blendModes.DARKEN]="source-over",n.blendModesCanvas[n.blendModes.LIGHTEN]="source-over",n.blendModesCanvas[n.blendModes.COLOR_DODGE]="source-over",n.blendModesCanvas[n.blendModes.COLOR_BURN]="source-over",n.blendModesCanvas[n.blendModes.HARD_LIGHT]="source-over",n.blendModesCanvas[n.blendModes.SOFT_LIGHT]="source-over",n.blendModesCanvas[n.blendModes.DIFFERENCE]="source-over",n.blendModesCanvas[n.blendModes.EXCLUSION]="source-over",n.blendModesCanvas[n.blendModes.HUE]="source-over",n.blendModesCanvas[n.blendModes.SATURATION]="source-over",n.blendModesCanvas[n.blendModes.COLOR]="source-over",n.blendModesCanvas[n.blendModes.LUMINOSITY]="source-over"))},n.CanvasGraphics=function(){},n.CanvasGraphics.renderGraphics=function(t,e){var r=t.worldAlpha;t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1);for(var i=0;i<t.graphicsData.length;i++){var o=t.graphicsData[i],s=o.shape,a=o._fillTint,u=o._lineTint;if(e.lineWidth=o.lineWidth,o.type===n.Graphics.POLY){e.beginPath();var c=s.points;e.moveTo(c[0],c[1]);for(var l=1;l<c.length/2;l++)e.lineTo(c[2*l],c[2*l+1]);s.closed&&e.lineTo(c[0],c[1]),c[0]===c[c.length-2]&&c[1]===c[c.length-1]&&e.closePath(),o.fill&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),e.stroke())}else if(o.type===n.Graphics.RECT)(o.fillColor||0===o.fillColor)&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fillRect(s.x,s.y,s.width,s.height)),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),e.strokeRect(s.x,s.y,s.width,s.height));else if(o.type===n.Graphics.CIRC)e.beginPath(),e.arc(s.x,s.y,s.radius,0,2*Math.PI),e.closePath(),o.fill&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),e.stroke());else if(o.type===n.Graphics.ELIP){var h=2*s.width,f=2*s.height,p=s.x-h/2,d=s.y-f/2;e.beginPath();var m=.5522848,g=h/2*m,v=f/2*m,y=p+h,b=d+f,x=p+h/2,w=d+f/2;e.moveTo(p,w),e.bezierCurveTo(p,w-v,x-g,d,x,d),e.bezierCurveTo(x+g,d,y,w-v,y,w),e.bezierCurveTo(y,w+v,x+g,b,x,b),e.bezierCurveTo(x-g,b,p,w+v,p,w),e.closePath(),o.fill&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),e.stroke())}else if(o.type===n.Graphics.RREC){var _=s.x,T=s.y,S=s.width,E=s.height,C=s.radius,A=Math.min(S,E)/2|0;C=C>A?A:C,e.beginPath(),e.moveTo(_,T+C),e.lineTo(_,T+E-C),e.quadraticCurveTo(_,T+E,_+C,T+E),e.lineTo(_+S-C,T+E),e.quadraticCurveTo(_+S,T+E,_+S,T+E-C),e.lineTo(_+S,T+C),e.quadraticCurveTo(_+S,T,_+S-C,T),e.lineTo(_+C,T),e.quadraticCurveTo(_,T,_,T+C),e.closePath(),(o.fillColor||0===o.fillColor)&&(e.globalAlpha=o.fillAlpha*r,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),o.lineWidth&&(e.globalAlpha=o.lineAlpha*r,e.strokeStyle="#"+("00000"+(0|u).toString(16)).substr(-6),e.stroke())}}},n.CanvasGraphics.renderGraphicsMask=function(t,e){var r=t.graphicsData.length;if(0!==r){r>1&&(r=1,window.console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"));for(var i=0;1>i;i++){var o=t.graphicsData[i],s=o.shape;if(o.type===n.Graphics.POLY){e.beginPath();var a=s.points;e.moveTo(a[0],a[1]);for(var u=1;u<a.length/2;u++)e.lineTo(a[2*u],a[2*u+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closePath()}else if(o.type===n.Graphics.RECT)e.beginPath(),e.rect(s.x,s.y,s.width,s.height),e.closePath();else if(o.type===n.Graphics.CIRC)e.beginPath(),e.arc(s.x,s.y,s.radius,0,2*Math.PI),e.closePath();else if(o.type===n.Graphics.ELIP){var c=2*s.width,l=2*s.height,h=s.x-c/2,f=s.y-l/2;e.beginPath();var p=.5522848,d=c/2*p,m=l/2*p,g=h+c,v=f+l,y=h+c/2,b=f+l/2;e.moveTo(h,b),e.bezierCurveTo(h,b-m,y-d,f,y,f),e.bezierCurveTo(y+d,f,g,b-m,g,b),e.bezierCurveTo(g,b+m,y+d,v,y,v),e.bezierCurveTo(y-d,v,h,b+m,h,b),e.closePath()}else if(o.type===n.Graphics.RREC){var x=s.points,w=x[0],_=x[1],T=x[2],S=x[3],E=x[4],C=Math.min(T,S)/2|0;E=E>C?C:E,e.beginPath(),e.moveTo(w,_+E),e.lineTo(w,_+S-E),e.quadraticCurveTo(w,_+S,w+E,_+S),e.lineTo(w+T-E,_+S),e.quadraticCurveTo(w+T,_+S,w+T,_+S-E),e.lineTo(w+T,_+E),e.quadraticCurveTo(w+T,_,w+T-E,_),e.lineTo(w+E,_),e.quadraticCurveTo(w,_,w,_+E),e.closePath()}}}},n.CanvasGraphics.updateGraphicsTint=function(t){if(16777215!==t.tint)for(var e=(t.tint>>16&255)/255,n=(t.tint>>8&255)/255,r=(255&t.tint)/255,i=0;i<t.graphicsData.length;i++){var o=t.graphicsData[i],s=0|o.fillColor,a=0|o.lineColor;o._fillTint=((s>>16&255)/255*e*255<<16)+((s>>8&255)/255*n*255<<8)+(255&s)/255*r*255,o._lineTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*n*255<<8)+(255&a)/255*r*255}},n.Graphics=function(){n.DisplayObjectContainer.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this.blendMode=n.blendModes.NORMAL,this.currentPath=null,this._webGL=[],this.isMask=!1,this.boundsPadding=0,this._localBounds=new n.Rectangle(0,0,1,1),this.dirty=!0,this.webGLDirty=!1,this.cachedSpriteDirty=!1},n.Graphics.prototype=Object.create(n.DisplayObjectContainer.prototype),n.Graphics.prototype.constructor=n.Graphics,Object.defineProperty(n.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap=t,this._cacheAsBitmap?this._generateCachedSprite():(this.destroyCachedSprite(),this.dirty=!0)}}),n.Graphics.prototype.lineStyle=function(t,e,r){if(this.lineWidth=t||0,this.lineColor=e||0,this.lineAlpha=arguments.length<3?1:r,this.currentPath){if(this.currentPath.shape.points.length)return this.drawShape(new n.Polygon(this.currentPath.shape.points.slice(-2))),this;this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha}return this},n.Graphics.prototype.moveTo=function(t,e){return this.drawShape(new n.Polygon([t,e])),this},n.Graphics.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty=!0,this},n.Graphics.prototype.quadraticCurveTo=function(t,e,n,r){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var i,o,s=20,a=this.currentPath.shape.points;0===a.length&&this.moveTo(0,0);for(var u=a[a.length-2],c=a[a.length-1],l=0,h=1;s>=h;h++)l=h/s,i=u+(t-u)*l,o=c+(e-c)*l,a.push(i+(t+(n-t)*l-i)*l,o+(e+(r-e)*l-o)*l);return this.dirty=!0,this},n.Graphics.prototype.bezierCurveTo=function(t,e,n,r,i,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var s,a,u,c,l,h=20,f=this.currentPath.shape.points,p=f[f.length-2],d=f[f.length-1],m=0,g=1;h>=g;g++)m=g/h,s=1-m,a=s*s,u=a*s,c=m*m,l=c*m,f.push(u*p+3*a*m*t+3*s*c*n+l*i,u*d+3*a*m*e+3*s*c*r+l*o);return this.dirty=!0,this},n.Graphics.prototype.arcTo=function(t,e,n,r,i){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var o=this.currentPath.shape.points,s=o[o.length-2],a=o[o.length-1],u=a-e,c=s-t,l=r-e,h=n-t,f=Math.abs(u*h-c*l);if(1e-8>f||0===i)(o[o.length-2]!==t||o[o.length-1]!==e)&&o.push(t,e);else{var p=u*u+c*c,d=l*l+h*h,m=u*l+c*h,g=i*Math.sqrt(p)/f,v=i*Math.sqrt(d)/f,y=g*m/p,b=v*m/d,x=g*h+v*c,w=g*l+v*u,_=c*(v+y),T=u*(v+y),S=h*(g+b),E=l*(g+b),C=Math.atan2(T-w,_-x),A=Math.atan2(E-w,S-x);this.arc(x+t,w+e,i,C,A,c*l>h*u)}return this.dirty=!0,this},n.Graphics.prototype.arc=function(t,e,n,r,i,o){var s,a=t+Math.cos(r)*n,u=e+Math.sin(r)*n;if(this.currentPath?(s=this.currentPath.shape.points,0===s.length?s.push(a,u):(s[s.length-2]!==a||s[s.length-1]!==u)&&s.push(a,u)):(this.moveTo(a,u),s=this.currentPath.shape.points),r===i)return this;!o&&r>=i?i+=2*Math.PI:o&&i>=r&&(r+=2*Math.PI);var c=o?-1*(r-i):i-r,l=Math.abs(c)/(2*Math.PI)*40;if(0===c)return this;for(var h=c/(2*l),f=2*h,p=Math.cos(h),d=Math.sin(h),m=l-1,g=m%1/m,v=0;m>=v;v++){var y=v+g*v,b=h+r+f*y,x=Math.cos(b),w=-Math.sin(b);s.push((p*x+d*w)*n+t,(p*-w+d*x)*n+e)}return this.dirty=!0,this},n.Graphics.prototype.beginFill=function(t,e){return this.filling=!0,this.fillColor=t||0,this.fillAlpha=void 0===e?1:e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},n.Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},n.Graphics.prototype.drawRect=function(t,e,r,i){return this.drawShape(new n.Rectangle(t,e,r,i)),this},n.Graphics.prototype.drawRoundedRect=function(t,e,r,i,o){return this.drawShape(new n.RoundedRectangle(t,e,r,i,o)),this},n.Graphics.prototype.drawCircle=function(t,e,r){return this.drawShape(new n.Circle(t,e,r)),this},n.Graphics.prototype.drawEllipse=function(t,e,r,i){return this.drawShape(new n.Ellipse(t,e,r,i)),this},n.Graphics.prototype.drawPolygon=function(t){return t instanceof Array||(t=Array.prototype.slice.call(arguments)),this.drawShape(new n.Polygon(t)),this},n.Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},n.Graphics.prototype.generateTexture=function(t,e){t=t||1;var r=this.getBounds(),i=new n.CanvasBuffer(r.width*t,r.height*t),o=n.Texture.fromCanvas(i.canvas,e);return o.baseTexture.resolution=t,i.context.scale(t,t),i.context.translate(-r.x,-r.y),n.CanvasGraphics.renderGraphics(this,i.context),o},n.Graphics.prototype._renderWebGL=function(t){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.worldAlpha=this.worldAlpha,void n.Sprite.prototype._renderWebGL.call(this._cachedSprite,t);if(t.spriteBatch.stop(),t.blendModeManager.setBlendMode(this.blendMode),this._mask&&t.maskManager.pushMask(this._mask,t),this._filters&&t.filterManager.pushFilter(this._filterBlock),this.blendMode!==t.spriteBatch.currentBlendMode){t.spriteBatch.currentBlendMode=this.blendMode;var e=n.blendModesWebGL[t.spriteBatch.currentBlendMode];t.spriteBatch.gl.blendFunc(e[0],e[1])}if(this.webGLDirty&&(this.dirty=!0,this.webGLDirty=!1),n.WebGLGraphics.renderGraphics(this,t),this.children.length){t.spriteBatch.start();for(var r=0,i=this.children.length;i>r;r++)this.children[r]._renderWebGL(t);t.spriteBatch.stop()}this._filters&&t.filterManager.popFilter(),this._mask&&t.maskManager.popMask(this.mask,t),t.drawCount++,t.spriteBatch.start()}},n.Graphics.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.alpha=this.alpha,void n.Sprite.prototype._renderCanvas.call(this._cachedSprite,t);var e=t.context,r=this.worldTransform;this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,e.globalCompositeOperation=n.blendModesCanvas[t.currentBlendMode]),this._mask&&t.maskManager.pushMask(this._mask,t);var i=t.resolution;e.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i,r.ty*i),n.CanvasGraphics.renderGraphics(this,e);for(var o=0,s=this.children.length;s>o;o++)this.children[o]._renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},n.Graphics.prototype.getBounds=function(t){if(this.isMask)return n.EmptyRectangle;this.dirty&&(this.updateLocalBounds(),this.webGLDirty=!0,this.cachedSpriteDirty=!0,this.dirty=!1);var e=this._localBounds,r=e.x,i=e.width+e.x,o=e.y,s=e.height+e.y,a=t||this.worldTransform,u=a.a,c=a.b,l=a.c,h=a.d,f=a.tx,p=a.ty,d=u*i+l*s+f,m=h*s+c*i+p,g=u*r+l*s+f,v=h*s+c*r+p,y=u*r+l*o+f,b=h*o+c*r+p,x=u*i+l*o+f,w=h*o+c*i+p,_=d,T=m,S=d,E=m;return S=S>g?g:S,S=S>y?y:S,S=S>x?x:S,E=E>v?v:E,E=E>b?b:E,E=E>w?w:E,_=g>_?g:_,_=y>_?y:_,_=x>_?x:_,T=v>T?v:T,T=b>T?b:T,T=w>T?w:T,this._bounds.x=S,this._bounds.width=_-S,this._bounds.y=E,this._bounds.height=T-E,this._bounds},n.Graphics.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,r=1/0,i=-1/0;if(this.graphicsData.length)for(var o,s,a,u,c,l,h=0;h<this.graphicsData.length;h++){var f=this.graphicsData[h],p=f.type,d=f.lineWidth;if(o=f.shape,p===n.Graphics.RECT||p===n.Graphics.RREC)a=o.x-d/2,u=o.y-d/2,c=o.width+d,l=o.height+d,t=t>a?a:t,e=a+c>e?a+c:e,r=r>u?u:r,i=u+l>i?u+l:i;else if(p===n.Graphics.CIRC)a=o.x,u=o.y,c=o.radius+d/2,l=o.radius+d/2,t=t>a-c?a-c:t,e=a+c>e?a+c:e,r=r>u-l?u-l:r,i=u+l>i?u+l:i;else if(p===n.Graphics.ELIP)a=o.x,u=o.y,c=o.width+d/2,l=o.height+d/2,t=t>a-c?a-c:t,e=a+c>e?a+c:e,r=r>u-l?u-l:r,i=u+l>i?u+l:i;else{s=o.points;for(var m=0;m<s.length;m+=2)a=s[m],u=s[m+1],t=t>a-d?a-d:t,e=a+d>e?a+d:e,r=r>u-d?u-d:r,i=u+d>i?u+d:i}}else t=0,e=0,r=0,i=0;var g=this.boundsPadding;this._localBounds.x=t-g,this._localBounds.width=e-t+2*g,this._localBounds.y=r-g,this._localBounds.height=i-r+2*g},n.Graphics.prototype._generateCachedSprite=function(){var t=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.buffer.resize(t.width,t.height);else{var e=new n.CanvasBuffer(t.width,t.height),r=n.Texture.fromCanvas(e.canvas);this._cachedSprite=new n.Sprite(r),this._cachedSprite.buffer=e,this._cachedSprite.worldTransform=this.worldTransform}this._cachedSprite.anchor.x=-(t.x/t.width),this._cachedSprite.anchor.y=-(t.y/t.height),this._cachedSprite.buffer.context.translate(-t.x,-t.y),this.worldAlpha=1,n.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context),this._cachedSprite.alpha=this.alpha},n.Graphics.prototype.updateCachedSpriteTexture=function(){var t=this._cachedSprite,e=t.texture,n=t.buffer.canvas;e.baseTexture.width=n.width,e.baseTexture.height=n.height,e.crop.width=e.frame.width=n.width,e.crop.height=e.frame.height=n.height,t._width=n.width,t._height=n.height,e.baseTexture.dirty()},n.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},n.Graphics.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new n.GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,t);return this.graphicsData.push(e),e.type===n.Graphics.POLY&&(e.shape.closed=this.filling,this.currentPath=e),this.dirty=!0,e},n.GraphicsData=function(t,e,n,r,i,o,s){this.lineWidth=t,this.lineColor=e,this.lineAlpha=n,this._lineTint=e,this.fillColor=r,this.fillAlpha=i,this._fillTint=r,this.fill=o,this.shape=s,this.type=s.type},n.Graphics.POLY=0,n.Graphics.RECT=1,n.Graphics.CIRC=2,n.Graphics.ELIP=3,n.Graphics.RREC=4,n.Polygon.prototype.type=n.Graphics.POLY,n.Rectangle.prototype.type=n.Graphics.RECT,n.Circle.prototype.type=n.Graphics.CIRC,n.Ellipse.prototype.type=n.Graphics.ELIP,n.RoundedRectangle.prototype.type=n.Graphics.RREC,n.Strip=function(t){n.DisplayObjectContainer.call(this),this.texture=t,this.uvs=new n.Float32Array([0,1,1,1,1,0,0,1]),this.vertices=new n.Float32Array([0,0,100,0,100,100,0,100]),this.colors=new n.Float32Array([1,1,1,1]),this.indices=new n.Uint16Array([0,1,2,3]),this.dirty=!0,this.blendMode=n.blendModes.NORMAL,this.canvasPadding=0,this.drawMode=n.Strip.DrawModes.TRIANGLE_STRIP},n.Strip.prototype=Object.create(n.DisplayObjectContainer.prototype),n.Strip.prototype.constructor=n.Strip,n.Strip.prototype._renderWebGL=function(t){!this.visible||this.alpha<=0||(t.spriteBatch.stop(),this._vertexBuffer||this._initWebGL(t),t.shaderManager.setShader(t.shaderManager.stripShader),this._renderStrip(t),t.spriteBatch.start())},n.Strip.prototype._initWebGL=function(t){var e=t.gl;this._vertexBuffer=e.createBuffer(),this._indexBuffer=e.createBuffer(),this._uvBuffer=e.createBuffer(),this._colorBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this._uvBuffer),e.bufferData(e.ARRAY_BUFFER,this.uvs,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this._colorBuffer),e.bufferData(e.ARRAY_BUFFER,this.colors,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW)},n.Strip.prototype._renderStrip=function(t){var e=t.gl,r=t.projection,i=t.offset,o=t.shaderManager.stripShader,s=this.drawMode===n.Strip.DrawModes.TRIANGLE_STRIP?e.TRIANGLE_STRIP:e.TRIANGLES;t.blendModeManager.setBlendMode(this.blendMode),e.uniformMatrix3fv(o.translationMatrix,!1,this.worldTransform.toArray(!0)),e.uniform2f(o.projectionVector,r.x,-r.y),e.uniform2f(o.offsetVector,-i.x,-i.y),e.uniform1f(o.alpha,this.worldAlpha),this.dirty?(this.dirty=!1,e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.STATIC_DRAW),e.vertexAttribPointer(o.aVertexPosition,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this._uvBuffer),e.bufferData(e.ARRAY_BUFFER,this.uvs,e.STATIC_DRAW),e.vertexAttribPointer(o.aTextureCoord,2,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),this.texture.baseTexture._dirty[e.id]?t.renderer.updateTexture(this.texture.baseTexture):e.bindTexture(e.TEXTURE_2D,this.texture.baseTexture._glTextures[e.id]),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW)):(e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices),e.vertexAttribPointer(o.aVertexPosition,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this._uvBuffer),e.vertexAttribPointer(o.aTextureCoord,2,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),this.texture.baseTexture._dirty[e.id]?t.renderer.updateTexture(this.texture.baseTexture):e.bindTexture(e.TEXTURE_2D,this.texture.baseTexture._glTextures[e.id]),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer)),e.drawElements(s,this.indices.length,e.UNSIGNED_SHORT,0)},n.Strip.prototype._renderCanvas=function(t){var e=t.context,r=this.worldTransform;t.roundPixels?e.setTransform(r.a,r.b,r.c,r.d,0|r.tx,0|r.ty):e.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),this.drawMode===n.Strip.DrawModes.TRIANGLE_STRIP?this._renderCanvasTriangleStrip(e):this._renderCanvasTriangles(e)},n.Strip.prototype._renderCanvasTriangleStrip=function(t){var e=this.vertices,n=this.uvs,r=e.length/2;this.count++;for(var i=0;r-2>i;i++){var o=2*i;this._renderCanvasDrawTriangle(t,e,n,o,o+2,o+4)}},n.Strip.prototype._renderCanvasTriangles=function(t){var e=this.vertices,n=this.uvs,r=this.indices,i=r.length;this.count++;for(var o=0;i>o;o+=3){var s=2*r[o],a=2*r[o+1],u=2*r[o+2];this._renderCanvasDrawTriangle(t,e,n,s,a,u)}},n.Strip.prototype._renderCanvasDrawTriangle=function(t,e,n,r,i,o){var s=this.texture.baseTexture.source,a=this.texture.width,u=this.texture.height,c=e[r],l=e[i],h=e[o],f=e[r+1],p=e[i+1],d=e[o+1],m=n[r]*a,g=n[i]*a,v=n[o]*a,y=n[r+1]*u,b=n[i+1]*u,x=n[o+1]*u;if(this.canvasPadding>0){var w=this.canvasPadding/this.worldTransform.a,_=this.canvasPadding/this.worldTransform.d,T=(c+l+h)/3,S=(f+p+d)/3,E=c-T,C=f-S,A=Math.sqrt(E*E+C*C);c=T+E/A*(A+w),f=S+C/A*(A+_),E=l-T,C=p-S,A=Math.sqrt(E*E+C*C),l=T+E/A*(A+w),p=S+C/A*(A+_),E=h-T,C=d-S,A=Math.sqrt(E*E+C*C),h=T+E/A*(A+w),d=S+C/A*(A+_)}t.save(),t.beginPath(),t.moveTo(c,f),t.lineTo(l,p),t.lineTo(h,d),t.closePath(),t.clip();var j=m*b+y*v+g*x-b*v-y*g-m*x,k=c*b+y*h+l*x-b*h-y*l-c*x,O=m*l+c*v+g*h-l*v-c*g-m*h,M=m*b*h+y*l*v+c*g*x-c*b*v-y*g*h-m*l*x,R=f*b+y*d+p*x-b*d-y*p-f*x,P=m*p+f*v+g*d-p*v-f*g-m*d,I=m*b*d+y*p*v+f*g*x-f*b*v-y*g*d-m*p*x;t.transform(k/j,R/j,O/j,P/j,M/j,I/j),t.drawImage(s,0,0),t.restore()},n.Strip.prototype.renderStripFlat=function(t){var e=this.context,n=t.vertices,r=n.length/2;this.count++,e.beginPath();for(var i=1;r-2>i;i++){var o=2*i,s=n[o],a=n[o+2],u=n[o+4],c=n[o+1],l=n[o+3],h=n[o+5];e.moveTo(s,c),e.lineTo(a,l),e.lineTo(u,h)}e.fillStyle="#FF0000",e.fill(),e.closePath()},n.Strip.prototype.onTextureUpdate=function(){this.updateFrame=!0},n.Strip.prototype.getBounds=function(t){for(var e=t||this.worldTransform,r=e.a,i=e.b,o=e.c,s=e.d,a=e.tx,u=e.ty,c=-1/0,l=-1/0,h=1/0,f=1/0,p=this.vertices,d=0,m=p.length;m>d;d+=2){var g=p[d],v=p[d+1],y=r*g+o*v+a,b=s*v+i*g+u;h=h>y?y:h,f=f>b?b:f,c=y>c?y:c,l=b>l?b:l}if(h===-1/0||1/0===l)return n.EmptyRectangle;var x=this._bounds;return x.x=h,x.width=c-h,x.y=f,x.height=l-f,this._currentBounds=x,x},n.Strip.DrawModes={TRIANGLE_STRIP:0,TRIANGLES:1},n.Rope=function(t,e){n.Strip.call(this,t),this.points=e,this.vertices=new n.Float32Array(4*e.length),this.uvs=new n.Float32Array(4*e.length),this.colors=new n.Float32Array(2*e.length),this.indices=new n.Uint16Array(2*e.length),this.refresh()},n.Rope.prototype=Object.create(n.Strip.prototype),n.Rope.prototype.constructor=n.Rope,n.Rope.prototype.refresh=function(){var t=this.points;if(!(t.length<1)){var e=this.uvs,n=t[0],r=this.indices,i=this.colors;this.count-=.2,e[0]=0,e[1]=0,e[2]=0,e[3]=1,i[0]=1,i[1]=1,r[0]=0,r[1]=1;for(var o,s,a,u=t.length,c=1;u>c;c++)o=t[c],s=4*c,a=c/(u-1),c%2?(e[s]=a,e[s+1]=0,e[s+2]=a,e[s+3]=1):(e[s]=a,e[s+1]=0,e[s+2]=a,e[s+3]=1),s=2*c,i[s]=1,i[s+1]=1,s=2*c,r[s]=s,r[s+1]=s+1,n=o}},n.Rope.prototype.updateTransform=function(){var t=this.points;if(!(t.length<1)){var e,r=t[0],i={x:0,y:0};this.count-=.2;for(var o,s,a,u,c,l=this.vertices,h=t.length,f=0;h>f;f++)o=t[f],s=4*f,e=f<t.length-1?t[f+1]:o,i.y=-(e.x-r.x),i.x=e.y-r.y,a=10*(1-f/(h-1)),a>1&&(a=1),u=Math.sqrt(i.x*i.x+i.y*i.y),c=this.texture.height/2,i.x/=u,i.y/=u,i.x*=c,i.y*=c,l[s]=o.x+i.x,l[s+1]=o.y+i.y,l[s+2]=o.x-i.x,l[s+3]=o.y-i.y,r=o;n.DisplayObjectContainer.prototype.updateTransform.call(this)}},n.Rope.prototype.setTexture=function(t){this.texture=t},n.TilingSprite=function(t,e,r){n.Sprite.call(this,t),this._width=e||100,this._height=r||100,this.tileScale=new n.Point(1,1),this.tileScaleOffset=new n.Point(1,1),this.tilePosition=new n.Point(0,0),this.renderable=!0,this.tint=16777215,this.blendMode=n.blendModes.NORMAL},n.TilingSprite.prototype=Object.create(n.Sprite.prototype),n.TilingSprite.prototype.constructor=n.TilingSprite,Object.defineProperty(n.TilingSprite.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t}}),Object.defineProperty(n.TilingSprite.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t}}),n.TilingSprite.prototype.setTexture=function(t){this.texture!==t&&(this.texture=t,this.refreshTexture=!0,this.cachedTint=16777215)},n.TilingSprite.prototype._renderWebGL=function(t){if(this.visible!==!1&&0!==this.alpha){var e,n;for(this._mask&&(t.spriteBatch.stop(),t.maskManager.pushMask(this.mask,t),t.spriteBatch.start()),this._filters&&(t.spriteBatch.flush(),t.filterManager.pushFilter(this._filterBlock)),!this.tilingTexture||this.refreshTexture?(this.generateTilingTexture(!0),this.tilingTexture&&this.tilingTexture.needsUpdate&&(t.renderer.updateTexture(this.tilingTexture.baseTexture),this.tilingTexture.needsUpdate=!1)):t.spriteBatch.renderTilingSprite(this),e=0,n=this.children.length;n>e;e++)this.children[e]._renderWebGL(t);
t.spriteBatch.stop(),this._filters&&t.filterManager.popFilter(),this._mask&&t.maskManager.popMask(this._mask,t),t.spriteBatch.start()}},n.TilingSprite.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha){var e=t.context;this._mask&&t.maskManager.pushMask(this._mask,t),e.globalAlpha=this.worldAlpha;var r,i,o=this.worldTransform,s=t.resolution;if(e.setTransform(o.a*s,o.b*s,o.c*s,o.d*s,o.tx*s,o.ty*s),!this.__tilePattern||this.refreshTexture){if(this.generateTilingTexture(!1),!this.tilingTexture)return;this.__tilePattern=e.createPattern(this.tilingTexture.baseTexture.source,"repeat")}this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,e.globalCompositeOperation=n.blendModesCanvas[t.currentBlendMode]);var a=this.tilePosition,u=this.tileScale;for(a.x%=this.tilingTexture.baseTexture.width,a.y%=this.tilingTexture.baseTexture.height,e.scale(u.x,u.y),e.translate(a.x+this.anchor.x*-this._width,a.y+this.anchor.y*-this._height),e.fillStyle=this.__tilePattern,e.fillRect(-a.x,-a.y,this._width/u.x,this._height/u.y),e.scale(1/u.x,1/u.y),e.translate(-a.x+this.anchor.x*this._width,-a.y+this.anchor.y*this._height),this._mask&&t.maskManager.popMask(t),r=0,i=this.children.length;i>r;r++)this.children[r]._renderCanvas(t)}},n.TilingSprite.prototype.getBounds=function(){var t=this._width,e=this._height,n=t*(1-this.anchor.x),r=t*-this.anchor.x,i=e*(1-this.anchor.y),o=e*-this.anchor.y,s=this.worldTransform,a=s.a,u=s.b,c=s.c,l=s.d,h=s.tx,f=s.ty,p=a*r+c*o+h,d=l*o+u*r+f,m=a*n+c*o+h,g=l*o+u*n+f,v=a*n+c*i+h,y=l*i+u*n+f,b=a*r+c*i+h,x=l*i+u*r+f,w=-1/0,_=-1/0,T=1/0,S=1/0;T=T>p?p:T,T=T>m?m:T,T=T>v?v:T,T=T>b?b:T,S=S>d?d:S,S=S>g?g:S,S=S>y?y:S,S=S>x?x:S,w=p>w?p:w,w=m>w?m:w,w=v>w?v:w,w=b>w?b:w,_=d>_?d:_,_=g>_?g:_,_=y>_?y:_,_=x>_?x:_;var E=this._bounds;return E.x=T,E.width=w-T,E.y=S,E.height=_-S,this._currentBounds=E,E},n.TilingSprite.prototype.onTextureUpdate=function(){},n.TilingSprite.prototype.generateTilingTexture=function(t){if(this.texture.baseTexture.hasLoaded){var e,r,i=this.originalTexture||this.texture,o=i.frame,s=o.width!==i.baseTexture.width||o.height!==i.baseTexture.height,a=!1;if(t?(e=n.getNextPowerOfTwo(o.width),r=n.getNextPowerOfTwo(o.height),(o.width!==e||o.height!==r||i.baseTexture.width!==e||i.baseTexture.height||r)&&(a=!0)):s&&(i.trim?(e=i.trim.width,r=i.trim.height):(e=o.width,r=o.height),a=!0),a){var u;this.tilingTexture&&this.tilingTexture.isTiling?(u=this.tilingTexture.canvasBuffer,u.resize(e,r),this.tilingTexture.baseTexture.width=e,this.tilingTexture.baseTexture.height=r,this.tilingTexture.needsUpdate=!0):(u=new n.CanvasBuffer(e,r),this.tilingTexture=n.Texture.fromCanvas(u.canvas),this.tilingTexture.canvasBuffer=u,this.tilingTexture.isTiling=!0),u.context.drawImage(i.baseTexture.source,i.crop.x,i.crop.y,i.crop.width,i.crop.height,0,0,e,r),this.tileScaleOffset.x=o.width/e,this.tileScaleOffset.y=o.height/r}else this.tilingTexture&&this.tilingTexture.isTiling&&this.tilingTexture.destroy(!0),this.tileScaleOffset.x=1,this.tileScaleOffset.y=1,this.tilingTexture=i;this.refreshTexture=!1,this.originalTexture=this.texture,this.texture=this.tilingTexture,this.tilingTexture.baseTexture._powerOf2=!0}},n.TilingSprite.prototype.destroy=function(){n.Sprite.prototype.destroy.call(this),this.tileScale=null,this.tileScaleOffset=null,this.tilePosition=null,this.tilingTexture.destroy(!0),this.tilingTexture=null};var r={radDeg:180/Math.PI,degRad:Math.PI/180,temp:[],Float32Array:"undefined"==typeof Float32Array?Array:Float32Array,Uint16Array:"undefined"==typeof Uint16Array?Array:Uint16Array};r.BoneData=function(t,e){this.name=t,this.parent=e},r.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1,inheritScale:!0,inheritRotation:!0,flipX:!1,flipY:!1},r.SlotData=function(t,e){this.name=t,this.boneData=e},r.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null,additiveBlending:!1},r.IkConstraintData=function(t){this.name=t,this.bones=[]},r.IkConstraintData.prototype={target:null,bendDirection:1,mix:1},r.Bone=function(t,e,n){this.data=t,this.skeleton=e,this.parent=n,this.setToSetupPose()},r.Bone.yDown=!1,r.Bone.prototype={x:0,y:0,rotation:0,rotationIK:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,worldFlipX:!1,worldFlipY:!1,updateWorldTransform:function(){var t=this.parent;if(t)this.worldX=this.x*t.m00+this.y*t.m01+t.worldX,this.worldY=this.x*t.m10+this.y*t.m11+t.worldY,this.data.inheritScale?(this.worldScaleX=t.worldScaleX*this.scaleX,this.worldScaleY=t.worldScaleY*this.scaleY):(this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY),this.worldRotation=this.data.inheritRotation?t.worldRotation+this.rotationIK:this.rotationIK,this.worldFlipX=t.worldFlipX!=this.flipX,this.worldFlipY=t.worldFlipY!=this.flipY;else{var e=this.skeleton.flipX,n=this.skeleton.flipY;this.worldX=e?-this.x:this.x,this.worldY=n!=r.Bone.yDown?-this.y:this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotationIK,this.worldFlipX=e!=this.flipX,this.worldFlipY=n!=this.flipY}var i=this.worldRotation*r.degRad,o=Math.cos(i),s=Math.sin(i);this.worldFlipX?(this.m00=-o*this.worldScaleX,this.m01=s*this.worldScaleY):(this.m00=o*this.worldScaleX,this.m01=-s*this.worldScaleY),this.worldFlipY!=r.Bone.yDown?(this.m10=-s*this.worldScaleX,this.m11=-o*this.worldScaleY):(this.m10=s*this.worldScaleX,this.m11=o*this.worldScaleY)},setToSetupPose:function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.rotationIK=this.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.flipX=t.flipX,this.flipY=t.flipY},worldToLocal:function(t){var e=t[0]-this.worldX,n=t[1]-this.worldY,i=this.m00,o=this.m10,s=this.m01,a=this.m11;this.worldFlipX!=(this.worldFlipY!=r.Bone.yDown)&&(i=-i,a=-a);var u=1/(i*a-s*o);t[0]=e*i*u-n*s*u,t[1]=n*a*u-e*o*u},localToWorld:function(t){var e=t[0],n=t[1];t[0]=e*this.m00+n*this.m01+this.worldX,t[1]=e*this.m10+n*this.m11+this.worldY}},r.Slot=function(t,e){this.data=t,this.bone=e,this.setToSetupPose()},r.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,attachmentVertices:[],setAttachment:function(t){this.attachment=t,this._attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0},setAttachmentTime:function(t){this._attachmentTime=this.bone.skeleton.time-t},getAttachmentTime:function(){return this.bone.skeleton.time-this._attachmentTime},setToSetupPose:function(){var t=this.data;this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a;for(var e=this.bone.skeleton.data.slots,n=0,r=e.length;r>n;n++)if(e[n]==t){this.setAttachment(t.attachmentName?this.bone.skeleton.getAttachmentBySlotIndex(n,t.attachmentName):null);break}}},r.IkConstraint=function(t,e){this.data=t,this.mix=t.mix,this.bendDirection=t.bendDirection,this.bones=[];for(var n=0,r=t.bones.length;r>n;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findBone(t.target.name)},r.IkConstraint.prototype={apply:function(){var t=this.target,e=this.bones;switch(e.length){case 1:r.IkConstraint.apply1(e[0],t.worldX,t.worldY,this.mix);break;case 2:r.IkConstraint.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.mix)}}},r.IkConstraint.apply1=function(t,e,n,i){var o=t.data.inheritRotation&&t.parent?t.parent.worldRotation:0,s=t.rotation,a=Math.atan2(n-t.worldY,e-t.worldX)*r.radDeg-o;t.rotationIK=s+(a-s)*i},r.IkConstraint.apply2=function(t,e,n,i,o,s){var a=e.rotation,u=t.rotation;if(!s)return e.rotationIK=a,void(t.rotationIK=u);var c,l,h=r.temp,f=t.parent;f?(h[0]=n,h[1]=i,f.worldToLocal(h),n=(h[0]-t.x)*f.worldScaleX,i=(h[1]-t.y)*f.worldScaleY):(n-=t.x,i-=t.y),e.parent==t?(c=e.x,l=e.y):(h[0]=e.x,h[1]=e.y,e.parent.localToWorld(h),t.worldToLocal(h),c=h[0],l=h[1]);var p=c*t.worldScaleX,d=l*t.worldScaleY,m=Math.atan2(d,p),g=Math.sqrt(p*p+d*d),v=e.data.length*e.worldScaleX,y=2*g*v;if(1e-4>y)return void(e.rotationIK=a+(Math.atan2(i,n)*r.radDeg-u-a)*s);var b=(n*n+i*i-g*g-v*v)/y;-1>b?b=-1:b>1&&(b=1);var x=Math.acos(b)*o,w=g+v*b,_=v*Math.sin(x),T=Math.atan2(i*w-n*_,n*w+i*_),S=(T-m)*r.radDeg-u;S>180?S-=360:-180>S&&(S+=360),t.rotationIK=u+S*s,S=(x+m)*r.radDeg-a,S>180?S-=360:-180>S&&(S+=360),e.rotationIK=a+(S+t.worldRotation-e.parent.worldRotation)*s},r.Skin=function(t){this.name=t,this.attachments={}},r.Skin.prototype={addAttachment:function(t,e,n){this.attachments[t+":"+e]=n},getAttachment:function(t,e){return this.attachments[t+":"+e]},_attachAll:function(t,e){for(var n in e.attachments){var r=n.indexOf(":"),i=parseInt(n.substring(0,r)),o=n.substring(r+1),s=t.slots[i];if(s.attachment&&s.attachment.name==o){var a=this.getAttachment(i,o);a&&s.setAttachment(a)}}}},r.Animation=function(t,e,n){this.name=t,this.timelines=e,this.duration=n},r.Animation.prototype={apply:function(t,e,n,r,i){r&&0!=this.duration&&(n%=this.duration,e%=this.duration);for(var o=this.timelines,s=0,a=o.length;a>s;s++)o[s].apply(t,e,n,i,1)},mix:function(t,e,n,r,i,o){r&&0!=this.duration&&(n%=this.duration,e%=this.duration);for(var s=this.timelines,a=0,u=s.length;u>a;a++)s[a].apply(t,e,n,i,o)}},r.Animation.binarySearch=function(t,e,n){var r=0,i=Math.floor(t.length/n)-2;if(!i)return n;for(var o=i>>>1;;){if(t[(o+1)*n]<=e?r=o+1:i=o,r==i)return(r+1)*n;o=r+i>>>1}},r.Animation.binarySearch1=function(t,e){var n=0,r=t.length-2;if(!r)return 1;for(var i=r>>>1;;){if(t[i+1]<=e?n=i+1:r=i,n==r)return n+1;i=n+r>>>1}},r.Animation.linearSearch=function(t,e,n){for(var r=0,i=t.length-n;i>=r;r+=n)if(t[r]>e)return r;return-1},r.Curves=function(){this.curves=[]},r.Curves.prototype={setLinear:function(t){this.curves[19*t]=0},setStepped:function(t){this.curves[19*t]=1},setCurve:function(t,e,n,r,i){var o=.1,s=o*o,a=s*o,u=3*o,c=3*s,l=6*s,h=6*a,f=2*-e+r,p=2*-n+i,d=3*(e-r)+1,m=3*(n-i)+1,g=e*u+f*c+d*a,v=n*u+p*c+m*a,y=f*l+d*h,b=p*l+m*h,x=d*h,w=m*h,_=19*t,T=this.curves;T[_++]=2;for(var S=g,E=v,C=_+19-1;C>_;_+=2)T[_]=S,T[_+1]=E,g+=y,v+=b,y+=x,b+=w,S+=g,E+=v},getCurvePercent:function(t,e){e=0>e?0:e>1?1:e;var n=this.curves,r=19*t,i=n[r];if(0===i)return e;if(1==i)return 0;r++;for(var o=0,s=r,a=r+19-1;a>r;r+=2)if(o=n[r],o>=e){var u,c;return r==s?(u=0,c=0):(u=n[r-2],c=n[r-1]),c+(n[r+1]-c)*(e-u)/(o-u)}var l=n[r-1];return l+(1-l)*(e-o)/(1-o)}},r.RotateTimeline=function(t){this.curves=new r.Curves(t),this.frames=[],this.frames.length=2*t},r.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(t,e,n){t*=2,this.frames[t]=e,this.frames[t+1]=n},apply:function(t,e,n,i,o){var s=this.frames;if(!(n<s[0])){var a=t.bones[this.boneIndex];if(n>=s[s.length-2]){for(var u=a.data.rotation+s[s.length-1]-a.rotation;u>180;)u-=360;for(;-180>u;)u+=360;return void(a.rotation+=u*o)}var c=r.Animation.binarySearch(s,n,2),l=s[c-1],h=s[c],f=1-(n-h)/(s[c-2]-h);f=this.curves.getCurvePercent(c/2-1,f);for(var u=s[c+1]-l;u>180;)u-=360;for(;-180>u;)u+=360;for(u=a.data.rotation+(l+u*f)-a.rotation;u>180;)u-=360;for(;-180>u;)u+=360;a.rotation+=u*o}}},r.TranslateTimeline=function(t){this.curves=new r.Curves(t),this.frames=[],this.frames.length=3*t},r.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,n,r){t*=3,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=r},apply:function(t,e,n,i,o){var s=this.frames;if(!(n<s[0])){var a=t.bones[this.boneIndex];if(n>=s[s.length-3])return a.x+=(a.data.x+s[s.length-2]-a.x)*o,void(a.y+=(a.data.y+s[s.length-1]-a.y)*o);var u=r.Animation.binarySearch(s,n,3),c=s[u-2],l=s[u-1],h=s[u],f=1-(n-h)/(s[u+-3]-h);f=this.curves.getCurvePercent(u/3-1,f),a.x+=(a.data.x+c+(s[u+1]-c)*f-a.x)*o,a.y+=(a.data.y+l+(s[u+2]-l)*f-a.y)*o}}},r.ScaleTimeline=function(t){this.curves=new r.Curves(t),this.frames=[],this.frames.length=3*t},r.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,n,r){t*=3,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=r},apply:function(t,e,n,i,o){var s=this.frames;if(!(n<s[0])){var a=t.bones[this.boneIndex];if(n>=s[s.length-3])return a.scaleX+=(a.data.scaleX*s[s.length-2]-a.scaleX)*o,void(a.scaleY+=(a.data.scaleY*s[s.length-1]-a.scaleY)*o);var u=r.Animation.binarySearch(s,n,3),c=s[u-2],l=s[u-1],h=s[u],f=1-(n-h)/(s[u+-3]-h);f=this.curves.getCurvePercent(u/3-1,f),a.scaleX+=(a.data.scaleX*(c+(s[u+1]-c)*f)-a.scaleX)*o,a.scaleY+=(a.data.scaleY*(l+(s[u+2]-l)*f)-a.scaleY)*o}}},r.ColorTimeline=function(t){this.curves=new r.Curves(t),this.frames=[],this.frames.length=5*t},r.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(t,e,n,r,i,o){t*=5,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=r,this.frames[t+3]=i,this.frames[t+4]=o},apply:function(t,e,n,i,o){var s=this.frames;if(!(n<s[0])){var a,u,c,l;if(n>=s[s.length-5]){var h=s.length-1;a=s[h-3],u=s[h-2],c=s[h-1],l=s[h]}else{var f=r.Animation.binarySearch(s,n,5),p=s[f-4],d=s[f-3],m=s[f-2],g=s[f-1],v=s[f],y=1-(n-v)/(s[f-5]-v);y=this.curves.getCurvePercent(f/5-1,y),a=p+(s[f+1]-p)*y,u=d+(s[f+2]-d)*y,c=m+(s[f+3]-m)*y,l=g+(s[f+4]-g)*y}var b=t.slots[this.slotIndex];1>o?(b.r+=(a-b.r)*o,b.g+=(u-b.g)*o,b.b+=(c-b.b)*o,b.a+=(l-b.a)*o):(b.r=a,b.g=u,b.b=c,b.a=l)}}},r.AttachmentTimeline=function(t){this.curves=new r.Curves(t),this.frames=[],this.frames.length=t,this.attachmentNames=[],this.attachmentNames.length=t},r.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(t,e,n){this.frames[t]=e,this.attachmentNames[t]=n},apply:function(t,e,n){var i=this.frames;if(n<i[0])return void(e>n&&this.apply(t,e,Number.MAX_VALUE,null,0));e>n&&(e=-1);var o=n>=i[i.length-1]?i.length-1:r.Animation.binarySearch1(i,n)-1;if(!(i[o]<e)){var s=this.attachmentNames[o];t.slots[this.slotIndex].setAttachment(s?t.getAttachmentBySlotIndex(this.slotIndex,s):null)}}},r.EventTimeline=function(t){this.frames=[],this.frames.length=t,this.events=[],this.events.length=t},r.EventTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(t,e,n){this.frames[t]=e,this.events[t]=n},apply:function(t,e,n,i,o){if(i){var s=this.frames,a=s.length;if(e>n)this.apply(t,e,Number.MAX_VALUE,i,o),e=-1;else if(e>=s[a-1])return;if(!(n<s[0])){var u;if(e<s[0])u=0;else{u=r.Animation.binarySearch1(s,e);for(var c=s[u];u>0&&s[u-1]==c;)u--}for(var l=this.events;a>u&&n>=s[u];u++)i.push(l[u])}}}},r.DrawOrderTimeline=function(t){this.frames=[],this.frames.length=t,this.drawOrders=[],this.drawOrders.length=t},r.DrawOrderTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(t,e,n){this.frames[t]=e,this.drawOrders[t]=n},apply:function(t,e,n){var i=this.frames;if(!(n<i[0])){var o;o=n>=i[i.length-1]?i.length-1:r.Animation.binarySearch1(i,n)-1;var s=t.drawOrder,a=t.slots,u=this.drawOrders[o];if(u)for(var c=0,l=u.length;l>c;c++)s[c]=t.slots[u[c]];else for(var c=0,l=a.length;l>c;c++)s[c]=a[c]}}},r.FfdTimeline=function(t){this.curves=new r.Curves(t),this.frames=[],this.frames.length=t,this.frameVertices=[],this.frameVertices.length=t},r.FfdTimeline.prototype={slotIndex:0,attachment:0,getFrameCount:function(){return this.frames.length},setFrame:function(t,e,n){this.frames[t]=e,this.frameVertices[t]=n},apply:function(t,e,n,i,o){var s=t.slots[this.slotIndex];if(s.attachment==this.attachment){var a=this.frames;if(!(n<a[0])){var u=this.frameVertices,c=u[0].length,l=s.attachmentVertices;if(l.length!=c&&(o=1),l.length=c,n>=a[a.length-1]){var h=u[a.length-1];if(1>o)for(var f=0;c>f;f++)l[f]+=(h[f]-l[f])*o;else for(var f=0;c>f;f++)l[f]=h[f]}else{var p=r.Animation.binarySearch1(a,n),d=a[p],m=1-(n-d)/(a[p-1]-d);m=this.curves.getCurvePercent(p-1,0>m?0:m>1?1:m);var g=u[p-1],v=u[p];if(1>o)for(var f=0;c>f;f++){var y=g[f];l[f]+=(y+(v[f]-y)*m-l[f])*o}else for(var f=0;c>f;f++){var y=g[f];l[f]=y+(v[f]-y)*m}}}}}},r.IkConstraintTimeline=function(t){this.curves=new r.Curves(t),this.frames=[],this.frames.length=3*t},r.IkConstraintTimeline.prototype={ikConstraintIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,n,r){t*=3,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=r},apply:function(t,e,n,i,o){var s=this.frames;if(!(n<s[0])){var a=t.ikConstraints[this.ikConstraintIndex];if(n>=s[s.length-3])return a.mix+=(s[s.length-2]-a.mix)*o,void(a.bendDirection=s[s.length-1]);var u=r.Animation.binarySearch(s,n,3),c=s[u+-2],l=s[u],h=1-(n-l)/(s[u+-3]-l);h=this.curves.getCurvePercent(u/3-1,h);var f=c+(s[u+1]-c)*h;a.mix+=(f-a.mix)*o,a.bendDirection=s[u+-1]}}},r.FlipXTimeline=function(t){this.curves=new r.Curves(t),this.frames=[],this.frames.length=2*t},r.FlipXTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(t,e,n){t*=2,this.frames[t]=e,this.frames[t+1]=n?1:0},apply:function(t,e,n){var i=this.frames;if(n<i[0])return void(e>n&&this.apply(t,e,Number.MAX_VALUE,null,0));e>n&&(e=-1);var o=(n>=i[i.length-2]?i.length:r.Animation.binarySearch(i,n,2))-2;i[o]<e||(t.bones[boneIndex].flipX=0!=i[o+1])}},r.FlipYTimeline=function(t){this.curves=new r.Curves(t),this.frames=[],this.frames.length=2*t},r.FlipYTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(t,e,n){t*=2,this.frames[t]=e,this.frames[t+1]=n?1:0},apply:function(t,e,n){var i=this.frames;if(n<i[0])return void(e>n&&this.apply(t,e,Number.MAX_VALUE,null,0));e>n&&(e=-1);var o=(n>=i[i.length-2]?i.length:r.Animation.binarySearch(i,n,2))-2;i[o]<e||(t.bones[boneIndex].flipY=0!=i[o+1])}},r.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.events=[],this.animations=[],this.ikConstraints=[]},r.SkeletonData.prototype={name:null,defaultSkin:null,width:0,height:0,version:null,hash:null,findBone:function(t){for(var e=this.bones,n=0,r=e.length;r>n;n++)if(e[n].name==t)return e[n];return null},findBoneIndex:function(t){for(var e=this.bones,n=0,r=e.length;r>n;n++)if(e[n].name==t)return n;return-1},findSlot:function(t){for(var e=this.slots,n=0,r=e.length;r>n;n++)if(e[n].name==t)return slot[n];return null},findSlotIndex:function(t){for(var e=this.slots,n=0,r=e.length;r>n;n++)if(e[n].name==t)return n;return-1},findSkin:function(t){for(var e=this.skins,n=0,r=e.length;r>n;n++)if(e[n].name==t)return e[n];return null},findEvent:function(t){for(var e=this.events,n=0,r=e.length;r>n;n++)if(e[n].name==t)return e[n];return null},findAnimation:function(t){for(var e=this.animations,n=0,r=e.length;r>n;n++)if(e[n].name==t)return e[n];return null},findIkConstraint:function(t){for(var e=this.ikConstraints,n=0,r=e.length;r>n;n++)if(e[n].name==t)return e[n];return null}},r.Skeleton=function(t){this.data=t,this.bones=[];for(var e=0,n=t.bones.length;n>e;e++){var i=t.bones[e],o=i.parent?this.bones[t.bones.indexOf(i.parent)]:null;this.bones.push(new r.Bone(i,this,o))}this.slots=[],this.drawOrder=[];for(var e=0,n=t.slots.length;n>e;e++){var s=t.slots[e],a=this.bones[t.bones.indexOf(s.boneData)],u=new r.Slot(s,a);this.slots.push(u),this.drawOrder.push(u)}this.ikConstraints=[];for(var e=0,n=t.ikConstraints.length;n>e;e++)this.ikConstraints.push(new r.IkConstraint(t.ikConstraints[e],this));this.boneCache=[],this.updateCache()},r.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateCache:function(){var t=this.ikConstraints,e=t.length,n=e+1,r=this.boneCache;r.length>n&&(r.length=n);for(var i=0,o=r.length;o>i;i++)r[i].length=0;for(;r.length<n;)r[r.length]=[];var s=r[0],a=this.bones;t:for(var i=0,o=a.length;o>i;i++){var u=a[i],c=u;do{for(var l=0;e>l;l++)for(var h=t[l],f=h.bones[0],p=h.bones[h.bones.length-1];;){if(c==p){r[l].push(u),r[l+1].push(u);continue t}if(p==f)break;p=p.parent}c=c.parent}while(c);s[s.length]=u}},updateWorldTransform:function(){for(var t=this.bones,e=0,n=t.length;n>e;e++){var r=t[e];r.rotationIK=r.rotation}for(var e=0,i=this.boneCache.length-1;;){for(var o=this.boneCache[e],s=0,a=o.length;a>s;s++)o[s].updateWorldTransform();if(e==i)break;this.ikConstraints[e].apply(),e++}},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var t=this.bones,e=0,n=t.length;n>e;e++)t[e].setToSetupPose();for(var r=this.ikConstraints,e=0,n=r.length;n>e;e++){var i=r[e];i.bendDirection=i.data.bendDirection,i.mix=i.data.mix}},setSlotsToSetupPose:function(){for(var t=this.slots,e=this.drawOrder,n=0,r=t.length;r>n;n++)e[n]=t[n],t[n].setToSetupPose(n)},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(t){for(var e=this.bones,n=0,r=e.length;r>n;n++)if(e[n].data.name==t)return e[n];return null},findBoneIndex:function(t){for(var e=this.bones,n=0,r=e.length;r>n;n++)if(e[n].data.name==t)return n;return-1},findSlot:function(t){for(var e=this.slots,n=0,r=e.length;r>n;n++)if(e[n].data.name==t)return e[n];return null},findSlotIndex:function(t){for(var e=this.slots,n=0,r=e.length;r>n;n++)if(e[n].data.name==t)return n;return-1},setSkinByName:function(t){var e=this.data.findSkin(t);if(!e)throw"Skin not found: "+t;this.setSkin(e)},setSkin:function(t){if(t)if(this.skin)t._attachAll(this,this.skin);else for(var e=this.slots,n=0,r=e.length;r>n;n++){var i=e[n],o=i.data.attachmentName;if(o){var s=t.getAttachment(n,o);s&&i.setAttachment(s)}}this.skin=t},getAttachmentBySlotName:function(t,e){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(t),e)},getAttachmentBySlotIndex:function(t,e){if(this.skin){var n=this.skin.getAttachment(t,e);if(n)return n}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},setAttachment:function(t,e){for(var n=this.slots,r=0,i=n.length;i>r;r++){var o=n[r];if(o.data.name==t){var s=null;if(e&&(s=this.getAttachmentBySlotIndex(r,e),!s))throw"Attachment not found: "+e+", for slot: "+t;return void o.setAttachment(s)}}throw"Slot not found: "+t},findIkConstraint:function(t){for(var e=this.ikConstraints,n=0,r=e.length;r>n;n++)if(e[n].data.name==t)return e[n];return null},update:function(t){this.time+=t}},r.EventData=function(t){this.name=t},r.EventData.prototype={intValue:0,floatValue:0,stringValue:null},r.Event=function(t){this.data=t},r.Event.prototype={intValue:0,floatValue:0,stringValue:null},r.AttachmentType={region:0,boundingbox:1,mesh:2,skinnedmesh:3},r.RegionAttachment=function(t){this.name=t,this.offset=[],this.offset.length=8,this.uvs=[],this.uvs.length=8},r.RegionAttachment.prototype={type:r.AttachmentType.region,x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(t,e,n,r,i){var o=this.uvs;i?(o[2]=t,o[3]=r,o[4]=t,o[5]=e,o[6]=n,o[7]=e,o[0]=n,o[1]=r):(o[0]=t,o[1]=r,o[2]=t,o[3]=e,o[4]=n,o[5]=e,o[6]=n,o[7]=r)},updateOffset:function(){var t=this.width/this.regionOriginalWidth*this.scaleX,e=this.height/this.regionOriginalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.regionOffsetX*t,i=-this.height/2*this.scaleY+this.regionOffsetY*e,o=n+this.regionWidth*t,s=i+this.regionHeight*e,a=this.rotation*r.degRad,u=Math.cos(a),c=Math.sin(a),l=n*u+this.x,h=n*c,f=i*u+this.y,p=i*c,d=o*u+this.x,m=o*c,g=s*u+this.y,v=s*c,y=this.offset;y[0]=l-p,y[1]=f+h,y[2]=l-v,y[3]=g+h,y[4]=d-v,y[5]=g+m,y[6]=d-p,y[7]=f+m},computeVertices:function(t,e,n,r){t+=n.worldX,e+=n.worldY;var i=n.m00,o=n.m01,s=n.m10,a=n.m11,u=this.offset;r[0]=u[0]*i+u[1]*o+t,r[1]=u[0]*s+u[1]*a+e,r[2]=u[2]*i+u[3]*o+t,r[3]=u[2]*s+u[3]*a+e,r[4]=u[4]*i+u[5]*o+t,r[5]=u[4]*s+u[5]*a+e,r[6]=u[6]*i+u[7]*o+t,r[7]=u[6]*s+u[7]*a+e}},r.MeshAttachment=function(t){this.name=t},r.MeshAttachment.prototype={type:r.AttachmentType.mesh,vertices:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var t=this.regionU2-this.regionU,e=this.regionV2-this.regionV,n=this.regionUVs.length;if(this.uvs&&this.uvs.length==n||(this.uvs=new r.Float32Array(n)),this.regionRotate)for(var i=0;n>i;i+=2)this.uvs[i]=this.regionU+this.regionUVs[i+1]*t,this.uvs[i+1]=this.regionV+e-this.regionUVs[i]*e;else for(var i=0;n>i;i+=2)this.uvs[i]=this.regionU+this.regionUVs[i]*t,this.uvs[i+1]=this.regionV+this.regionUVs[i+1]*e},computeWorldVertices:function(t,e,n,r){var i=n.bone;t+=i.worldX,e+=i.worldY;var o=i.m00,s=i.m01,a=i.m10,u=i.m11,c=this.vertices,l=c.length;n.attachmentVertices.length==l&&(c=n.attachmentVertices);for(var h=0;l>h;h+=2){var f=c[h],p=c[h+1];r[h]=f*o+p*s+t,r[h+1]=f*a+p*u+e}}},r.SkinnedMeshAttachment=function(t){this.name=t},r.SkinnedMeshAttachment.prototype={type:r.AttachmentType.skinnedmesh,bones:null,weights:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var t=this.regionU2-this.regionU,e=this.regionV2-this.regionV,n=this.regionUVs.length;if(this.uvs&&this.uvs.length==n||(this.uvs=new r.Float32Array(n)),this.regionRotate)for(var i=0;n>i;i+=2)this.uvs[i]=this.regionU+this.regionUVs[i+1]*t,this.uvs[i+1]=this.regionV+e-this.regionUVs[i]*e;else for(var i=0;n>i;i+=2)this.uvs[i]=this.regionU+this.regionUVs[i]*t,this.uvs[i+1]=this.regionV+this.regionUVs[i+1]*e},computeWorldVertices:function(t,e,n,r){var i,o,s,a,u,c,l,h=n.bone.skeleton.bones,f=this.weights,p=this.bones,d=0,m=0,g=0,v=0,y=p.length;if(n.attachmentVertices.length)for(var b=n.attachmentVertices;y>m;d+=2){for(o=0,s=0,i=p[m++]+m;i>m;m++,g+=3,v+=2)a=h[p[m]],u=f[g]+b[v],c=f[g+1]+b[v+1],l=f[g+2],o+=(u*a.m00+c*a.m01+a.worldX)*l,s+=(u*a.m10+c*a.m11+a.worldY)*l;r[d]=o+t,r[d+1]=s+e}else for(;y>m;d+=2){for(o=0,s=0,i=p[m++]+m;i>m;m++,g+=3)a=h[p[m]],u=f[g],c=f[g+1],l=f[g+2],o+=(u*a.m00+c*a.m01+a.worldX)*l,s+=(u*a.m10+c*a.m11+a.worldY)*l;r[d]=o+t,r[d+1]=s+e}}},r.BoundingBoxAttachment=function(t){this.name=t,this.vertices=[]},r.BoundingBoxAttachment.prototype={type:r.AttachmentType.boundingbox,computeWorldVertices:function(t,e,n,r){t+=n.worldX,e+=n.worldY;for(var i=n.m00,o=n.m01,s=n.m10,a=n.m11,u=this.vertices,c=0,l=u.length;l>c;c+=2){var h=u[c],f=u[c+1];r[c]=h*i+f*o+t,r[c+1]=h*s+f*a+e}}},r.AnimationStateData=function(t){this.skeletonData=t,this.animationToMixTime={}},r.AnimationStateData.prototype={defaultMix:0,setMixByName:function(t,e,n){var r=this.skeletonData.findAnimation(t);if(!r)throw"Animation not found: "+t;var i=this.skeletonData.findAnimation(e);if(!i)throw"Animation not found: "+e;this.setMix(r,i,n)},setMix:function(t,e,n){this.animationToMixTime[t.name+":"+e.name]=n},getMix:function(t,e){var n=t.name+":"+e.name;return this.animationToMixTime.hasOwnProperty(n)?this.animationToMixTime[n]:this.defaultMix}},r.TrackEntry=function(){},r.TrackEntry.prototype={next:null,previous:null,animation:null,loop:!1,delay:0,time:0,lastTime:-1,endTime:0,timeScale:1,mixTime:0,mixDuration:0,mix:1,onStart:null,onEnd:null,onComplete:null,onEvent:null},r.AnimationState=function(t){this.data=t,this.tracks=[],this.events=[]},r.AnimationState.prototype={onStart:null,onEnd:null,onComplete:null,onEvent:null,timeScale:1,update:function(t){t*=this.timeScale;for(var e=0;e<this.tracks.length;e++){var n=this.tracks[e];if(n){if(n.time+=t*n.timeScale,n.previous){var r=t*n.previous.timeScale;n.previous.time+=r,n.mixTime+=r}var i=n.next;i?(i.time=n.lastTime-i.delay,i.time>=0&&this.setCurrent(e,i)):!n.loop&&n.lastTime>=n.endTime&&this.clearTrack(e)}}},apply:function(t){for(var e=0;e<this.tracks.length;e++){var n=this.tracks[e];if(n){this.events.length=0;var r=n.time,i=n.lastTime,o=n.endTime,s=n.loop;!s&&r>o&&(r=o);var a=n.previous;if(a){var u=a.time;!a.loop&&u>a.endTime&&(u=a.endTime),a.animation.apply(t,u,u,a.loop,null);var c=n.mixTime/n.mixDuration*n.mix;c>=1&&(c=1,n.previous=null),n.animation.mix(t,n.lastTime,r,s,this.events,c)}else 1==n.mix?n.animation.apply(t,n.lastTime,r,s,this.events):n.animation.mix(t,n.lastTime,r,s,this.events,n.mix);for(var l=0,h=this.events.length;h>l;l++){var f=this.events[l];n.onEvent&&n.onEvent(e,f),this.onEvent&&this.onEvent(e,f)}if(s?i%o>r%o:o>i&&r>=o){var p=Math.floor(r/o);n.onComplete&&n.onComplete(e,p),this.onComplete&&this.onComplete(e,p)}n.lastTime=n.time}}},clearTracks:function(){for(var t=0,e=this.tracks.length;e>t;t++)this.clearTrack(t);this.tracks.length=0},clearTrack:function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];e&&(e.onEnd&&e.onEnd(t),this.onEnd&&this.onEnd(t),this.tracks[t]=null)}},_expandToIndex:function(t){if(t<this.tracks.length)return this.tracks[t];for(;t>=this.tracks.length;)this.tracks.push(null);return null},setCurrent:function(t,e){var n=this._expandToIndex(t);if(n){var r=n.previous;n.previous=null,n.onEnd&&n.onEnd(t),this.onEnd&&this.onEnd(t),e.mixDuration=this.data.getMix(n.animation,e.animation),e.mixDuration>0&&(e.mixTime=0,e.previous=r&&n.mixTime/n.mixDuration<.5?r:n)}this.tracks[t]=e,e.onStart&&e.onStart(t),this.onStart&&this.onStart(t)},setAnimationByName:function(t,e,n){var r=this.data.skeletonData.findAnimation(e);if(!r)throw"Animation not found: "+e;return this.setAnimation(t,r,n)},setAnimation:function(t,e,n){var i=new r.TrackEntry;return i.animation=e,i.loop=n,i.endTime=e.duration,this.setCurrent(t,i),i},addAnimationByName:function(t,e,n,r){var i=this.data.skeletonData.findAnimation(e);if(!i)throw"Animation not found: "+e;return this.addAnimation(t,i,n,r)},addAnimation:function(t,e,n,i){var o=new r.TrackEntry;o.animation=e,o.loop=n,o.endTime=e.duration;var s=this._expandToIndex(t);if(s){for(;s.next;)s=s.next;s.next=o}else this.tracks[t]=o;return 0>=i&&(s?i+=s.endTime-this.data.getMix(s.animation,e):i=0),o.delay=i,o},getCurrent:function(t){return t>=this.tracks.length?null:this.tracks[t]}},r.SkeletonJson=function(t){this.attachmentLoader=t},r.SkeletonJson.prototype={scale:1,readSkeletonData:function(t,e){var n=new r.SkeletonData;n.name=e;var i=t.skeleton;i&&(n.hash=i.hash,n.version=i.spine,n.width=i.width||0,n.height=i.height||0);for(var o=t.bones,s=0,a=o.length;a>s;s++){var u=o[s],c=null;if(u.parent&&(c=n.findBone(u.parent),!c))throw"Parent bone not found: "+u.parent;var l=new r.BoneData(u.name,c);l.length=(u.length||0)*this.scale,l.x=(u.x||0)*this.scale,l.y=(u.y||0)*this.scale,l.rotation=u.rotation||0,l.scaleX=u.hasOwnProperty("scaleX")?u.scaleX:1,l.scaleY=u.hasOwnProperty("scaleY")?u.scaleY:1,l.inheritScale=u.hasOwnProperty("inheritScale")?u.inheritScale:!0,l.inheritRotation=u.hasOwnProperty("inheritRotation")?u.inheritRotation:!0,n.bones.push(l)}var h=t.ik;if(h)for(var s=0,a=h.length;a>s;s++){for(var f=h[s],p=new r.IkConstraintData(f.name),o=f.bones,d=0,m=o.length;m>d;d++){var g=n.findBone(o[d]);if(!g)throw"IK bone not found: "+o[d];p.bones.push(g)}if(p.target=n.findBone(f.target),!p.target)throw"Target bone not found: "+f.target;p.bendDirection=!f.hasOwnProperty("bendPositive")||f.bendPositive?1:-1,p.mix=f.hasOwnProperty("mix")?f.mix:1,n.ikConstraints.push(p)}for(var v=t.slots,s=0,a=v.length;a>s;s++){var y=v[s],l=n.findBone(y.bone);if(!l)throw"Slot bone not found: "+y.bone;var b=new r.SlotData(y.name,l),x=y.color;x&&(b.r=this.toColor(x,0),b.g=this.toColor(x,1),b.b=this.toColor(x,2),b.a=this.toColor(x,3)),b.attachmentName=y.attachment,b.additiveBlending=y.additive&&"true"==y.additive,n.slots.push(b)}var w=t.skins;for(var _ in w)if(w.hasOwnProperty(_)){var T=w[_],S=new r.Skin(_);for(var E in T)if(T.hasOwnProperty(E)){var C=n.findSlotIndex(E),A=T[E];for(var j in A)if(A.hasOwnProperty(j)){var k=this.readAttachment(S,j,A[j]);k&&S.addAttachment(C,j,k)}}n.skins.push(S),"default"==S.name&&(n.defaultSkin=S)}var O=t.events;for(var M in O)if(O.hasOwnProperty(M)){var R=O[M],P=new r.EventData(M);P.intValue=R["int"]||0,P.floatValue=R["float"]||0,P.stringValue=R.string||null,n.events.push(P)}var I=t.animations;for(var L in I)I.hasOwnProperty(L)&&this.readAnimation(L,I[L],n);return n},readAttachment:function(t,e,n){e=n.name||e;var i=r.AttachmentType[n.type||"region"],o=n.path||e,s=this.scale;
if(i==r.AttachmentType.region){var a=this.attachmentLoader.newRegionAttachment(t,e,o);if(!a)return null;a.path=o,a.x=(n.x||0)*s,a.y=(n.y||0)*s,a.scaleX=n.hasOwnProperty("scaleX")?n.scaleX:1,a.scaleY=n.hasOwnProperty("scaleY")?n.scaleY:1,a.rotation=n.rotation||0,a.width=(n.width||0)*s,a.height=(n.height||0)*s;var u=n.color;return u&&(a.r=this.toColor(u,0),a.g=this.toColor(u,1),a.b=this.toColor(u,2),a.a=this.toColor(u,3)),a.updateOffset(),a}if(i==r.AttachmentType.mesh){var c=this.attachmentLoader.newMeshAttachment(t,e,o);return c?(c.path=o,c.vertices=this.getFloatArray(n,"vertices",s),c.triangles=this.getIntArray(n,"triangles"),c.regionUVs=this.getFloatArray(n,"uvs",1),c.updateUVs(),u=n.color,u&&(c.r=this.toColor(u,0),c.g=this.toColor(u,1),c.b=this.toColor(u,2),c.a=this.toColor(u,3)),c.hullLength=2*(n.hull||0),n.edges&&(c.edges=this.getIntArray(n,"edges")),c.width=(n.width||0)*s,c.height=(n.height||0)*s,c):null}if(i==r.AttachmentType.skinnedmesh){var c=this.attachmentLoader.newSkinnedMeshAttachment(t,e,o);if(!c)return null;c.path=o;for(var l=this.getFloatArray(n,"uvs",1),h=this.getFloatArray(n,"vertices",1),f=[],p=[],d=0,m=h.length;m>d;){var g=0|h[d++];p[p.length]=g;for(var v=d+4*g;v>d;)p[p.length]=h[d],f[f.length]=h[d+1]*s,f[f.length]=h[d+2]*s,f[f.length]=h[d+3],d+=4}return c.bones=p,c.weights=f,c.triangles=this.getIntArray(n,"triangles"),c.regionUVs=l,c.updateUVs(),u=n.color,u&&(c.r=this.toColor(u,0),c.g=this.toColor(u,1),c.b=this.toColor(u,2),c.a=this.toColor(u,3)),c.hullLength=2*(n.hull||0),n.edges&&(c.edges=this.getIntArray(n,"edges")),c.width=(n.width||0)*s,c.height=(n.height||0)*s,c}if(i==r.AttachmentType.boundingbox){for(var y=this.attachmentLoader.newBoundingBoxAttachment(t,e),h=n.vertices,d=0,m=h.length;m>d;d++)y.vertices.push(h[d]*s);return y}throw"Unknown attachment type: "+i},readAnimation:function(t,e,n){var i=[],o=0,s=e.slots;for(var a in s)if(s.hasOwnProperty(a)){var u=s[a],c=n.findSlotIndex(a);for(var l in u)if(u.hasOwnProperty(l)){var h=u[l];if("color"==l){var f=new r.ColorTimeline(h.length);f.slotIndex=c;for(var p=0,d=0,m=h.length;m>d;d++){var g=h[d],v=g.color,y=this.toColor(v,0),b=this.toColor(v,1),x=this.toColor(v,2),w=this.toColor(v,3);f.setFrame(p,g.time,y,b,x,w),this.readCurve(f,p,g),p++}i.push(f),o=Math.max(o,f.frames[5*f.getFrameCount()-5])}else{if("attachment"!=l)throw"Invalid timeline type for a slot: "+l+" ("+a+")";var f=new r.AttachmentTimeline(h.length);f.slotIndex=c;for(var p=0,d=0,m=h.length;m>d;d++){var g=h[d];f.setFrame(p++,g.time,g.name)}i.push(f),o=Math.max(o,f.frames[f.getFrameCount()-1])}}}var _=e.bones;for(var T in _)if(_.hasOwnProperty(T)){var S=n.findBoneIndex(T);if(-1==S)throw"Bone not found: "+T;var E=_[T];for(var l in E)if(E.hasOwnProperty(l)){var h=E[l];if("rotate"==l){var f=new r.RotateTimeline(h.length);f.boneIndex=S;for(var p=0,d=0,m=h.length;m>d;d++){var g=h[d];f.setFrame(p,g.time,g.angle),this.readCurve(f,p,g),p++}i.push(f),o=Math.max(o,f.frames[2*f.getFrameCount()-2])}else if("translate"==l||"scale"==l){var f,C=1;"scale"==l?f=new r.ScaleTimeline(h.length):(f=new r.TranslateTimeline(h.length),C=this.scale),f.boneIndex=S;for(var p=0,d=0,m=h.length;m>d;d++){var g=h[d],A=(g.x||0)*C,j=(g.y||0)*C;f.setFrame(p,g.time,A,j),this.readCurve(f,p,g),p++}i.push(f),o=Math.max(o,f.frames[3*f.getFrameCount()-3])}else{if("flipX"!=l&&"flipY"!=l)throw"Invalid timeline type for a bone: "+l+" ("+T+")";var A="flipX"==l,f=A?new r.FlipXTimeline(h.length):new r.FlipYTimeline(h.length);f.boneIndex=S;for(var k=A?"x":"y",p=0,d=0,m=h.length;m>d;d++){var g=h[d];f.setFrame(p,g.time,g[k]||!1),p++}i.push(f),o=Math.max(o,f.frames[2*f.getFrameCount()-2])}}}var O=e.ik;for(var M in O)if(O.hasOwnProperty(M)){var R=n.findIkConstraint(M),h=O[M],f=new r.IkConstraintTimeline(h.length);f.ikConstraintIndex=n.ikConstraints.indexOf(R);for(var p=0,d=0,m=h.length;m>d;d++){var g=h[d],P=g.hasOwnProperty("mix")?g.mix:1,I=!g.hasOwnProperty("bendPositive")||g.bendPositive?1:-1;f.setFrame(p,g.time,P,I),this.readCurve(f,p,g),p++}i.push(f),o=Math.max(o,f.frames[3*f.frameCount-3])}var L=e.ffd;for(var F in L){var B=n.findSkin(F),u=L[F];for(a in u){var c=n.findSlotIndex(a),D=u[a];for(var N in D){var h=D[N],f=new r.FfdTimeline(h.length),q=B.getAttachment(c,N);if(!q)throw"FFD attachment not found: "+N;f.slotIndex=c,f.attachment=q;var U,W=q.type==r.AttachmentType.mesh;U=W?q.vertices.length:q.weights.length/3*2;for(var p=0,d=0,m=h.length;m>d;d++){var G,g=h[d];if(g.vertices){var V=g.vertices,G=[];G.length=U;var H=g.offset||0,z=V.length;if(1==this.scale)for(var Y=0;z>Y;Y++)G[Y+H]=V[Y];else for(var Y=0;z>Y;Y++)G[Y+H]=V[Y]*this.scale;if(W)for(var X=q.vertices,Y=0,z=G.length;z>Y;Y++)G[Y]+=X[Y]}else W?G=q.vertices:(G=[],G.length=U);f.setFrame(p,g.time,G),this.readCurve(f,p,g),p++}i[i.length]=f,o=Math.max(o,f.frames[f.frameCount-1])}}}var $=e.drawOrder;if($||($=e.draworder),$){for(var f=new r.DrawOrderTimeline($.length),J=n.slots.length,p=0,d=0,m=$.length;m>d;d++){var K=$[d],Q=null;if(K.offsets){Q=[],Q.length=J;for(var Y=J-1;Y>=0;Y--)Q[Y]=-1;var Z=K.offsets,te=[];te.length=J-Z.length;for(var ee=0,ne=0,Y=0,z=Z.length;z>Y;Y++){var re=Z[Y],c=n.findSlotIndex(re.slot);if(-1==c)throw"Slot not found: "+re.slot;for(;ee!=c;)te[ne++]=ee++;Q[ee+re.offset]=ee++}for(;J>ee;)te[ne++]=ee++;for(var Y=J-1;Y>=0;Y--)-1==Q[Y]&&(Q[Y]=te[--ne])}f.setFrame(p++,K.time,Q)}i.push(f),o=Math.max(o,f.frames[f.getFrameCount()-1])}var ie=e.events;if(ie){for(var f=new r.EventTimeline(ie.length),p=0,d=0,m=ie.length;m>d;d++){var oe=ie[d],se=n.findEvent(oe.name);if(!se)throw"Event not found: "+oe.name;var ae=new r.Event(se);ae.intValue=oe.hasOwnProperty("int")?oe["int"]:se.intValue,ae.floatValue=oe.hasOwnProperty("float")?oe["float"]:se.floatValue,ae.stringValue=oe.hasOwnProperty("string")?oe.string:se.stringValue,f.setFrame(p++,oe.time,ae)}i.push(f),o=Math.max(o,f.frames[f.getFrameCount()-1])}n.animations.push(new r.Animation(t,i,o))},readCurve:function(t,e,n){var r=n.curve;r?"stepped"==r?t.curves.setStepped(e):r instanceof Array&&t.curves.setCurve(e,r[0],r[1],r[2],r[3]):t.curves.setLinear(e)},toColor:function(t,e){if(8!=t.length)throw"Color hexidecimal length must be 8, recieved: "+t;return parseInt(t.substring(2*e,2*e+2),16)/255},getFloatArray:function(t,e,n){var i=t[e],o=new r.Float32Array(i.length),s=0,a=i.length;if(1==n)for(;a>s;s++)o[s]=i[s];else for(;a>s;s++)o[s]=i[s]*n;return o},getIntArray:function(t,e){for(var n=t[e],i=new r.Uint16Array(n.length),o=0,s=n.length;s>o;o++)i[o]=0|n[o];return i}},r.Atlas=function(t,e){this.textureLoader=e,this.pages=[],this.regions=[];var n=new r.AtlasReader(t),i=[];i.length=4;for(var o=null;;){var s=n.readLine();if(null===s)break;if(s=n.trim(s),s.length)if(o){var a=new r.AtlasRegion;a.name=s,a.page=o,a.rotate="true"==n.readValue(),n.readTuple(i);var u=parseInt(i[0]),c=parseInt(i[1]);n.readTuple(i);var l=parseInt(i[0]),h=parseInt(i[1]);a.u=u/o.width,a.v=c/o.height,a.rotate?(a.u2=(u+h)/o.width,a.v2=(c+l)/o.height):(a.u2=(u+l)/o.width,a.v2=(c+h)/o.height),a.x=u,a.y=c,a.width=Math.abs(l),a.height=Math.abs(h),4==n.readTuple(i)&&(a.splits=[parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),parseInt(i[3])],4==n.readTuple(i)&&(a.pads=[parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),parseInt(i[3])],n.readTuple(i))),a.originalWidth=parseInt(i[0]),a.originalHeight=parseInt(i[1]),n.readTuple(i),a.offsetX=parseInt(i[0]),a.offsetY=parseInt(i[1]),a.index=parseInt(n.readValue()),this.regions.push(a)}else{o=new r.AtlasPage,o.name=s,2==n.readTuple(i)&&(o.width=parseInt(i[0]),o.height=parseInt(i[1]),n.readTuple(i)),o.format=r.Atlas.Format[i[0]],n.readTuple(i),o.minFilter=r.Atlas.TextureFilter[i[0]],o.magFilter=r.Atlas.TextureFilter[i[1]];var f=n.readValue();o.uWrap=r.Atlas.TextureWrap.clampToEdge,o.vWrap=r.Atlas.TextureWrap.clampToEdge,"x"==f?o.uWrap=r.Atlas.TextureWrap.repeat:"y"==f?o.vWrap=r.Atlas.TextureWrap.repeat:"xy"==f&&(o.uWrap=o.vWrap=r.Atlas.TextureWrap.repeat),e.load(o,s,this),this.pages.push(o)}else o=null}},r.Atlas.prototype={findRegion:function(t){for(var e=this.regions,n=0,r=e.length;r>n;n++)if(e[n].name==t)return e[n];return null},dispose:function(){for(var t=this.pages,e=0,n=t.length;n>e;e++)this.textureLoader.unload(t[e].rendererObject)},updateUVs:function(t){for(var e=this.regions,n=0,r=e.length;r>n;n++){var i=e[n];i.page==t&&(i.u=i.x/t.width,i.v=i.y/t.height,i.rotate?(i.u2=(i.x+i.height)/t.width,i.v2=(i.y+i.width)/t.height):(i.u2=(i.x+i.width)/t.width,i.v2=(i.y+i.height)/t.height))}}},r.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},r.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},r.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},r.AtlasPage=function(){},r.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},r.AtlasRegion=function(){},r.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},r.AtlasReader=function(t){this.lines=t.split(/\r\n|\r|\n/)},r.AtlasReader.prototype={index:0,trim:function(t){return t.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw"Invalid line: "+t;return this.trim(t.substring(e+1))},readTuple:function(t){var e=this.readLine(),n=e.indexOf(":");if(-1==n)throw"Invalid line: "+e;for(var r=0,i=n+1;3>r;r++){var o=e.indexOf(",",i);if(-1==o)break;t[r]=this.trim(e.substr(i,o-i)),i=o+1}return t[r]=this.trim(e.substring(i)),r+1}},r.AtlasAttachmentLoader=function(t){this.atlas=t},r.AtlasAttachmentLoader.prototype={newRegionAttachment:function(t,e,n){var i=this.atlas.findRegion(n);if(!i)throw"Region not found in atlas: "+n+" (region attachment: "+e+")";var o=new r.RegionAttachment(e);return o.rendererObject=i,o.setUVs(i.u,i.v,i.u2,i.v2,i.rotate),o.regionOffsetX=i.offsetX,o.regionOffsetY=i.offsetY,o.regionWidth=i.width,o.regionHeight=i.height,o.regionOriginalWidth=i.originalWidth,o.regionOriginalHeight=i.originalHeight,o},newMeshAttachment:function(t,e,n){var i=this.atlas.findRegion(n);if(!i)throw"Region not found in atlas: "+n+" (mesh attachment: "+e+")";var o=new r.MeshAttachment(e);return o.rendererObject=i,o.regionU=i.u,o.regionV=i.v,o.regionU2=i.u2,o.regionV2=i.v2,o.regionRotate=i.rotate,o.regionOffsetX=i.offsetX,o.regionOffsetY=i.offsetY,o.regionWidth=i.width,o.regionHeight=i.height,o.regionOriginalWidth=i.originalWidth,o.regionOriginalHeight=i.originalHeight,o},newSkinnedMeshAttachment:function(t,e,n){var i=this.atlas.findRegion(n);if(!i)throw"Region not found in atlas: "+n+" (skinned mesh attachment: "+e+")";var o=new r.SkinnedMeshAttachment(e);return o.rendererObject=i,o.regionU=i.u,o.regionV=i.v,o.regionU2=i.u2,o.regionV2=i.v2,o.regionRotate=i.rotate,o.regionOffsetX=i.offsetX,o.regionOffsetY=i.offsetY,o.regionWidth=i.width,o.regionHeight=i.height,o.regionOriginalWidth=i.originalWidth,o.regionOriginalHeight=i.originalHeight,o},newBoundingBoxAttachment:function(t,e){return new r.BoundingBoxAttachment(e)}},r.SkeletonBounds=function(){this.polygonPool=[],this.polygons=[],this.boundingBoxes=[]},r.SkeletonBounds.prototype={minX:0,minY:0,maxX:0,maxY:0,update:function(t,e){var n=t.slots,i=n.length,o=t.x,s=t.y,a=this.boundingBoxes,u=this.polygonPool,c=this.polygons;a.length=0;for(var l=0,h=c.length;h>l;l++)u.push(c[l]);c.length=0;for(var l=0;i>l;l++){var f=n[l],p=f.attachment;if(p.type==r.AttachmentType.boundingbox){a.push(p);var d,m=u.length;m>0?(d=u[m-1],u.splice(m-1,1)):d=[],c.push(d),d.length=p.vertices.length,p.computeWorldVertices(o,s,f.bone,d)}}e&&this.aabbCompute()},aabbCompute:function(){for(var t=this.polygons,e=Number.MAX_VALUE,n=Number.MAX_VALUE,r=Number.MIN_VALUE,i=Number.MIN_VALUE,o=0,s=t.length;s>o;o++)for(var a=t[o],u=0,c=a.length;c>u;u+=2){var l=a[u],h=a[u+1];e=Math.min(e,l),n=Math.min(n,h),r=Math.max(r,l),i=Math.max(i,h)}this.minX=e,this.minY=n,this.maxX=r,this.maxY=i},aabbContainsPoint:function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},aabbIntersectsSegment:function(t,e,n,r){var i=this.minX,o=this.minY,s=this.maxX,a=this.maxY;if(i>=t&&i>=n||o>=e&&o>=r||t>=s&&n>=s||e>=a&&r>=a)return!1;var u=(r-e)/(n-t),c=u*(i-t)+e;if(c>o&&a>c)return!0;if(c=u*(s-t)+e,c>o&&a>c)return!0;var l=(o-e)/u+t;return l>i&&s>l?!0:(l=(a-e)/u+t,l>i&&s>l?!0:!1)},aabbIntersectsSkeleton:function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},containsPoint:function(t,e){for(var n=this.polygons,r=0,i=n.length;i>r;r++)if(this.polygonContainsPoint(n[r],t,e))return this.boundingBoxes[r];return null},intersectsSegment:function(t,e,n,r){for(var i=this.polygons,o=0,s=i.length;s>o;o++)if(i[o].intersectsSegment(t,e,n,r))return this.boundingBoxes[o];return null},polygonContainsPoint:function(t,e,n){for(var r=t.length,i=r-2,o=!1,s=0;r>s;s+=2){var a=t[s+1],u=t[i+1];if(n>a&&u>=n||n>u&&a>=n){var c=t[s];c+(n-a)/(u-a)*(t[i]-c)<e&&(o=!o)}i=s}return o},polygonIntersectsSegment:function(t,e,n,r,i){for(var o=t.length,s=e-r,a=n-i,u=e*i-n*r,c=t[o-2],l=t[o-1],h=0;o>h;h+=2){var f=t[h],p=t[h+1],d=c*p-l*f,m=c-f,g=l-p,v=s*g-a*m,y=(u*m-s*d)/v;if((y>=c&&f>=y||y>=f&&c>=y)&&(y>=e&&r>=y||y>=r&&e>=y)){var b=(u*g-a*d)/v;if((b>=l&&p>=b||b>=p&&l>=b)&&(b>=n&&i>=b||b>=i&&n>=b))return!0}c=f,l=p}return!1},getPolygon:function(t){var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},getWidth:function(){return this.maxX-this.minX},getHeight:function(){return this.maxY-this.minY}},r.Bone.yDown=!0,n.AnimCache={},n.SpineTextureLoader=function(t,e){n.EventTarget.call(this),this.basePath=t,this.crossorigin=e,this.loadingCount=0},n.SpineTextureLoader.prototype=n.SpineTextureLoader,n.SpineTextureLoader.prototype.load=function(t,e){if(t.rendererObject=n.BaseTexture.fromImage(this.basePath+"/"+e,this.crossorigin),!t.rendererObject.hasLoaded){var r=this;++r.loadingCount,t.rendererObject.addEventListener("loaded",function(){--r.loadingCount,r.dispatchEvent({type:"loadedBaseTexture",content:r})})}},n.SpineTextureLoader.prototype.unload=function(t){t.destroy(!0)},n.Spine=function(t){if(n.DisplayObjectContainer.call(this),this.spineData=n.AnimCache[t],!this.spineData)throw new Error("Spine data must be preloaded using PIXI.SpineLoader or PIXI.AssetLoader: "+t);this.skeleton=new r.Skeleton(this.spineData),this.skeleton.updateWorldTransform(),this.stateData=new r.AnimationStateData(this.spineData),this.state=new r.AnimationState(this.stateData),this.slotContainers=[];for(var e=0,i=this.skeleton.drawOrder.length;i>e;e++){var o=this.skeleton.drawOrder[e],s=o.attachment,a=new n.DisplayObjectContainer;if(this.slotContainers.push(a),this.addChild(a),s instanceof r.RegionAttachment){var u=s.rendererObject.name,c=this.createSprite(o,s);o.currentSprite=c,o.currentSpriteName=u,a.addChild(c)}else{if(!(s instanceof r.MeshAttachment))continue;var l=this.createMesh(o,s);o.currentMesh=l,o.currentMeshName=s.name,a.addChild(l)}}this.autoUpdate=!0},n.Spine.prototype=Object.create(n.DisplayObjectContainer.prototype),n.Spine.prototype.constructor=n.Spine,Object.defineProperty(n.Spine.prototype,"autoUpdate",{get:function(){return this.updateTransform===n.Spine.prototype.autoUpdateTransform},set:function(t){this.updateTransform=t?n.Spine.prototype.autoUpdateTransform:n.DisplayObjectContainer.prototype.updateTransform}}),n.Spine.prototype.update=function(t){this.state.update(t),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var e=this.skeleton.drawOrder,i=0,o=e.length;o>i;i++){var s=e[i],a=s.attachment,u=this.slotContainers[i];if(a){var c=a.type;if(c===r.AttachmentType.region){if(a.rendererObject&&(!s.currentSpriteName||s.currentSpriteName!==a.name)){var l=a.rendererObject.name;if(void 0!==s.currentSprite&&(s.currentSprite.visible=!1),s.sprites=s.sprites||{},void 0!==s.sprites[l])s.sprites[l].visible=!0;else{var h=this.createSprite(s,a);u.addChild(h)}s.currentSprite=s.sprites[l],s.currentSpriteName=l}var f=s.bone;u.position.x=f.worldX+a.x*f.m00+a.y*f.m01,u.position.y=f.worldY+a.x*f.m10+a.y*f.m11,u.scale.x=f.worldScaleX,u.scale.y=f.worldScaleY,u.rotation=-(s.bone.worldRotation*r.degRad),s.currentSprite.tint=n.rgb2hex([s.r,s.g,s.b])}else{if(c!==r.AttachmentType.skinnedmesh){u.visible=!1;continue}if(!s.currentMeshName||s.currentMeshName!==a.name){var p=a.name;if(void 0!==s.currentMesh&&(s.currentMesh.visible=!1),s.meshes=s.meshes||{},void 0!==s.meshes[p])s.meshes[p].visible=!0;else{var d=this.createMesh(s,a);u.addChild(d)}s.currentMesh=s.meshes[p],s.currentMeshName=p}a.computeWorldVertices(s.bone.skeleton.x,s.bone.skeleton.y,s,s.currentMesh.vertices)}u.visible=!0,u.alpha=s.a}else u.visible=!1}},n.Spine.prototype.autoUpdateTransform=function(){this.lastTime=this.lastTime||Date.now();var t=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(t),n.DisplayObjectContainer.prototype.updateTransform.call(this)},n.Spine.prototype.createSprite=function(t,e){var i=e.rendererObject,o=i.page.rendererObject,s=new n.Rectangle(i.x,i.y,i.rotate?i.height:i.width,i.rotate?i.width:i.height),a=new n.Texture(o,s),u=new n.Sprite(a),c=i.rotate?.5*Math.PI:0;return u.scale.set(i.width/i.originalWidth,i.height/i.originalHeight),u.rotation=c-e.rotation*r.degRad,u.anchor.x=u.anchor.y=.5,t.sprites=t.sprites||{},t.sprites[i.name]=u,u},n.Spine.prototype.createMesh=function(t,e){var r=e.rendererObject,i=r.page.rendererObject,o=new n.Texture(i),s=new n.Strip(o);return s.drawMode=n.Strip.DrawModes.TRIANGLES,s.canvasPadding=1.5,s.vertices=new n.Float32Array(e.uvs.length),s.uvs=e.uvs,s.indices=e.triangles,t.meshes=t.meshes||{},t.meshes[e.name]=s,s},n.BaseTextureCache={},n.BaseTextureCacheIdGenerator=0,n.BaseTexture=function(t,e){if(this.resolution=1,this.width=100,this.height=100,this.scaleMode=e||n.scaleModes.DEFAULT,this.hasLoaded=!1,this.source=t,this._UID=n._UID++,this.premultipliedAlpha=!0,this._glTextures=[],this.mipmap=!1,this._dirty=[!0,!0,!0,!0],t){if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this.hasLoaded=!0,this.width=this.source.naturalWidth||this.source.width,this.height=this.source.naturalHeight||this.source.height,this.dirty();else{var r=this;this.source.onload=function(){r.hasLoaded=!0,r.width=r.source.naturalWidth||r.source.width,r.height=r.source.naturalHeight||r.source.height,r.dirty(),r.dispatchEvent({type:"loaded",content:r})},this.source.onerror=function(){r.dispatchEvent({type:"error",content:r})}}this.imageUrl=null,this._powerOf2=!1}},n.BaseTexture.prototype.constructor=n.BaseTexture,n.EventTarget.mixin(n.BaseTexture.prototype),n.BaseTexture.prototype.destroy=function(){this.imageUrl?(delete n.BaseTextureCache[this.imageUrl],delete n.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete n.BaseTextureCache[this.source._pixiId],this.source=null,this.unloadFromGPU()},n.BaseTexture.prototype.updateSourceImage=function(t){this.hasLoaded=!1,this.source.src=null,this.source.src=t},n.BaseTexture.prototype.dirty=function(){for(var t=0;t<this._glTextures.length;t++)this._dirty[t]=!0},n.BaseTexture.prototype.unloadFromGPU=function(){this.dirty();for(var t=this._glTextures.length-1;t>=0;t--){var e=this._glTextures[t],r=n.glContexts[t];r&&e&&r.deleteTexture(e)}this._glTextures.length=0,this.dirty()},n.BaseTexture.fromImage=function(t,e,r){var i=n.BaseTextureCache[t];if(void 0===e&&-1===t.indexOf("data:")&&(e=!0),!i){var o=new Image;e&&(o.crossOrigin=""),o.src=t,i=new n.BaseTexture(o,r),i.imageUrl=t,n.BaseTextureCache[t]=i,-1!==t.indexOf(n.RETINA_PREFIX+".")&&(i.resolution=2)}return i},n.BaseTexture.fromCanvas=function(t,e){t._pixiId||(t._pixiId="canvas_"+n.TextureCacheIdGenerator++);var r=n.BaseTextureCache[t._pixiId];return r||(r=new n.BaseTexture(t,e),n.BaseTextureCache[t._pixiId]=r),r},n.TextureCache={},n.FrameCache={},n.TextureCacheIdGenerator=0,n.Texture=function(t,e,r,i){this.noFrame=!1,e||(this.noFrame=!0,e=new n.Rectangle(0,0,1,1)),t instanceof n.Texture&&(t=t.baseTexture),this.baseTexture=t,this.frame=e,this.trim=i,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=r||new n.Rectangle(0,0,1,1),t.hasLoaded?(this.noFrame&&(e=new n.Rectangle(0,0,t.width,t.height)),this.setFrame(e)):t.addEventListener("loaded",this.onBaseTextureLoaded.bind(this))},n.Texture.prototype.constructor=n.Texture,n.EventTarget.mixin(n.Texture.prototype),n.Texture.prototype.onBaseTextureLoaded=function(){var t=this.baseTexture;t.removeEventListener("loaded",this.onLoaded),this.noFrame&&(this.frame=new n.Rectangle(0,0,t.width,t.height)),this.setFrame(this.frame),this.dispatchEvent({type:"update",content:this})},n.Texture.prototype.destroy=function(t){t&&this.baseTexture.destroy(),this.valid=!1},n.Texture.prototype.setFrame=function(t){if(this.noFrame=!1,this.frame=t,this.width=t.width,this.height=t.height,this.crop.x=t.x,this.crop.y=t.y,this.crop.width=t.width,this.crop.height=t.height,!this.trim&&(t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=t&&t.width&&t.height&&this.baseTexture.source&&this.baseTexture.hasLoaded,this.trim&&(this.width=this.trim.width,this.height=this.trim.height,this.frame.width=this.trim.width,this.frame.height=this.trim.height),this.valid&&this._updateUvs()},n.Texture.prototype._updateUvs=function(){this._uvs||(this._uvs=new n.TextureUvs);var t=this.crop,e=this.baseTexture.width,r=this.baseTexture.height;this._uvs.x0=t.x/e,this._uvs.y0=t.y/r,this._uvs.x1=(t.x+t.width)/e,this._uvs.y1=t.y/r,this._uvs.x2=(t.x+t.width)/e,this._uvs.y2=(t.y+t.height)/r,this._uvs.x3=t.x/e,this._uvs.y3=(t.y+t.height)/r},n.Texture.fromImage=function(t,e,r){var i=n.TextureCache[t];return i||(i=new n.Texture(n.BaseTexture.fromImage(t,e,r)),n.TextureCache[t]=i),i},n.Texture.fromFrame=function(t){var e=n.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache ');return e},n.Texture.fromCanvas=function(t,e){var r=n.BaseTexture.fromCanvas(t,e);return new n.Texture(r)},n.Texture.addTextureToCache=function(t,e){n.TextureCache[e]=t},n.Texture.removeTextureFromCache=function(t){var e=n.TextureCache[t];return delete n.TextureCache[t],delete n.BaseTextureCache[t],e},n.TextureUvs=function(){this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0},n.Texture.emptyTexture=new n.Texture(new n.BaseTexture),n.RenderTexture=function(t,e,r,i,o){if(this.width=t||100,this.height=e||100,this.resolution=o||1,this.frame=new n.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.crop=new n.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.baseTexture=new n.BaseTexture,this.baseTexture.width=this.width*this.resolution,this.baseTexture.height=this.height*this.resolution,this.baseTexture._glTextures=[],this.baseTexture.resolution=this.resolution,this.baseTexture.scaleMode=i||n.scaleModes.DEFAULT,this.baseTexture.hasLoaded=!0,n.Texture.call(this,this.baseTexture,new n.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution)),this.renderer=r||n.defaultRenderer,this.renderer.type===n.WEBGL_RENDERER){var s=this.renderer.gl;this.baseTexture._dirty[s.id]=!1,this.textureBuffer=new n.FilterTexture(s,this.width,this.height,this.baseTexture.scaleMode),this.baseTexture._glTextures[s.id]=this.textureBuffer.texture,this.render=this.renderWebGL,this.projection=new n.Point(.5*this.width,.5*-this.height)}else this.render=this.renderCanvas,this.textureBuffer=new n.CanvasBuffer(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this._updateUvs()},n.RenderTexture.prototype=Object.create(n.Texture.prototype),n.RenderTexture.prototype.constructor=n.RenderTexture,n.RenderTexture.prototype.resize=function(t,e,r){(t!==this.width||e!==this.height)&&(this.valid=t>0&&e>0,this.width=t,this.height=e,this.frame.width=this.crop.width=t*this.resolution,this.frame.height=this.crop.height=e*this.resolution,r&&(this.baseTexture.width=this.width*this.resolution,this.baseTexture.height=this.height*this.resolution),this.renderer.type===n.WEBGL_RENDERER&&(this.projection.x=this.width/2,this.projection.y=-this.height/2),this.valid&&this.textureBuffer.resize(this.width,this.height))},n.RenderTexture.prototype.clear=function(){this.valid&&(this.renderer.type===n.WEBGL_RENDERER&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},n.RenderTexture.prototype.renderWebGL=function(t,e,n){if(this.valid){var r=t.worldTransform;r.identity(),r.translate(0,2*this.projection.y),e&&r.append(e),r.scale(1,-1),t.worldAlpha=1;for(var i=t.children,o=0,s=i.length;s>o;o++)i[o].updateTransform();var a=this.renderer.gl;a.viewport(0,0,this.width*this.resolution,this.height*this.resolution),a.bindFramebuffer(a.FRAMEBUFFER,this.textureBuffer.frameBuffer),n&&this.textureBuffer.clear(),this.renderer.spriteBatch.dirty=!0,this.renderer.renderDisplayObject(t,this.projection,this.textureBuffer.frameBuffer),this.renderer.spriteBatch.dirty=!0}},n.RenderTexture.prototype.renderCanvas=function(t,e,n){if(this.valid){var r=t.worldTransform;r.identity(),e&&r.append(e),t.worldAlpha=1;for(var i=t.children,o=0,s=i.length;s>o;o++)i[o].updateTransform();n&&this.textureBuffer.clear();var a=this.textureBuffer.context,u=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(t,a),this.renderer.resolution=u}},n.RenderTexture.prototype.getImage=function(){var t=new Image;return t.src=this.getBase64(),t},n.RenderTexture.prototype.getBase64=function(){return this.getCanvas().toDataURL()},n.RenderTexture.prototype.getCanvas=function(){if(this.renderer.type===n.WEBGL_RENDERER){var t=this.renderer.gl,e=this.textureBuffer.width,r=this.textureBuffer.height,i=new Uint8Array(4*e*r);t.bindFramebuffer(t.FRAMEBUFFER,this.textureBuffer.frameBuffer),t.readPixels(0,0,e,r,t.RGBA,t.UNSIGNED_BYTE,i),t.bindFramebuffer(t.FRAMEBUFFER,null);var o=new n.CanvasBuffer(e,r),s=o.context.getImageData(0,0,e,r);return s.data.set(i),o.context.putImageData(s,0,0),o.canvas}return this.textureBuffer.canvas},n.RenderTexture.tempMatrix=new n.Matrix,n.VideoTexture=function(t,e){if(!t)throw new Error("No video source element specified.");(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),n.BaseTexture.call(this,t,e),this.autoUpdate=!1,this.updateBound=this._onUpdate.bind(this),t.complete||(this._onCanPlay=this.onCanPlay.bind(this),t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("play",this.onPlayStart.bind(this)),t.addEventListener("pause",this.onPlayStop.bind(this)))},n.VideoTexture.prototype=Object.create(n.BaseTexture.prototype),n.VideoTexture.constructor=n.VideoTexture,n.VideoTexture.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this.updateBound),this.dirty())},n.VideoTexture.prototype.onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this.updateBound),this.autoUpdate=!0)},n.VideoTexture.prototype.onPlayStop=function(){this.autoUpdate=!1},n.VideoTexture.prototype.onCanPlay=function(){"canplaythrough"===event.type&&(this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.dispatchEvent({type:"loaded",content:this}))))},n.VideoTexture.prototype.destroy=function(){this.source&&this.source._pixiId&&(n.BaseTextureCache[this.source._pixiId]=null,delete n.BaseTextureCache[this.source._pixiId],this.source._pixiId=null,delete this.source._pixiId),n.BaseTexture.prototype.destroy.call(this)},n.VideoTexture.baseTextureFromVideo=function(t,e){t._pixiId||(t._pixiId="video_"+n.TextureCacheIdGenerator++);var r=n.BaseTextureCache[t._pixiId];return r||(r=new n.VideoTexture(t,e),n.BaseTextureCache[t._pixiId]=r),r},n.VideoTexture.textureFromVideo=function(t,e){var r=n.VideoTexture.baseTextureFromVideo(t,e);return new n.Texture(r)},n.VideoTexture.fromUrl=function(t,e){var r=document.createElement("video");return r.src=t,r.autoPlay=!0,r.play(),n.VideoTexture.textureFromVideo(r,e)},n.AssetLoader=function(t,e){this.assetURLs=t,this.crossorigin=e,this.loadersByType={jpg:n.ImageLoader,jpeg:n.ImageLoader,png:n.ImageLoader,gif:n.ImageLoader,webp:n.ImageLoader,json:n.JsonLoader,atlas:n.AtlasLoader,anim:n.SpineLoader,xml:n.BitmapFontLoader,fnt:n.BitmapFontLoader}},n.EventTarget.mixin(n.AssetLoader.prototype),n.AssetLoader.prototype.constructor=n.AssetLoader,n.AssetLoader.prototype._getDataType=function(t){var e="data:",n=t.slice(0,e.length).toLowerCase();if(n===e){var r=t.slice(e.length),i=r.indexOf(",");if(-1===i)return null;var o=r.slice(0,i).split(";")[0];return o&&"text/plain"!==o.toLowerCase()?o.split("/").pop().toLowerCase():"txt"}return null},n.AssetLoader.prototype.load=function(){function t(t){e.onAssetLoaded(t.data.content)}var e=this;this.loadCount=this.assetURLs.length;for(var n=0;n<this.assetURLs.length;n++){var r=this.assetURLs[n],i=this._getDataType(r);i||(i=r.split("?").shift().split(".").pop().toLowerCase());var o=this.loadersByType[i];if(!o)throw new Error(i+" is an unsupported file type");var s=new o(r,this.crossorigin);s.on("loaded",t),s.load()}},n.AssetLoader.prototype.onAssetLoaded=function(t){this.loadCount--,this.emit("onProgress",{content:this,loader:t,loaded:this.assetURLs.length-this.loadCount,total:this.assetURLs.length}),this.onProgress&&this.onProgress(t),this.loadCount||(this.emit("onComplete",{content:this}),this.onComplete&&this.onComplete())},n.JsonLoader=function(t,e){this.url=t,this.crossorigin=e,this.baseUrl=t.replace(/[^\/]*$/,""),this.loaded=!1},n.JsonLoader.prototype.constructor=n.JsonLoader,n.EventTarget.mixin(n.JsonLoader.prototype),n.JsonLoader.prototype.load=function(){window.XDomainRequest&&this.crossorigin?(this.ajaxRequest=new window.XDomainRequest,this.ajaxRequest.timeout=3e3,this.ajaxRequest.onerror=this.onError.bind(this),this.ajaxRequest.ontimeout=this.onError.bind(this),this.ajaxRequest.onprogress=function(){},this.ajaxRequest.onload=this.onJSONLoaded.bind(this)):(this.ajaxRequest=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP"),this.ajaxRequest.onreadystatechange=this.onReadyStateChanged.bind(this)),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.send()},n.JsonLoader.prototype.onReadyStateChanged=function(){4!==this.ajaxRequest.readyState||200!==this.ajaxRequest.status&&-1!==window.location.href.indexOf("http")||this.onJSONLoaded()},n.JsonLoader.prototype.onJSONLoaded=function(){if(!this.ajaxRequest.responseText)return void this.onError();if(this.json=JSON.parse(this.ajaxRequest.responseText),this.json.frames&&this.json.meta&&this.json.meta.image){var t=this.baseUrl+this.json.meta.image,e=new n.ImageLoader(t,this.crossorigin),i=this.json.frames;this.texture=e.texture.baseTexture,e.addEventListener("loaded",this.onLoaded.bind(this));for(var o in i){var s=i[o].frame;if(s){var a=new n.Rectangle(s.x,s.y,s.w,s.h),u=a.clone(),c=null;if(i[o].trimmed){var l=i[o].sourceSize,h=i[o].spriteSourceSize;c=new n.Rectangle(h.x,h.y,l.w,l.h)}n.TextureCache[o]=new n.Texture(this.texture,a,u,c)}}e.load()}else if(this.json.bones)if(n.AnimCache[this.url])this.onLoaded();else{var f=this.url.substr(0,this.url.lastIndexOf("."))+".atlas",p=new n.JsonLoader(f,this.crossorigin),d=this;p.onJSONLoaded=function(){if(!this.ajaxRequest.responseText)return void this.onError();var t=new n.SpineTextureLoader(this.url.substring(0,this.url.lastIndexOf("/"))),e=new r.Atlas(this.ajaxRequest.responseText,t),i=new r.AtlasAttachmentLoader(e),o=new r.SkeletonJson(i),s=o.readSkeletonData(d.json);
n.AnimCache[d.url]=s,d.spine=s,d.spineAtlas=e,d.spineAtlasLoader=p,t.loadingCount>0?t.addEventListener("loadedBaseTexture",function(t){t.content.content.loadingCount<=0&&d.onLoaded()}):d.onLoaded()},p.load()}else this.onLoaded()},n.JsonLoader.prototype.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:"loaded",content:this})},n.JsonLoader.prototype.onError=function(){this.dispatchEvent({type:"error",content:this})},n.AtlasLoader=function(t,e){this.url=t,this.baseUrl=t.replace(/[^\/]*$/,""),this.crossorigin=e,this.loaded=!1},n.AtlasLoader.constructor=n.AtlasLoader,n.EventTarget.mixin(n.AtlasLoader.prototype),n.AtlasLoader.prototype.load=function(){this.ajaxRequest=new n.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onAtlasLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/json"),this.ajaxRequest.send(null)},n.AtlasLoader.prototype.onAtlasLoaded=function(){if(4===this.ajaxRequest.readyState)if(200===this.ajaxRequest.status||-1===window.location.href.indexOf("http")){this.atlas={meta:{image:[]},frames:[]};var t=this.ajaxRequest.responseText.split(/\r?\n/),e=-3,r=0,i=null,o=!1,s=0,a=0,u=this.onLoaded.bind(this);for(s=0;s<t.length;s++)if(t[s]=t[s].replace(/^\s+|\s+$/g,""),""===t[s]&&(o=s+1),t[s].length>0){if(o===s)this.atlas.meta.image.push(t[s]),r=this.atlas.meta.image.length-1,this.atlas.frames.push({}),e=-3;else if(e>0)if(e%7===1)null!=i&&(this.atlas.frames[r][i.name]=i),i={name:t[s],frame:{}};else{var c=t[s].split(" ");if(e%7===3)i.frame.x=Number(c[1].replace(",","")),i.frame.y=Number(c[2]);else if(e%7===4)i.frame.w=Number(c[1].replace(",","")),i.frame.h=Number(c[2]);else if(e%7===5){var l={x:0,y:0,w:Number(c[1].replace(",","")),h:Number(c[2])};l.w>i.frame.w||l.h>i.frame.h?(i.trimmed=!0,i.realSize=l):i.trimmed=!1}}e++}if(null!=i&&(this.atlas.frames[r][i.name]=i),this.atlas.meta.image.length>0){for(this.images=[],a=0;a<this.atlas.meta.image.length;a++){var h=this.baseUrl+this.atlas.meta.image[a],f=this.atlas.frames[a];this.images.push(new n.ImageLoader(h,this.crossorigin));for(s in f){var p=f[s].frame;p&&(n.TextureCache[s]=new n.Texture(this.images[a].texture.baseTexture,{x:p.x,y:p.y,width:p.w,height:p.h}),f[s].trimmed&&(n.TextureCache[s].realSize=f[s].realSize,n.TextureCache[s].trim.x=0,n.TextureCache[s].trim.y=0))}}for(this.currentImageId=0,a=0;a<this.images.length;a++)this.images[a].on("loaded",u);this.images[this.currentImageId].load()}else this.onLoaded()}else this.onError()},n.AtlasLoader.prototype.onLoaded=function(){this.images.length-1>this.currentImageId?(this.currentImageId++,this.images[this.currentImageId].load()):(this.loaded=!0,this.emit("loaded",{content:this}))},n.AtlasLoader.prototype.onError=function(){this.emit("error",{content:this})},n.SpriteSheetLoader=function(t,e){this.url=t,this.crossorigin=e,this.baseUrl=t.replace(/[^\/]*$/,""),this.texture=null,this.frames={}},n.SpriteSheetLoader.prototype.constructor=n.SpriteSheetLoader,n.EventTarget.mixin(n.SpriteSheetLoader.prototype),n.SpriteSheetLoader.prototype.load=function(){var t=this,e=new n.JsonLoader(this.url,this.crossorigin);e.on("loaded",function(e){t.json=e.data.content.json,t.onLoaded()}),e.load()},n.SpriteSheetLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},n.ImageLoader=function(t,e){this.texture=n.Texture.fromImage(t,e),this.frames=[]},n.ImageLoader.prototype.constructor=n.ImageLoader,n.EventTarget.mixin(n.ImageLoader.prototype),n.ImageLoader.prototype.load=function(){this.texture.baseTexture.hasLoaded?this.onLoaded():this.texture.baseTexture.on("loaded",this.onLoaded.bind(this))},n.ImageLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},n.ImageLoader.prototype.loadFramedSpriteSheet=function(t,e,r){this.frames=[];for(var i=Math.floor(this.texture.width/t),o=Math.floor(this.texture.height/e),s=0,a=0;o>a;a++)for(var u=0;i>u;u++,s++){var c=new n.Texture(this.texture.baseTexture,{x:u*t,y:a*e,width:t,height:e});this.frames.push(c),r&&(n.TextureCache[r+"-"+s]=c)}this.load()},n.BitmapFontLoader=function(t,e){this.url=t,this.crossorigin=e,this.baseUrl=t.replace(/[^\/]*$/,""),this.texture=null},n.BitmapFontLoader.prototype.constructor=n.BitmapFontLoader,n.EventTarget.mixin(n.BitmapFontLoader.prototype),n.BitmapFontLoader.prototype.load=function(){this.ajaxRequest=new n.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onXMLLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/xml"),this.ajaxRequest.send(null)},n.BitmapFontLoader.prototype.onXMLLoaded=function(){if(4===this.ajaxRequest.readyState&&(200===this.ajaxRequest.status||-1===window.location.protocol.indexOf("http"))){var t=this.ajaxRequest.responseXML;if(!t||/MSIE 9/i.test(navigator.userAgent)||navigator.isCocoonJS)if("function"==typeof window.DOMParser){var e=new DOMParser;t=e.parseFromString(this.ajaxRequest.responseText,"text/xml")}else{var r=document.createElement("div");r.innerHTML=this.ajaxRequest.responseText,t=r}var i=this.baseUrl+t.getElementsByTagName("page")[0].getAttribute("file"),o=new n.ImageLoader(i,this.crossorigin);this.texture=o.texture.baseTexture;var s={},a=t.getElementsByTagName("info")[0],u=t.getElementsByTagName("common")[0];s.font=a.getAttribute("face"),s.size=parseInt(a.getAttribute("size"),10),s.lineHeight=parseInt(u.getAttribute("lineHeight"),10),s.chars={};for(var c=t.getElementsByTagName("char"),l=0;l<c.length;l++){var h=parseInt(c[l].getAttribute("id"),10),f=new n.Rectangle(parseInt(c[l].getAttribute("x"),10),parseInt(c[l].getAttribute("y"),10),parseInt(c[l].getAttribute("width"),10),parseInt(c[l].getAttribute("height"),10));s.chars[h]={xOffset:parseInt(c[l].getAttribute("xoffset"),10),yOffset:parseInt(c[l].getAttribute("yoffset"),10),xAdvance:parseInt(c[l].getAttribute("xadvance"),10),kerning:{},texture:n.TextureCache[h]=new n.Texture(this.texture,f)}}var p=t.getElementsByTagName("kerning");for(l=0;l<p.length;l++){var d=parseInt(p[l].getAttribute("first"),10),m=parseInt(p[l].getAttribute("second"),10),g=parseInt(p[l].getAttribute("amount"),10);s.chars[m].kerning[d]=g}n.BitmapText.fonts[s.font]=s,o.addEventListener("loaded",this.onLoaded.bind(this)),o.load()}},n.BitmapFontLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},n.SpineLoader=function(t,e){this.url=t,this.crossorigin=e,this.loaded=!1},n.SpineLoader.prototype.constructor=n.SpineLoader,n.EventTarget.mixin(n.SpineLoader.prototype),n.SpineLoader.prototype.load=function(){var t=this,e=new n.JsonLoader(this.url,this.crossorigin);e.on("loaded",function(e){t.json=e.data.content.json,t.onLoaded()}),e.load()},n.SpineLoader.prototype.onLoaded=function(){this.loaded=!0,this.emit("loaded",{content:this})},n.AbstractFilter=function(t,e){this.passes=[this],this.shaders=[],this.dirty=!0,this.padding=0,this.uniforms=e||{},this.fragmentSrc=t||[]},n.AbstractFilter.prototype.constructor=n.AbstractFilter,n.AbstractFilter.prototype.syncUniforms=function(){for(var t=0,e=this.shaders.length;e>t;t++)this.shaders[t].dirty=!0},n.AlphaMaskFilter=function(t){n.AbstractFilter.call(this),this.passes=[this],t.baseTexture._powerOf2=!0,this.uniforms={mask:{type:"sampler2D",value:t},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},t.baseTexture.hasLoaded?(this.uniforms.mask.value.x=t.width,this.uniforms.mask.value.y=t.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),t.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D mask;","uniform sampler2D uSampler;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   mapCords *= dimensions.xy / mapDimensions;","   vec4 original =  texture2D(uSampler, vTextureCoord);","   float maskAlpha =  texture2D(mask, mapCords).r;","   original *= maskAlpha;","   gl_FragColor =  original;","}"]},n.AlphaMaskFilter.prototype=Object.create(n.AbstractFilter.prototype),n.AlphaMaskFilter.prototype.constructor=n.AlphaMaskFilter,n.AlphaMaskFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.mask.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.mask.value.height,this.uniforms.mask.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(n.AlphaMaskFilter.prototype,"map",{get:function(){return this.uniforms.mask.value},set:function(t){this.uniforms.mask.value=t}}),n.ColorMatrixFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform mat4 matrix;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;","}"]},n.ColorMatrixFilter.prototype=Object.create(n.AbstractFilter.prototype),n.ColorMatrixFilter.prototype.constructor=n.ColorMatrixFilter,Object.defineProperty(n.ColorMatrixFilter.prototype,"matrix",{get:function(){return this.uniforms.matrix.value},set:function(t){this.uniforms.matrix.value=t}}),n.GrayFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={gray:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float gray;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);","}"]},n.GrayFilter.prototype=Object.create(n.AbstractFilter.prototype),n.GrayFilter.prototype.constructor=n.GrayFilter,Object.defineProperty(n.GrayFilter.prototype,"gray",{get:function(){return this.uniforms.gray.value},set:function(t){this.uniforms.gray.value=t}}),n.DisplacementFilter=function(t){n.AbstractFilter.call(this),this.passes=[this],t.baseTexture._powerOf2=!0,this.uniforms={displacementMap:{type:"sampler2D",value:t},scale:{type:"2f",value:{x:30,y:30}},offset:{type:"2f",value:{x:0,y:0}},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},t.baseTexture.hasLoaded?(this.uniforms.mapDimensions.value.x=t.width,this.uniforms.mapDimensions.value.y=t.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),t.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D displacementMap;","uniform sampler2D uSampler;","uniform vec2 scale;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   vec2 matSample = texture2D(displacementMap, mapCords).xy;","   matSample -= 0.5;","   matSample *= scale;","   matSample /= mapDimensions;","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);","   vec2 cord = vTextureCoord;","}"]},n.DisplacementFilter.prototype=Object.create(n.AbstractFilter.prototype),n.DisplacementFilter.prototype.constructor=n.DisplacementFilter,n.DisplacementFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height,this.uniforms.displacementMap.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(n.DisplacementFilter.prototype,"map",{get:function(){return this.uniforms.displacementMap.value},set:function(t){this.uniforms.displacementMap.value=t}}),Object.defineProperty(n.DisplacementFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(t){this.uniforms.scale.value=t}}),Object.defineProperty(n.DisplacementFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}}),n.PixelateFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:0},dimensions:{type:"4fv",value:new n.Float32Array([1e4,100,10,10])},pixelSize:{type:"2f",value:{x:10,y:10}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 testDim;","uniform vec4 dimensions;","uniform vec2 pixelSize;","uniform sampler2D uSampler;","void main(void) {","   vec2 coord = vTextureCoord;","   vec2 size = dimensions.xy/pixelSize;","   vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;","   gl_FragColor = texture2D(uSampler, color);","}"]},n.PixelateFilter.prototype=Object.create(n.AbstractFilter.prototype),n.PixelateFilter.prototype.constructor=n.PixelateFilter,Object.defineProperty(n.PixelateFilter.prototype,"size",{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.dirty=!0,this.uniforms.pixelSize.value=t}}),n.BlurXFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;","   gl_FragColor = sum;","}"]},n.BlurXFilter.prototype=Object.create(n.AbstractFilter.prototype),n.BlurXFilter.prototype.constructor=n.BlurXFilter,Object.defineProperty(n.BlurXFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.dirty=!0,this.uniforms.blur.value=1/7e3*t}}),n.BlurYFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;","   gl_FragColor = sum;","}"]},n.BlurYFilter.prototype=Object.create(n.AbstractFilter.prototype),n.BlurYFilter.prototype.constructor=n.BlurYFilter,Object.defineProperty(n.BlurYFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.uniforms.blur.value=1/7e3*t}}),n.BlurFilter=function(){this.blurXFilter=new n.BlurXFilter,this.blurYFilter=new n.BlurYFilter,this.passes=[this.blurXFilter,this.blurYFilter]},n.BlurFilter.prototype=Object.create(n.AbstractFilter.prototype),n.BlurFilter.prototype.constructor=n.BlurFilter,Object.defineProperty(n.BlurFilter.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t}}),Object.defineProperty(n.BlurFilter.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}}),Object.defineProperty(n.BlurFilter.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}),n.InvertFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);","}"]},n.InvertFilter.prototype=Object.create(n.AbstractFilter.prototype),n.InvertFilter.prototype.constructor=n.InvertFilter,Object.defineProperty(n.InvertFilter.prototype,"invert",{get:function(){return this.uniforms.invert.value},set:function(t){this.uniforms.invert.value=t}}),n.SepiaFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={sepia:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float sepia;","uniform sampler2D uSampler;","const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);","}"]},n.SepiaFilter.prototype=Object.create(n.AbstractFilter.prototype),n.SepiaFilter.prototype.constructor=n.SepiaFilter,Object.defineProperty(n.SepiaFilter.prototype,"sepia",{get:function(){return this.uniforms.sepia.value},set:function(t){this.uniforms.sepia.value=t}}),n.TwistFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"2f",value:{x:.5,y:.5}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float radius;","uniform float angle;","uniform vec2 offset;","void main(void) {","   vec2 coord = vTextureCoord - offset;","   float distance = length(coord);","   if (distance < radius) {","       float ratio = (radius - distance) / radius;","       float angleMod = ratio * ratio * angle;","       float s = sin(angleMod);","       float c = cos(angleMod);","       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);","   }","   gl_FragColor = texture2D(uSampler, coord+offset);","}"]},n.TwistFilter.prototype=Object.create(n.AbstractFilter.prototype),n.TwistFilter.prototype.constructor=n.TwistFilter,Object.defineProperty(n.TwistFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(t){this.dirty=!0,this.uniforms.offset.value=t}}),Object.defineProperty(n.TwistFilter.prototype,"radius",{get:function(){return this.uniforms.radius.value},set:function(t){this.dirty=!0,this.uniforms.radius.value=t}}),Object.defineProperty(n.TwistFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(t){this.dirty=!0,this.uniforms.angle.value=t}}),n.ColorStepFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={step:{type:"1f",value:5}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float step;","void main(void) {","   vec4 color = texture2D(uSampler, vTextureCoord);","   color = floor(color * step) / step;","   gl_FragColor = color;","}"]},n.ColorStepFilter.prototype=Object.create(n.AbstractFilter.prototype),n.ColorStepFilter.prototype.constructor=n.ColorStepFilter,Object.defineProperty(n.ColorStepFilter.prototype,"step",{get:function(){return this.uniforms.step.value},set:function(t){this.uniforms.step.value=t}}),n.DotScreenFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float angle;","uniform float scale;","float pattern() {","   float s = sin(angle), c = cos(angle);","   vec2 tex = vTextureCoord * dimensions.xy;","   vec2 point = vec2(","       c * tex.x - s * tex.y,","       s * tex.x + c * tex.y","   ) * scale;","   return (sin(point.x) * sin(point.y)) * 4.0;","}","void main() {","   vec4 color = texture2D(uSampler, vTextureCoord);","   float average = (color.r + color.g + color.b) / 3.0;","   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);","}"]},n.DotScreenFilter.prototype=Object.create(n.AbstractFilter.prototype),n.DotScreenFilter.prototype.constructor=n.DotScreenFilter,Object.defineProperty(n.DotScreenFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(t){this.dirty=!0,this.uniforms.scale.value=t}}),Object.defineProperty(n.DotScreenFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(t){this.dirty=!0,this.uniforms.angle.value=t}}),n.CrossHatchFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);","    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","    if (lum < 1.00) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.75) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.50) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.3) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","}"]},n.CrossHatchFilter.prototype=Object.create(n.AbstractFilter.prototype),n.CrossHatchFilter.prototype.constructor=n.CrossHatchFilter,Object.defineProperty(n.CrossHatchFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(t){this.uniforms.blur.value=1/7e3*t}}),n.RGBSplitFilter=function(){n.AbstractFilter.call(this),this.passes=[this],this.uniforms={red:{type:"2f",value:{x:20,y:20}},green:{type:"2f",value:{x:-20,y:20}},blue:{type:"2f",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 red;","uniform vec2 green;","uniform vec2 blue;","uniform vec4 dimensions;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;","   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;","   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;","   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;","}"]},n.RGBSplitFilter.prototype=Object.create(n.AbstractFilter.prototype),n.RGBSplitFilter.prototype.constructor=n.RGBSplitFilter,Object.defineProperty(n.RGBSplitFilter.prototype,"red",{get:function(){return this.uniforms.red.value},set:function(t){this.uniforms.red.value=t}}),Object.defineProperty(n.RGBSplitFilter.prototype,"green",{get:function(){return this.uniforms.green.value},set:function(t){this.uniforms.green.value=t}}),Object.defineProperty(n.RGBSplitFilter.prototype,"blue",{get:function(){return this.uniforms.blue.value},set:function(t){this.uniforms.blue.value=t}}),"undefined"!=typeof t&&t.exports&&(e=t.exports=n),e.PIXI=n}).call(this)},function(t,e,n){(function(e){"use strict";var r=n(429),i={};i.VERSION="0.2.1",i.sampleRate=44100,i.use=function(){e.AnalyserNode=i.AnalyserNode.exports,e.AudioBuffer=i.AudioBuffer.exports,e.AudioBufferSourceNode=i.AudioBufferSourceNode.exports,e.AudioContext=i.AudioContext,e.AudioDestinationNode=i.AudioDestinationNode.exports,e.AudioListener=i.AudioListener.exports,e.AudioNode=i.AudioNode.exports,e.AudioParam=i.AudioParam.exports,e.AudioProcessingEvent=i.AudioProcessingEvent.exports,e.BiquadFilterNode=i.BiquadFilterNode.exports,e.ChannelMergerNode=i.ChannelMergerNode.exports,e.ChannelSplitterNode=i.ChannelSplitterNode.exports,e.ConvolverNode=i.ConvolverNode.exports,e.DelayNode=i.DelayNode.exports,e.DynamicsCompressorNode=i.DynamicsCompressorNode.exports,e.GainNode=i.GainNode.exports,e.MediaElementAudioSourceNode=i.MediaElementAudioSourceNode.exports,e.MediaStreamAudioDestinationNode=i.MediaStreamAudioDestinationNode.exports,e.MediaStreamAudioSourceNode=i.MediaStreamAudioSourceNode.exports,e.OfflineAudioCompletionEvent=i.OfflineAudioCompletionEvent.exports,e.OfflineAudioContext=i.OfflineAudioContext,e.OscillatorNode=i.OscillatorNode.exports,e.PannerNode=i.PannerNode.exports,e.PeriodicWave=i.PeriodicWave.exports,e.ScriptProcessorNode=i.ScriptProcessorNode.exports,e.WaveShaperNode=i.WaveShaperNode.exports},i.unuse=function(){e.AnalyserNode=r.AnalyserNode,e.AudioBuffer=r.AudioBuffer,e.AudioBufferSourceNode=r.AudioBufferSourceNode,e.AudioContext=r.AudioContext,e.AudioDestinationNode=r.AudioDestinationNode,e.AudioListener=r.AudioListener,e.AudioNode=r.AudioNode,e.AudioParam=r.AudioParam,e.AudioProcessingEvent=r.AudioProcessingEvent,e.BiquadFilterNode=r.BiquadFilterNode,e.ChannelMergerNode=r.ChannelMergerNode,e.ChannelSplitterNode=r.ChannelSplitterNode,e.ConvolverNode=r.ConvolverNode,e.DelayNode=r.DelayNode,e.DynamicsCompressorNode=r.DynamicsCompressorNode,e.GainNode=r.GainNode,e.MediaElementAudioSourceNode=r.MediaElementAudioSourceNode,e.MediaStreamAudioDestinationNode=r.MediaStreamAudioDestinationNode,e.MediaStreamAudioSourceNode=r.MediaStreamAudioSourceNode,e.OfflineAudioCompletionEvent=r.OfflineAudioCompletionEvent,e.OfflineAudioContext=r.OfflineAudioContext,e.OscillatorNode=r.OscillatorNode,e.PannerNode=r.PannerNode,e.PeriodicWave=r.PeriodicWave,e.ScriptProcessorNode=r.ScriptProcessorNode,e.WaveShaperNode=r.WaveShaperNode},t.exports=i}).call(e,function(){return this}())},function(t,e,n){"use strict";var r={};r.NOP=function(){},r.inherits=n(434),r.defaults=n(432),r.article=n(205),r.name=n(240),r.toJSON=n(437),r.toMicroseconds=n(241),r.toSeconds=n(438),r.typeCheck=n(207),r.formatter=n(206),r.defineAttribute=n(433),t.exports=r},function(t,e){var n,r;/*!
	 * jQuery JavaScript Library v2.1.3
	 * http://jquery.com/
	 *
	 * Includes Sizzle.js
	 * http://sizzlejs.com/
	 *
	 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
	 * Released under the MIT license
	 * http://jquery.org/license
	 *
	 * Date: 2014-12-18T15:11Z
	 */
!function(e,n){"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,function(i,o){function s(t){var e=t.length,n=re.type(t);return"function"===n||re.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function a(t,e,n){if(re.isFunction(e))return re.grep(t,function(t,r){return!!e.call(t,r,t)!==n});if(e.nodeType)return re.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(he.test(e))return re.filter(e,t,n);e=re.filter(e,t)}return re.grep(t,function(t){return J.call(e,t)>=0!==n})}function u(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function c(t){var e=ye[t]={};return re.each(t.match(ve)||[],function(t,n){e[n]=!0}),e}function l(){ee.removeEventListener("DOMContentLoaded",l,!1),i.removeEventListener("load",l,!1),re.ready()}function h(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=re.expando+h.uid++}function f(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(Se,"-$1").toLowerCase(),n=t.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Te.test(n)?re.parseJSON(n):n}catch(i){}_e.set(t,e,n)}else n=void 0;return n}function p(){return!0}function d(){return!1}function m(){try{return ee.activeElement}catch(t){}}function g(t,e){return re.nodeName(t,"table")&&re.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function v(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function y(t){var e=qe.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function b(t,e){for(var n=0,r=t.length;r>n;n++)we.set(t[n],"globalEval",!e||we.get(e[n],"globalEval"))}function x(t,e){var n,r,i,o,s,a,u,c;if(1===e.nodeType){if(we.hasData(t)&&(o=we.access(t),s=we.set(e,o),c=o.events)){delete s.handle,s.events={};for(i in c)for(n=0,r=c[i].length;r>n;n++)re.event.add(e,i,c[i][n])}_e.hasData(t)&&(a=_e.access(t),u=re.extend({},a),_e.set(e,u))}}function w(t,e){var n=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&re.nodeName(t,e)?re.merge([t],n):n}function _(t,e){var n=e.nodeName.toLowerCase();"input"===n&&je.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}function T(t,e){var n,r=re(e.createElement(t)).appendTo(e.body),o=i.getDefaultComputedStyle&&(n=i.getDefaultComputedStyle(r[0]))?n.display:re.css(r[0],"display");return r.detach(),o}function S(t){var e=ee,n=Ve[t];return n||(n=T(t,e),"none"!==n&&n||(Ge=(Ge||re("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Ge[0].contentDocument,e.write(),e.close(),n=T(t,e),Ge.detach()),Ve[t]=n),n}function E(t,e,n){var r,i,o,s,a=t.style;return n=n||Ye(t),n&&(s=n.getPropertyValue(e)||n[e]),n&&(""!==s||re.contains(t.ownerDocument,t)||(s=re.style(t,e)),ze.test(s)&&He.test(e)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o)),void 0!==s?s+"":s}function C(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function A(t,e){if(e in t)return e;for(var n=e[0].toUpperCase()+e.slice(1),r=e,i=Ze.length;i--;)if(e=Ze[i]+n,e in t)return e;return r}function j(t,e,n){var r=$e.exec(e);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):e}function k(t,e,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===e?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=re.css(t,n+Ce[o],!0,i)),r?("content"===n&&(s-=re.css(t,"padding"+Ce[o],!0,i)),"margin"!==n&&(s-=re.css(t,"border"+Ce[o]+"Width",!0,i))):(s+=re.css(t,"padding"+Ce[o],!0,i),"padding"!==n&&(s+=re.css(t,"border"+Ce[o]+"Width",!0,i)));return s}function O(t,e,n){var r=!0,i="width"===e?t.offsetWidth:t.offsetHeight,o=Ye(t),s="border-box"===re.css(t,"boxSizing",!1,o);if(0>=i||null==i){if(i=E(t,e,o),(0>i||null==i)&&(i=t.style[e]),ze.test(i))return i;r=s&&(te.boxSizingReliable()||i===t.style[e]),i=parseFloat(i)||0}return i+k(t,e,n||(s?"border":"content"),r,o)+"px"}function M(t,e){for(var n,r,i,o=[],s=0,a=t.length;a>s;s++)r=t[s],r.style&&(o[s]=we.get(r,"olddisplay"),n=r.style.display,e?(o[s]||"none"!==n||(r.style.display=""),""===r.style.display&&Ae(r)&&(o[s]=we.access(r,"olddisplay",S(r.nodeName)))):(i=Ae(r),"none"===n&&i||we.set(r,"olddisplay",i?n:re.css(r,"display"))));for(s=0;a>s;s++)r=t[s],r.style&&(e&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=e?o[s]||"":"none"));return t}function R(t,e,n,r,i){return new R.prototype.init(t,e,n,r,i)}function P(){return setTimeout(function(){tn=void 0}),tn=re.now()}function I(t,e){var n,r=0,i={height:t};for(e=e?1:0;4>r;r+=2-e)n=Ce[r],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function L(t,e,n){for(var r,i=(an[e]||[]).concat(an["*"]),o=0,s=i.length;s>o;o++)if(r=i[o].call(n,e,t))return r}function F(t,e,n){var r,i,o,s,a,u,c,l,h=this,f={},p=t.style,d=t.nodeType&&Ae(t),m=we.get(t,"fxshow");n.queue||(a=re._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,re.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],c=re.css(t,"display"),l="none"===c?we.get(t,"olddisplay")||S(t.nodeName):c,"inline"===l&&"none"===re.css(t,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in e)if(i=e[r],nn.exec(i)){if(delete e[r],o=o||"toggle"===i,i===(d?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;d=!0}f[r]=m&&m[r]||re.style(t,r)}else c=void 0;if(re.isEmptyObject(f))"inline"===("none"===c?S(t.nodeName):c)&&(p.display=c);else{m?"hidden"in m&&(d=m.hidden):m=we.access(t,"fxshow",{}),o&&(m.hidden=!d),d?re(t).show():h.done(function(){re(t).hide()}),h.done(function(){var e;we.remove(t,"fxshow");for(e in f)re.style(t,e,f[e])});for(r in f)s=L(d?m[r]:0,r,h),r in m||(m[r]=s.start,d&&(s.end=s.start,s.start="width"===r||"height"===r?1:0))}}function B(t,e){var n,r,i,o,s;for(n in t)if(r=re.camelCase(n),i=e[r],o=t[n],re.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),s=re.cssHooks[r],s&&"expand"in s){o=s.expand(o),delete t[r];for(n in o)n in t||(t[n]=o[n],e[n]=i)}else e[r]=i}function D(t,e,n){var r,i,o=0,s=sn.length,a=re.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var e=tn||P(),n=Math.max(0,c.startTime+c.duration-e),r=n/c.duration||0,o=1-r,s=0,u=c.tweens.length;u>s;s++)c.tweens[s].run(o);return a.notifyWith(t,[c,o,n]),1>o&&u?n:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:re.extend({},e),opts:re.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:tn||P(),duration:n.duration,tweens:[],createTween:function(e,n){var r=re.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(r),r},stop:function(e){var n=0,r=e?c.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)c.tweens[n].run(1);return e?a.resolveWith(t,[c,e]):a.rejectWith(t,[c,e]),this}}),l=c.props;for(B(l,c.opts.specialEasing);s>o;o++)if(r=sn[o].call(c,t,l,c.opts))return r;return re.map(l,L,c),re.isFunction(c.opts.start)&&c.opts.start.call(t,c),re.fx.timer(re.extend(u,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function N(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(ve)||[];if(re.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function q(t,e,n,r){function i(a){var u;return o[a]=!0,re.each(t[a]||[],function(t,a){var c=a(e,n,r);return"string"!=typeof c||s||o[c]?s?!(u=c):void 0:(e.dataTypes.unshift(c),i(c),!1)}),u}var o={},s=t===Sn;return i(e.dataTypes[0])||!o["*"]&&i("*")}function U(t,e){var n,r,i=re.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&re.extend(!0,t,r),t}function W(t,e,n){for(var r,i,o,s,a=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||t.converters[i+" "+u[0]]){o=i;break}s||(s=i)}o=o||s}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function G(t,e,n,r){var i,o,s,a,u,c={},l=t.dataTypes.slice();if(l[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(o=l.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(s=c[u+" "+o]||c["* "+o],!s)for(i in c)if(a=i.split(" "),a[1]===o&&(s=c[u+" "+a[0]]||c["* "+a[0]])){s===!0?s=c[i]:c[i]!==!0&&(o=a[0],l.unshift(a[1]));break}if(s!==!0)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(h){return{state:"parsererror",error:s?h:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}function V(t,e,n,r){var i;if(re.isArray(e))re.each(e,function(e,i){n||kn.test(t)?r(t,i):V(t+"["+("object"==typeof i?e:"")+"]",i,n,r)});else if(n||"object"!==re.type(e))r(t,e);else for(i in e)V(t+"["+i+"]",e[i],n,r)}function H(t){return re.isWindow(t)?t:9===t.nodeType&&t.defaultView}var z=[],Y=z.slice,X=z.concat,$=z.push,J=z.indexOf,K={},Q=K.toString,Z=K.hasOwnProperty,te={},ee=i.document,ne="2.1.3",re=function(t,e){return new re.fn.init(t,e)},ie=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,oe=/^-ms-/,se=/-([\da-z])/gi,ae=function(t,e){return e.toUpperCase()};re.fn=re.prototype={jquery:ne,constructor:re,selector:"",length:0,toArray:function(){return Y.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:Y.call(this)},pushStack:function(t){var e=re.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return re.each(this,t,e)},map:function(t){return this.pushStack(re.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(Y.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:$,sort:z.sort,splice:z.splice},re.extend=re.fn.extend=function(){var t,e,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||re.isFunction(s)||(s={}),a===u&&(s=this,a--);u>a;a++)if(null!=(t=arguments[a]))for(e in t)n=s[e],r=t[e],s!==r&&(c&&r&&(re.isPlainObject(r)||(i=re.isArray(r)))?(i?(i=!1,o=n&&re.isArray(n)?n:[]):o=n&&re.isPlainObject(n)?n:{},s[e]=re.extend(c,o,r)):void 0!==r&&(s[e]=r));return s},re.extend({expando:"jQuery"+(ne+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===re.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!re.isArray(t)&&t-parseFloat(t)+1>=0},isPlainObject:function(t){return"object"!==re.type(t)||t.nodeType||re.isWindow(t)?!1:t.constructor&&!Z.call(t.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?K[Q.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;t=re.trim(t),t&&(1===t.indexOf("use strict")?(e=ee.createElement("script"),e.text=t,ee.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(oe,"ms-").replace(se,ae)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var r,i=0,o=t.length,a=s(t);if(n){if(a)for(;o>i&&(r=e.apply(t[i],n),r!==!1);i++);else for(i in t)if(r=e.apply(t[i],n),r===!1)break}else if(a)for(;o>i&&(r=e.call(t[i],i,t[i]),r!==!1);i++);else for(i in t)if(r=e.call(t[i],i,t[i]),r===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(ie,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(s(Object(t))?re.merge(n,"string"==typeof t?[t]:t):$.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:J.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;n>r;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r,i=[],o=0,s=t.length,a=!n;s>o;o++)r=!e(t[o],o),r!==a&&i.push(t[o]);return i},map:function(t,e,n){var r,i=0,o=t.length,a=s(t),u=[];if(a)for(;o>i;i++)r=e(t[i],i,n),null!=r&&u.push(r);else for(i in t)r=e(t[i],i,n),null!=r&&u.push(r);return X.apply([],u)},guid:1,proxy:function(t,e){var n,r,i;return"string"==typeof e&&(n=t[e],e=t,t=n),re.isFunction(t)?(r=Y.call(arguments,2),i=function(){return t.apply(e||this,r.concat(Y.call(arguments)))},i.guid=t.guid=t.guid||re.guid++,i):void 0},now:Date.now,support:te}),re.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){K["[object "+e+"]"]=e.toLowerCase()});var ue=/*!
	 * Sizzle CSS Selector Engine v2.2.0-pre
	 * http://sizzlejs.com/
	 *
	 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
	 * Released under the MIT license
	 * http://jquery.org/license
	 *
	 * Date: 2014-12-16
	 */
function(t){function e(t,e,n,r){var i,o,s,a,u,c,h,p,d,m;if((e?e.ownerDocument||e:q)!==R&&M(e),e=e||R,n=n||[],a=e.nodeType,"string"!=typeof t||!t||1!==a&&9!==a&&11!==a)return n;if(!r&&I){if(11!==a&&(i=ye.exec(t)))if(s=i[1]){if(9===a){if(o=e.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(s))&&D(e,o)&&o.id===s)return n.push(o),n}else{if(i[2])return Q.apply(n,e.getElementsByTagName(t)),n;if((s=i[3])&&w.getElementsByClassName)return Q.apply(n,e.getElementsByClassName(s)),n}if(w.qsa&&(!L||!L.test(t))){if(p=h=N,d=e,m=1!==a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(c=E(t),(h=e.getAttribute("id"))?p=h.replace(xe,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",u=c.length;u--;)c[u]=p+f(c[u]);d=be.test(t)&&l(e.parentNode)||e,m=c.join(",")}if(m)try{return Q.apply(n,d.querySelectorAll(m)),n}catch(g){}finally{h||e.removeAttribute("id")}}}return A(t.replace(ue,"$1"),e,n,r)}function n(){function t(n,r){return e.push(n+" ")>_.cacheLength&&delete t[e.shift()],t[n+" "]=r}var e=[];return t}function r(t){return t[N]=!0,t}function i(t){var e=R.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var n=t.split("|"),r=t.length;r--;)_.attrHandle[n[r]]=e}function s(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||Y)-(~t.sourceIndex||Y);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function a(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function u(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function c(t){return r(function(e){return e=+e,r(function(n,r){for(var i,o=t([],n.length,e),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}function l(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function h(){}function f(t){for(var e=0,n=t.length,r="";n>e;e++)r+=t[e].value;return r}function p(t,e,n){var r=e.dir,i=n&&"parentNode"===r,o=W++;return e.first?function(e,n,o){for(;e=e[r];)if(1===e.nodeType||i)return t(e,n,o)}:function(e,n,s){var a,u,c=[U,o];if(s){for(;e=e[r];)if((1===e.nodeType||i)&&t(e,n,s))return!0}else for(;e=e[r];)if(1===e.nodeType||i){if(u=e[N]||(e[N]={}),(a=u[r])&&a[0]===U&&a[1]===o)return c[2]=a[2];if(u[r]=c,c[2]=t(e,n,s))return!0}}}function d(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function m(t,n,r){for(var i=0,o=n.length;o>i;i++)e(t,n[i],r);return r}function g(t,e,n,r,i){for(var o,s=[],a=0,u=t.length,c=null!=e;u>a;a++)(o=t[a])&&(!n||n(o,r,i))&&(s.push(o),c&&e.push(a));return s}function v(t,e,n,i,o,s){return i&&!i[N]&&(i=v(i)),o&&!o[N]&&(o=v(o,s)),r(function(r,s,a,u){var c,l,h,f=[],p=[],d=s.length,v=r||m(e||"*",a.nodeType?[a]:a,[]),y=!t||!r&&e?v:g(v,f,t,a,u),b=n?o||(r?t:d||i)?[]:s:y;if(n&&n(y,b,a,u),i)for(c=g(b,p),i(c,[],a,u),l=c.length;l--;)(h=c[l])&&(b[p[l]]=!(y[p[l]]=h));if(r){if(o||t){if(o){for(c=[],l=b.length;l--;)(h=b[l])&&c.push(y[l]=h);o(null,b=[],c,u)}for(l=b.length;l--;)(h=b[l])&&(c=o?te(r,h):f[l])>-1&&(r[c]=!(s[c]=h))}}else b=g(b===s?b.splice(d,b.length):b),o?o(null,s,b,u):Q.apply(s,b)})}function y(t){for(var e,n,r,i=t.length,o=_.relative[t[0].type],s=o||_.relative[" "],a=o?1:0,u=p(function(t){return t===e},s,!0),c=p(function(t){return te(e,t)>-1},s,!0),l=[function(t,n,r){var i=!o&&(r||n!==j)||((e=n).nodeType?u(t,n,r):c(t,n,r));return e=null,i}];i>a;a++)if(n=_.relative[t[a].type])l=[p(d(l),n)];else{if(n=_.filter[t[a].type].apply(null,t[a].matches),n[N]){for(r=++a;i>r&&!_.relative[t[r].type];r++);return v(a>1&&d(l),a>1&&f(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(ue,"$1"),n,r>a&&y(t.slice(a,r)),i>r&&y(t=t.slice(r)),i>r&&f(t))}l.push(n)}return d(l)}function b(t,n){var i=n.length>0,o=t.length>0,s=function(r,s,a,u,c){var l,h,f,p=0,d="0",m=r&&[],v=[],y=j,b=r||o&&_.find.TAG("*",c),x=U+=null==y?1:Math.random()||.1,w=b.length;for(c&&(j=s!==R&&s);d!==w&&null!=(l=b[d]);d++){if(o&&l){for(h=0;f=t[h++];)if(f(l,s,a)){u.push(l);break}c&&(U=x)}i&&((l=!f&&l)&&p--,r&&m.push(l))}if(p+=d,i&&d!==p){for(h=0;f=n[h++];)f(m,v,s,a);if(r){if(p>0)for(;d--;)m[d]||v[d]||(v[d]=J.call(u));v=g(v)}Q.apply(u,v),c&&!r&&v.length>0&&p+n.length>1&&e.uniqueSort(u)}return c&&(U=x,j=y),m};return i?r(s):s}var x,w,_,T,S,E,C,A,j,k,O,M,R,P,I,L,F,B,D,N="sizzle"+1*new Date,q=t.document,U=0,W=0,G=n(),V=n(),H=n(),z=function(t,e){return t===e&&(O=!0),0},Y=1<<31,X={}.hasOwnProperty,$=[],J=$.pop,K=$.push,Q=$.push,Z=$.slice,te=function(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1},ee="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie=re.replace("w","w#"),oe="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",se=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",ae=new RegExp(ne+"+","g"),ue=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ce=new RegExp("^"+ne+"*,"+ne+"*"),le=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),he=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),fe=new RegExp(se),pe=new RegExp("^"+ie+"$"),de={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+ee+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,xe=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),_e=function(t,e,n){var r="0x"+e-65536;return r!==r||n?e:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},Te=function(){M()};try{Q.apply($=Z.call(q.childNodes),q.childNodes),$[q.childNodes.length].nodeType}catch(Se){Q={apply:$.length?function(t,e){K.apply(t,Z.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}w=e.support={},S=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},M=e.setDocument=function(t){var e,n,r=t?t.ownerDocument||t:q;return r!==R&&9===r.nodeType&&r.documentElement?(R=r,P=r.documentElement,n=r.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",Te,!1):n.attachEvent&&n.attachEvent("onunload",Te)),I=!S(r),w.attributes=i(function(t){return t.className="i",!t.getAttribute("className")}),w.getElementsByTagName=i(function(t){return t.appendChild(r.createComment("")),!t.getElementsByTagName("*").length}),w.getElementsByClassName=ve.test(r.getElementsByClassName),w.getById=i(function(t){return P.appendChild(t).id=N,!r.getElementsByName||!r.getElementsByName(N).length}),w.getById?(_.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&I){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},_.filter.ID=function(t){var e=t.replace(we,_e);return function(t){return t.getAttribute("id")===e}}):(delete _.find.ID,_.filter.ID=function(t){var e=t.replace(we,_e);return function(t){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),_.find.TAG=w.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):w.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},_.find.CLASS=w.getElementsByClassName&&function(t,e){return I?e.getElementsByClassName(t):void 0},F=[],L=[],(w.qsa=ve.test(r.querySelectorAll))&&(i(function(t){P.appendChild(t).innerHTML="<a id='"+N+"'></a><select id='"+N+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&L.push("[*^$]="+ne+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||L.push("\\["+ne+"*(?:value|"+ee+")"),t.querySelectorAll("[id~="+N+"-]").length||L.push("~="),t.querySelectorAll(":checked").length||L.push(":checked"),t.querySelectorAll("a#"+N+"+*").length||L.push(".#.+[+~]")}),i(function(t){var e=r.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&L.push("name"+ne+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||L.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),L.push(",.*:")})),(w.matchesSelector=ve.test(B=P.matches||P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&i(function(t){w.disconnectedMatch=B.call(t,"div"),B.call(t,"[s!='']:x"),F.push("!=",se)}),L=L.length&&new RegExp(L.join("|")),F=F.length&&new RegExp(F.join("|")),e=ve.test(P.compareDocumentPosition),D=e||ve.test(P.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},z=e?function(t,e){if(t===e)return O=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!w.sortDetached&&e.compareDocumentPosition(t)===n?t===r||t.ownerDocument===q&&D(q,t)?-1:e===r||e.ownerDocument===q&&D(q,e)?1:k?te(k,t)-te(k,e):0:4&n?-1:1)}:function(t,e){if(t===e)return O=!0,0;var n,i=0,o=t.parentNode,a=e.parentNode,u=[t],c=[e];if(!o||!a)return t===r?-1:e===r?1:o?-1:a?1:k?te(k,t)-te(k,e):0;if(o===a)return s(t,e);for(n=t;n=n.parentNode;)u.unshift(n);for(n=e;n=n.parentNode;)c.unshift(n);for(;u[i]===c[i];)i++;return i?s(u[i],c[i]):u[i]===q?-1:c[i]===q?1:0},r):R},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==R&&M(t),n=n.replace(he,"='$1']"),!(!w.matchesSelector||!I||F&&F.test(n)||L&&L.test(n)))try{var r=B.call(t,n);if(r||w.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(i){}return e(n,R,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==R&&M(t),D(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==R&&M(t);var n=_.attrHandle[e.toLowerCase()],r=n&&X.call(_.attrHandle,e.toLowerCase())?n(t,e,!I):void 0;return void 0!==r?r:w.attributes||!I?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],r=0,i=0;if(O=!w.detectDuplicates,k=!w.sortStable&&t.slice(0),t.sort(z),O){for(;e=t[i++];)e===t[i]&&(r=n.push(i));for(;r--;)t.splice(n[r],1)}return k=null,t},T=e.getText=function(t){var e,n="",r=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=T(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[r++];)n+=T(e);return n},_=e.selectors={cacheLength:50,createPseudo:r,match:de,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(we,_e),t[3]=(t[3]||t[4]||t[5]||"").replace(we,_e),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return de.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&fe.test(n)&&(e=E(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(we,_e).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=G[t+" "];return e||(e=new RegExp("(^|"+ne+")"+t+"("+ne+"|$)"))&&G(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(i){var o=e.attr(i,t);return null==o?"!="===n:n?(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(ae," ")+" ").indexOf(r)>-1:"|="===n?o===r||o.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,u){var c,l,h,f,p,d,m=o!==s?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!u&&!a;if(g){if(o){for(;m;){for(h=e;h=h[m];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;d=m="only"===t&&!d&&"nextSibling"}return!0}if(d=[s?g.firstChild:g.lastChild],s&&y){for(l=g[N]||(g[N]={}),c=l[t]||[],p=c[0]===U&&c[1],f=c[0]===U&&c[2],h=p&&g.childNodes[p];h=++p&&h&&h[m]||(f=p=0)||d.pop();)if(1===h.nodeType&&++f&&h===e){l[t]=[U,p,f];break}}else if(y&&(c=(e[N]||(e[N]={}))[t])&&c[0]===U)f=c[1];else for(;(h=++p&&h&&h[m]||(f=p=0)||d.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++f||(y&&((h[N]||(h[N]={}))[t]=[U,f]),h!==e)););return f-=i,f===r||f%r===0&&f/r>=0}}},PSEUDO:function(t,n){var i,o=_.pseudos[t]||_.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[N]?o(n):o.length>1?(i=[t,t,"",n],_.setFilters.hasOwnProperty(t.toLowerCase())?r(function(t,e){for(var r,i=o(t,n),s=i.length;s--;)r=te(t,i[s]),t[r]=!(e[r]=i[s])}):function(t){return o(t,0,i)}):o}},pseudos:{not:r(function(t){var e=[],n=[],i=C(t.replace(ue,"$1"));return i[N]?r(function(t,e,n,r){for(var o,s=i(t,null,r,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,r,o){return e[0]=t,i(e,null,o,n),e[0]=null,!n.pop()}}),has:r(function(t){return function(n){return e(t,n).length>0}}),contains:r(function(t){return t=t.replace(we,_e),function(e){return(e.textContent||e.innerText||T(e)).indexOf(t)>-1}}),lang:r(function(t){return pe.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(we,_e).toLowerCase(),function(e){var n;do if(n=I?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===P},focus:function(t){return t===R.activeElement&&(!R.hasFocus||R.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!_.pseudos.empty(t)},header:function(t){return ge.test(t.nodeName)},input:function(t){return me.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,n){return[0>n?n+e:n]}),even:c(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:c(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:c(function(t,e,n){for(var r=0>n?n+e:n;--r>=0;)t.push(r);return t}),gt:c(function(t,e,n){for(var r=0>n?n+e:n;++r<e;)t.push(r);return t})}},_.pseudos.nth=_.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[x]=a(x);for(x in{submit:!0,reset:!0})_.pseudos[x]=u(x);return h.prototype=_.filters=_.pseudos,_.setFilters=new h,E=e.tokenize=function(t,n){var r,i,o,s,a,u,c,l=V[t+" "];if(l)return n?0:l.slice(0);for(a=t,u=[],c=_.preFilter;a;){(!r||(i=ce.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),u.push(o=[])),r=!1,(i=le.exec(a))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ue," ")}),a=a.slice(r.length));for(s in _.filter)!(i=de[s].exec(a))||c[s]&&!(i=c[s](i))||(r=i.shift(),o.push({value:r,type:s,matches:i}),a=a.slice(r.length));if(!r)break}return n?a.length:a?e.error(t):V(t,u).slice(0)},C=e.compile=function(t,e){var n,r=[],i=[],o=H[t+" "];if(!o){for(e||(e=E(t)),n=e.length;n--;)o=y(e[n]),o[N]?r.push(o):i.push(o);o=H(t,b(i,r)),o.selector=t}return o},A=e.select=function(t,e,n,r){var i,o,s,a,u,c="function"==typeof t&&t,h=!r&&E(t=c.selector||t);if(n=n||[],1===h.length){if(o=h[0]=h[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&w.getById&&9===e.nodeType&&I&&_.relative[o[1].type]){if(e=(_.find.ID(s.matches[0].replace(we,_e),e)||[])[0],!e)return n;c&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(i=de.needsContext.test(t)?0:o.length;i--&&(s=o[i],!_.relative[a=s.type]);)if((u=_.find[a])&&(r=u(s.matches[0].replace(we,_e),be.test(o[0].type)&&l(e.parentNode)||e))){if(o.splice(i,1),t=r.length&&f(o),!t)return Q.apply(n,r),n;break}}return(c||C(t,h))(r,e,!I,n,be.test(t)&&l(e.parentNode)||e),n},w.sortStable=N.split("").sort(z).join("")===N,w.detectDuplicates=!!O,M(),w.sortDetached=i(function(t){return 1&t.compareDocumentPosition(R.createElement("div"))}),i(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),w.attributes&&i(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),i(function(t){return null==t.getAttribute("disabled")})||o(ee,function(t,e,n){var r;return n?void 0:t[e]===!0?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),e}(i);re.find=ue,re.expr=ue.selectors,re.expr[":"]=re.expr.pseudos,re.unique=ue.uniqueSort,re.text=ue.getText,re.isXMLDoc=ue.isXML,re.contains=ue.contains;var ce=re.expr.match.needsContext,le=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,he=/^.[^:#\[\.,]*$/;re.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?re.find.matchesSelector(r,t)?[r]:[]:re.find.matches(t,re.grep(e,function(t){return 1===t.nodeType}))},re.fn.extend({find:function(t){var e,n=this.length,r=[],i=this;if("string"!=typeof t)return this.pushStack(re(t).filter(function(){for(e=0;n>e;e++)if(re.contains(i[e],this))return!0}));for(e=0;n>e;e++)re.find(t,i[e],r);return r=this.pushStack(n>1?re.unique(r):r),r.selector=this.selector?this.selector+" "+t:t,r},filter:function(t){return this.pushStack(a(this,t||[],!1))},not:function(t){return this.pushStack(a(this,t||[],!0))},is:function(t){return!!a(this,"string"==typeof t&&ce.test(t)?re(t):t||[],!1).length}});var fe,pe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,de=re.fn.init=function(t,e){var n,r;if(!t)return this;if("string"==typeof t){if(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:pe.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||fe).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof re?e[0]:e,re.merge(this,re.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:ee,!0)),le.test(n[1])&&re.isPlainObject(e))for(n in e)re.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return r=ee.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=ee,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):re.isFunction(t)?"undefined"!=typeof fe.ready?fe.ready(t):t(re):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),re.makeArray(t,this))};de.prototype=re.fn,fe=re(ee);var me=/^(?:parents|prev(?:Until|All))/,ge={children:!0,contents:!0,next:!0,prev:!0};re.extend({dir:function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&re(t).is(n))break;r.push(t)}return r},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),re.fn.extend({has:function(t){var e=re(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(re.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,r=0,i=this.length,o=[],s=ce.test(t)||"string"!=typeof t?re(t,e||this.context):0;i>r;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&re.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?re.unique(o):o)},index:function(t){return t?"string"==typeof t?J.call(re(t),this[0]):J.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(re.unique(re.merge(this.get(),re(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),re.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return re.dir(t,"parentNode")},parentsUntil:function(t,e,n){return re.dir(t,"parentNode",n)},next:function(t){return u(t,"nextSibling")},prev:function(t){return u(t,"previousSibling")},nextAll:function(t){return re.dir(t,"nextSibling")},prevAll:function(t){return re.dir(t,"previousSibling")},nextUntil:function(t,e,n){return re.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return re.dir(t,"previousSibling",n)},siblings:function(t){return re.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return re.sibling(t.firstChild)},contents:function(t){return t.contentDocument||re.merge([],t.childNodes)}},function(t,e){re.fn[t]=function(n,r){var i=re.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=re.filter(r,i)),this.length>1&&(ge[t]||re.unique(i),me.test(t)&&i.reverse()),this.pushStack(i)}});var ve=/\S+/g,ye={};re.Callbacks=function(t){t="string"==typeof t?ye[t]||c(t):re.extend({},t);var e,n,r,i,o,s,a=[],u=!t.once&&[],l=function(c){for(e=t.memory&&c,n=!0,s=i||0,i=0,o=a.length,r=!0;a&&o>s;s++)if(a[s].apply(c[0],c[1])===!1&&t.stopOnFalse){e=!1;break}r=!1,a&&(u?u.length&&l(u.shift()):e?a=[]:h.disable())},h={add:function(){if(a){var n=a.length;!function s(e){re.each(e,function(e,n){var r=re.type(n);"function"===r?t.unique&&h.has(n)||a.push(n):n&&n.length&&"string"!==r&&s(n)})}(arguments),r?o=a.length:e&&(i=n,l(e))}return this},remove:function(){return a&&re.each(arguments,function(t,e){for(var n;(n=re.inArray(e,a,n))>-1;)a.splice(n,1),r&&(o>=n&&o--,s>=n&&s--)}),this},has:function(t){return t?re.inArray(t,a)>-1:!(!a||!a.length)},empty:function(){return a=[],o=0,this},disable:function(){return a=u=e=void 0,this},disabled:function(){return!a},lock:function(){return u=void 0,e||h.disable(),this},locked:function(){return!u},fireWith:function(t,e){return!a||n&&!u||(e=e||[],e=[t,e.slice?e.slice():e],r?u.push(e):l(e)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!n}};return h},re.extend({Deferred:function(t){var e=[["resolve","done",re.Callbacks("once memory"),"resolved"],["reject","fail",re.Callbacks("once memory"),"rejected"],["notify","progress",re.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var t=arguments;return re.Deferred(function(n){re.each(e,function(e,o){var s=re.isFunction(t[e])&&t[e];i[o[1]](function(){var t=s&&s.apply(this,arguments);t&&re.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,s?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?re.extend(t,r):r}},i={};return r.pipe=r.then,re.each(e,function(t,o){var s=o[2],a=o[3];r[o[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=s.fireWith}),r.promise(i),t&&t.call(i,i),i},when:function(t){var e,n,r,i=0,o=Y.call(arguments),s=o.length,a=1!==s||t&&re.isFunction(t.promise)?s:0,u=1===a?t:re.Deferred(),c=function(t,n,r){return function(i){n[t]=this,r[t]=arguments.length>1?Y.call(arguments):i,r===e?u.notifyWith(n,r):--a||u.resolveWith(n,r)}};if(s>1)for(e=new Array(s),n=new Array(s),r=new Array(s);s>i;i++)o[i]&&re.isFunction(o[i].promise)?o[i].promise().done(c(i,r,o)).fail(u.reject).progress(c(i,n,e)):--a;return a||u.resolveWith(r,o),u.promise()}});var be;re.fn.ready=function(t){return re.ready.promise().done(t),this},re.extend({isReady:!1,readyWait:1,holdReady:function(t){t?re.readyWait++:re.ready(!0)},ready:function(t){(t===!0?--re.readyWait:re.isReady)||(re.isReady=!0,t!==!0&&--re.readyWait>0||(be.resolveWith(ee,[re]),re.fn.triggerHandler&&(re(ee).triggerHandler("ready"),re(ee).off("ready"))))}}),re.ready.promise=function(t){return be||(be=re.Deferred(),"complete"===ee.readyState?setTimeout(re.ready):(ee.addEventListener("DOMContentLoaded",l,!1),i.addEventListener("load",l,!1))),be.promise(t)},re.ready.promise();var xe=re.access=function(t,e,n,r,i,o,s){var a=0,u=t.length,c=null==n;if("object"===re.type(n)){i=!0;for(a in n)re.access(t,e,a,n[a],!0,o,s)}else if(void 0!==r&&(i=!0,re.isFunction(r)||(s=!0),c&&(s?(e.call(t,r),e=null):(c=e,e=function(t,e,n){return c.call(re(t),n)})),e))for(;u>a;a++)e(t[a],n,s?r:r.call(t[a],a,e(t[a],n)));return i?t:c?e.call(t):u?e(t[0],n):o};re.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},h.uid=1,h.accepts=re.acceptData,h.prototype={key:function(t){if(!h.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=h.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(r){e[this.expando]=n,re.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var r,i=this.key(t),o=this.cache[i];if("string"==typeof e)o[e]=n;else if(re.isEmptyObject(o))re.extend(this.cache[i],e);else for(r in e)o[r]=e[r];return o},get:function(t,e){var n=this.cache[this.key(t)];return void 0===e?n:n[e]},access:function(t,e,n){var r;return void 0===e||e&&"string"==typeof e&&void 0===n?(r=this.get(t,e),void 0!==r?r:this.get(t,re.camelCase(e))):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r,i,o=this.key(t),s=this.cache[o];if(void 0===e)this.cache[o]={};else{re.isArray(e)?r=e.concat(e.map(re.camelCase)):(i=re.camelCase(e),e in s?r=[e,i]:(r=i,r=r in s?[r]:r.match(ve)||[])),n=r.length;for(;n--;)delete s[r[n]]}},hasData:function(t){return!re.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var we=new h,_e=new h,Te=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Se=/([A-Z])/g;re.extend({hasData:function(t){return _e.hasData(t)||we.hasData(t)},data:function(t,e,n){return _e.access(t,e,n)},removeData:function(t,e){_e.remove(t,e)},_data:function(t,e,n){return we.access(t,e,n)},_removeData:function(t,e){we.remove(t,e)}}),re.fn.extend({data:function(t,e){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(i=_e.get(o),1===o.nodeType&&!we.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(r=s[n].name,0===r.indexOf("data-")&&(r=re.camelCase(r.slice(5)),f(o,r,i[r])));we.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each(function(){_e.set(this,t)}):xe(this,function(e){var n,r=re.camelCase(t);if(o&&void 0===e){if(n=_e.get(o,t),void 0!==n)return n;if(n=_e.get(o,r),void 0!==n)return n;if(n=f(o,r,void 0),void 0!==n)return n}else this.each(function(){var n=_e.get(this,r);_e.set(this,r,e),-1!==t.indexOf("-")&&void 0!==n&&_e.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){_e.remove(this,t)})}}),re.extend({queue:function(t,e,n){var r;return t?(e=(e||"fx")+"queue",r=we.get(t,e),n&&(!r||re.isArray(n)?r=we.access(t,e,re.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=re.queue(t,e),r=n.length,i=n.shift(),o=re._queueHooks(t,e),s=function(){re.dequeue(t,e)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,s,o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return we.get(t,n)||we.access(t,n,{empty:re.Callbacks("once memory").add(function(){we.remove(t,[e+"queue",n])})})}}),re.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?re.queue(this[0],t):void 0===e?this:this.each(function(){var n=re.queue(this,t,e);re._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&re.dequeue(this,t)})},dequeue:function(t){return this.each(function(){re.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=re.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)n=we.get(o[s],t+"queueHooks"),n&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(e)}});var Ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ce=["Top","Right","Bottom","Left"],Ae=function(t,e){return t=e||t,"none"===re.css(t,"display")||!re.contains(t.ownerDocument,t)},je=/^(?:checkbox|radio)$/i;!function(){var t=ee.createDocumentFragment(),e=t.appendChild(ee.createElement("div")),n=ee.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),te.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",te.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var ke="undefined";te.focusinBubbles="onfocusin"in i;var Oe=/^key/,Me=/^(?:mouse|pointer|contextmenu)|click/,Re=/^(?:focusinfocus|focusoutblur)$/,Pe=/^([^.]*)(?:\.(.+)|)$/;re.event={global:{},add:function(t,e,n,r,i){var o,s,a,u,c,l,h,f,p,d,m,g=we.get(t);if(g)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=re.guid++),(u=g.events)||(u=g.events={}),(s=g.handle)||(s=g.handle=function(e){return typeof re!==ke&&re.event.triggered!==e.type?re.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(ve)||[""],c=e.length;c--;)a=Pe.exec(e[c])||[],p=m=a[1],d=(a[2]||"").split(".").sort(),p&&(h=re.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,h=re.event.special[p]||{},l=re.extend({type:p,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&re.expr.match.needsContext.test(i),namespace:d.join(".")},o),(f=u[p])||(f=u[p]=[],f.delegateCount=0,h.setup&&h.setup.call(t,r,d,s)!==!1||t.addEventListener&&t.addEventListener(p,s,!1)),h.add&&(h.add.call(t,l),l.handler.guid||(l.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,l):f.push(l),re.event.global[p]=!0)},remove:function(t,e,n,r,i){var o,s,a,u,c,l,h,f,p,d,m,g=we.hasData(t)&&we.get(t);if(g&&(u=g.events)){for(e=(e||"").match(ve)||[""],c=e.length;c--;)if(a=Pe.exec(e[c])||[],p=m=a[1],d=(a[2]||"").split(".").sort(),p){for(h=re.event.special[p]||{},p=(r?h.delegateType:h.bindType)||p,f=u[p]||[],a=a[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=f.length;o--;)l=f[o],!i&&m!==l.origType||n&&n.guid!==l.guid||a&&!a.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(f.splice(o,1),l.selector&&f.delegateCount--,h.remove&&h.remove.call(t,l));s&&!f.length&&(h.teardown&&h.teardown.call(t,d,g.handle)!==!1||re.removeEvent(t,p,g.handle),delete u[p])}else for(p in u)re.event.remove(t,p+e[c],n,r,!0);re.isEmptyObject(u)&&(delete g.handle,we.remove(t,"events"))}},trigger:function(t,e,n,r){var o,s,a,u,c,l,h,f=[n||ee],p=Z.call(t,"type")?t.type:t,d=Z.call(t,"namespace")?t.namespace.split("."):[];if(s=a=n=n||ee,3!==n.nodeType&&8!==n.nodeType&&!Re.test(p+re.event.triggered)&&(p.indexOf(".")>=0&&(d=p.split("."),p=d.shift(),d.sort()),c=p.indexOf(":")<0&&"on"+p,t=t[re.expando]?t:new re.Event(p,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=d.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:re.makeArray(e,[t]),h=re.event.special[p]||{},r||!h.trigger||h.trigger.apply(n,e)!==!1)){if(!r&&!h.noBubble&&!re.isWindow(n)){for(u=h.delegateType||p,Re.test(u+p)||(s=s.parentNode);s;s=s.parentNode)f.push(s),a=s;
a===(n.ownerDocument||ee)&&f.push(a.defaultView||a.parentWindow||i)}for(o=0;(s=f[o++])&&!t.isPropagationStopped();)t.type=o>1?u:h.bindType||p,l=(we.get(s,"events")||{})[t.type]&&we.get(s,"handle"),l&&l.apply(s,e),l=c&&s[c],l&&l.apply&&re.acceptData(s)&&(t.result=l.apply(s,e),t.result===!1&&t.preventDefault());return t.type=p,r||t.isDefaultPrevented()||h._default&&h._default.apply(f.pop(),e)!==!1||!re.acceptData(n)||c&&re.isFunction(n[p])&&!re.isWindow(n)&&(a=n[c],a&&(n[c]=null),re.event.triggered=p,n[p](),re.event.triggered=void 0,a&&(n[c]=a)),t.result}},dispatch:function(t){t=re.event.fix(t);var e,n,r,i,o,s=[],a=Y.call(arguments),u=(we.get(this,"events")||{})[t.type]||[],c=re.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(s=re.event.handlers.call(this,t,u),e=0;(i=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(o.namespace))&&(t.handleObj=o,t.data=o.data,r=((re.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a),void 0!==r&&(t.result=r)===!1&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,r,i,o,s=[],a=e.delegateCount,u=t.target;if(a&&u.nodeType&&(!t.button||"click"!==t.type))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||"click"!==t.type){for(r=[],n=0;a>n;n++)o=e[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?re(i,this).index(u)>=0:re.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&s.push({elem:u,handlers:r})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,r,i,o=e.button;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||ee,r=n.documentElement,i=n.body,t.pageX=e.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[re.expando])return t;var e,n,r,i=t.type,o=t,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=Me.test(i)?this.mouseHooks:Oe.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,t=new re.Event(o),e=r.length;e--;)n=r[e],t[n]=o[n];return t.target||(t.target=ee),3===t.target.nodeType&&(t.target=t.target.parentNode),s.filter?s.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==m()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===m()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&re.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return re.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,r){var i=re.extend(new re.Event,n,{type:t,isSimulated:!0,originalEvent:{}});r?re.event.trigger(i,null,e):re.event.dispatch.call(e,i),i.isDefaultPrevented()&&n.preventDefault()}},re.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},re.Event=function(t,e){return this instanceof re.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?p:d):this.type=t,e&&re.extend(this,e),this.timeStamp=t&&t.timeStamp||re.now(),void(this[re.expando]=!0)):new re.Event(t,e)},re.Event.prototype={isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=p,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=p,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=p,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},re.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){re.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,i=t.relatedTarget,o=t.handleObj;return(!i||i!==r&&!re.contains(r,i))&&(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),te.focusinBubbles||re.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){re.event.simulate(e,t.target,re.event.fix(t),!0)};re.event.special[e]={setup:function(){var r=this.ownerDocument||this,i=we.access(r,e);i||r.addEventListener(t,n,!0),we.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=we.access(r,e)-1;i?we.access(r,e,i):(r.removeEventListener(t,n,!0),we.remove(r,e))}}}),re.fn.extend({on:function(t,e,n,r,i){var o,s;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(s in t)this.on(s,e,n,t[s],i);return this}if(null==n&&null==r?(r=e,n=e=void 0):null==r&&("string"==typeof e?(r=n,n=void 0):(r=n,n=e,e=void 0)),r===!1)r=d;else if(!r)return this;return 1===i&&(o=r,r=function(t){return re().off(t),o.apply(this,arguments)},r.guid=o.guid||(o.guid=re.guid++)),this.each(function(){re.event.add(this,t,r,n,e)})},one:function(t,e,n,r){return this.on(t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,re(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=d),this.each(function(){re.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){re.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?re.event.trigger(t,e,n,!0):void 0}});var Ie=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Le=/<([\w:]+)/,Fe=/<|&#?\w+;/,Be=/<(?:script|style|link)/i,De=/checked\s*(?:[^=]|=\s*.checked.)/i,Ne=/^$|\/(?:java|ecma)script/i,qe=/^true\/(.*)/,Ue=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,We={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};We.optgroup=We.option,We.tbody=We.tfoot=We.colgroup=We.caption=We.thead,We.th=We.td,re.extend({clone:function(t,e,n){var r,i,o,s,a=t.cloneNode(!0),u=re.contains(t.ownerDocument,t);if(!(te.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||re.isXMLDoc(t)))for(s=w(a),o=w(t),r=0,i=o.length;i>r;r++)_(o[r],s[r]);if(e)if(n)for(o=o||w(t),s=s||w(a),r=0,i=o.length;i>r;r++)x(o[r],s[r]);else x(t,a);return s=w(a,"script"),s.length>0&&b(s,!u&&w(t,"script")),a},buildFragment:function(t,e,n,r){for(var i,o,s,a,u,c,l=e.createDocumentFragment(),h=[],f=0,p=t.length;p>f;f++)if(i=t[f],i||0===i)if("object"===re.type(i))re.merge(h,i.nodeType?[i]:i);else if(Fe.test(i)){for(o=o||l.appendChild(e.createElement("div")),s=(Le.exec(i)||["",""])[1].toLowerCase(),a=We[s]||We._default,o.innerHTML=a[1]+i.replace(Ie,"<$1></$2>")+a[2],c=a[0];c--;)o=o.lastChild;re.merge(h,o.childNodes),o=l.firstChild,o.textContent=""}else h.push(e.createTextNode(i));for(l.textContent="",f=0;i=h[f++];)if((!r||-1===re.inArray(i,r))&&(u=re.contains(i.ownerDocument,i),o=w(l.appendChild(i),"script"),u&&b(o),n))for(c=0;i=o[c++];)Ne.test(i.type||"")&&n.push(i);return l},cleanData:function(t){for(var e,n,r,i,o=re.event.special,s=0;void 0!==(n=t[s]);s++){if(re.acceptData(n)&&(i=n[we.expando],i&&(e=we.cache[i]))){if(e.events)for(r in e.events)o[r]?re.event.remove(n,r):re.removeEvent(n,r,e.handle);we.cache[i]&&delete we.cache[i]}delete _e.cache[n[_e.expando]]}}}),re.fn.extend({text:function(t){return xe(this,function(t){return void 0===t?re.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=g(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=g(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,r=t?re.filter(t,this):this,i=0;null!=(n=r[i]);i++)e||1!==n.nodeType||re.cleanData(w(n)),n.parentNode&&(e&&re.contains(n.ownerDocument,n)&&b(w(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(re.cleanData(w(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return re.clone(this,t,e)})},html:function(t){return xe(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Be.test(t)&&!We[(Le.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Ie,"<$1></$2>");try{for(;r>n;n++)e=this[n]||{},1===e.nodeType&&(re.cleanData(w(e,!1)),e.innerHTML=t);e=0}catch(i){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,re.cleanData(w(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=X.apply([],t);var n,r,i,o,s,a,u=0,c=this.length,l=this,h=c-1,f=t[0],p=re.isFunction(f);if(p||c>1&&"string"==typeof f&&!te.checkClone&&De.test(f))return this.each(function(n){var r=l.eq(n);p&&(t[0]=f.call(this,n,r.html())),r.domManip(t,e)});if(c&&(n=re.buildFragment(t,this[0].ownerDocument,!1,this),r=n.firstChild,1===n.childNodes.length&&(n=r),r)){for(i=re.map(w(n,"script"),v),o=i.length;c>u;u++)s=n,u!==h&&(s=re.clone(s,!0,!0),o&&re.merge(i,w(s,"script"))),e.call(this[u],s,u);if(o)for(a=i[i.length-1].ownerDocument,re.map(i,y),u=0;o>u;u++)s=i[u],Ne.test(s.type||"")&&!we.access(s,"globalEval")&&re.contains(a,s)&&(s.src?re._evalUrl&&re._evalUrl(s.src):re.globalEval(s.textContent.replace(Ue,"")))}return this}}),re.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){re.fn[t]=function(t){for(var n,r=[],i=re(t),o=i.length-1,s=0;o>=s;s++)n=s===o?this:this.clone(!0),re(i[s])[e](n),$.apply(r,n.get());return this.pushStack(r)}});var Ge,Ve={},He=/^margin/,ze=new RegExp("^("+Ee+")(?!px)[a-z%]+$","i"),Ye=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):i.getComputedStyle(t,null)};!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",r.appendChild(o);var t=i.getComputedStyle(s,null);e="1%"!==t.top,n="4px"===t.width,r.removeChild(o)}var e,n,r=ee.documentElement,o=ee.createElement("div"),s=ee.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",te.clearCloneStyle="content-box"===s.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(s),i.getComputedStyle&&re.extend(te,{pixelPosition:function(){return t(),e},boxSizingReliable:function(){return null==n&&t(),n},reliableMarginRight:function(){var t,e=s.appendChild(ee.createElement("div"));return e.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",s.style.width="1px",r.appendChild(o),t=!parseFloat(i.getComputedStyle(e,null).marginRight),r.removeChild(o),s.removeChild(e),t}}))}(),re.swap=function(t,e,n,r){var i,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];i=n.apply(t,r||[]);for(o in e)t.style[o]=s[o];return i};var Xe=/^(none|table(?!-c[ea]).+)/,$e=new RegExp("^("+Ee+")(.*)$","i"),Je=new RegExp("^([+-])=("+Ee+")","i"),Ke={position:"absolute",visibility:"hidden",display:"block"},Qe={letterSpacing:"0",fontWeight:"400"},Ze=["Webkit","O","Moz","ms"];re.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=E(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,s,a=re.camelCase(e),u=t.style;return e=re.cssProps[a]||(re.cssProps[a]=A(u,a)),s=re.cssHooks[e]||re.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(i=s.get(t,!1,r))?i:u[e]:(o=typeof n,"string"===o&&(i=Je.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(re.css(t,e)),o="number"),null!=n&&n===n&&("number"!==o||re.cssNumber[a]||(n+="px"),te.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,r))||(u[e]=n)),void 0)}},css:function(t,e,n,r){var i,o,s,a=re.camelCase(e);return e=re.cssProps[a]||(re.cssProps[a]=A(t.style,a)),s=re.cssHooks[e]||re.cssHooks[a],s&&"get"in s&&(i=s.get(t,!0,n)),void 0===i&&(i=E(t,e,r)),"normal"===i&&e in Qe&&(i=Qe[e]),""===n||n?(o=parseFloat(i),n===!0||re.isNumeric(o)?o||0:i):i}}),re.each(["height","width"],function(t,e){re.cssHooks[e]={get:function(t,n,r){return n?Xe.test(re.css(t,"display"))&&0===t.offsetWidth?re.swap(t,Ke,function(){return O(t,e,r)}):O(t,e,r):void 0},set:function(t,n,r){var i=r&&Ye(t);return j(t,n,r?k(t,e,r,"border-box"===re.css(t,"boxSizing",!1,i),i):0)}}}),re.cssHooks.marginRight=C(te.reliableMarginRight,function(t,e){return e?re.swap(t,{display:"inline-block"},E,[t,"marginRight"]):void 0}),re.each({margin:"",padding:"",border:"Width"},function(t,e){re.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[t+Ce[r]+e]=o[r]||o[r-2]||o[0];return i}},He.test(t)||(re.cssHooks[t+e].set=j)}),re.fn.extend({css:function(t,e){return xe(this,function(t,e,n){var r,i,o={},s=0;if(re.isArray(e)){for(r=Ye(t),i=e.length;i>s;s++)o[e[s]]=re.css(t,e[s],!1,r);return o}return void 0!==n?re.style(t,e,n):re.css(t,e)},t,e,arguments.length>1)},show:function(){return M(this,!0)},hide:function(){return M(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ae(this)?re(this).show():re(this).hide()})}}),re.Tween=R,R.prototype={constructor:R,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||"swing",this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(re.cssNumber[n]?"":"px")},cur:function(){var t=R.propHooks[this.prop];return t&&t.get?t.get(this):R.propHooks._default.get(this)},run:function(t){var e,n=R.propHooks[this.prop];return this.pos=e=this.options.duration?re.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):R.propHooks._default.set(this),this}},R.prototype.init.prototype=R.prototype,R.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=re.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){re.fx.step[t.prop]?re.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[re.cssProps[t.prop]]||re.cssHooks[t.prop])?re.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},re.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},re.fx=R.prototype.init,re.fx.step={};var tn,en,nn=/^(?:toggle|show|hide)$/,rn=new RegExp("^(?:([+-])=|)("+Ee+")([a-z%]*)$","i"),on=/queueHooks$/,sn=[F],an={"*":[function(t,e){var n=this.createTween(t,e),r=n.cur(),i=rn.exec(e),o=i&&i[3]||(re.cssNumber[t]?"":"px"),s=(re.cssNumber[t]||"px"!==o&&+r)&&rn.exec(re.css(n.elem,t)),a=1,u=20;if(s&&s[3]!==o){o=o||s[3],i=i||[],s=+r||1;do a=a||".5",s/=a,re.style(n.elem,t,s+o);while(a!==(a=n.cur()/r)&&1!==a&&--u)}return i&&(s=n.start=+s||+r||0,n.unit=o,n.end=i[1]?s+(i[1]+1)*i[2]:+i[2]),n}]};re.Animation=re.extend(D,{tweener:function(t,e){re.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,r=0,i=t.length;i>r;r++)n=t[r],an[n]=an[n]||[],an[n].unshift(e)},prefilter:function(t,e){e?sn.unshift(t):sn.push(t)}}),re.speed=function(t,e,n){var r=t&&"object"==typeof t?re.extend({},t):{complete:n||!n&&e||re.isFunction(t)&&t,duration:t,easing:n&&e||e&&!re.isFunction(e)&&e};return r.duration=re.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in re.fx.speeds?re.fx.speeds[r.duration]:re.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){re.isFunction(r.old)&&r.old.call(this),r.queue&&re.dequeue(this,r.queue)},r},re.fn.extend({fadeTo:function(t,e,n,r){return this.filter(Ae).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=re.isEmptyObject(t),o=re.speed(e,n,r),s=function(){var e=D(this,re.extend({},t),o);(i||we.get(this,"finish"))&&e.stop(!0)};return s.finish=s,i||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=re.timers,s=we.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&on.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));(e||!n)&&re.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=we.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=re.timers,s=r?r.length:0;for(n.finish=!0,re.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;s>e;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),re.each(["toggle","show","hide"],function(t,e){var n=re.fn[e];re.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(I(e,!0),t,r,i)}}),re.each({slideDown:I("show"),slideUp:I("hide"),slideToggle:I("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){re.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),re.timers=[],re.fx.tick=function(){var t,e=0,n=re.timers;for(tn=re.now();e<n.length;e++)t=n[e],t()||n[e]!==t||n.splice(e--,1);n.length||re.fx.stop(),tn=void 0},re.fx.timer=function(t){re.timers.push(t),t()?re.fx.start():re.timers.pop()},re.fx.interval=13,re.fx.start=function(){en||(en=setInterval(re.fx.tick,re.fx.interval))},re.fx.stop=function(){clearInterval(en),en=null},re.fx.speeds={slow:600,fast:200,_default:400},re.fn.delay=function(t,e){return t=re.fx?re.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var r=setTimeout(e,t);n.stop=function(){clearTimeout(r)}})},function(){var t=ee.createElement("input"),e=ee.createElement("select"),n=e.appendChild(ee.createElement("option"));t.type="checkbox",te.checkOn=""!==t.value,te.optSelected=n.selected,e.disabled=!0,te.optDisabled=!n.disabled,t=ee.createElement("input"),t.value="t",t.type="radio",te.radioValue="t"===t.value}();var un,cn,ln=re.expr.attrHandle;re.fn.extend({attr:function(t,e){return xe(this,re.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){re.removeAttr(this,t)})}}),re.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===ke?re.prop(t,e,n):(1===o&&re.isXMLDoc(t)||(e=e.toLowerCase(),r=re.attrHooks[e]||(re.expr.match.bool.test(e)?cn:un)),void 0===n?r&&"get"in r&&null!==(i=r.get(t,e))?i:(i=re.find.attr(t,e),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):void re.removeAttr(t,e))},removeAttr:function(t,e){var n,r,i=0,o=e&&e.match(ve);if(o&&1===t.nodeType)for(;n=o[i++];)r=re.propFix[n]||n,re.expr.match.bool.test(n)&&(t[r]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!te.radioValue&&"radio"===e&&re.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),cn={set:function(t,e,n){return e===!1?re.removeAttr(t,n):t.setAttribute(n,n),n}},re.each(re.expr.match.bool.source.match(/\w+/g),function(t,e){var n=ln[e]||re.find.attr;ln[e]=function(t,e,r){var i,o;return r||(o=ln[e],ln[e]=i,i=null!=n(t,e,r)?e.toLowerCase():null,ln[e]=o),i}});var hn=/^(?:input|select|textarea|button)$/i;re.fn.extend({prop:function(t,e){return xe(this,re.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[re.propFix[t]||t]})}}),re.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var r,i,o,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return o=1!==s||!re.isXMLDoc(t),o&&(e=re.propFix[e]||e,i=re.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||hn.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),te.optSelected||(re.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),re.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){re.propFix[this.toLowerCase()]=this});var fn=/[\t\r\n\f]/g;re.fn.extend({addClass:function(t){var e,n,r,i,o,s,a="string"==typeof t&&t,u=0,c=this.length;if(re.isFunction(t))return this.each(function(e){re(this).addClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(ve)||[];c>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(fn," "):" ")){for(o=0;i=e[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");s=re.trim(r),n.className!==s&&(n.className=s)}return this},removeClass:function(t){var e,n,r,i,o,s,a=0===arguments.length||"string"==typeof t&&t,u=0,c=this.length;if(re.isFunction(t))return this.each(function(e){re(this).removeClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(ve)||[];c>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(fn," "):"")){for(o=0;i=e[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");s=t?re.trim(r):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):this.each(re.isFunction(t)?function(n){re(this).toggleClass(t.call(this,n,this.className,e),e)}:function(){if("string"===n)for(var e,r=0,i=re(this),o=t.match(ve)||[];e=o[r++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else(n===ke||"boolean"===n)&&(this.className&&we.set(this,"__className__",this.className),this.className=this.className||t===!1?"":we.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(fn," ").indexOf(e)>=0)return!0;return!1}});var pn=/\r/g;re.fn.extend({val:function(t){var e,n,r,i=this[0];{if(arguments.length)return r=re.isFunction(t),this.each(function(n){var i;1===this.nodeType&&(i=r?t.call(this,n,re(this).val()):t,null==i?i="":"number"==typeof i?i+="":re.isArray(i)&&(i=re.map(i,function(t){return null==t?"":t+""})),e=re.valHooks[this.type]||re.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))});if(i)return e=re.valHooks[i.type]||re.valHooks[i.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(pn,""):null==n?"":n)}}}),re.extend({valHooks:{option:{get:function(t){var e=re.find.attr(t,"value");return null!=e?e:re.trim(re.text(t))}},select:{get:function(t){for(var e,n,r=t.options,i=t.selectedIndex,o="select-one"===t.type||0>i,s=o?null:[],a=o?i+1:r.length,u=0>i?a:o?i:0;a>u;u++)if(n=r[u],!(!n.selected&&u!==i||(te.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&re.nodeName(n.parentNode,"optgroup"))){if(e=re(n).val(),o)return e;s.push(e)}return s},set:function(t,e){for(var n,r,i=t.options,o=re.makeArray(e),s=i.length;s--;)r=i[s],(r.selected=re.inArray(r.value,o)>=0)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),re.each(["radio","checkbox"],function(){re.valHooks[this]={set:function(t,e){return re.isArray(e)?t.checked=re.inArray(re(t).val(),e)>=0:void 0}},te.checkOn||(re.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),re.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){re.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),re.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var dn=re.now(),mn=/\?/;re.parseJSON=function(t){return JSON.parse(t+"")},re.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{n=new DOMParser,e=n.parseFromString(t,"text/xml")}catch(r){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&re.error("Invalid XML: "+t),e};var gn=/#.*$/,vn=/([?&])_=[^&]*/,yn=/^(.*?):[ \t]*([^\r\n]*)$/gm,bn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,xn=/^(?:GET|HEAD)$/,wn=/^\/\//,_n=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Tn={},Sn={},En="*/".concat("*"),Cn=i.location.href,An=_n.exec(Cn.toLowerCase())||[];re.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Cn,type:"GET",isLocal:bn.test(An[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":En,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":re.parseJSON,"text xml":re.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?U(U(t,re.ajaxSettings),e):U(re.ajaxSettings,t)},ajaxPrefilter:N(Tn),ajaxTransport:N(Sn),ajax:function(t,e){function n(t,e,n,s){var u,l,v,y,x,_=e;2!==b&&(b=2,a&&clearTimeout(a),r=void 0,o=s||"",w.readyState=t>0?4:0,u=t>=200&&300>t||304===t,n&&(y=W(h,w,n)),y=G(h,y,w,u),u?(h.ifModified&&(x=w.getResponseHeader("Last-Modified"),x&&(re.lastModified[i]=x),x=w.getResponseHeader("etag"),x&&(re.etag[i]=x)),204===t||"HEAD"===h.type?_="nocontent":304===t?_="notmodified":(_=y.state,l=y.data,v=y.error,u=!v)):(v=_,(t||!_)&&(_="error",0>t&&(t=0))),w.status=t,w.statusText=(e||_)+"",u?d.resolveWith(f,[l,_,w]):d.rejectWith(f,[w,_,v]),w.statusCode(g),g=void 0,c&&p.trigger(u?"ajaxSuccess":"ajaxError",[w,h,u?l:v]),m.fireWith(f,[w,_]),c&&(p.trigger("ajaxComplete",[w,h]),--re.active||re.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var r,i,o,s,a,u,c,l,h=re.ajaxSetup({},e),f=h.context||h,p=h.context&&(f.nodeType||f.jquery)?re(f):re.event,d=re.Deferred(),m=re.Callbacks("once memory"),g=h.statusCode||{},v={},y={},b=0,x="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!s)for(s={};e=yn.exec(o);)s[e[1].toLowerCase()]=e[2];e=s[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return b||(t=y[n]=y[n]||t,v[t]=e),this},overrideMimeType:function(t){return b||(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)g[e]=[g[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||x;return r&&r.abort(e),n(0,e),this}};if(d.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,h.url=((t||h.url||Cn)+"").replace(gn,"").replace(wn,An[1]+"//"),h.type=e.method||e.type||h.method||h.type,h.dataTypes=re.trim(h.dataType||"*").toLowerCase().match(ve)||[""],null==h.crossDomain&&(u=_n.exec(h.url.toLowerCase()),h.crossDomain=!(!u||u[1]===An[1]&&u[2]===An[2]&&(u[3]||("http:"===u[1]?"80":"443"))===(An[3]||("http:"===An[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=re.param(h.data,h.traditional)),q(Tn,h,e,w),2===b)return w;c=re.event&&h.global,c&&0===re.active++&&re.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!xn.test(h.type),i=h.url,h.hasContent||(h.data&&(i=h.url+=(mn.test(i)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=vn.test(i)?i.replace(vn,"$1_="+dn++):i+(mn.test(i)?"&":"?")+"_="+dn++)),h.ifModified&&(re.lastModified[i]&&w.setRequestHeader("If-Modified-Since",re.lastModified[i]),re.etag[i]&&w.setRequestHeader("If-None-Match",re.etag[i])),(h.data&&h.hasContent&&h.contentType!==!1||e.contentType)&&w.setRequestHeader("Content-Type",h.contentType),w.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+En+"; q=0.01":""):h.accepts["*"]);for(l in h.headers)w.setRequestHeader(l,h.headers[l]);if(h.beforeSend&&(h.beforeSend.call(f,w,h)===!1||2===b))return w.abort();x="abort";for(l in{success:1,error:1,complete:1})w[l](h[l]);if(r=q(Sn,h,e,w)){w.readyState=1,c&&p.trigger("ajaxSend",[w,h]),h.async&&h.timeout>0&&(a=setTimeout(function(){w.abort("timeout")},h.timeout));try{b=1,r.send(v,n)}catch(_){if(!(2>b))throw _;n(-1,_)}}else n(-1,"No Transport");return w},getJSON:function(t,e,n){return re.get(t,e,n,"json")},getScript:function(t,e){return re.get(t,void 0,e,"script")}}),re.each(["get","post"],function(t,e){re[e]=function(t,n,r,i){return re.isFunction(n)&&(i=i||r,r=n,n=void 0),re.ajax({url:t,type:e,dataType:i,data:n,success:r})}}),re._evalUrl=function(t){return re.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},re.fn.extend({wrapAll:function(t){var e;return re.isFunction(t)?this.each(function(e){re(this).wrapAll(t.call(this,e))}):(this[0]&&(e=re(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return this.each(re.isFunction(t)?function(e){re(this).wrapInner(t.call(this,e))}:function(){var e=re(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=re.isFunction(t);return this.each(function(n){re(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){re.nodeName(this,"body")||re(this).replaceWith(this.childNodes)}).end()}}),re.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},re.expr.filters.visible=function(t){return!re.expr.filters.hidden(t)};var jn=/%20/g,kn=/\[\]$/,On=/\r?\n/g,Mn=/^(?:submit|button|image|reset|file)$/i,Rn=/^(?:input|select|textarea|keygen)/i;re.param=function(t,e){var n,r=[],i=function(t,e){e=re.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)
};if(void 0===e&&(e=re.ajaxSettings&&re.ajaxSettings.traditional),re.isArray(t)||t.jquery&&!re.isPlainObject(t))re.each(t,function(){i(this.name,this.value)});else for(n in t)V(n,t[n],e,i);return r.join("&").replace(jn,"+")},re.fn.extend({serialize:function(){return re.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=re.prop(this,"elements");return t?re.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!re(this).is(":disabled")&&Rn.test(this.nodeName)&&!Mn.test(t)&&(this.checked||!je.test(t))}).map(function(t,e){var n=re(this).val();return null==n?null:re.isArray(n)?re.map(n,function(t){return{name:e.name,value:t.replace(On,"\r\n")}}):{name:e.name,value:n.replace(On,"\r\n")}}).get()}}),re.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Pn=0,In={},Ln={0:200,1223:204},Fn=re.ajaxSettings.xhr();i.attachEvent&&i.attachEvent("onunload",function(){for(var t in In)In[t]()}),te.cors=!!Fn&&"withCredentials"in Fn,te.ajax=Fn=!!Fn,re.ajaxTransport(function(t){var e;return te.cors||Fn&&!t.crossDomain?{send:function(n,r){var i,o=t.xhr(),s=++Pn;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(i in t.xhrFields)o[i]=t.xhrFields[i];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)o.setRequestHeader(i,n[i]);e=function(t){return function(){e&&(delete In[s],e=o.onload=o.onerror=null,"abort"===t?o.abort():"error"===t?r(o.status,o.statusText):r(Ln[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=e(),o.onerror=e("error"),e=In[s]=e("abort");try{o.send(t.hasContent&&t.data||null)}catch(a){if(e)throw a}},abort:function(){e&&e()}}:void 0}),re.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return re.globalEval(t),t}}}),re.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),re.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(r,i){e=re("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),ee.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Bn=[],Dn=/(=)\?(?=&|$)|\?\?/;re.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Bn.pop()||re.expando+"_"+dn++;return this[t]=!0,t}}),re.ajaxPrefilter("json jsonp",function(t,e,n){var r,o,s,a=t.jsonp!==!1&&(Dn.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Dn.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=re.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Dn,"$1"+r):t.jsonp!==!1&&(t.url+=(mn.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||re.error(r+" was not called"),s[0]},t.dataTypes[0]="json",o=i[r],i[r]=function(){s=arguments},n.always(function(){i[r]=o,t[r]&&(t.jsonpCallback=e.jsonpCallback,Bn.push(r)),s&&re.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),re.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||ee;var r=le.exec(t),i=!n&&[];return r?[e.createElement(r[1])]:(r=re.buildFragment([t],e,i),i&&i.length&&re(i).remove(),re.merge([],r.childNodes))};var Nn=re.fn.load;re.fn.load=function(t,e,n){if("string"!=typeof t&&Nn)return Nn.apply(this,arguments);var r,i,o,s=this,a=t.indexOf(" ");return a>=0&&(r=re.trim(t.slice(a)),t=t.slice(0,a)),re.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),s.length>0&&re.ajax({url:t,type:i,dataType:"html",data:e}).done(function(t){o=arguments,s.html(r?re("<div>").append(re.parseHTML(t)).find(r):t)}).complete(n&&function(t,e){s.each(n,o||[t.responseText,e,t])}),this},re.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){re.fn[e]=function(t){return this.on(e,t)}}),re.expr.filters.animated=function(t){return re.grep(re.timers,function(e){return t===e.elem}).length};var qn=i.document.documentElement;re.offset={setOffset:function(t,e,n){var r,i,o,s,a,u,c,l=re.css(t,"position"),h=re(t),f={};"static"===l&&(t.style.position="relative"),a=h.offset(),o=re.css(t,"top"),u=re.css(t,"left"),c=("absolute"===l||"fixed"===l)&&(o+u).indexOf("auto")>-1,c?(r=h.position(),s=r.top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(u)||0),re.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(f.top=e.top-a.top+s),null!=e.left&&(f.left=e.left-a.left+i),"using"in e?e.using.call(t,f):h.css(f)}},re.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){re.offset.setOffset(this,t,e)});var e,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;if(o)return e=o.documentElement,re.contains(e,r)?(typeof r.getBoundingClientRect!==ke&&(i=r.getBoundingClientRect()),n=H(o),{top:i.top+n.pageYOffset-e.clientTop,left:i.left+n.pageXOffset-e.clientLeft}):i},position:function(){if(this[0]){var t,e,n=this[0],r={top:0,left:0};return"fixed"===re.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),re.nodeName(t[0],"html")||(r=t.offset()),r.top+=re.css(t[0],"borderTopWidth",!0),r.left+=re.css(t[0],"borderLeftWidth",!0)),{top:e.top-r.top-re.css(n,"marginTop",!0),left:e.left-r.left-re.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||qn;t&&!re.nodeName(t,"html")&&"static"===re.css(t,"position");)t=t.offsetParent;return t||qn})}}),re.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;re.fn[t]=function(r){return xe(this,function(t,r,o){var s=H(t);return void 0===o?s?s[e]:t[r]:void(s?s.scrollTo(n?i.pageXOffset:o,n?o:i.pageYOffset):t[r]=o)},t,r,arguments.length,null)}}),re.each(["top","left"],function(t,e){re.cssHooks[e]=C(te.pixelPosition,function(t,n){return n?(n=E(t,e),ze.test(n)?re(t).position()[e]+"px":n):void 0})}),re.each({Height:"height",Width:"width"},function(t,e){re.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,r){re.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),s=n||(r===!0||i===!0?"margin":"border");return xe(this,function(e,n,r){var i;return re.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+t],i["scroll"+t],e.body["offset"+t],i["offset"+t],i["client"+t])):void 0===r?re.css(e,n,s):re.style(e,n,r,s)},e,o?r:void 0,o,null)}})}),re.fn.size=function(){return this.length},re.fn.andSelf=re.fn.addBack,n=[],r=function(){return re}.apply(e,n),!(void 0!==r&&(t.exports=r));var Un=i.jQuery,Wn=i.$;return re.noConflict=function(t){return i.$===re&&(i.$=Wn),t&&i.jQuery===re&&(i.jQuery=Un),re},typeof o===ke&&(i.jQuery=i.$=re),re})},function(t,e){"use strict";var n=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i=e.SkinNode=function(){function t(){r(this,t)}return n(t,null,{compile:{value:function(t,e){var n=new this;return n.compile(t,e),n}}}),t}();e["default"]=i,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";function r(t){var e=void 0;return function(n){e!==n&&(e=n,t(n))}}var i=function(t){return t&&t.__esModule?t["default"]:t},o=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},s=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},u=i(n(166)),c=e.Instance=function(){function t(e){if(a(this,t),this._context=e.context,this._object=e.object,this._children=e.children,this._bindings=[],this._concerns=[],this.onData=new u(e.onData),this.onDestroy=new u(e.onDestroy),e.bindings){var n=!0,r=!1,i=void 0;try{for(var s,c=e.bindings[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var l,h=s.value;(l=this).bind.apply(l,o(h))}}catch(f){r=!0,i=f}finally{try{!n&&c["return"]&&c["return"]()}finally{if(r)throw i}}}if(e.concerns){var p=!0,d=!1,m=void 0;try{for(var g,v=e.concerns[Symbol.iterator]();!(p=(g=v.next()).done);p=!0){var y=g.value;this._concerns.push(y.instantiate(this._context,this))}}catch(f){d=!0,m=f}finally{try{!p&&v["return"]&&v["return"]()}finally{if(d)throw m}}}if(e.children){var b=!0,x=!1,w=void 0;try{for(var _,T=e.children[Symbol.iterator]();!(b=(_=T.next()).done);b=!0){var S=_.value;this._concerns.push(S.instantiate(this._context,this._object))}}catch(f){x=!0,w=f}finally{try{!b&&T["return"]&&T["return"]()}finally{if(x)throw w}}}e.onCreate&&new u(e.onCreate).call(),e.parent&&this.attachTo(e.parent)}return s(t,{bind:{value:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];var i=r(e.pop());1===e.length&&e[0].constant?i(e[0]()):this._bindings.push(function(t){for(var n=0;n<e.length;n++)t=e[n](t);i(t)})}},attachTo:{value:function(t){this._parent=t,this._parent.addChild(this._object)}},detach:{value:function(){this._parent&&(this._parent.removeChild(this._object),this._parent=null)}},push:{value:function(t){var e;for(e=0;e<this._bindings.length;e++)this._bindings[e](t);for(e=0;e<this._concerns.length;e++)this._concerns[e].push(t);this.onData.call(t)}},destroy:{value:function(){this.detach();for(var t=0;t<this._concerns.length;t++)this._concerns[t].destroy();this.onDestroy.call(),this._concerns=null,this._bindings=null,this._parent=null,this._object=null}},object:{get:function(){return this._object}},parent:{get:function(){return this._parent}}}),t}();e["default"]=c,Object.defineProperty(e,"__esModule",{value:!0})},function(t){function e(){function t(e){return t.validate(e),e}var e=[].slice.call(arguments);return t.validate=function(t){for(var r=0;r<e.length;r++)n(e[r],t)},t}function n(t,e){if(t===Number&&(t="number"),t===String&&(t="string"),"string"==typeof t){if(typeof e!==t)throw new Error("should be a "+t)}else if("function"==typeof t){if("function"==typeof t.validate)t.validate(e);else if(!(e instanceof t))throw new Error("should be an instance of "+t)}else{if("object"!=typeof t)throw new Error("invalid schema");if(!e)throw new Error("should be an object");r(t,e)}}function r(t,e){for(var r in t){if(!(r in e))throw new Error('missing property: "'+r+'"');try{n(t[r],e[r])}catch(i){throw new Error('error in property "'+r+'": '+i.message)}}}t.exports=e,e.maybe=function(t){function e(t){return e.validate(t),t}return e.validate=function(e){null!==e&&void 0!==e&&n(t,e)},e}},function(t,e,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var t=arguments,n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return t;var r="color: "+this.color;t=[t[0],r,"color: inherit"].concat(Array.prototype.slice.call(t,1));var i=0,o=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(i++,"%c"===t&&(o=i))}),t.splice(o,0,r),t}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(t){try{null==t?c.removeItem("debug"):c.debug=t}catch(e){}}function a(){var t;try{t=c.debug}catch(e){}return t}function u(){try{return window.localStorage}catch(t){}}e=t.exports=n(33),e.log=o,e.formatArgs=i,e.save=s,e.load=a,e.useColors=r;var c;c="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){return JSON.stringify(t)},e.enable(a())},function(t){function e(t){var e=this;return"function"==typeof t&&(t=t.call(this)),new Promise(function(r,i){function o(e){var n;try{n=t.next(e)}catch(r){return i(r)}u(n)}function a(e){var n;try{n=t["throw"](e)}catch(r){return i(r)}u(n)}function u(t){if(t.done)return r(t.value);var i=n.call(e,t.value);return i&&s(i)?i.then(o,a):a(new TypeError('You may only yield a function, promise, generator, array, or object, but the following object was passed: "'+String(t.value)+'"'))}o()})}function n(t){return t?s(t)?t:u(t)||a(t)?e.call(this,t):"function"==typeof t?r.call(this,t):Array.isArray(t)?i.call(this,t):c(t)?o.call(this,t):t:t}function r(t){var e=this;return new Promise(function(n,r){t.call(e,function(t,e){return t?r(t):(arguments.length>2&&(e=l.call(arguments,1)),void n(e))})})}function i(t){return Promise.all(t.map(n,this))}function o(t){function e(t,e){r[e]=void 0,o.push(t.then(function(t){r[e]=t}))}for(var r=new t.constructor,i=Object.keys(t),o=[],a=0;a<i.length;a++){var u=i[a],c=n.call(this,t[u]);c&&s(c)?e(c,u):r[u]=t[u]}return Promise.all(o).then(function(){return r})}function s(t){return"function"==typeof t.then}function a(t){return"function"==typeof t.next&&"function"==typeof t["throw"]}function u(t){var e=t.constructor;return e?"GeneratorFunction"===e.name||"GeneratorFunction"===e.displayName?!0:a(e.prototype):!1}function c(t){return Object==t.constructor}var l=Array.prototype.slice;t.exports=e["default"]=e.co=e,e.wrap=function(t){function n(){return e.call(this,t.apply(this,arguments))}return n.__generatorFunction__=t,n}},function(t){function e(){if(!o){o=!0;for(var t,e=i.length;e;){t=i,i=[];for(var n=-1;++n<e;)t[n]();e=i.length}o=!1}}function n(){}var r=t.exports={},i=[],o=!1;r.nextTick=function(t){i.push(t),o||setTimeout(e,0)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=n,r.addListener=n,r.once=n,r.off=n,r.removeListener=n,r.removeAllListeners=n,r.emit=n,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t){t.exports=function(t,e,n,r,i){this.confidence=n,this.name=r||e.name(t),this.lang=i}},,function(t,e,n){"use strict";function r(t,e){e=e||{},u.call(this);var n=i.defaults(e.numberOfInputs,1),r=i.defaults(e.numberOfOutputs,1),o=i.defaults(e.channelCount,2),s=i.defaults(e.channelCountMode,"max"),a=i.defaults(e.channelInterpretation,"speakers");i.defineAttribute(this,"context","readonly",t,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"numberOfInputs","readonly",n,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"numberOfOutputs","readonly",r,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"channelCount","number",o,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"channelCountMode",c,s,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"channelInterpretation",l,a,function(t){throw new TypeError(i.formatter.concat(this,t))}),Object.defineProperties(this,{$name:{value:i.defaults(e.name,"AudioNode")},$context:{value:t},$inputs:{value:[]}}),this._outputs=[],this._tick=-1}var i=n(5),o=n(24),s=n(4),a=n(65),u=n(162),c="enum { max, clamped-max, explicit }",l="enum { speakers, discrete }",h=function(){throw new TypeError("Illegal constructor")};i.inherits(h,u),i.inherits(r,h),r.exports=h,h.prototype.connect=function(t){function e(t){return this.$context!==t.$context?"cannot connect to a destination belonging to a different audio context":void 0}function n(t,e){return 0>t||this.numberOfOutputs<=t?e+" index ("+t+") exceeds number of outputs ("+this.numberOfOutputs+")":void 0}function r(e,n){return 0>e||t.numberOfInputs<=e?n+" index ("+e+") exceeds number of inputs ("+t.numberOfInputs+")":void 0}var i=new o(this,"connect",[{name:"destination",type:"AudioNode | AudioParam",validate:e},{name:"output",type:"optional number",validate:n},{name:"input",type:"optional number",validate:r}]);i.validateArguments(arguments,function(t){throw new TypeError(i.form+"; "+t)});var s=this._outputs.indexOf(t);-1===s&&(this._outputs.push(t),t.$inputs.push(this))},h.prototype.disconnect=function(){function t(t,e){return 0>t||this.numberOfOutputs<=t?e+" index ("+t+") exceeds number of outputs ("+this.numberOfOutputs+")":void 0}var e=new o(this,"connect",[{name:"output",type:"optional number",validate:t}]);e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)}),this._outputs.splice(0).forEach(function(t){var e=t.$inputs.indexOf(this);-1!==e&&t.$inputs.splice(e,1)},this)},r.prototype.toJSON=function(t){return i.toJSON(this,function(t,e){var n={};return n.name=i.name(t),(t.constructor.jsonAttrs||[]).forEach(function(r){n[r]=t[r]&&t[r].toJSON?t[r].toJSON(e):t[r]}),t.$context.VERBOSE_JSON&&(n.numberOfInputs=t.numberOfInputs,n.numberOfOutputs=t.numberOfOutputs,n.channelCount=t.channelCount,n.channelCountMode=t.channelCountMode,n.channelInterpretation=t.channelInterpretation),n.inputs=t.$inputs.map(function(t){return t.toJSON(e)}),n},t)},r.prototype.$process=function(t,e){this._tick!==e&&(this._tick=e,this.$inputs.forEach(function(n){n.$process(t,e)}),Object.keys(this).forEach(function(n){this[n]instanceof a&&this[n].$process(t,e)},this),this._process&&this._process(t))},t.exports=s.AudioNode=r},function(t,e){"use strict";function n(t){return{as:function(e){return new Promise(function(n,r){var i=new FileReader;switch(i.onload=function(){n(i.result)},i.onerror=function(){r(new Error("Unable to read from Blob"))},e){case"arraybuffer":i.readAsArrayBuffer(t);break;case"text":i.readAsText(t)}})}}}e.readBlob=n,e["default"]=n,Object.defineProperty(e,"__esModule",{value:!0})},function(module,exports,__webpack_require__){"use strict";function createFunction(code){var fn=eval("(function(get) { return "+code+" })");return fn.displayName="("+code+")",fn.constant=!!/^[\-0-9\.]+$/.test(code),fn}function Expression(t){log("parsing %s",t);var e=parser.parse(t);log("parsed %s => %s",t,e);var n=createFunction(e),r=void 0;return r=n.constant?n:function(t){return n(function(e){return t[e]})},r.constant=n.constant,r}var _interopRequire=function(t){return t&&t.__esModule?t["default"]:t};exports.Expression=Expression;var debug=_interopRequire(__webpack_require__(10)),log=debug("scintillator:expression"),parser=_interopRequire(__webpack_require__(154));exports["default"]=Expression,Object.defineProperty(exports,"__esModule",{value:!0})},function(t,e,n){"use strict";function r(t){return function(e,n){for(var r=Math.abs(e-n),i=0;i<h.length;i++)if(r<t(h[i]))return h[i].value;return n>e?c:l}}function i(t){return t>=4}function o(t){return t===l||i(t)}function s(t){return 1===t?100:2===t?80:3===t?50:0}var a=function(t){return t&&t.__esModule?t["default"]:t};e.judgeTimeWith=r,e.isBad=i,e.breaksCombo=o,e.weight=s;var u=a(n(2)),c=0;e.UNJUDGED=c;var l=-1;e.MISSED=l;var h=[{value:1,timegate:.02,endTimegate:.04},{value:2,timegate:.05,endTimegate:.1},{value:3,timegate:.1,endTimegate:.2},{value:4,timegate:.2,endTimegate:.2}];e.JUDGMENTS=h;var f=r(u.prop("timegate"));e.judgeTime=f;var p=r(u.prop("endTimegate"));e.judgeEndTime=p,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){(function(t,r){function i(t,n){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(n)?r.showHidden=n:n&&e._extend(r,n),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),u(r,t,r.depth)}function o(t,e){var n=i.styles[e];return n?"["+i.colors[n][0]+"m"+t+"["+i.colors[n][1]+"m":t}function s(t){return t}function a(t){var e={};return t.forEach(function(t){e[t]=!0}),e}function u(t,n,r){if(t.customInspect&&n&&C(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return b(i)||(i=u(t,i,r)),i}var o=c(t,n);if(o)return o;var s=Object.keys(n),m=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),E(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(n);if(0===s.length){if(C(n)){var g=n.name?": "+n.name:"";return t.stylize("[Function"+g+"]","special")}if(_(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(S(n))return t.stylize(Date.prototype.toString.call(n),"date");if(E(n))return l(n)}var v="",y=!1,x=["{","}"];if(d(n)&&(y=!0,x=["[","]"]),C(n)){var w=n.name?": "+n.name:"";v=" [Function"+w+"]"}if(_(n)&&(v=" "+RegExp.prototype.toString.call(n)),S(n)&&(v=" "+Date.prototype.toUTCString.call(n)),E(n)&&(v=" "+l(n)),0===s.length&&(!y||0==n.length))return x[0]+v+x[1];if(0>r)return _(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var T;return T=y?h(t,n,r,m,s):s.map(function(e){return f(t,n,r,m,e,y)}),t.seen.pop(),p(T,v,x)}function c(t,e){if(w(e))return t.stylize("undefined","undefined");if(b(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return y(e)?t.stylize(""+e,"number"):m(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,r,i){for(var o=[],s=0,a=e.length;a>s;++s)o.push(M(e,String(s))?f(t,e,n,r,String(s),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||o.push(f(t,e,n,r,i,!0))}),o}function f(t,e,n,r,i,o){var s,a,c;if(c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},c.get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),M(r,i)||(s="["+i+"]"),a||(t.seen.indexOf(c.value)<0?(a=g(n)?u(t,c.value,null):u(t,c.value,n-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),w(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function p(t,e,n){var r=0,i=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function d(t){return Array.isArray(t)}function m(t){return"boolean"==typeof t}function g(t){return null===t}function v(t){return null==t}function y(t){return"number"==typeof t}function b(t){return"string"==typeof t}function x(t){return"symbol"==typeof t}function w(t){return void 0===t}function _(t){return T(t)&&"[object RegExp]"===j(t)}function T(t){return"object"==typeof t&&null!==t}function S(t){return T(t)&&"[object Date]"===j(t)}function E(t){return T(t)&&("[object Error]"===j(t)||t instanceof Error)}function C(t){return"function"==typeof t}function A(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function j(t){return Object.prototype.toString.call(t)}function k(t){return 10>t?"0"+t.toString(10):t.toString(10)}function O(){var t=new Date,e=[k(t.getHours()),k(t.getMinutes()),k(t.getSeconds())].join(":");return[t.getDate(),L[t.getMonth()],e].join(" ")}function M(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var R=/%[sdj%]/g;e.format=function(t){if(!b(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,o=r.length,s=String(t).replace(R,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return t}}),a=r[n];o>n;a=r[++n])s+=g(a)||!T(a)?" "+a:" "+i(a);return s},e.deprecate=function(n,i){function o(){if(!s){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),s=!0}return n.apply(this,arguments)}if(w(t.process))return function(){return e.deprecate(n,i).apply(this,arguments)};if(r.noDeprecation===!0)return n;var s=!1;return o};var P,I={};e.debuglog=function(t){if(w(P)&&(P=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!I[t])if(new RegExp("\\b"+t+"\\b","i").test(P)){var n=r.pid;I[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else I[t]=function(){};return I[t]},e.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=m,e.isNull=g,e.isNullOrUndefined=v,e.isNumber=y,e.isString=b,e.isSymbol=x,e.isUndefined=w,e.isRegExp=_,e.isObject=T,e.isDate=S,e.isError=E,e.isFunction=C,e.isPrimitive=A,e.isBuffer=n(165);var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",O(),e.format.apply(e,arguments))},e.inherits=n(164),e._extend=function(t,e){if(!e||!T(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(e,function(){return this}(),n(12))},function(t,e){"use strict";function n(t,e){if(!e)return function(){};var n=0;return e.report(0,t),function(r){return e.report(++n,t,r)}}function r(t,e){var n=0,r=0;return function(){return t.report(n,++r),Promise.resolve(e.apply(this,arguments)).tap(function(){return t.report(++n,r)})}}function i(t,e){return t.watch(function(){return e.report(t.current,t.total,t.extra)})}e.fixed=n,e.wrapPromise=r,e.bind=i,Object.defineProperty(e,"__esModule",{value:!0})},,function(t,e,n){var r=n(48),i=r.AudioContext||r.webkitAudioContext;i&&(t.exports=new i)},function(t,e,n){(function(t){"use strict";var e=function(t){return t&&t.__esModule?t["default"]:t},r=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)};n(28);var i=e(n(10)),o=e(n(32));t.DEBUG=i,t.Promise=o,Promise.prototype.log=function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return this.tap(function(t){return console.log.apply(console,r(e.concat([t])))})}}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t,e,n){this.instance=t,this.argsInfo=n,this.form=o.methodForm(t,e,n)}var i=n(431),o=n(206),s=n(435);r.prototype.validateArguments=function(t,e){var n=i(t,this.argsInfo.map(function(t){return t.type})),r="";-1!==n&&(r+="the "+s(n)+" argument ",r+=o.shouldBeButGot(this.argsInfo[n].type,t[n]),e.call(this.instance,r)),this.argsInfo.forEach(function(n,r){var i=n.validate&&n.validate.call(this.instance,t[r],this.argsInfo[r].name);i&&e.call(this.instance,i)},this)},r.prototype.assert=function(t,e){t||e.call(this.instance)},t.exports=r},function(t,e,n){(function(t){"use strict";if(t._babelPolyfill)throw new Error("only one instance of babel/polyfill is allowed");t._babelPolyfill=!0,n(26),n(27)}).call(e,function(){return this}())},function(t){!function(e,n,r){"use strict";function i(t){return null!==t&&("object"==typeof t||"function"==typeof t)}function o(t){return"function"==typeof t}function s(t,e,n){t&&!vn(t=n?t:t[ve],Dn)&&Pn(t,Dn,e)}function a(t){return on.call(t).slice(8,-1)}function u(t){var e,n;return t==r?t===r?"Undefined":"Null":"string"==typeof(n=(e=je(t))[Dn])?n:a(e)}function c(){for(var t=O(this),e=arguments.length,n=ke(e),r=0,i=Wn._,o=!1;e>r;)(n[r]=arguments[r++])===i&&(o=!0);return function(){var r,s=this,a=arguments.length,u=0,c=0;if(!o&&!a)return h(t,n,s);if(r=n.slice(),o)for(;e>u;u++)r[u]===i&&(r[u]=arguments[c++]);for(;a>c;)r.push(arguments[c++]);return h(t,r,s)}}function l(t,e,n){if(O(t),~n&&e===r)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}function h(t,e,n){var i=n===r;switch(0|e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3]);case 5:return i?t(e[0],e[1],e[2],e[3],e[4]):t.call(n,e[0],e[1],e[2],e[3],e[4])}return t.apply(n,e)}function f(t){return yn(k(t))}function p(t){return t}function d(){return this}function m(t,e){return vn(t,e)?t[e]:void 0}function g(t){return M(t),mn?dn(t).concat(mn(t)):dn(t)}function v(t,e){for(var n,r=f(t),i=pn(r),o=i.length,s=0;o>s;)if(r[n=i[s++]]===e)return n}function y(t){return Oe(t).split(",")}function b(t){var e=1==t,n=2==t,i=3==t,o=4==t,s=6==t,a=5==t||s;return function(u){for(var c,h,f=je(k(this)),p=arguments[1],d=yn(f),m=l(u,p,3),g=S(d.length),v=0,y=e?ke(g):n?[]:r;g>v;v++)if((a||v in d)&&(c=d[v],h=m(c,v,f),t))if(e)y[v]=h;else if(h)switch(t){case 3:return!0;case 5:return c;case 6:return v;case 2:y.push(c)}else if(o)return!1;return s?-1:i||o?o:y}}function x(t){return function(e){var n=f(this),r=S(n.length),i=E(arguments[1],r);if(t&&e!=e){for(;r>i;i++)if(_(n[i]))return t||i}else for(;r>i;i++)if((t||i in n)&&n[i]===e)return t||i;return!t&&-1}}function w(t,e){return"function"==typeof t?t:e}function _(t){return t!=t}function T(t){return isNaN(t)?0:On(t)}function S(t){return t>0?jn(T(t),_n):0}function E(t,e){var t=T(t);return 0>t?An(t+e,0):jn(t,e)}function C(t,e,n){var r=i(e)?function(t){return e[t]}:e;return function(e){return Oe(n?e:this).replace(t,r)}}function A(t){return function(e){var n,i,o=Oe(k(this)),s=T(e),a=o.length;return 0>s||s>=a?t?"":r:(n=o.charCodeAt(s),55296>n||n>56319||s+1===a||(i=o.charCodeAt(s+1))<56320||i>57343?t?o.charAt(s):n:t?o.slice(s,s+2):(n-55296<<10)+(i-56320)+65536)}}function j(t,e,n){if(!t)throw Ne(n?e+n:e)}function k(t){if(t==r)throw Ne("Function called on null or undefined");return t}function O(t){return j(o(t),t," is not a function!"),t}function M(t){return j(i(t),t," is not an object!"),t}function R(t,e,n){j(t instanceof e,n,": use the 'new' operator!")}function P(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function I(t,e,n){return t[e]=n,t}function L(t){return Mn?function(e,n,r){return hn(e,n,P(t,r))}:I}function F(t){return pe+"("+t+")_"+(++Rn+kn())[be](36)}function B(t,e){return Be&&Be[t]||(e?Be:Ln)(pe+nn+t)}function D(t,e){for(var n in e)Pn(t,n,e[n]);return t}function N(t){!Mn||!n&&rn(t)||hn(t,Nn,{configurable:!0,get:d})}function q(t,r,i){var s,a,u,c,h=t&Hn,f=h?e:t&zn?e[r]:(e[r]||Ze)[ve],p=h?Un:Un[r]||(Un[r]={});h&&(i=r);for(s in i)a=!(t&Vn)&&f&&s in f&&(!o(f[s])||rn(f[s])),u=(a?f:i)[s],n||!h||o(f[s])?t&Xn&&a?c=l(u,e):t&$n&&!n&&f[s]==u?(c=function(t){return this instanceof u?new u(t):u(t)},c[ve]=u[ve]):c=t&Yn&&o(u)?l(sn,u):u:c=i[s],n&&f&&!a&&(h?f[s]=u:delete f[s]&&Pn(f,s,u)),p[s]!=u&&Pn(p,s,c)}function U(t,e){Pn(t,te,e),Se in Qe&&Pn(t,Se,e)}function W(t,e,n,r){t[ve]=un(r||tr,{next:P(1,n)}),s(t,e+" Iterator")}function G(t,e,r,i){var o=t[ve],a=m(o,te)||m(o,Se)||i&&m(o,i)||r;if(n&&(U(o,a),a!==r)){var u=cn(a.call(new t));s(u,e+" Iterator",!0),vn(o,Se)&&U(u,d)}return Zn[e]=a,Zn[e+" Iterator"]=d,a}function V(t,e,n,r,i,o){function s(t){return function(){return new n(this,t)}}W(n,e,r);var a=s(Kn+Qn),u=s(Qn);i==Qn?u=G(t,e,u,"values"):a=G(t,e,a,"entries"),i&&q(Yn+Vn*er,e,{entries:a,keys:o?u:s(Kn),values:u})}function H(t,e){return{value:e,done:!!t}}function z(t){var n=je(t),r=e[pe],i=(r&&r[Te]||Se)in n;return i||te in n||vn(Zn,u(n))}function Y(t){var n=e[pe],r=t[n&&n[Te]||Se],i=r||t[te]||Zn[u(t)];
return M(i.call(t))}function X(t,e,n){return n?h(t,e):t(e)}function $(t){var e=!0,n={next:function(){throw 1},"return":function(){e=!1}};n[te]=d;try{t(n)}catch(r){}return e}function J(t){var e=t["return"];e!==r&&e.call(t)}function K(t,e){try{t(e)}catch(n){throw J(e),n}}function Q(t,e,n,r){K(function(t){for(var i,o=l(n,r,e?2:1);!(i=t.next()).done;)if(X(o,i.value,e)===!1)return J(t)},Y(t))}var Z,te,ee,ne="Object",re="Function",ie="Array",oe="String",se="Number",ae="RegExp",ue="Date",ce="Map",le="Set",he="WeakMap",fe="WeakSet",pe="Symbol",de="Promise",me="Math",ge="Arguments",ve="prototype",ye="constructor",be="toString",xe=be+"Tag",we="hasOwnProperty",_e="forEach",Te="iterator",Se="@@"+Te,Ee="process",Ce="createElement",Ae=e[re],je=e[ne],ke=e[ie],Oe=e[oe],Me=e[se],Re=e[ae],Pe=(e[ue],e[ce]),Ie=e[le],Le=e[he],Fe=e[fe],Be=e[pe],De=e[me],Ne=e.TypeError,qe=e.RangeError,Ue=e.setTimeout,We=e.setImmediate,Ge=e.clearImmediate,Ve=e.parseInt,He=e.isFinite,ze=e[Ee],Ye=ze&&ze.nextTick,Xe=e.document,$e=Xe&&Xe.documentElement,Je=(e.navigator,e.define),Ke=e.console||{},Qe=ke[ve],Ze=je[ve],tn=Ae[ve],en=1/0,nn=".",rn=l(/./.test,/\[native code\]\s*\}\s*$/,1),on=Ze[be],sn=tn.call,an=tn.apply,un=je.create,cn=je.getPrototypeOf,ln=je.setPrototypeOf,hn=je.defineProperty,fn=(je.defineProperties,je.getOwnPropertyDescriptor),pn=je.keys,dn=je.getOwnPropertyNames,mn=je.getOwnPropertySymbols,gn=je.isFrozen,vn=l(sn,Ze[we],2),yn=je,bn=je.assign||function(t){for(var e=je(k(t)),n=arguments.length,r=1;n>r;)for(var i,o=yn(arguments[r++]),s=pn(o),a=s.length,u=0;a>u;)e[i=s[u++]]=o[i];return e},xn=Qe.push,wn=(Qe.unshift,Qe.slice,Qe.splice,Qe.indexOf,Qe[_e]),_n=9007199254740991,Tn=De.pow,Sn=De.abs,En=De.ceil,Cn=De.floor,An=De.max,jn=De.min,kn=De.random,On=De.trunc||function(t){return(t>0?Cn:En)(t)},Mn=!!function(){try{return 2==hn({},"a",{get:function(){return 2}}).a}catch(t){}}(),Rn=0,Pn=L(1),In=Be?I:Pn,Ln=Be||F,Fn=B("unscopables"),Bn=Qe[Fn]||{},Dn=B(xe),Nn=B("species"),qn=a(ze)==Ee,Un={},Wn=n?e:Un,Gn=e.core,Vn=1,Hn=2,zn=4,Yn=8,Xn=16,$n=32;"undefined"!=typeof t&&t.exports?t.exports=Un:o(Je)&&Je.amd?Je(function(){return Un}):ee=!0,(ee||n)&&(Un.noConflict=function(){return e.core=Gn,Un},e.core=Un),te=B(Te);var Jn=Ln("iter"),Kn=1,Qn=2,Zn={},tr={},er="keys"in Qe&&!("next"in[].keys());U(tr,d),!function(t,n,r,i){rn(Be)||(Be=function(e){j(!(this instanceof Be),pe+" is not a "+ye);var n=F(e),o=In(un(Be[ve]),t,n);return r[n]=o,Mn&&i&&hn(Ze,n,{configurable:!0,set:function(t){Pn(this,n,t)}}),o},Pn(Be[ve],be,function(){return this[t]})),q(Hn+$n,{Symbol:Be});var o={"for":function(t){return vn(n,t+="")?n[t]:n[t]=Be(t)},iterator:te||B(Te),keyFor:c.call(v,n),species:Nn,toStringTag:Dn=B(xe,!0),unscopables:Fn,pure:Ln,set:In,useSetter:function(){i=!0},useSimple:function(){i=!1}};wn.call(y("hasInstance,isConcatSpreadable,match,replace,search,split,toPrimitive"),function(t){o[t]=B(t)}),q(zn,pe,o),s(Be,pe),q(zn+Vn*!rn(Be),ne,{getOwnPropertyNames:function(t){for(var e,n=dn(f(t)),i=[],o=0;n.length>o;)vn(r,e=n[o++])||i.push(e);return i},getOwnPropertySymbols:function(t){for(var e,n=dn(f(t)),i=[],o=0;n.length>o;)vn(r,e=n[o++])&&i.push(r[e]);return i}}),s(De,me,!0),s(e.JSON,"JSON",!0)}(Ln("tag"),{},{},!0),!function(){var t={assign:bn,is:function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}};"__proto__"in Ze&&function(e,n){try{n=l(sn,fn(Ze,"__proto__").set,2),n({},Qe)}catch(r){e=!0}t.setPrototypeOf=ln=ln||function(t,r){return M(t),j(null===r||i(r),r,": can't set as prototype!"),e?t.__proto__=r:n(t,r),t}}(),q(zn,ne,t)}(),!function(t){t[Dn]=nn,a(t)!=nn&&Pn(Ze,be,function(){return"[object "+u(this)+"]"})}({}),!function(){function t(t,e){var n=je[t],r=Un[ne][t],o=0,s={};if(!r||rn(r)){s[t]=1==e?function(t){return i(t)?n(t):t}:2==e?function(t){return i(t)?n(t):!0}:3==e?function(t){return i(t)?n(t):!1}:4==e?function(t,e){return n(f(t),e)}:function(t){return n(f(t))};try{n(nn)}catch(a){o=1}q(zn+Vn*o,ne,s)}}t("freeze",1),t("seal",1),t("preventExtensions",1),t("isFrozen",2),t("isSealed",2),t("isExtensible",3),t("getOwnPropertyDescriptor",4),t("getPrototypeOf"),t("keys"),t("getOwnPropertyNames")}(),!function(t){t in tn||Mn&&hn(tn,t,{configurable:!0,get:function(){var e=Oe(this).match(/^\s*function ([^ (]*)/),n=e?e[1]:"";return vn(this,t)||hn(this,t,P(5,n)),n},set:function(e){vn(this,t)||hn(this,t,P(0,e))}})}("name"),Me("0o1")&&Me("0b1")||function(t,n){function r(t){if(i(t)&&(t=s(t)),"string"==typeof t&&t.length>2&&48==t.charCodeAt(0)){var e=!1;switch(t.charCodeAt(1)){case 66:case 98:e=!0;case 79:case 111:return Ve(t.slice(2),e?2:8)}}return+t}function s(t){var e,n;if(o(e=t.valueOf)&&!i(n=e.call(t)))return n;if(o(e=t[be])&&!i(n=e.call(t)))return n;throw Ne("Can't convert object to number")}Me=function a(e){return this instanceof a?new t(r(e)):r(e)},wn.call(Mn?dn(t):y("MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY"),function(e){e in Me||hn(Me,e,fn(t,e))}),Me[ve]=n,n[ye]=Me,Pn(e,se,Me)}(Me,Me[ve]),!function(t){q(zn,se,{EPSILON:Tn(2,-52),isFinite:function(t){return"number"==typeof t&&He(t)},isInteger:t,isNaN:_,isSafeInteger:function(e){return t(e)&&Sn(e)<=_n},MAX_SAFE_INTEGER:_n,MIN_SAFE_INTEGER:-_n,parseFloat:parseFloat,parseInt:Ve})}(Me.isInteger||function(t){return!i(t)&&He(t)&&Cn(t)===t}),!function(){function t(e){return He(e=+e)&&0!=e?0>e?-t(-e):i(e+o(e*e+1)):e}function e(t){return 0==(t=+t)?t:t>-1e-6&&1e-6>t?t+t*t/2:r(t)-1}var n=De.E,r=De.exp,i=De.log,o=De.sqrt,s=De.sign||function(t){return 0==(t=+t)||t!=t?t:0>t?-1:1};q(zn,me,{acosh:function(t){return(t=+t)<1?0/0:He(t)?i(t/n+o(t+1)*o(t-1)/n)+1:t},asinh:t,atanh:function(t){return 0==(t=+t)?t:i((1+t)/(1-t))/2},cbrt:function(t){return s(t=+t)*Tn(Sn(t),1/3)},clz32:function(t){return(t>>>=0)?32-t[be](2).length:32},cosh:function(t){return(r(t=+t)+r(-t))/2},expm1:e,fround:function(t){return new Float32Array([t])[0]},hypot:function(){for(var t,e=0,n=arguments.length,r=n,i=ke(n),s=-en;n--;){if(t=i[n]=+arguments[n],t==en||t==-en)return en;t>s&&(s=t)}for(s=t||1;r--;)e+=Tn(i[r]/s,2);return s*o(e)},imul:function(t,e){var n=65535,r=+t,i=+e,o=n&r,s=n&i;return 0|o*s+((n&r>>>16)*s+o*(n&i>>>16)<<16>>>0)},log1p:function(t){return(t=+t)>-1e-8&&1e-8>t?t-t*t/2:i(1+t)},log10:function(t){return i(t)/De.LN10},log2:function(t){return i(t)/De.LN2},sign:s,sinh:function(t){return Sn(t=+t)<1?(e(t)-e(-t))/2:(r(t-1)-r(-t-1))*(n/2)},tanh:function(t){var n=e(t=+t),i=e(-t);return n==en?1:i==en?-1:(n-i)/(r(t)+r(-t))},trunc:On})}(),!function(t){function e(t){if(a(t)==ae)throw Ne()}q(zn,oe,{fromCodePoint:function(){for(var e,n=[],r=arguments.length,i=0;r>i;){if(e=+arguments[i++],E(e,1114111)!==e)throw qe(e+" is not a valid code point");n.push(65536>e?t(e):t(((e-=65536)>>10)+55296,e%1024+56320))}return n.join("")},raw:function(t){for(var e=f(t.raw),n=S(e.length),r=arguments.length,i=[],o=0;n>o;)i.push(Oe(e[o++])),r>o&&i.push(Oe(arguments[o]));return i.join("")}}),q(Yn,oe,{codePointAt:A(!1),endsWith:function(t){e(t);var n=Oe(k(this)),i=arguments[1],o=S(n.length),s=i===r?o:jn(S(i),o);return t+="",n.slice(s-t.length,s)===t},includes:function(t){return e(t),!!~Oe(k(this)).indexOf(t,arguments[1])},repeat:function(t){var e=Oe(k(this)),n="",r=T(t);if(0>r||r==en)throw qe("Count can't be negative");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n},startsWith:function(t){e(t);var n=Oe(k(this)),r=S(jn(arguments[1],n.length));return t+="",n.slice(r,r+t.length)===t}})}(Oe.fromCharCode),!function(){q(zn+Vn*$(ke.from),ie,{from:function(t){var e,n,i,o=je(k(t)),s=arguments[1],a=s!==r,u=a?l(s,arguments[2],2):r,c=0;if(z(o))n=new(w(this,ke)),K(function(t){for(;!(i=t.next()).done;c++)n[c]=a?u(i.value,c):i.value},Y(o));else for(n=new(w(this,ke))(e=S(o.length));e>c;c++)n[c]=a?u(o[c],c):o[c];return n.length=c,n}}),q(zn,ie,{of:function(){for(var t=0,e=arguments.length,n=new(w(this,ke))(e);e>t;)n[t]=arguments[t++];return n.length=e,n}}),N(ke)}(),!function(){q(Yn,ie,{copyWithin:function(t,e){var n=je(k(this)),i=S(n.length),o=E(t,i),s=E(e,i),a=arguments[2],u=a===r?i:E(a,i),c=jn(u-s,i-o),l=1;for(o>s&&s+c>o&&(l=-1,s=s+c-1,o=o+c-1);c-->0;)s in n?n[o]=n[s]:delete n[o],o+=l,s+=l;return n},fill:function(t){for(var e=je(k(this)),n=S(e.length),i=E(arguments[1],n),o=arguments[2],s=o===r?n:E(o,n);s>i;)e[i++]=t;return e},find:b(5),findIndex:b(6)}),n&&(wn.call(y("find,findIndex,fill,copyWithin,entries,keys,values"),function(t){Bn[t]=!0}),Fn in Qe||Pn(Qe,Fn,Bn))}(),!function(t){V(ke,ie,function(t,e){In(this,Jn,{o:f(t),i:0,k:e})},function(){var t=this[Jn],e=t.o,n=t.k,i=t.i++;return!e||i>=e.length?(t.o=r,H(1)):n==Kn?H(0,i):n==Qn?H(0,e[i]):H(0,[i,e[i]])},Qn),Zn[ge]=Zn[ie],V(Oe,oe,function(t){In(this,Jn,{o:Oe(t),i:0})},function(){var e,n=this[Jn],r=n.o,i=n.i;return i>=r.length?H(1):(e=t.call(r,i),n.i+=e.length,H(0,e))})}(A(!0)),Mn&&!function(t,n){(function(){try{return"/a/i"==Re(/a/g,"i")}catch(t){}})()||(Re=function(t,e){return new n(a(t)==ae&&e!==r?t.source:t,e)},wn.call(dn(n),function(t){t in Re||hn(Re,t,{configurable:!0,get:function(){return n[t]},set:function(e){n[t]=e}})}),t[ye]=Re,Re[ve]=t,Pn(e,ae,Re)),"g"!=/./g.flags&&hn(t,"flags",{configurable:!0,get:C(/^.*\/(\w*)$/,"$1")}),N(Re)}(Re[ve],Re),o(We)&&o(Ge)||function(t){function n(t){if(vn(m,t)){var e=m[t];delete m[t],e()}}function r(t){n(t.data)}var i,s,a,u=e.postMessage,f=e.addEventListener,p=e.MessageChannel,d=0,m={};We=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++d]=function(){h(o(t)?t:Ae(t),e)},i(d),d},Ge=function(t){delete m[t]},qn?i=function(t){Ye(c.call(n,t))}:f&&o(u)&&!e.importScripts?(i=function(t){u(t,"*")},f("message",r,!1)):o(p)?(s=new p,a=s.port2,s.port1.onmessage=r,i=l(a.postMessage,a,1)):i=Xe&&t in Xe[Ce]("script")?function(e){$e.appendChild(Xe[Ce]("script"))[t]=function(){$e.removeChild(this),n(e)}}:function(t){Ue(n,0,t)}}("onreadystatechange"),q(Hn+Xn,{setImmediate:We,clearImmediate:Ge}),!function(t,e){o(t)&&o(t.resolve)&&t.resolve(e=new t(function(){}))==e||function(e,n){function s(t){var e;return i(t)&&(e=t.then),o(e)?e:!1}function a(t){var e,r=t[n],i=r.c,o=0;if(r.h)return!0;for(;i.length>o;)if(e=i[o++],e.fail||a(e.P))return!0}function u(t,n){var r=t.c;(n||r.length)&&e(function(){var e=t.p,i=t.v,u=1==t.s,c=0;if(n&&!a(e))Ue(function(){a(e)||(qn?!ze.emit("unhandledRejection",i,e):o(Ke.error)&&Ke.error("Unhandled promise rejection",i))},1e3);else for(;r.length>c;)!function(e){var n,r,o=u?e.ok:e.fail;try{o?(u||(t.h=!0),n=o===!0?i:o(i),n===e.P?e.rej(Ne(de+"-chain cycle")):(r=s(n))?r.call(n,e.res,e.rej):e.res(n)):e.rej(i)}catch(a){e.rej(a)}}(r[c++]);r.length=0})}function c(t){var e,n,r=this;if(!r.d){r.d=!0,r=r.r||r;try{(e=s(t))?(n={r:r,d:!1},e.call(t,l(c,n,1),l(h,n,1))):(r.v=t,r.s=1,u(r))}catch(i){h.call(n||{r:r,d:!1},i)}}}function h(t){var e=this;e.d||(e.d=!0,e=e.r||e,e.v=t,e.s=2,u(e,!0))}function f(t){var e=M(t)[Nn];return e!=r?e:t}t=function(e){O(e),R(this,t,de);var i={p:this,c:[],s:0,d:!1,v:r,h:!1};Pn(this,n,i);try{e(l(c,i,1),l(h,i,1))}catch(o){h.call(i,o)}},D(t[ve],{then:function(e,i){var s=M(M(this)[ye])[Nn],a={ok:o(e)?e:!0,fail:o(i)?i:!1},c=a.P=new(s!=r?s:t)(function(t,e){a.res=O(t),a.rej=O(e)}),l=this[n];return l.c.push(a),l.s&&u(l),c},"catch":function(t){return this.then(r,t)}}),D(t,{all:function(t){var e=f(this),n=[];return new e(function(r,i){Q(t,!1,xn,n);var o=n.length,s=ke(o);o?wn.call(n,function(t,n){e.resolve(t).then(function(t){s[n]=t,--o||r(s)},i)}):r(s)})},race:function(t){var e=f(this);return new e(function(n,r){Q(t,!1,function(t){e.resolve(t).then(n,r)})})},reject:function(t){return new(f(this))(function(e,n){n(t)})},resolve:function(t){return i(t)&&n in t&&cn(t)===this[ve]?t:new(f(this))(function(e){e(t)})}})}(Ye||We,Ln("record")),s(t,de),N(t),q(Hn+Vn*!rn(t),{Promise:t})}(e[de]),!function(){function t(t,e,i,o,a,u){function c(t,e){return e!=r&&Q(e,a,t[p],t),t}function l(t,e){var r=d[t];n&&(d[t]=function(t,n){var i=r.call(this,0===t?0:t,n);return e?this:i})}var p=a?"set":"add",d=t&&t[ve],y={};if(rn(t)&&(u||!er&&vn(d,_e)&&vn(d,"entries"))){var x,w=t,_=new t,T=_[p](u?{}:-0,1);$(function(e){new t(e)})&&(t=function(n){return R(this,t,e),c(new w,n)},t[ve]=d,n&&(d[ye]=t)),u||_[_e](function(t,e){x=1/e===-en}),x&&(l("delete"),l("has"),a&&l("get")),(x||T!==_)&&l(p,!0)}else t=u?function(n){R(this,t,e),In(this,h,b++),c(this,n)}:function(n){var i=this;R(i,t,e),In(i,f,un(null)),In(i,v,0),In(i,m,r),In(i,g,r),c(i,n)},D(D(t[ve],i),o),u||!Mn||hn(t[ve],"size",{get:function(){return k(this[v])}});return s(t,e),N(t),y[e]=t,q(Hn+$n+Vn*!rn(t),y),u||V(t,e,function(t,e){In(this,Jn,{o:t,k:e})},function(){for(var t=this[Jn],e=t.k,n=t.l;n&&n.r;)n=n.p;return t.o&&(t.l=n=n?n.n:t.o[g])?e==Kn?H(0,n.k):e==Qn?H(0,n.v):H(0,[n.k,n.v]):(t.o=r,H(1))},a?Kn+Qn:Qn,!a),t}function e(t,e){if(!i(t))return("string"==typeof t?"S":"P")+t;if(gn(t))return"F";if(!vn(t,h)){if(!e)return"E";Pn(t,h,++b)}return"O"+t[h]}function o(t,n){var r,i=e(n);if("F"!=i)return t[f][i];for(r=t[g];r;r=r.n)if(r.k==n)return r}function a(t,n,i){var s,a,u=o(t,n);return u?u.v=i:(t[m]=u={i:a=e(n,!0),k:n,v:i,p:s=t[m],n:r,r:!1},t[g]||(t[g]=u),s&&(s.n=u),t[v]++,"F"!=a&&(t[f][a]=u)),t}function u(t,e,n){return gn(M(e))?c(t).set(e,n):(vn(e,p)||Pn(e,p,{}),e[p][t[h]]=n),t}function c(t){return t[d]||Pn(t,d,new Pe)[d]}var h=Ln("uid"),f=Ln("O1"),p=Ln("weak"),d=Ln("leak"),m=Ln("last"),g=Ln("first"),v=Mn?Ln("size"):"size",b=0,x={},w={clear:function(){for(var t=this,e=t[f],n=t[g];n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=r),delete e[n.i];t[g]=t[m]=r,t[v]=0},"delete":function(t){var e=this,n=o(e,t);if(n){var r=n.n,i=n.p;delete e[f][n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),e[g]==n&&(e[g]=r),e[m]==n&&(e[m]=i),e[v]--}return!!n},forEach:function(t){for(var e,n=l(t,arguments[1],3);e=e?e.n:this[g];)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!o(this,t)}};Pe=t(Pe,ce,{get:function(t){var e=o(this,t);return e&&e.v},set:function(t,e){return a(this,0===t?0:t,e)}},w,!0),Ie=t(Ie,le,{add:function(t){return a(this,t=0===t?0:t,t)}},w);var _={"delete":function(t){return i(t)?gn(t)?c(this)["delete"](t):vn(t,p)&&vn(t[p],this[h])&&delete t[p][this[h]]:!1},has:function(t){return i(t)?gn(t)?c(this).has(t):vn(t,p)&&vn(t[p],this[h]):!1}};Le=t(Le,he,{get:function(t){if(i(t)){if(gn(t))return c(this).get(t);if(vn(t,p))return t[p][this[h]]}},set:function(t,e){return u(this,t,e)}},_,!0,!0),n&&7!=(new Le).set(je.freeze(x),7).get(x)&&wn.call(y("delete,has,get,set"),function(t){var e=Le[ve][t];Le[ve][t]=function(n,r){if(i(n)&&gn(n)){var o=c(this)[t](n,r);return"set"==t?this:o}return e.call(this,n,r)}}),Fe=t(Fe,fe,{add:function(t){return u(this,t,!0)}},_,!1,!0)}(),!function(){function t(t){var e,n=[];for(e in t)n.push(e);In(this,Jn,{o:t,a:n,i:0})}function e(t){return function(e){M(e);try{return t.apply(r,arguments),!0}catch(n){return!1}}}function n(t,e){var o,s=arguments.length<3?t:arguments[2],a=fn(M(t),e);return a?vn(a,"value")?a.value:a.get===r?r:a.get.call(s):i(o=cn(t))?n(o,e,s):r}function o(t,e,n){var s,a,u=arguments.length<4?t:arguments[3],c=fn(M(t),e);if(!c){if(i(a=cn(t)))return o(a,e,n,u);c=P(0)}return vn(c,"value")?c.writable!==!1&&i(u)?(s=fn(u,e)||P(0),s.value=n,hn(u,e,s),!0):!1:c.set===r?!1:(c.set.call(u,n),!0)}W(t,ne,function(){var t,e=this[Jn],n=e.a;do if(e.i>=n.length)return H(1);while(!((t=n[e.i++])in e.o));return H(0,t)});var s=je.isExtensible||p,a={apply:l(sn,an,3),construct:function(t,e){var n=O(arguments.length<3?t:arguments[2])[ve],r=un(i(n)?n:Ze),o=an.call(t,r,e);return i(o)?o:r},defineProperty:e(hn),deleteProperty:function(t,e){var n=fn(M(t),e);return n&&!n.configurable?!1:delete t[e]},enumerate:function(e){return new t(M(e))},get:n,getOwnPropertyDescriptor:function(t,e){return fn(M(t),e)},getPrototypeOf:function(t){return cn(M(t))},has:function(t,e){return e in t},isExtensible:function(t){return!!s(M(t))},ownKeys:g,preventExtensions:e(je.preventExtensions||p),set:o};ln&&(a.setPrototypeOf=function(t,e){return ln(M(t),e),!0}),q(Hn,{Reflect:{}}),q(zn,"Reflect",a)}(),!function(){function t(t){return function(e){var n,r=f(e),i=pn(e),o=i.length,s=0,a=ke(o);if(t)for(;o>s;)a[s]=[n=i[s++],r[n]];else for(;o>s;)a[s]=r[i[s++]];return a}}q(Yn,ie,{includes:x(!0)}),q(Yn,oe,{at:A(!0)}),q(zn,ne,{getOwnPropertyDescriptors:function(t){var e=f(t),n={};return wn.call(g(e),function(t){hn(n,t,P(0,fn(e,t)))}),n},values:t(!1),entries:t(!0)}),q(zn,ae,{escape:C(/([\\\-[\]{}()*+?.,^$|])/g,"\\$1",!0)})}(),!function(t){function e(t){if(t){var e=t[ve];Pn(e,Z,e.get),Pn(e,n,e.set),Pn(e,r,e["delete"])}}Z=B(t+"Get",!0);var n=B(t+le,!0),r=B(t+"Delete",!0);q(zn,pe,{referenceGet:Z,referenceSet:n,referenceDelete:r}),Pn(tn,Z,d),e(Pe),e(Le)}("reference"),!function(t){function e(e,n){wn.call(y(e),function(e){e in Qe&&(t[e]=l(sn,Qe[e],n))})}e("pop,reverse,shift,keys,values,entries",1),e("indexOf,every,some,forEach,map,filter,find,findIndex,includes",3),e("join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill,turn"),q(zn,ie,t)}({}),!function(t){!n||!t||te in t[ve]||Pn(t[ve],te,Zn[ie]),Zn.NodeList=Zn[ie]}(e.NodeList)}("undefined"!=typeof self&&self.Math===Math?self:Function("return this")(),!0)},function(t,e){(function(e){!function(e){"use strict";function n(t,e,n,r){return new s(t,e,n||null,r||[])}function r(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}function i(){}function o(){}function s(t,e,n,i){function o(e,i){if(u===b)throw new Error("Generator is already running");if(u===x)return h();for(;;){var o=a.delegate;if(o){var s=r(o.iterator[e],o.iterator,i);if("throw"===s.type){a.delegate=null,e="throw",i=s.arg;continue}e="next",i=f;var c=s.arg;if(!c.done)return u=y,c;a[o.resultName]=c.value,a.next=o.nextLoc,a.delegate=null}if("next"===e){if(u===v&&"undefined"!=typeof i)throw new TypeError("attempt to send "+JSON.stringify(i)+" to newborn generator");u===y?a.sent=i:delete a.sent}else if("throw"===e){if(u===v)throw u=x,i;a.dispatchException(i)&&(e="next",i=f)}else"return"===e&&a.abrupt("return",i);u=b;var s=r(t,n,a);if("normal"===s.type){u=a.done?x:y;var c={value:s.arg,done:a.done};if(s.arg!==w)return c;a.delegate&&"next"===e&&(i=f)}else"throw"===s.type&&(u=x,"next"===e?a.dispatchException(s.arg):i=s.arg)}}var s=e?Object.create(e.prototype):this,a=new c(i),u=v;return s.next=o.bind(s,"next"),s["throw"]=o.bind(s,"throw"),s["return"]=o.bind(s,"return"),s}function a(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function u(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function c(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(a,this),this.reset()}function l(t){if(t){var e=t[d];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function i(){for(;++n<t.length;)if(p.call(t,n))return i.value=t[n],i.done=!1,i;return i.value=f,i.done=!0,i};return r.next=r}}return{next:h}}function h(){return{value:f,done:!0}}var f,p=Object.prototype.hasOwnProperty,d="function"==typeof Symbol&&Symbol.iterator||"@@iterator",m="object"==typeof t,g=e.regeneratorRuntime;if(g)return void(m&&(t.exports=g));g=e.regeneratorRuntime=m?t.exports:{},g.wrap=n;var v="suspendedStart",y="suspendedYield",b="executing",x="completed",w={},_=o.prototype=s.prototype;i.prototype=_.constructor=o,o.constructor=i,i.displayName="GeneratorFunction",g.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return e?e===i||"GeneratorFunction"===(e.displayName||e.name):!1},g.mark=function(t){return t.__proto__=o,t.prototype=Object.create(_),t},g.async=function(t,e,i,o){return new Promise(function(s,a){function u(t){var e=r(this,null,t);if("throw"===e.type)return void a(e.arg);var n=e.arg;n.done?s(n.value):Promise.resolve(n.value).then(l,h)}var c=n(t,e,i,o),l=u.bind(c.next),h=u.bind(c["throw"]);l()})},_[d]=function(){return this},_.toString=function(){return"[object Generator]"},g.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},g.values=l,c.prototype={constructor:c,reset:function(){this.prev=0,this.next=0,this.sent=f,this.done=!1,this.delegate=null,this.tryEntries.forEach(u);for(var t,e=0;p.call(this,t="t"+e)||20>e;++e)this[t]=null},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return o.type="throw",o.arg=t,n.next=e,!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var s=p.call(i,"catchLoc"),a=p.call(i,"finallyLoc");if(s&&a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&p.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?this.next=i.finallyLoc:this.complete(o),w},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=t.arg,this.next="end"):"normal"===t.type&&e&&(this.next=e),w},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc)}},"catch":function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;u(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:l(t),resultName:e,nextLoc:n},w}}}("object"==typeof e?e:"object"==typeof window?window:this)}).call(e,function(){return this}())},function(t,e,n){t.exports=n(25)},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(63)),o=function(t){return function(e){return null!==e.progress?t(e):""}},s=o(function(t){return i(t.current)+" / "+i(t.total)});e.BYTES_FORMATTER=s;var a=o(function(t){return t.extra+""});e.EXTRA_FORMATTER=a,Object.defineProperty(e,"__esModule",{value:!0})},,function(t,e,n){"use strict";function r(t){if("normal"===t)return u.blendModes.NORMAL;if("screen"===t)return u.blendModes.SCREEN;throw new Error("Invalid blend mode: "+t)}var i=function(t){return t&&t.__esModule?t["default"]:t},o=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},u=i(n(3)),c=i(n(7)),l=i(n(8)),h=i(n(17)),f=i(n(78)),p=[{name:"x","default":"0",apply:function(t,e){return t.x=e}},{name:"y","default":"0",apply:function(t,e){return t.y=e}},{name:"scale-x","default":"1",apply:function(t,e){return t.scale.x=e}},{name:"scale-y","default":"1",apply:function(t,e){return t.scale.y=e}},{name:"alpha","default":"1",apply:function(t,e){return t.alpha=e}},{name:"width",apply:function(t,e){return t.width=e}},{name:"height",apply:function(t,e){return t.height=e}},{name:"visible",apply:function(t,e){return t.visible=e}}],d=e.DisplayObject=function(t){function e(){a(this,e),null!=t&&t.apply(this,arguments)}return s(e,t),o(e,{compile:{value:function(t,e){this._animation=f.compile(t,e),this._bindings=[];var n=!0,i=!1,o=void 0;try{for(var s,a=p[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var u=s.value,c=e.attr(u.name)||u["default"];if(c){var l=new h(c),d=this._animation.prop(u.name,l);this._bindings.push({getter:d,apply:u.apply})}}}catch(m){i=!0,o=m}finally{try{!n&&a["return"]&&a["return"]()}finally{if(i)throw o}}this.blendMode=r(e.attr("blend")||"normal"),this.ref=e.attr("ref")||null}},instantiate:{value:function(t,e){var n=this,r=e.object,i=[],o=null;r.blendMode=this.blendMode;for(var s=0;s<this._bindings.length;s++){var a=this._bindings[s];i.push([a.getter,a.apply.bind(null,r)])}return this.ref&&(t.ref(this.ref,r),o=function(){return t.unref(n.ref,r)}),new l({bindings:i,onDestroy:o})}}}),e}(c);e["default"]=d,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){(function(e,n){/* @preserve
	 * The MIT License (MIT)
	 * 
	 * Copyright (c) 2014 Petka Antonov
	 * 
	 * Permission is hereby granted, free of charge, to any person obtaining a copy
	 * of this software and associated documentation files (the "Software"), to deal
	 * in the Software without restriction, including without limitation the rights
	 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	 * copies of the Software, and to permit persons to whom the Software is
	 * furnished to do so, subject to the following conditions:</p>
	 * 
	 * The above copyright notice and this permission notice shall be included in
	 * all copies or substantial portions of the Software.
	 * 
	 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
	 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
	 * THE SOFTWARE.
	 * 
	 */
!function(e){t.exports=e()}(function(){var t,r,i;return function o(t,e,n){function r(s,a){if(!e[s]){if(!t[s]){var u="function"==typeof _dereq_&&_dereq_;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=e[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return r(n?n:e)},l,l.exports,o,t,e,n)}return e[s].exports}for(var i="function"==typeof _dereq_&&_dereq_,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e){"use strict";e.exports=function(t){function e(t){var e=new n(t),r=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),r}var n=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,n){"use strict";function r(){this._isTickUsed=!1,this._lateQueue=new a(16),this._normalQueue=new a(16);var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=s.isStatic?s(this.drainQueues):s}var i;try{throw new Error}catch(o){i=o}var s=t("./schedule.js"),a=t("./queue.js"),u="undefined"!=typeof e?e:void 0;r.prototype.haveItemsQueued=function(){return this._normalQueue.length()>0},r.prototype._withDomain=function(t){return void 0===u||null==u.domain||t.domain||(t=u.domain.bind(t)),t},r.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),t=this._withDomain(t),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(n){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}},r.prototype.invokeLater=function(t,e,n){t=this._withDomain(t),this._lateQueue.push(t,e,n),this._queueTick()},r.prototype.invokeFirst=function(t,e,n){t=this._withDomain(t),this._normalQueue.unshift(t,e,n),this._queueTick()},r.prototype.invoke=function(t,e,n){t=this._withDomain(t),this._normalQueue.push(t,e,n),this._queueTick()},r.prototype.settlePromises=function(t){this._normalQueue._pushOne(t),this._queueTick()},r.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var n=t.shift(),r=t.shift();e.call(n,r)}else e._settlePromises()}},r.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._drainQueue(this._lateQueue)},r.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},r.prototype._reset=function(){this._isTickUsed=!1},n.exports=new r,n.exports.firstLineError=i},{"./queue.js":28,"./schedule.js":31}],3:[function(t,e){"use strict";e.exports=function(t,e,n){var r=function(t,e){this._reject(e)},i=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(r,r,null,this,t)},o=function(t,e){this._setBoundTo(t),this._isPending()&&this._resolveCallback(e.target)},s=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(r){var a=n(r),u=new t(e);u._propagateFrom(this,1);var c=this._target();if(a instanceof t){var l={promiseRejectionQueued:!1,promise:u,target:c,bindingPromise:a};c._then(e,i,u._progress,u,l),a._then(o,s,u._progress,u,l)}else u._setBoundTo(r),u._resolveCallback(c);return u},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=131072|this._bitField,this._boundTo=t):this._bitField=-131073&this._bitField},t.prototype._isBound=function(){return 131072===(131072&this._bitField)},t.bind=function(r,i){var o=n(r),s=new t(e);return o instanceof t?o._then(function(t){s._setBoundTo(t),s._resolveCallback(i)},s._reject,s._progress,s,null):(s._setBoundTo(r),s._resolveCallback(i)),s}}},{}],4:[function(t,e){"use strict";function n(){try{Promise===i&&(Promise=r)}catch(t){}return i}var r;"undefined"!=typeof Promise&&(r=Promise);var i=t("./promise.js")();i.noConflict=n,e.exports=i},{"./promise.js":23}],5:[function(t,e){"use strict";var n=Object.create;if(n){var r=n(null),i=n(null);r[" size"]=i[" size"]=0}e.exports=function(e){function n(t,n){var r;if(null!=t&&(r=t[n]),"function"!=typeof r){var i="Object "+a.classString(t)+" has no method '"+a.toString(n)+"'";throw new e.TypeError(i)}return r}function r(t){var e=this.pop(),r=n(t,e);return r.apply(t,this)}function i(t){return t[this]}function o(t){var e=+this;return 0>e&&(e=Math.max(0,e+t.length)),t[e]}{var s,a=t("./util.js"),u=a.canEvaluate;a.isIdentifier}e.prototype.call=function(t){for(var e=arguments.length,n=new Array(e-1),i=1;e>i;++i)n[i-1]=arguments[i];return n.push(t),this._then(r,void 0,void 0,n,void 0)},e.prototype.get=function(t){var e,n="number"==typeof t;if(n)e=o;else if(u){var r=s(t);e=null!==r?r:i}else e=i;return this._then(e,void 0,void 0,t,void 0)}}},{"./util.js":38}],6:[function(t,e){"use strict";e.exports=function(e){var n=t("./errors.js"),r=t("./async.js"),i=n.CancellationError;e.prototype._cancel=function(t){if(!this.isCancellable())return this;for(var e,n=this;void 0!==(e=n._cancellationParent)&&e.isCancellable();)n=e;this._unsetCancellable(),n._target()._rejectCallback(t,!1,!0)},e.prototype.cancel=function(t){return this.isCancellable()?(void 0===t&&(t=new i),r.invokeLater(this._cancel,this,t),this):this},e.prototype.cancellable=function(){return this._cancellable()?this:(this._setCancellable(),this._cancellationParent=void 0,this)},e.prototype.uncancellable=function(){var t=this.then();return t._unsetCancellable(),t},e.prototype.fork=function(t,e,n){var r=this._then(t,e,n,void 0,void 0);return r._setCancellable(),r._cancellationParent=void 0,r}}},{"./async.js":2,"./errors.js":13}],7:[function(t,n){"use strict";n.exports=function(){function n(t){this._parent=t;var e=this._length=1+(void 0===t?0:t._length);w(this,n),e>32&&this.uncycle()}function r(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}function i(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function o(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],s=-1,a=r.length-1;a>=0;--a)if(r[a]===o){s=a;break}for(var a=s;a>=0;--a){var u=r[a];if(e[i]!==u)break;e.pop(),i--}e=r}}function s(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i=m.test(r)||"    (No stack trace)"===r,o=i&&y(r);i&&!o&&(v&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function a(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||m.test(r))break}return n>0&&(e=e.slice(n)),e}function u(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t.toString();var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(e))try{var r=JSON.stringify(t);e=r}catch(i){}0===e.length&&(e="(empty array)")}return"(<"+c(e)+">, no stack trace)"}function c(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}function l(t){var e=t.match(b);return e?{fileName:e[1],line:parseInt(e[2],10)}:void 0}var h,f=t("./async.js"),p=t("./util.js"),d=/[\\\/]bluebird[\\\/]js[\\\/](main|debug|zalgo|instrumented)/,m=null,g=null,v=!1;p.inherits(n,Error),n.prototype.uncycle=function(){var t=this._length;if(!(2>t)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;t=this._length=r;for(var r=t-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(var r=0;t>r;++r){var s=e[r].stack,a=n[s];if(void 0!==a&&a!==r){a>0&&(e[a-1]._parent=void 0,e[a-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var u=r>0?e[r-1]:this;t-1>a?(u._parent=e[a+1],u._parent.uncycle(),u._length=u._parent._length+1):(u._parent=void 0,u._length=1);for(var c=u._length+1,l=r-2;l>=0;--l)e[l]._length=c,c++;return}}}},n.prototype.parent=function(){return this._parent},n.prototype.hasParent=function(){return void 0!==this._parent},n.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=n.parseStackAndMessage(t),a=e.message,u=[e.stack],c=this;void 0!==c;)u.push(s(c.stack.split("\n"))),c=c._parent;o(u),i(u),t.stack=r(a,u),p.notEnumerableProp(t,"__stackCleaned__",!0)}},n.parseStackAndMessage=function(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?a(t):["    (No stack trace)"],{message:n,stack:s(e)}},n.formatAndLogError=function(t,e){if("undefined"!=typeof console){var n;if("object"==typeof t||"function"==typeof t){var r=t.stack;n=e+g(r,t)}else n=e+String(t);"function"==typeof h?h(n):("function"==typeof console.log||"object"==typeof console.log)&&console.log(n)}},n.unhandledRejection=function(t){n.formatAndLogError(t,"^--- With additional stack trace: ")},n.isSupported=function(){return"function"==typeof w},n.fireRejectionEvent=function(t,e,r,i){var o=!1;try{"function"==typeof e&&(o=!0,"rejectionHandled"===t?e(i):e(r,i))}catch(s){f.throwLater(s)}var a=!1;try{a=_(t,r,i)}catch(s){a=!0,f.throwLater(s)}var u=!1;if(x)try{u=x(t.toLowerCase(),{reason:r,promise:i})}catch(s){u=!0,f.throwLater(s)}a||o||u||"unhandledRejection"!==t||n.formatAndLogError(r,"Unhandled rejection ")};var y=function(){return!1},b=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;n.setBounds=function(t,e){if(n.isSupported()){for(var r,i,o=t.stack.split("\n"),s=e.stack.split("\n"),a=-1,u=-1,c=0;c<o.length;++c){var h=l(o[c]);if(h){r=h.fileName,a=h.line;break}}for(var c=0;c<s.length;++c){var h=l(s[c]);if(h){i=h.fileName,u=h.line;break}}0>a||0>u||!r||!i||r!==i||a>=u||(y=function(t){if(d.test(t))return!0;var e=l(t);return e&&e.fileName===r&&a<=e.line&&e.line<=u?!0:!1})}};var x,w=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():u(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit=Error.stackTraceLimit+6,m=t,g=e;var n=Error.captureStackTrace;return y=function(t){return d.test(t)},function(t,e){Error.stackTraceLimit=Error.stackTraceLimit+6,n(t,e),Error.stackTraceLimit=Error.stackTraceLimit-6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return m=/@/,g=e,v=!0,function(t){t.stack=(new Error).stack};var i;try{throw new Error}catch(o){i="stack"in o}return"stack"in r||!i?(g=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?u(e):e.toString()},null):(m=t,g=e,function(t){Error.stackTraceLimit=Error.stackTraceLimit+6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit=Error.stackTraceLimit-6})}([]),_=function(){if(p.isNode)return function(t,n,r){return"rejectionHandled"===t?e.emit(t,r):e.emit(t,n,r)};var t=!1,n=!0;try{var r=new self.CustomEvent("test");t=r instanceof CustomEvent}catch(i){}if(!t)try{var o=document.createEvent("CustomEvent");o.initCustomEvent("testingtheevent",!1,!0,{}),self.dispatchEvent(o)}catch(i){n=!1}n&&(x=function(e,n){var r;return t?r=new self.CustomEvent(e,{detail:n,bubbles:!1,cancelable:!0}):self.dispatchEvent&&(r=document.createEvent("CustomEvent"),r.initCustomEvent(e,!1,!0,n)),r?!self.dispatchEvent(r):!1});var s={};return s.unhandledRejection="onunhandledRejection".toLowerCase(),s.rejectionHandled="onrejectionHandled".toLowerCase(),function(t,e,n){var r=s[t],i=self[r];return i?("rejectionHandled"===t?i.call(self,n):i.call(self,e,n),!0):!1}}();return"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(h=function(t){console.warn(t)},p.isNode&&e.stderr.isTTY?h=function(t){e.stderr.write("[31m"+t+"[39m\n")}:p.isNode||"string"!=typeof(new Error).stack||(h=function(t){console.warn("%c"+t,"color: red")})),n}},{"./async.js":2,"./util.js":38}],8:[function(t,e){"use strict";e.exports=function(e){function n(t,e,n){this._instances=t,this._callback=e,this._promise=n}function r(t,e){var n={},r=s(t).call(n,e);if(r===a)return r;var i=u(n);return i.length?(a.e=new c("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"),a):r}var i=t("./util.js"),o=t("./errors.js"),s=i.tryCatch,a=i.errorObj,u=t("./es5.js").keys,c=o.TypeError;return n.prototype.doFilter=function(t){for(var n=this._callback,i=this._promise,o=i._boundTo,u=0,c=this._instances.length;c>u;++u){var l=this._instances[u],h=l===Error||null!=l&&l.prototype instanceof Error;if(h&&t instanceof l){var f=s(n).call(o,t);return f===a?(e.e=f.e,e):f}if("function"==typeof l&&!h){var p=r(l,t);if(p===a){t=a.e;break}if(p){var f=s(n).call(o,t);return f===a?(e.e=f.e,e):f}}}return e.e=t,e},n}},{"./errors.js":13,"./es5.js":14,"./util.js":38}],9:[function(t,e){"use strict";e.exports=function(t,e,n){function r(){this._trace=new e(o())}function i(){return n()?new r:void 0}function o(){var t=s.length-1;return t>=0?s[t]:void 0}var s=[];return r.prototype._pushContext=function(){n()&&void 0!==this._trace&&s.push(this._trace)},r.prototype._popContext=function(){n()&&void 0!==this._trace&&s.pop()},t.prototype._peekContext=o,t.prototype._pushContext=r.prototype._pushContext,t.prototype._popContext=r.prototype._popContext,i}},{}],10:[function(t,n){"use strict";n.exports=function(n,r){var i,o,s=t("./async.js"),a=t("./errors.js").Warning,u=t("./util.js"),c=u.canAttachTrace,l=!1||u.isNode&&(!!e.env.BLUEBIRD_DEBUG||"development"===e.env.NODE_ENV);return n.prototype._ensurePossibleRejectionHandled=function(){this._setRejectionIsUnhandled(),s.invokeLater(this._notifyUnhandledRejection,this,void 0)},n.prototype._notifyUnhandledRejectionIsHandled=function(){r.fireRejectionEvent("rejectionHandled",i,void 0,this)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._getCarriedStackTrace()||this._settledValue;this._setUnhandledRejectionIsNotified(),r.fireRejectionEvent("unhandledRejection",o,t,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(524288&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},n.prototype._setCarriedStackTrace=function(t){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=t},n.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},n.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},n.prototype._captureStackTrace=function(){return l&&(this._trace=new r(this._peekContext())),this},n.prototype._attachExtraTrace=function(t,e){if(l&&c(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var i=r.parseStackAndMessage(t);t.stack=i.message+"\n"+i.stack.join("\n"),u.notEnumerableProp(t,"__stackCleaned__",!0)}}},n.prototype._warn=function(t){var e=new a(t),n=this._peekContext();if(n)n.attachExtraTrace(e);else{var i=r.parseStackAndMessage(e);e.stack=i.message+"\n"+i.stack.join("\n")}r.formatAndLogError(e,"")},n.onPossiblyUnhandledRejection=function(t){o="function"==typeof t?t:void 0},n.onUnhandledRejectionHandled=function(t){i="function"==typeof t?t:void 0},n.longStackTraces=function(){if(s.haveItemsQueued()&&l===!1)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/DT1qyG\n");l=r.isSupported()},n.hasLongStackTraces=function(){return l&&r.isSupported()},r.isSupported()||(n.longStackTraces=function(){},l=!1),function(){return l}}},{"./async.js":2,"./errors.js":13,"./util.js":38}],11:[function(t,e){"use strict";var n=t("./util.js"),r=n.isPrimitive,i=n.wrapsPrimitiveReceiver;e.exports=function(t){var e=function(){return this},n=function(){throw this},o=function(t,e){return 1===e?function(){throw t}:2===e?function(){return t}:void 0};t.prototype["return"]=t.prototype.thenReturn=function(t){return i&&r(t)?this._then(o(t,2),void 0,void 0,void 0,void 0):this._then(e,void 0,void 0,t,void 0)},t.prototype["throw"]=t.prototype.thenThrow=function(t){return i&&r(t)?this._then(o(t,1),void 0,void 0,void 0,void 0):this._then(n,void 0,void 0,t,void 0)}}},{"./util.js":38}],12:[function(t,e){"use strict";e.exports=function(t,e){var n=t.reduce;t.prototype.each=function(t){return n(this,t,null,e)},t.each=function(t,r){return n(t,r,null,e)}}},{}],13:[function(t,e){"use strict";function n(t,e){function n(r){return this instanceof n?(l(this,"message","string"==typeof r?r:e),l(this,"name",t),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new n(r)}return c(n,Error),n}function r(t){return this instanceof r?(l(this,"name","OperationalError"),l(this,"message",t),this.cause=t,this.isOperational=!0,void(t instanceof Error?(l(this,"message",t.message),l(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new r(t)}var i,o,s=t("./es5.js"),a=s.freeze,u=t("./util.js"),c=u.inherits,l=u.notEnumerableProp,h=n("Warning","warning"),f=n("CancellationError","cancellation error"),p=n("TimeoutError","timeout error"),d=n("AggregateError","aggregate error");try{i=TypeError,o=RangeError}catch(m){i=n("TypeError","type error"),o=n("RangeError","range error")}for(var g="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),v=0;v<g.length;++v)"function"==typeof Array.prototype[g[v]]&&(d.prototype[g[v]]=Array.prototype[g[v]]);s.defineProperty(d.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),d.prototype.isOperational=!0;var y=0;d.prototype.toString=function(){var t=Array(4*y+1).join(" "),e="\n"+t+"AggregateError of:\n";y++,t=Array(4*y+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];r=i.join("\n"),e+=r+"\n"}return y--,e},c(r,Error);var b=Error.__BluebirdErrorTypes__;b||(b=a({CancellationError:f,TimeoutError:p,OperationalError:r,RejectionError:r,AggregateError:d}),l(Error,"__BluebirdErrorTypes__",b)),e.exports={Error:Error,TypeError:i,RangeError:o,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:h}},{"./es5.js":14,"./util.js":38}],14:[function(t,e){var n=function(){"use strict";return void 0===this}();if(n)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var r={}.hasOwnProperty,i={}.toString,o={}.constructor.prototype,s=function(t){var e=[];for(var n in t)r.call(t,n)&&e.push(n);return e},a=function(t,e){return{value:t[e]}},u=function(t,e,n){return t[e]=n.value,t},c=function(t){return t},l=function(t){try{return Object(t).constructor.prototype}catch(e){return o}},h=function(t){try{return"[object Array]"===i.call(t)}catch(e){return!1}};e.exports={isArray:h,keys:s,names:s,defineProperty:u,getDescriptor:a,freeze:c,getPrototypeOf:l,isES5:n,propertyIsWritable:function(){return!0}}}},{}],15:[function(t,e){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},{}],16:[function(t,e){"use strict";e.exports=function(e,n,r){function i(){return this}function o(){throw this}function s(t){return function(){return t}}function a(t){return function(){throw t}}function u(t,e,n){var r;return r=f&&p(e)?n?s(e):a(e):n?i:o,t._then(r,d,void 0,e,void 0)}function c(t){var i=this.promise,o=this.handler,s=i._isBound()?o.call(i._boundTo):o();if(void 0!==s){var a=r(s,i);if(a instanceof e)return a=a._target(),u(a,t,i.isFulfilled())}return i.isRejected()?(n.e=t,n):t}function l(t){var n=this.promise,i=this.handler,o=n._isBound()?i.call(n._boundTo,t):i(t);if(void 0!==o){var s=r(o,n);if(s instanceof e)return s=s._target(),u(s,t,!0)}return t}var h=t("./util.js"),f=h.wrapsPrimitiveReceiver,p=h.isPrimitive,d=h.thrower;e.prototype._passThroughHandler=function(t,e){if("function"!=typeof t)return this.then();var n={promise:this,handler:t};return this._then(e?c:l,e?c:void 0,void 0,n,void 0)},e.prototype.lastly=e.prototype["finally"]=function(t){return this._passThroughHandler(t,!0)},e.prototype.tap=function(t){return this._passThroughHandler(t,!1)}}},{"./util.js":38}],17:[function(t,e){"use strict";e.exports=function(e,n,r,i){function o(t,n,r){for(var o=0;o<n.length;++o){r._pushContext();var s=h(n[o])(t);if(r._popContext(),s===l){r._pushContext();var a=e.reject(l.e);return r._popContext(),a}var u=i(s,r);if(u instanceof e)return u}return null}function s(t,n,i,o){var s=this._promise=new e(r);s._captureStackTrace(),this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(f):f}var a=t("./errors.js"),u=a.TypeError,c=t("./util.js"),l=c.errorObj,h=c.tryCatch,f=[];s.prototype.promise=function(){return this._promise},s.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},s.prototype._continue=function(t){if(t===l)return this._promise._rejectCallback(t.e,!1,!0);var n=t.value;if(t.done===!0)this._promise._resolveCallback(n);else{var r=i(n,this._promise);if(!(r instanceof e)&&(r=o(r,this._yieldHandlers,this._promise),null===r))return void this._throw(new u("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/4Y4pDk\n\n".replace("%s",n)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));r._then(this._next,this._throw,void 0,this,null)}},s.prototype._throw=function(t){this._promise._attachExtraTrace(t),this._promise._pushContext();var e=h(this._generator["throw"]).call(this._generator,t);this._promise._popContext(),this._continue(e)},s.prototype._next=function(t){this._promise._pushContext();var e=h(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},e.coroutine=function(t,e){if("function"!=typeof t)throw new u("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var n=Object(e).yieldHandler,r=s,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r(void 0,void 0,n,i);return o._generator=e,o._next(void 0),o.promise()}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new u("fn must be a function\n\n    See http://goo.gl/916lJJ\n");f.push(t)},e.spawn=function(t){if("function"!=typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var r=new s(t,this),i=r.promise();return r._run(e.spawn),i}}},{"./errors.js":13,"./util.js":38}],18:[function(t,e){"use strict";e.exports=function(e,n,r,i){{var o=t("./util.js");o.canEvaluate,o.tryCatch,o.errorObj}e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e];var r}for(var i=arguments.length,o=new Array(i),s=0;i>s;++s)o[s]=arguments[s];t&&o.pop();var r=new n(o).promise();return void 0!==t?r.spread(t):r}}},{"./util.js":38}],19:[function(t,e){"use strict";e.exports=function(e,n,r,i,o){function s(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace(),this._callback=e,this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=n>=1?[]:d,c.invoke(a,this,void 0)}function a(){this._init$(void 0,-2)}function u(t,e,n,r){var i="object"==typeof n&&null!==n?n.concurrency:0;return i="number"==typeof i&&isFinite(i)&&i>=1?i:0,new s(t,e,i,r)}var c=t("./async.js"),l=t("./util.js"),h=l.tryCatch,f=l.errorObj,p={},d=[];l.inherits(s,n),s.prototype._init=function(){},s.prototype._promiseFulfilled=function(t,n){var r=this._values,o=this.length(),s=this._preservedValues,a=this._limit;if(r[n]===p){if(r[n]=t,a>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(a>=1&&this._inFlight>=a)return r[n]=t,void this._queue.push(n);null!==s&&(s[n]=t);var u=this._callback,c=this._promise._boundTo;this._promise._pushContext();var l=h(u).call(c,t,n,o);if(this._promise._popContext(),l===f)return this._reject(l.e);var d=i(l,this._promise);if(d instanceof e){if(d=d._target(),d._isPending())return a>=1&&this._inFlight++,r[n]=p,d._proxyPromiseArray(this,n);if(!d._isFulfilled())return this._reject(d._reason());l=d._value()}r[n]=l}var m=++this._totalResolved;m>=o&&(null!==s?this._filter(r,s):this._resolve(r))},s.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},s.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;n>o;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},s.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return"function"!=typeof t?r("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):u(this,t,e,null).promise()},e.map=function(t,e,n,i){return"function"!=typeof e?r("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):u(t,e,n,i).promise()}}},{"./async.js":2,"./util.js":38}],20:[function(t,e){"use strict";e.exports=function(e,n,r,i){var o=t("./util.js"),s=o.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("fn must be a function\n\n    See http://goo.gl/916lJJ\n");return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=s(t).apply(this,arguments);return r._popContext(),r._resolveFromSyncValue(i),r}},e.attempt=e["try"]=function(t,r,a){if("function"!=typeof t)return i("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var u=new e(n);u._captureStackTrace(),u._pushContext();var c=o.isArray(r)?s(t).apply(a,r):s(t).call(a,r);return u._popContext(),u._resolveFromSyncValue(c),u},e.prototype._resolveFromSyncValue=function(t){t===o.errorObj?this._rejectCallback(t.e,!1,!0):this._resolveCallback(t,!0)}}},{"./util.js":38}],21:[function(t,e){"use strict";e.exports=function(e){function n(t,e){var n=this;if(!o.isArray(t))return r.call(n,t,e);var i=a(e).apply(n._boundTo,[null].concat(t));i===u&&s.throwLater(i.e)}function r(t,e){var n=this,r=n._boundTo,i=void 0===t?a(e).call(r,null):a(e).call(r,null,t);i===u&&s.throwLater(i.e)}function i(t,e){var n=this;if(!t){var r=n._target(),i=r._getCarriedStackTrace();i.cause=t,t=i}var o=a(e).call(n._boundTo,t);o===u&&s.throwLater(o.e)}var o=t("./util.js"),s=t("./async.js"),a=o.tryCatch,u=o.errorObj;e.prototype.nodeify=function(t,e){if("function"==typeof t){var o=r;void 0!==e&&Object(e).spread&&(o=n),this._then(o,i,void 0,this,t)}return this}}},{"./async.js":2,"./util.js":38}],22:[function(t,e){"use strict";e.exports=function(e,n){var r=t("./util.js"),i=t("./async.js"),o=r.tryCatch,s=r.errorObj;e.prototype.progressed=function(t){return this._then(void 0,void 0,t,void 0,void 0)},e.prototype._progress=function(t){this._isFollowingOrFulfilledOrRejected()||this._target()._progressUnchecked(t)},e.prototype._progressHandlerAt=function(t){return 0===t?this._progressHandler0:this[(t<<2)+t-5+2]},e.prototype._doProgressWith=function(t){var n=t.value,i=t.handler,a=t.promise,u=t.receiver,c=o(i).call(u,n);if(c===s){if(null!=c.e&&"StopProgressPropagation"!==c.e.name){var l=r.canAttachTrace(c.e)?c.e:new Error(r.toString(c.e));a._attachExtraTrace(l),a._progress(c.e)}}else c instanceof e?c._then(a._progress,null,null,a,void 0):a._progress(c)},e.prototype._progressUnchecked=function(t){for(var r=this._length(),o=this._progress,s=0;r>s;s++){var a=this._progressHandlerAt(s),u=this._promiseAt(s);if(u instanceof e)"function"==typeof a?i.invoke(this._doProgressWith,this,{handler:a,promise:u,receiver:this._receiverAt(s),value:t}):i.invoke(o,u,t);else{var c=this._receiverAt(s);"function"==typeof a?a.call(c,t,u):c instanceof n&&!c._isResolved()&&c._promiseProgressed(t,u)}}}}},{"./async.js":2,"./util.js":38}],23:[function(t,e){"use strict";e.exports=function(){function e(t){if("function"!=typeof t)throw new c("the promise constructor requires a resolver function\n\n    See http://goo.gl/EC22Yn\n");if(this.constructor!==e)throw new c("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/KsIlge\n");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._progressHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,t!==l&&this._resolveFromResolver(t)}function n(t){var n=new e(l);n._fulfillmentHandler0=t,n._rejectionHandler0=t,n._progressHandler0=t,n._promise0=t,n._receiver0=t,n._settledValue=t}var r=function(){return new c("circular promise resolution chain\n\n    See http://goo.gl/LhFpo0\n")},i=function(){return new e.PromiseInspection(this._target())},o=function(t){return e.reject(new c(t))},s=t("./util.js"),a=t("./async.js"),u=t("./errors.js"),c=e.TypeError=u.TypeError;e.RangeError=u.RangeError,e.CancellationError=u.CancellationError,e.TimeoutError=u.TimeoutError,e.OperationalError=u.OperationalError,e.RejectionError=u.OperationalError,e.AggregateError=u.AggregateError;var l=function(){},h={},f={e:null},p=t("./thenables.js")(e,l),d=t("./promise_array.js")(e,l,p,o),m=t("./captured_trace.js")(),g=t("./debuggability.js")(e,m),v=t("./context.js")(e,m,g),y=t("./catch_filter.js")(f),b=t("./promise_resolver.js"),x=b._nodebackForPromise,w=s.errorObj,_=s.tryCatch;return e.prototype.toString=function(){return"[object Promise]"},e.prototype.caught=e.prototype["catch"]=function(t){var n=arguments.length;if(n>1){var r,i=new Array(n-1),o=0;for(r=0;n-1>r;++r){var s=arguments[r];if("function"!=typeof s)return e.reject(new c("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"));i[o++]=s}i.length=o,t=arguments[r];var a=new y(i,t,this);return this._then(void 0,a.doFilter,void 0,a,void 0)}return this._then(void 0,t,void 0,void 0,void 0)},e.prototype.reflect=function(){return this._then(i,i,void 0,this,void 0)},e.prototype.then=function(t,e,n){if(g()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var r=".then() only accepts functions but was passed: "+s.classString(t);arguments.length>1&&(r+=", "+s.classString(e)),this._warn(r)}return this._then(t,e,n,void 0,void 0)},e.prototype.done=function(t,e,n){var r=this._then(t,e,n,void 0,void 0);r._setIsFinal()},e.prototype.spread=function(t,e){return this.all()._then(t,e,void 0,h,void 0)},e.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},e.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},e.prototype.all=function(){return new d(this).promise()},e.prototype.error=function(t){return this.caught(s.originatesFromRejection,t)},e.is=function(t){return t instanceof e},e.fromNode=function(t){var n=new e(l),r=_(t)(x(n));return r===w&&n._rejectCallback(r.e,!0,!0),n},e.all=function(t){return new d(t).promise()},e.defer=e.pending=function(){var t=new e(l);return new b(t)},e.cast=function(t){var n=p(t);if(!(n instanceof e)){var r=n;n=new e(l),n._fulfillUnchecked(r)}return n},e.resolve=e.fulfilled=e.cast,e.reject=e.rejected=function(t){var n=new e(l);return n._captureStackTrace(),n._rejectCallback(t,!0),n},e.setScheduler=function(t){if("function"!=typeof t)throw new c("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var e=a._schedule;return a._schedule=t,e},e.prototype._then=function(t,n,r,i,o){var s=void 0!==o,u=s?o:new e(l);s||(u._propagateFrom(this,5),u._captureStackTrace());var c=this._target();c!==this&&(void 0===i&&(i=this._boundTo),s||u._setIsMigrated());var h=c._addCallbacks(t,n,r,u,i);return c._isResolved()&&!c._isSettlePromisesQueued()&&a.invoke(c._settlePromiseAtPostResolution,c,h),u
},e.prototype._settlePromiseAtPostResolution=function(t){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),this._settlePromiseAt(t)},e.prototype._length=function(){return 131071&this._bitField},e.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},e.prototype._isFollowing=function(){return 536870912===(536870912&this._bitField)},e.prototype._setLength=function(t){this._bitField=-131072&this._bitField|131071&t},e.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},e.prototype._setRejected=function(){this._bitField=134217728|this._bitField},e.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},e.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},e.prototype._isFinal=function(){return(33554432&this._bitField)>0},e.prototype._cancellable=function(){return(67108864&this._bitField)>0},e.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},e.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},e.prototype._setIsMigrated=function(){this._bitField=4194304|this._bitField},e.prototype._unsetIsMigrated=function(){this._bitField=-4194305&this._bitField},e.prototype._isMigrated=function(){return(4194304&this._bitField)>0},e.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[5*t-5+4];return void 0===e&&this._isBound()?this._boundTo:e},e.prototype._promiseAt=function(t){return 0===t?this._promise0:this[5*t-5+3]},e.prototype._fulfillmentHandlerAt=function(t){return 0===t?this._fulfillmentHandler0:this[5*t-5+0]},e.prototype._rejectionHandlerAt=function(t){return 0===t?this._rejectionHandler0:this[5*t-5+1]},e.prototype._migrateCallbacks=function(t,n){var r=t._fulfillmentHandlerAt(n),i=t._rejectionHandlerAt(n),o=t._progressHandlerAt(n),s=t._promiseAt(n),a=t._receiverAt(n);s instanceof e&&s._setIsMigrated(),this._addCallbacks(r,i,o,s,a)},e.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=131066&&(o=0,this._setLength(0)),0===o)this._promise0=r,void 0!==i&&(this._receiver0=i),"function"!=typeof t||this._isCarryingStackTrace()||(this._fulfillmentHandler0=t),"function"==typeof e&&(this._rejectionHandler0=e),"function"==typeof n&&(this._progressHandler0=n);else{var s=5*o-5;this[s+3]=r,this[s+4]=i,"function"==typeof t&&(this[s+0]=t),"function"==typeof e&&(this[s+1]=e),"function"==typeof n&&(this[s+2]=n)}return this._setLength(o+1),o},e.prototype._setProxyHandlers=function(t,e){var n=this._length();if(n>=131066&&(n=0,this._setLength(0)),0===n)this._promise0=e,this._receiver0=t;else{var r=5*n-5;this[r+3]=e,this[r+4]=t}this._setLength(n+1)},e.prototype._proxyPromiseArray=function(t,e){this._setProxyHandlers(t,e)},e.prototype._resolveCallback=function(t,n){if(!this._isFollowingOrFulfilledOrRejected()){if(t===this)return this._rejectCallback(r(),!1,!0);var i=p(t,this);if(!(i instanceof e))return this._fulfill(t);var o=1|(n?4:0);this._propagateFrom(i,o);var s=i._target();if(s._isPending()){for(var a=this._length(),u=0;a>u;++u)s._migrateCallbacks(this,u);this._setFollowing(),this._setLength(0),this._setFollowee(s)}else s._isFulfilled()?this._fulfillUnchecked(s._value()):this._rejectUnchecked(s._reason(),s._getCarriedStackTrace())}},e.prototype._rejectCallback=function(t,e,n){n||s.markAsOriginatingFromRejection(t);var r=s.ensureErrorObject(t),i=r===t;this._attachExtraTrace(r,e?i:!1),this._reject(t,i?void 0:r)},e.prototype._resolveFromResolver=function(t){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=_(t)(function(t){null!==e&&(e._resolveCallback(t),e=null)},function(t){null!==e&&(e._rejectCallback(t,n),e=null)});n=!1,this._popContext(),void 0!==r&&r===w&&null!==e&&(e._rejectCallback(r.e,!0,!0),e=null)},e.prototype._settlePromiseFromHandler=function(t,e,n,i){if(!i._isRejected()){i._pushContext();var o;if(o=e!==h||this._isRejected()?_(t).call(e,n):_(t).apply(this._boundTo,n),i._popContext(),o===w||o===i||o===f){var s=o===i?r():o.e;i._rejectCallback(s,!1,!0)}else i._resolveCallback(o)}},e.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},e.prototype._followee=function(){return this._rejectionHandler0},e.prototype._setFollowee=function(t){this._rejectionHandler0=t},e.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},e.prototype._propagateFrom=function(t,e){(1&e)>0&&t._cancellable()&&(this._setCancellable(),this._cancellationParent=t),(4&e)>0&&t._isBound()&&this._setBoundTo(t._boundTo)},e.prototype._fulfill=function(t){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(t)},e.prototype._reject=function(t,e){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(t,e)},e.prototype._settlePromiseAt=function(t){var n=this._promiseAt(t),r=n instanceof e;if(r&&n._isMigrated())return n._unsetIsMigrated(),a.invoke(this._settlePromiseAt,this,t);var i=this._isFulfilled()?this._fulfillmentHandlerAt(t):this._rejectionHandlerAt(t),o=this._isCarryingStackTrace()?this._getCarriedStackTrace():void 0,s=this._settledValue,u=this._receiverAt(t);this._clearCallbackDataAtIndex(t),"function"==typeof i?r?this._settlePromiseFromHandler(i,u,s,n):i.call(u,s,n):u instanceof d?u._isResolved()||(this._isFulfilled()?u._promiseFulfilled(s,n):u._promiseRejected(s,n)):r&&(this._isFulfilled()?n._fulfill(s):n._reject(s,o)),t>=4&&4===(31&t)&&a.invokeLater(this._setLength,this,0)},e.prototype._clearCallbackDataAtIndex=function(t){if(0===t)this._isCarryingStackTrace()||(this._fulfillmentHandler0=void 0),this._rejectionHandler0=this._progressHandler0=this._receiver0=this._promise0=void 0;else{var e=5*t-5;this[e+3]=this[e+4]=this[e+0]=this[e+1]=this[e+2]=void 0}},e.prototype._isSettlePromisesQueued=function(){return-1073741824===(-1073741824&this._bitField)},e.prototype._setSettlePromisesQueued=function(){this._bitField=-1073741824|this._bitField},e.prototype._unsetSettlePromisesQueued=function(){this._bitField=1073741823&this._bitField},e.prototype._queueSettlePromises=function(){a.settlePromises(this),this._setSettlePromisesQueued()},e.prototype._fulfillUnchecked=function(t){if(t===this){var e=r();return this._attachExtraTrace(e),this._rejectUnchecked(e,void 0)}this._setFulfilled(),this._settledValue=t,this._cleanValues(),this._length()>0&&this._queueSettlePromises()},e.prototype._rejectUncheckedCheckError=function(t){var e=s.ensureErrorObject(t);this._rejectUnchecked(t,e===t?void 0:e)},e.prototype._rejectUnchecked=function(t,e){if(t===this){var n=r();return this._attachExtraTrace(n),this._rejectUnchecked(n)}return this._setRejected(),this._settledValue=t,this._cleanValues(),this._isFinal()?void a.throwLater(function(t){throw"stack"in t&&a.invokeFirst(m.unhandledRejection,void 0,t),t},void 0===e?t:e):(void 0!==e&&e!==t&&this._setCarriedStackTrace(e),void(this._length()>0?this._queueSettlePromises():this._ensurePossibleRejectionHandled()))},e.prototype._settlePromises=function(){this._unsetSettlePromisesQueued();for(var t=this._length(),e=0;t>e;e++)this._settlePromiseAt(e)},e._makeSelfResolutionError=r,t("./method.js")(e,l,p,o),t("./bind.js")(e,l,p),t("./finally.js")(e,f,p),t("./direct_resolve.js")(e),t("./synchronous_inspection.js")(e),t("./join.js")(e,d,p,l),e.Promise=e,t("./map.js")(e,d,o,p,l),t("./using.js")(e,o,p,v),t("./generators.js")(e,o,l,p),t("./nodeify.js")(e),t("./cancel.js")(e),t("./promisify.js")(e,l),t("./props.js")(e,d,p,o),t("./race.js")(e,l,p,o),t("./reduce.js")(e,d,o,p,l),t("./settle.js")(e,d),t("./call_get.js")(e),t("./some.js")(e,d,o),t("./progress.js")(e,d),t("./any.js")(e),t("./each.js")(e,l),t("./timers.js")(e,l),t("./filter.js")(e,l),s.toFastProperties(e),s.toFastProperties(e.prototype),n({a:1}),n({b:2}),n({c:3}),n(1),n(function(){}),n(void 0),n(!1),n(new e(l)),m.setBounds(a.firstLineError,s.lastLineError),e}},{"./any.js":1,"./async.js":2,"./bind.js":3,"./call_get.js":5,"./cancel.js":6,"./captured_trace.js":7,"./catch_filter.js":8,"./context.js":9,"./debuggability.js":10,"./direct_resolve.js":11,"./each.js":12,"./errors.js":13,"./filter.js":15,"./finally.js":16,"./generators.js":17,"./join.js":18,"./map.js":19,"./method.js":20,"./nodeify.js":21,"./progress.js":22,"./promise_array.js":24,"./promise_resolver.js":25,"./promisify.js":26,"./props.js":27,"./race.js":29,"./reduce.js":30,"./settle.js":32,"./some.js":33,"./synchronous_inspection.js":34,"./thenables.js":35,"./timers.js":36,"./using.js":37,"./util.js":38}],24:[function(t,e){"use strict";e.exports=function(e,n,r,i){function o(t){switch(t){case-2:return[];case-3:return{}}}function s(t){var r,i=this._promise=new e(n);t instanceof e&&(r=t,i._propagateFrom(r,5)),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var a=t("./util.js"),u=a.isArray;return s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function c(t,n){var s=r(this._values,this._promise);if(s instanceof e){if(s=s._target(),this._values=s,!s._isFulfilled())return s._isPending()?void s._then(c,this._reject,void 0,this,n):void this._reject(s._reason());if(s=s._value(),!u(s)){var a=new e.TypeError("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");return void this.__hardReject__(a)}}else if(!u(s))return void this._promise._reject(i("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n")._reason());if(0===s.length)return void(-5===n?this._resolveEmptyArray():this._resolve(o(n)));var l=this.getActualLength(s.length);this._length=l,this._values=this.shouldCopyValues()?new Array(l):this._values;for(var h=this._promise,f=0;l>f;++f){var p=this._isResolved(),d=r(s[f],h);d instanceof e?(d=d._target(),p?d._unsetRejectionIsUnhandled():d._isPending()?d._proxyPromiseArray(this,f):d._isFulfilled()?this._promiseFulfilled(d._value(),f):this._promiseRejected(d._reason(),f)):p||this._promiseFulfilled(d,f)}},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype.__hardReject__=s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1,!0)},s.prototype._promiseProgressed=function(t,e){this._promise._progress({index:e,value:t})},s.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;n>=this._length&&this._resolve(this._values)},s.prototype._promiseRejected=function(t){this._totalResolved++,this._reject(t)},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},{"./util.js":38}],25:[function(t,e){"use strict";function n(t){return t instanceof Error&&f.getPrototypeOf(t)===Error.prototype}function r(t){var e;if(n(t)){e=new l(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var r=f.keys(t),i=0;i<r.length;++i){var o=r[i];p.test(o)||(e[o]=t[o])}return e}return s.markAsOriginatingFromRejection(t),t}function i(t){return function(e,n){if(null!==t){if(e){var i=r(a(e));t._attachExtraTrace(i),t._reject(i)}else if(arguments.length>2){for(var o=arguments.length,s=new Array(o-1),u=1;o>u;++u)s[u-1]=arguments[u];t._fulfill(s)}else t._fulfill(n);t=null}}}var o,s=t("./util.js"),a=s.maybeWrapAsError,u=t("./errors.js"),c=u.TimeoutError,l=u.OperationalError,h=s.haveGetters,f=t("./es5.js"),p=/^(?:name|message|stack|cause)$/;if(o=h?function(t){this.promise=t}:function(t){this.promise=t,this.asCallback=i(t),this.callback=this.asCallback},h){var d={get:function(){return i(this.promise)}};f.defineProperty(o.prototype,"asCallback",d),f.defineProperty(o.prototype,"callback",d)}o._nodebackForPromise=i,o.prototype.toString=function(){return"[object PromiseResolver]"},o.prototype.resolve=o.prototype.fulfill=function(t){if(!(this instanceof o))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._resolveCallback(t)},o.prototype.reject=function(t){if(!(this instanceof o))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._rejectCallback(t)},o.prototype.progress=function(t){if(!(this instanceof o))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._progress(t)},o.prototype.cancel=function(t){this.promise.cancel(t)},o.prototype.timeout=function(){this.reject(new c("timeout"))},o.prototype.isResolved=function(){return this.promise.isResolved()},o.prototype.toJSON=function(){return this.promise.toJSON()},e.exports=o},{"./errors.js":13,"./es5.js":14,"./util.js":38}],26:[function(t,e){"use strict";e.exports=function(e,n){function r(t){return!w.test(t)}function i(t){try{return t.__isPromisified__===!0}catch(e){return!1}}function o(t,e,n){var r=p.getDataPropertyOrDefault(t,e+n,x);return r?i(r):!1}function s(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new y("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/iWrZbw\n".replace("%s",e))}}function a(t,e,n,r){for(var a=p.inheritedDataKeys(t),u=[],c=0;c<a.length;++c){var l=a[c],h=t[l],f=r===_?!0:_(l,h,t);"function"!=typeof h||i(h)||o(t,l,e)||!r(l,h,t,f)||u.push(l,h)}return s(u,e,n),u}function u(t,r,i,o){function s(){var i=r;r===f&&(i=this);var o=new e(n);o._captureStackTrace();var s="string"==typeof u&&this!==a?this[u]:t,c=d(o);try{s.apply(i,m(arguments,c))}catch(l){o._rejectCallback(g(l),!0,!0)}return o}var a=function(){return this}(),u=t;return"string"==typeof u&&(t=o),s.__isPromisified__=!0,s}function c(t,e,n,r){for(var i=new RegExp(T(e)+"$"),o=a(t,e,i,n),s=0,u=o.length;u>s;s+=2){var c=o[s],l=o[s+1],h=c+e;t[h]=r===S?S(c,f,c,l,e):r(l,function(){return S(c,f,c,l,e)})}return p.toFastProperties(t),t}function l(t,e){return S(t,e,void 0,t)}var h,f={},p=t("./util.js"),d=t("./promise_resolver.js")._nodebackForPromise,m=p.withAppended,g=p.maybeWrapAsError,v=p.canEvaluate,y=t("./errors").TypeError,b="Async",x={__isPromisified__:!0},w=/^(?:length|name|arguments|caller|prototype|__isPromisified__)$/,_=function(t,e){return p.isIdentifier(t)&&"_"!==t.charAt(0)&&!p.isClass(e)},T=function(t){return t.replace(/([$])/,"\\$")},S=v?h:u;e.promisify=function(t,e){if("function"!=typeof t)throw new y("fn must be a function\n\n    See http://goo.gl/916lJJ\n");if(i(t))return t;var n=l(t,arguments.length<2?f:e);return p.copyDescriptors(t,n,r),n},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new y("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/9ITlV0\n");e=Object(e);var n=e.suffix;"string"!=typeof n&&(n=b);var r=e.filter;"function"!=typeof r&&(r=_);var i=e.promisifier;if("function"!=typeof i&&(i=S),!p.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/8FZo5V\n");for(var o=p.inheritedDataKeys(t),s=0;s<o.length;++s){var a=t[o[s]];"constructor"!==o[s]&&p.isClass(a)&&(c(a.prototype,n,r,i),c(a,n,r,i))}return c(t,n,r,i)}}},{"./errors":13,"./promise_resolver.js":25,"./util.js":38}],27:[function(t,e){"use strict";e.exports=function(e,n,r,i){function o(t){for(var e=c.keys(t),n=e.length,r=new Array(2*n),i=0;n>i;++i){var o=e[i];r[i]=t[o],r[i+n]=o}this.constructor$(r)}function s(t){var n,s=r(t);return u(s)?(n=s instanceof e?s._then(e.props,void 0,void 0,void 0,void 0):new o(s).promise(),s instanceof e&&n._propagateFrom(s,4),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/OsFKC8\n")}var a=t("./util.js"),u=a.isObject,c=t("./es5.js");a.inherits(o,n),o.prototype._init=function(){this._init$(void 0,-3)},o.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;if(n>=this._length){for(var r={},i=this.length(),o=0,s=this.length();s>o;++o)r[this._values[o+i]]=this._values[o];this._resolve(r)}},o.prototype._promiseProgressed=function(t,e){this._promise._progress({key:this._values[e+this.length()],value:t})},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return s(this)},e.props=function(t){return s(t)}}},{"./es5.js":14,"./util.js":38}],28:[function(t,e){"use strict";function n(t,e,n,r,i){for(var o=0;i>o;++o)n[o+r]=t[o+e],t[o+e]=void 0}function r(t){this._capacity=t,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(t){return this._capacity<t},r.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var n=this._front+e&this._capacity-1;this[n]=t,this._length=e+1},r.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var n=this._front,r=(n-1&e-1^e)-e;this[r]=t,this._front=r,this._length=this.length()+1},r.prototype.unshift=function(t,e,n){this._unshiftOne(n),this._unshiftOne(e),this._unshiftOne(t)},r.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},r.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var r=this._front,i=this._length,o=r+i&e-1;n(this,0,this,e,o)},e.exports=r},{}],29:[function(t,e){"use strict";e.exports=function(e,n,r,i){function o(t,o){var u=r(t);if(u instanceof e)return a(u);if(!s(t))return i("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");var c=new e(n);void 0!==o&&c._propagateFrom(o,5);for(var l=c._fulfill,h=c._reject,f=0,p=t.length;p>f;++f){var d=t[f];(void 0!==d||f in t)&&e.cast(d)._then(l,h,void 0,c,null)}return c}var s=t("./util.js").isArray,a=function(t){return t.then(function(e){return o(e,t)})};e.race=function(t){return o(t,void 0)},e.prototype.race=function(){return o(this,void 0)}}},{"./util.js":38}],30:[function(t,e){"use strict";e.exports=function(e,n,r,i,o){function s(t,n,r,s){this.constructor$(t),this._promise._captureStackTrace(),this._preservedValues=s===o?[]:null,this._zerothIsAccum=void 0===r,this._gotAccum=!1,this._reducingIndex=this._zerothIsAccum?1:0,this._valuesPhase=void 0;var u=i(r,this._promise),l=!1,h=u instanceof e;h&&(u=u._target(),u._isPending()?u._proxyPromiseArray(this,-1):u._isFulfilled()?(r=u._value(),this._gotAccum=!0):(this._reject(u._reason()),l=!0)),h||this._zerothIsAccum||(this._gotAccum=!0),this._callback=n,this._accum=r,l||c.invoke(a,this,void 0)}function a(){this._init$(void 0,-5)}function u(t,e,n,i){if("function"!=typeof e)return r("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var o=new s(t,e,n,i);return o.promise()}var c=t("./async.js"),l=t("./util.js"),h=l.tryCatch,f=l.errorObj;l.inherits(s,n),s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){(this._gotAccum||this._zerothIsAccum)&&this._resolve(null!==this._preservedValues?[]:this._accum)},s.prototype._promiseFulfilled=function(t,n){var r=this._values;r[n]=t;var o,s=this.length(),a=this._preservedValues,u=null!==a,c=this._gotAccum,l=this._valuesPhase;if(!l)for(l=this._valuesPhase=new Array(s),o=0;s>o;++o)l[o]=0;if(o=l[n],0===n&&this._zerothIsAccum?(this._accum=t,this._gotAccum=c=!0,l[n]=0===o?1:2):-1===n?(this._accum=t,this._gotAccum=c=!0):0===o?l[n]=1:(l[n]=2,this._accum=t),c){for(var p,d=this._callback,m=this._promise._boundTo,g=this._reducingIndex;s>g;++g)if(o=l[g],2!==o){if(1!==o)return;if(t=r[g],this._promise._pushContext(),u?(a.push(t),p=h(d).call(m,t,g,s)):p=h(d).call(m,this._accum,t,g,s),this._promise._popContext(),p===f)return this._reject(p.e);var v=i(p,this._promise);if(v instanceof e){if(v=v._target(),v._isPending())return l[g]=4,v._proxyPromiseArray(this,g);if(!v._isFulfilled())return this._reject(v._reason());p=v._value()}this._reducingIndex=g+1,this._accum=p}else this._reducingIndex=g+1;this._resolve(u?a:this._accum)}},e.prototype.reduce=function(t,e){return u(this,t,e,null)},e.reduce=function(t,e,n,r){return u(t,e,n,r)}}},{"./async.js":2,"./util.js":38}],31:[function(t,r){"use strict";var i;if(t("./util.js").isNode){var o=e.versions.node.split(".").map(Number);i=0===o[0]&&o[1]>10||o[0]>0?n.setImmediate:e.nextTick}else"undefined"!=typeof MutationObserver?(i=function(t){var e=document.createElement("div"),n=new MutationObserver(t);return n.observe(e,{attributes:!0}),function(){e.classList.toggle("foo")}},i.isStatic=!0):i="undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")};r.exports=i},{"./util.js":38}],32:[function(t,e){"use strict";e.exports=function(e,n){function r(t){this.constructor$(t)}var i=e.PromiseInspection,o=t("./util.js");o.inherits(r,n),r.prototype._promiseResolved=function(t,e){this._values[t]=e;var n=++this._totalResolved;n>=this._length&&this._resolve(this._values)},r.prototype._promiseFulfilled=function(t,e){var n=new i;n._bitField=268435456,n._settledValue=t,this._promiseResolved(e,n)},r.prototype._promiseRejected=function(t,e){var n=new i;n._bitField=134217728,n._settledValue=t,this._promiseResolved(e,n)},e.settle=function(t){return new r(t).promise()},e.prototype.settle=function(){return new r(this).promise()}}},{"./util.js":38}],33:[function(t,e){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||0>e)return r("expecting a positive integer\n\n    See http://goo.gl/1wAmHx\n");var n=new i(t),o=n.promise();return n.setHowMany(e),n.init(),o}var s=t("./util.js"),a=t("./errors.js").RangeError,u=t("./errors.js").AggregateError,c=s.isArray;s.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=c(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._howMany=t},i.prototype._promiseFulfilled=function(t){this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),this._resolve(1===this.howMany()&&this._unwrap?this._values[0]:this._values))},i.prototype._promiseRejected=function(t){if(this._addRejected(t),this.howMany()>this._canPossiblyFulfill()){for(var e=new u,n=this.length();n<this._values.length;++n)e.push(this._values[n]);this._reject(e)}},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new a(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=i}},{"./errors.js":13,"./util.js":38}],34:[function(t,e){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValue=t._settledValue):(this._bitField=0,this._settledValue=void 0)}e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return this._settledValue},e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return this._settledValue},e.prototype.isFulfilled=t.prototype._isFulfilled=function(){return(268435456&this._bitField)>0},e.prototype.isRejected=t.prototype._isRejected=function(){return(134217728&this._bitField)>0},e.prototype.isPending=t.prototype._isPending=function(){return 0===(402653184&this._bitField)},e.prototype.isResolved=t.prototype._isResolved=function(){return(402653184&this._bitField)>0},t.prototype.isPending=function(){return this._target()._isPending()},t.prototype.isRejected=function(){return this._target()._isRejected()},t.prototype.isFulfilled=function(){return this._target()._isFulfilled()},t.prototype.isResolved=function(){return this._target()._isResolved()},t.prototype._value=function(){return this._settledValue},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue},t.prototype.value=function(){var t=this._target();if(!t.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return t._settledValue},t.prototype.reason=function(){var t=this._target();if(!t.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return t._unsetRejectionIsUnhandled(),t._settledValue},t.PromiseInspection=e}},{}],35:[function(t,e){"use strict";e.exports=function(e,n){function r(t,r){if(c(t)){if(t instanceof e)return t;if(o(t)){var l=new e(n);return t._then(l._fulfillUnchecked,l._rejectUncheckedCheckError,l._progressUnchecked,l,null),l}var h=a.tryCatch(i)(t);if(h===u){r&&r._pushContext();var l=e.reject(h.e);return r&&r._popContext(),l}if("function"==typeof h)return s(t,h,r)}return t}function i(t){return t.then}function o(t){return l.call(t,"_promise0")}function s(t,r,i){function o(n){l&&(t===n?l._rejectCallback(e._makeSelfResolutionError(),!1,!0):l._resolveCallback(n),l=null)}function s(t){l&&(l._rejectCallback(t,f,!0),l=null)}function c(t){l&&"function"==typeof l._progress&&l._progress(t)}var l=new e(n),h=l;i&&i._pushContext(),l._captureStackTrace(),i&&i._popContext();var f=!0,p=a.tryCatch(r).call(t,o,s,c);return f=!1,l&&p===u&&(l._rejectCallback(p.e,!0,!0),l=null),h}var a=t("./util.js"),u=a.errorObj,c=a.isObject,l={}.hasOwnProperty;return r}},{"./util.js":38}],36:[function(t,e){"use strict";e.exports=function(e,n){function r(t){var e=this;return e instanceof Number&&(e=+e),clearTimeout(e),t}function i(t){var e=this;throw e instanceof Number&&(e=+e),clearTimeout(e),t}var o=t("./util.js"),s=e.TimeoutError,a=function(t,e){if(t.isPending()){"string"!=typeof e&&(e="operation timed out");var n=new s(e);o.markAsOriginatingFromRejection(n),t._attachExtraTrace(n),t._cancel(n)}},u=function(t){return c(+this).thenReturn(t)},c=e.delay=function(t,r){if(void 0===r){r=t,t=void 0;var i=new e(n);return setTimeout(function(){i._fulfill()},r),i}return r=+r,e.resolve(t)._then(u,null,null,r,void 0)};e.prototype.delay=function(t){return c(this,t)},e.prototype.timeout=function(t,e){t=+t;var n=this.then().cancellable();n._cancellationParent=this;var o=setTimeout(function(){a(n,e)},t);return n._then(r,i,void 0,o,void 0)}}},{"./util.js":38}],37:[function(t,e){"use strict";e.exports=function(e,n,r,i){function o(t){for(var n=t.length,r=0;n>r;++r){var i=t[r];if(i.isRejected())return e.reject(i.error());t[r]=i._settledValue}return t}function s(t){setTimeout(function(){throw t},0)}function a(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function u(t,n){function i(){if(o>=u)return c.resolve();var l=a(t[o++]);if(l instanceof e&&l._isDisposable()){try{l=r(l._getDisposer().tryDispose(n),t.promise)}catch(h){return s(h)}if(l instanceof e)return l._then(i,s,null,null,null)}i()}var o=0,u=t.length,c=e.defer();return i(),c.promise}function c(t){var e=new g;return e._settledValue=t,e._bitField=268435456,u(this,e).thenReturn(t)}function l(t){var e=new g;return e._settledValue=t,e._bitField=134217728,u(this,e).thenThrow(t)}function h(t,e,n){this._data=t,this._promise=e,this._context=n}function f(t,e,n){this.constructor$(t,e,n)}function p(t){return h.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}var d=t("./errors.js").TypeError,m=t("./util.js").inherits,g=e.PromiseInspection;h.prototype.data=function(){return this._data},h.prototype.promise=function(){return this._promise},h.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},h.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=null!==e?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},h.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},m(f,h),f.prototype.doDispose=function(t,e){var n=this.data();return n.call(t,t,e)},e.using=function(){var t=arguments.length;if(2>t)return n("you must pass at least 2 arguments to Promise.using");var i=arguments[t-1];if("function"!=typeof i)return n("fn must be a function\n\n    See http://goo.gl/916lJJ\n");t--;for(var s=new Array(t),a=0;t>a;++a){var u=arguments[a];if(h.isDisposer(u)){var f=u;u=u.promise(),u._setDisposable(f)}else{var d=r(u);d instanceof e&&(u=d._then(p,null,null,{resources:s,index:a},void 0))}s[a]=u}var m=e.settle(s).then(o).then(function(t){m._pushContext();var e;try{e=i.apply(void 0,t)}finally{m._popContext()}return e})._then(c,l,void 0,s,void 0);return s.promise=m,m},e.prototype._setDisposable=function(t){this._bitField=262144|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(262144&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-262145&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new f(t,this,i());throw new d}}},{"./errors.js":13,"./util.js":38}],38:[function(t,n,r){"use strict";function i(){try{return A.apply(this,arguments)}catch(t){return C.e=t,C}}function o(t){return A=t,i}function s(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function a(t){return!s(t)}function u(t){return s(t)?new Error(v(t)):t}function c(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;r>n;++n)i[n]=t[n];return i[n]=e,i}function l(t,e,n){if(!T.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function h(t,e,n){if(s(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return T.defineProperty(t,e,r),t}function f(t){throw t}function p(t){try{if("function"==typeof t){var e=T.names(t.prototype);return T.isES5?e.length>1:e.length>0&&!(1===e.length&&"constructor"===e[0])}return!1}catch(n){return!1}}function d(t){function e(){}return e.prototype=t,e}function m(t){return M.test(t)}function g(t,e,n){for(var r=new Array(t),i=0;t>i;++i)r[i]=e+i+n;return r}function v(t){try{return t+""}catch(e){return"[no string representation]"}}function y(t){try{h(t,"isOperational",!0)}catch(e){}}function b(t){return null==t?!1:t instanceof Error.__BluebirdErrorTypes__.OperationalError||t.isOperational===!0}function x(t){return t instanceof Error&&T.propertyIsWritable(t,"stack")}function w(t){return{}.toString.call(t)}function _(t,e,n){for(var r=T.names(t),i=0;i<r.length;++i){var o=r[i];n(o)&&T.defineProperty(e,o,T.getDescriptor(t,o))}}var T=t("./es5.js"),S="undefined"==typeof navigator,E=function(){try{var t={};return T.defineProperty(t,"f",{get:function(){return 3
}}),3===t.f}catch(e){return!1}}(),C={e:{}},A,j=function(t,e){function n(){this.constructor=t,this.constructor$=e;for(var n in e.prototype)r.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}var r={}.hasOwnProperty;return n.prototype=e.prototype,t.prototype=new n,t.prototype},k=function(){return"string"!==this}.call("string"),O=function(){if(T.isES5){var t=Object.prototype,e=Object.getOwnPropertyNames;return function(n){for(var r=[],i=Object.create(null);null!=n&&n!==t;){var o;try{o=e(n)}catch(s){return r}for(var a=0;a<o.length;++a){var u=o[a];if(!i[u]){i[u]=!0;var c=Object.getOwnPropertyDescriptor(n,u);null!=c&&null==c.get&&null==c.set&&r.push(u)}}n=T.getPrototypeOf(n)}return r}}return function(t){var e=[];for(var n in t)e.push(n);return e}}(),M=/^[a-z$_][a-z$_0-9]*$/i,R=function(){return"stack"in new Error?function(t){return x(t)?t:new Error(v(t))}:function(t){if(x(t))return t;try{throw new Error(v(t))}catch(e){return e}}}(),P={isClass:p,isIdentifier:m,inheritedDataKeys:O,getDataPropertyOrDefault:l,thrower:f,isArray:T.isArray,haveGetters:E,notEnumerableProp:h,isPrimitive:s,isObject:a,canEvaluate:S,errorObj:C,tryCatch:o,inherits:j,withAppended:c,maybeWrapAsError:u,wrapsPrimitiveReceiver:k,toFastProperties:d,filledRange:g,toString:v,canAttachTrace:x,ensureErrorObject:R,originatesFromRejection:b,markAsOriginatingFromRejection:y,classString:w,copyDescriptors:_,isNode:"undefined"!=typeof e&&"[object process]"===w(e).toLowerCase()};try{throw new Error}catch(I){P.lastLineError=I}n.exports=P},{"./es5.js":14}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(e,n(12),function(){return this}())},function(t,e,n){function r(){return e.colors[l++%e.colors.length]}function i(t){function n(){}function i(){var t=i,n=+new Date,o=n-(c||n);t.diff=o,t.prev=c,t.curr=n,c=n,null==t.useColors&&(t.useColors=e.useColors()),null==t.color&&t.useColors&&(t.color=r());var s=Array.prototype.slice.call(arguments);s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;a++;var i=e.formatters[r];if("function"==typeof i){var o=s[a];n=i.call(t,o),s.splice(a,1),a--}return n}),"function"==typeof e.formatArgs&&(s=e.formatArgs.apply(t,s));var u=i.log||e.log||console.log.bind(console);u.apply(t,s)}n.enabled=!1,i.enabled=!0;var o=e.enabled(t)?i:n;return o.namespace=t,o}function o(t){e.save(t);for(var n=(t||"").split(/[\s,]+/),r=n.length,i=0;r>i;i++)n[i]&&(t=n[i].replace(/\*/g,".*?"),"-"===t[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function s(){e.enable("")}function a(t){var n,r;for(n=0,r=e.skips.length;r>n;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;r>n;n++)if(e.names[n].test(t))return!0;return!1}function u(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=i,e.coerce=u,e.disable=s,e.enable=o,e.enabled=a,e.humanize=n(34),e.names=[],e.skips=[],e.formatters={};var c,l=0},function(t){function e(t){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*c;case"days":case"day":case"d":return n*u;case"hours":case"hour":case"hrs":case"hr":case"h":return n*a;case"minutes":case"minute":case"mins":case"min":case"m":return n*s;case"seconds":case"second":case"secs":case"sec":case"s":return n*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}function n(t){return t>=u?Math.round(t/u)+"d":t>=a?Math.round(t/a)+"h":t>=s?Math.round(t/s)+"m":t>=o?Math.round(t/o)+"s":t+"ms"}function r(t){return i(t,u,"day")||i(t,a,"hour")||i(t,s,"minute")||i(t,o,"second")||t+" ms"}function i(t,e,n){return e>t?void 0:1.5*e>t?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var o=1e3,s=60*o,a=60*s,u=24*a,c=365.25*u;t.exports=function(t,i){return i=i||{},"string"==typeof t?e(t):i["long"]?r(t):n(t)}},function(t){function e(t){var e=4/11,n=8/11,r=.9,i=4356/361,o=35442/1805,s=16061/1805,a=t*t;return e>t?7.5625*a:n>t?9.075*a-9.9*t+3.4:r>t?i*a-o*t+s:10.8*t*t-20.52*t+10.72}t.exports=e},function(t,e,n){(function(t){function t(e,n,r){if(!(this instanceof t))return new t(e,n,r);var i,o=typeof e;if("number"===o)i=+e;else if("string"===o)i=t.byteLength(e,n);else{if("object"!==o||null===e)throw new TypeError("must start with number, buffer, array or string");"Buffer"===e.type&&L(e.data)&&(e=e.data),i=+e.length}if(i>F)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+F.toString(16)+" bytes");0>i?i=0:i>>>=0;var s=this;t.TYPED_ARRAY_SUPPORT?s=t._augment(new Uint8Array(i)):(s.length=i,s._isBuffer=!0);var a;if(t.TYPED_ARRAY_SUPPORT&&"number"==typeof e.byteLength)s._set(e);else if(E(e))if(t.isBuffer(e))for(a=0;i>a;a++)s[a]=e.readUInt8(a);else for(a=0;i>a;a++)s[a]=(e[a]%256+256)%256;else if("string"===o)s.write(e,0,n);else if("number"===o&&!t.TYPED_ARRAY_SUPPORT&&!r)for(a=0;i>a;a++)s[a]=0;return i>0&&i<=t.poolSize&&(s.parent=B),s}function r(e,n,i){if(!(this instanceof r))return new r(e,n,i);var o=new t(e,n,i);return delete o.parent,o}function i(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;r>s;s++){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");t[n+s]=a}return s}function o(t,e,n,r){var i=M(A(e,t.length-n),t,n,r);return i}function s(t,e,n,r){var i=M(j(e),t,n,r);return i}function a(t,e,n,r){return s(t,e,n,r)}function u(t,e,n,r){var i=M(O(e),t,n,r);return i}function c(t,e,n,r){var i=M(k(e,t.length-n),t,n,r);return i}function l(t,e,n){return P.fromByteArray(0===e&&n===t.length?t:t.slice(e,n))}function h(t,e,n){var r="",i="";n=Math.min(t.length,n);for(var o=e;n>o;o++)t[o]<=127?(r+=R(i)+String.fromCharCode(t[o]),i=""):i+="%"+t[o].toString(16);return r+R(i)}function f(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;n>i;i++)r+=String.fromCharCode(127&t[i]);return r}function p(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;n>i;i++)r+=String.fromCharCode(t[i]);return r}function d(t,e,n){var r=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=e;n>o;o++)i+=C(t[o]);return i}function m(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function g(t,e,n){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function v(e,n,r,i,o,s){if(!t.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(n>o||s>n)throw new RangeError("value is out of bounds");if(r+i>e.length)throw new RangeError("index out of range")}function y(t,e,n,r){0>e&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);o>i;i++)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function b(t,e,n,r){0>e&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);o>i;i++)t[n+i]=e>>>8*(r?i:3-i)&255}function x(t,e,n,r,i,o){if(e>i||o>e)throw new RangeError("value is out of bounds");if(n+r>t.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function w(t,e,n,r,i){return i||x(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),I.write(t,e,n,r,23,4),n+4}function _(t,e,n,r,i){return i||x(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),I.write(t,e,n,r,52,8),n+8}function T(t){if(t=S(t).replace(N,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function S(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function E(e){return L(e)||t.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function C(t){return 16>t?"0"+t.toString(16):t.toString(16)}function A(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],s=0;r>s;s++){if(n=t.charCodeAt(s),n>55295&&57344>n){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(56320>n){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&((e-=3)>-1&&o.push(239,191,189),i=null);if(128>n){if((e-=1)<0)break;o.push(n)}else if(2048>n){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(2097152>n))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function j(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function k(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);s++)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function O(t){return P.toByteArray(T(t))}function M(t,e,n,r){for(var i=0;r>i&&!(i+n>=e.length||i>=t.length);i++)e[i+n]=t[i];return i}function R(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
var P=n(66),I=n(67),L=n(68);e.Buffer=t,e.SlowBuffer=r,e.INSPECT_MAX_BYTES=50,t.poolSize=8192;var F=1073741823,B={};t.TYPED_ARRAY_SUPPORT=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(n){return!1}}(),t.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.compare=function(e,n){if(!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(e===n)return 0;for(var r=e.length,i=n.length,o=0,s=Math.min(r,i);s>o&&e[o]===n[o];o++);return o!==s&&(r=e[o],i=n[o]),i>r?-1:r>i?1:0},t.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,n){if(!L(e))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===e.length)return new t(0);if(1===e.length)return e[0];var r;if(void 0===n)for(n=0,r=0;r<e.length;r++)n+=e[r].length;var i=new t(n),o=0;for(r=0;r<e.length;r++){var s=e[r];s.copy(i,o),o+=s.length}return i},t.byteLength=function(t,e){var n;switch(t+="",e||"utf8"){case"ascii":case"binary":case"raw":n=t.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*t.length;break;case"hex":n=t.length>>>1;break;case"utf8":case"utf-8":n=A(t).length;break;case"base64":n=O(t).length;break;default:n=t.length}return n},t.prototype.length=void 0,t.prototype.parent=void 0,t.prototype.toString=function(t,e,n){var r=!1;if(e>>>=0,n=void 0===n||1/0===n?this.length:n>>>0,t||(t="utf8"),0>e&&(e=0),n>this.length&&(n=this.length),e>=n)return"";for(;;)switch(t){case"hex":return d(this,e,n);case"utf8":case"utf-8":return h(this,e,n);case"ascii":return f(this,e,n);case"binary":return p(this,e,n);case"base64":return l(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===t.compare(this,e)},t.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},t.prototype.compare=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:t.compare(this,e)},t.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},t.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},t.prototype.write=function(t,e,n,r){if(isFinite(e))isFinite(n)||(r=n,n=void 0);else{var l=r;r=e,e=n,n=l}if(e=Number(e)||0,0>n||0>e||e>this.length)throw new RangeError("attempt to write outside buffer bounds");var h=this.length-e;n?(n=Number(n),n>h&&(n=h)):n=h,r=String(r||"utf8").toLowerCase();var f;switch(r){case"hex":f=i(this,t,e,n);break;case"utf8":case"utf-8":f=o(this,t,e,n);break;case"ascii":f=s(this,t,e,n);break;case"binary":f=a(this,t,e,n);break;case"base64":f=u(this,t,e,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":f=c(this,t,e,n);break;default:throw new TypeError("Unknown encoding: "+r)}return f},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},t.prototype.slice=function(e,n){var r=this.length;e=~~e,n=void 0===n?r:~~n,0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),0>n?(n+=r,0>n&&(n=0)):n>r&&(n=r),e>n&&(n=e);var i;if(t.TYPED_ARRAY_SUPPORT)i=t._augment(this.subarray(e,n));else{var o=n-e;i=new t(o,void 0,!0);for(var s=0;o>s;s++)i[s]=this[s+e]}return i.length&&(i.parent=this.parent||this),i},t.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||g(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},t.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||g(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},t.prototype.readUInt8=function(t,e){return e||g(t,1,this.length),this[t]},t.prototype.readUInt16LE=function(t,e){return e||g(t,2,this.length),this[t]|this[t+1]<<8},t.prototype.readUInt16BE=function(t,e){return e||g(t,2,this.length),this[t]<<8|this[t+1]},t.prototype.readUInt32LE=function(t,e){return e||g(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},t.prototype.readUInt32BE=function(t,e){return e||g(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},t.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||g(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},t.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||g(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},t.prototype.readInt8=function(t,e){return e||g(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},t.prototype.readInt16LE=function(t,e){e||g(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt16BE=function(t,e){e||g(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt32LE=function(t,e){return e||g(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},t.prototype.readInt32BE=function(t,e){return e||g(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},t.prototype.readFloatLE=function(t,e){return e||g(t,4,this.length),I.read(this,t,!0,23,4)},t.prototype.readFloatBE=function(t,e){return e||g(t,4,this.length),I.read(this,t,!1,23,4)},t.prototype.readDoubleLE=function(t,e){return e||g(t,8,this.length),I.read(this,t,!0,52,8)},t.prototype.readDoubleBE=function(t,e){return e||g(t,8,this.length),I.read(this,t,!1,52,8)},t.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||v(this,t,e,n,Math.pow(2,8*n),0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i>>>0&255;return e+n},t.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||v(this,t,e,n,Math.pow(2,8*n),0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o>>>0&255;return e+n},t.prototype.writeUInt8=function(e,n,r){return e=+e,n>>>=0,r||v(this,e,n,1,255,0),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[n]=e,n+1},t.prototype.writeUInt16LE=function(e,n,r){return e=+e,n>>>=0,r||v(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e,this[n+1]=e>>>8):y(this,e,n,!0),n+2},t.prototype.writeUInt16BE=function(e,n,r){return e=+e,n>>>=0,r||v(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=e):y(this,e,n,!1),n+2},t.prototype.writeUInt32LE=function(e,n,r){return e=+e,n>>>=0,r||v(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=e):b(this,e,n,!0),n+4},t.prototype.writeUInt32BE=function(e,n,r){return e=+e,n>>>=0,r||v(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=e):b(this,e,n,!1),n+4},t.prototype.writeIntLE=function(t,e,n,r){t=+t,e>>>=0,r||v(this,t,e,n,Math.pow(2,8*n-1)-1,-Math.pow(2,8*n-1));var i=0,o=1,s=0>t?1:0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=(t/o>>0)-s&255;return e+n},t.prototype.writeIntBE=function(t,e,n,r){t=+t,e>>>=0,r||v(this,t,e,n,Math.pow(2,8*n-1)-1,-Math.pow(2,8*n-1));var i=n-1,o=1,s=0>t?1:0;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=(t/o>>0)-s&255;return e+n},t.prototype.writeInt8=function(e,n,r){return e=+e,n>>>=0,r||v(this,e,n,1,127,-128),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[n]=e,n+1},t.prototype.writeInt16LE=function(e,n,r){return e=+e,n>>>=0,r||v(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=e,this[n+1]=e>>>8):y(this,e,n,!0),n+2},t.prototype.writeInt16BE=function(e,n,r){return e=+e,n>>>=0,r||v(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=e):y(this,e,n,!1),n+2},t.prototype.writeInt32LE=function(e,n,r){return e=+e,n>>>=0,r||v(this,e,n,4,2147483647,-2147483648),t.TYPED_ARRAY_SUPPORT?(this[n]=e,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24):b(this,e,n,!0),n+4},t.prototype.writeInt32BE=function(e,n,r){return e=+e,n>>>=0,r||v(this,e,n,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=e):b(this,e,n,!1),n+4},t.prototype.writeFloatLE=function(t,e,n){return w(this,t,e,!0,n)},t.prototype.writeFloatBE=function(t,e,n){return w(this,t,e,!1,n)},t.prototype.writeDoubleLE=function(t,e,n){return _(this,t,e,!0,n)},t.prototype.writeDoubleBE=function(t,e,n){return _(this,t,e,!1,n)},t.prototype.copy=function(e,n,r,i){var o=this;if(r||(r=0),i||0===i||(i=this.length),n>=e.length&&(n=e.length),n||(n=0),i>0&&r>i&&(i=r),i===r)return 0;if(0===e.length||0===o.length)return 0;if(0>n)throw new RangeError("targetStart out of bounds");if(0>r||r>=o.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-n<i-r&&(i=e.length-n+r);var s=i-r;if(1e3>s||!t.TYPED_ARRAY_SUPPORT)for(var a=0;s>a;a++)e[a+n]=this[a+r];else e._set(this.subarray(r,r+s),n);return s},t.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),e>n)throw new RangeError("end < start");if(n!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof t)for(r=e;n>r;r++)this[r]=t;else{var i=A(t.toString()),o=i.length;for(r=e;n>r;r++)this[r]=i[r%o]}return this}},t.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(t.TYPED_ARRAY_SUPPORT)return new t(this).buffer;for(var e=new Uint8Array(this.length),n=0,r=e.length;r>n;n+=1)e[n]=this[n];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var D=t.prototype;t._augment=function(e){return e.constructor=t,e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=D.get,e.set=D.set,e.write=D.write,e.toString=D.toString,e.toLocaleString=D.toString,e.toJSON=D.toJSON,e.equals=D.equals,e.compare=D.compare,e.copy=D.copy,e.slice=D.slice,e.readUIntLE=D.readUIntLE,e.readUIntBE=D.readUIntBE,e.readUInt8=D.readUInt8,e.readUInt16LE=D.readUInt16LE,e.readUInt16BE=D.readUInt16BE,e.readUInt32LE=D.readUInt32LE,e.readUInt32BE=D.readUInt32BE,e.readIntLE=D.readIntLE,e.readIntBE=D.readIntBE,e.readInt8=D.readInt8,e.readInt16LE=D.readInt16LE,e.readInt16BE=D.readInt16BE,e.readInt32LE=D.readInt32LE,e.readInt32BE=D.readInt32BE,e.readFloatLE=D.readFloatLE,e.readFloatBE=D.readFloatBE,e.readDoubleLE=D.readDoubleLE,e.readDoubleBE=D.readDoubleBE,e.writeUInt8=D.writeUInt8,e.writeUIntLE=D.writeUIntLE,e.writeUIntBE=D.writeUIntBE,e.writeUInt16LE=D.writeUInt16LE,e.writeUInt16BE=D.writeUInt16BE,e.writeUInt32LE=D.writeUInt32LE,e.writeUInt32BE=D.writeUInt32BE,e.writeIntLE=D.writeIntLE,e.writeIntBE=D.writeIntBE,e.writeInt8=D.writeInt8,e.writeInt16LE=D.writeInt16LE,e.writeInt16BE=D.writeInt16BE,e.writeInt32LE=D.writeInt32LE,e.writeInt32BE=D.writeInt32BE,e.writeFloatLE=D.writeFloatLE,e.writeFloatBE=D.writeFloatBE,e.writeDoubleLE=D.writeDoubleLE,e.writeDoubleBE=D.writeDoubleBE,e.fill=D.fill,e.inspect=D.inspect,e.toArrayBuffer=D.toArrayBuffer,e};var N=/[^+\/0-9A-z\-]/g}).call(e,n(36).Buffer)},function(t,e,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,n){if(t&&c(t)&&t instanceof r)return t;var i=new r;return i.parse(t,e,n),i}function o(t){return u(t)&&(t=i(t)),t instanceof r?t.format():r.prototype.format.call(t)}function s(t,e){return i(t,!1,!0).resolve(e)}function a(t,e){return t?i(t,!1,!0).resolveObject(e):e}function u(t){return"string"==typeof t}function c(t){return"object"==typeof t&&null!==t}function l(t){return null===t}function h(t){return null==t}var f=n(69);e.parse=i,e.resolve=s,e.resolveObject=a,e.format=o,e.Url=r;var p=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,m=["<",">",'"',"`"," ","\r","\n","	"],g=["{","}","|","\\","^","`"].concat(m),v=["'"].concat(g),y=["%","/","?",";","#"].concat(v),b=["/","?","#"],x=255,w=/^[a-z0-9A-Z_-]{0,63}$/,_=/^([a-z0-9A-Z_-]{0,63})(.*)$/,T={javascript:!0,"javascript:":!0},S={javascript:!0,"javascript:":!0},E={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},C=n(72);r.prototype.parse=function(t,e,n){if(!u(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t;r=r.trim();var i=p.exec(r);if(i){i=i[0];var o=i.toLowerCase();this.protocol=o,r=r.substr(i.length)}if(n||i||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var s="//"===r.substr(0,2);!s||i&&S[i]||(r=r.substr(2),this.slashes=!0)}if(!S[i]&&(s||i&&!E[i])){for(var a=-1,c=0;c<b.length;c++){var l=r.indexOf(b[c]);-1!==l&&(-1===a||a>l)&&(a=l)}var h,d;d=-1===a?r.lastIndexOf("@"):r.lastIndexOf("@",a),-1!==d&&(h=r.slice(0,d),r=r.slice(d+1),this.auth=decodeURIComponent(h)),a=-1;for(var c=0;c<y.length;c++){var l=r.indexOf(y[c]);-1!==l&&(-1===a||a>l)&&(a=l)}-1===a&&(a=r.length),this.host=r.slice(0,a),r=r.slice(a),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var g=this.hostname.split(/\./),c=0,A=g.length;A>c;c++){var j=g[c];if(j&&!j.match(w)){for(var k="",O=0,M=j.length;M>O;O++)k+=j.charCodeAt(O)>127?"x":j[O];if(!k.match(w)){var R=g.slice(0,c),P=g.slice(c+1),I=j.match(_);I&&(R.push(I[1]),P.unshift(I[2])),P.length&&(r="/"+P.join(".")+r),this.hostname=R.join(".");break}}}if(this.hostname=this.hostname.length>x?"":this.hostname.toLowerCase(),!m){for(var L=this.hostname.split("."),F=[],c=0;c<L.length;++c){var B=L[c];F.push(B.match(/[^A-Za-z0-9_-]/)?"xn--"+f.encode(B):B)}this.hostname=F.join(".")}var D=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+D,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!T[o])for(var c=0,A=v.length;A>c;c++){var q=v[c],U=encodeURIComponent(q);U===q&&(U=escape(q)),r=r.split(q).join(U)}var W=r.indexOf("#");-1!==W&&(this.hash=r.substr(W),r=r.slice(0,W));var G=r.indexOf("?");if(-1!==G?(this.search=r.substr(G),this.query=r.substr(G+1),e&&(this.query=C.parse(this.query)),r=r.slice(0,G)):e&&(this.search="",this.query={}),r&&(this.pathname=r),E[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var D=this.pathname||"",B=this.search||"";this.path=D+B}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&c(this.query)&&Object.keys(this.query).length&&(o=C.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||E[e])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+i+n+s+r},r.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(u(t)){var e=new r;e.parse(t,!1,!0),t=e}var n=new r;if(Object.keys(this).forEach(function(t){n[t]=this[t]},this),n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(n[e]=t[e])}),E[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(t.protocol&&t.protocol!==n.protocol){if(!E[t.protocol])return Object.keys(t).forEach(function(e){n[e]=t[e]}),n.href=n.format(),n;if(n.protocol=t.protocol,t.host||S[t.protocol])n.pathname=t.pathname;else{for(var i=(t.pathname||"").split("/");i.length&&!(t.host=i.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),n.pathname=i.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var o=n.pathname||"",s=n.search||"";n.path=o+s}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var a=n.pathname&&"/"===n.pathname.charAt(0),c=t.host||t.pathname&&"/"===t.pathname.charAt(0),f=c||a||n.host&&t.pathname,p=f,d=n.pathname&&n.pathname.split("/")||[],i=t.pathname&&t.pathname.split("/")||[],m=n.protocol&&!E[n.protocol];if(m&&(n.hostname="",n.port=null,n.host&&(""===d[0]?d[0]=n.host:d.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===i[0]?i[0]=t.host:i.unshift(t.host)),t.host=null),f=f&&(""===i[0]||""===d[0])),c)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,d=i;else if(i.length)d||(d=[]),d.pop(),d=d.concat(i),n.search=t.search,n.query=t.query;else if(!h(t.search)){if(m){n.hostname=n.host=d.shift();var g=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;g&&(n.auth=g.shift(),n.host=n.hostname=g.shift())}return n.search=t.search,n.query=t.query,l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!d.length)return n.pathname=null,n.path=n.search?"/"+n.search:null,n.href=n.format(),n;for(var v=d.slice(-1)[0],y=(n.host||t.host)&&("."===v||".."===v)||""===v,b=0,x=d.length;x>=0;x--)v=d[x],"."==v?d.splice(x,1):".."===v?(d.splice(x,1),b++):b&&(d.splice(x,1),b--);if(!f&&!p)for(;b--;b)d.unshift("..");!f||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),y&&"/"!==d.join("/").substr(-1)&&d.push("");var w=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(m){n.hostname=n.host=w?"":d.length?d.shift():"";var g=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;g&&(n.auth=g.shift(),n.host=n.hostname=g.shift())}return f=f||n.host&&d.length,f&&!w&&d.unshift(""),d.length?n.pathname=d.join("/"):(n.pathname=null,n.path=null),l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=d.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){"use strict";function r(t){return{as:function(e,n){return new Promise(function(r,o){var s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType=e,s.onload=function(){200===+s.status?r(s.response):o(new Error("Unable to download "+t+": HTTP "+s.status))},s.onerror=function(){return o(new Error("Unable to download "+t))},n&&(n.formatter=i,s.onprogress=function(t){return n.report(t.loaded,t.total)}),s.send(null)})}}}e.download=r;var i=n(29).BYTES_FORMATTER;e["default"]=r,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(9)),o=new i({beat:Number,time:Number,position:Number});e.GameEvent=o,e["default"]=o,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";function r(t){var e=t.createGain();e.connect(t.destination),e.disconnect()}var i=function(t){return t&&t.__esModule?t["default"]:t},o=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};e.unmuteAudio=r;var a=i(n(16)),u=i(n(22)),c=e.SamplingMaster=function(){function t(e){s(this,t),this._audioContext=e||u,this._samples=[],this._instances=new Set}return o(t,{unmute:{value:function(){r(this._audioContext)}},audioContext:{get:function(){return this._audioContext}},destroy:{value:function(){if(!this._destroyed){this._destroyed=!0;var t=!0,e=!1,n=void 0;try{for(var r,i=this._samples[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;o.destroy()}}catch(s){e=!0,n=s}finally{try{!t&&i["return"]&&i["return"]()}finally{if(e)throw n}}var a=!0,u=!1,c=void 0;try{for(var l,h=this._instances[Symbol.iterator]();!(a=(l=h.next()).done);a=!0){var f=l.value;f.destroy()}}catch(s){u=!0,c=s}finally{try{!a&&h["return"]&&h["return"]()}finally{if(u)throw c}}this._samples=null,this._instances=null}}},sample:{value:function(t){var e=this;return this._coerceToArrayBuffer(t).then(function(t){return e._decodeAudio(t)}).then(function(t){if(e._destroyed)throw new Error("SamplingMaster already destroyed!");var n=new l(e,t);return e._samples.push(n),n})}},_coerceToArrayBuffer:{value:function(t){return t instanceof ArrayBuffer?Promise.resolve(t):a(t).as("arraybuffer")}},_decodeAudio:{value:function(t){var e=this;return new Promise(function(n,r){e.audioContext.decodeAudioData(t,function(t){n(t)},function(t){r("Unable to decode audio: "+t)})})}},_startPlaying:{value:function(t){this._instances.add(t)}},_stoppedPlaying:{value:function(t){this._instances["delete"](t)}}}),t}(),l=function(){function t(e,n){s(this,t),this._master=e,this._buffer=n}return o(t,{play:{value:function(t,e){return new h(this._master,this._buffer,t,e)}},destroy:{value:function(){this._master=null,this._buffer=null}}}),t}(),h=function(){function t(e,n,r,i){var o=this;s(this,t),r=r||0,this._master=e;var a=e.audioContext,u=a.createBufferSource();u.buffer=n,u.onended=function(){return o.stop()};var c=a.createGain();u.connect(c),c.connect(i||a.destination),this._source=u,this._gain=c,u.start(r?Math.max(0,a.currentTime+r):0),this._master._startPlaying(this)}return o(t,{stop:{value:function(){this._source&&(this._source.stop(0),this._source.disconnect(),this._gain.disconnect(),this._source=null,this._gain=null,this._master._stoppedPlaying(this),this.onstop&&this.onstop())}},bad:{value:function(){this._source&&(this._source.playbackRate.value=Math.random()<.5?Math.pow(2,1/12):Math.pow(2,-1/12))}},destroy:{value:function(){this.stop()}}}),t}();e["default"]=c,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){function r(){this.headers=new i,this.objects=new o,this.timeSignatures=new s}var i=n(42),o=n(43),s=n(45);t.exports=r,r.prototype.measureToBeat=function(t,e){return this.timeSignatures.measureToBeat(t,e)}},function(t){function e(){this._data={},this._dataAll={}}t.exports=e,e.prototype.each=function(t){for(var e in this._data)t(e,this._data[e])},e.prototype.get=function(t){return this._data[t.toLowerCase()]},e.prototype.getAll=function(t){return this._dataAll[t.toLowerCase()]},e.prototype.set=function(t,e){var n=t.toLowerCase();this._data[n]=e,(this._dataAll[n]||(this._dataAll[n]=[])).push(e)}},function(t){function e(){this._objects=[]}t.exports=e,e.prototype.add=function(t){if("01"!==t.channel)for(var e=0;e<this._objects.length;e++){var n=this._objects[e];if(n.channel===t.channel&&n.measure===t.measure&&n.fraction===t.fraction)return void(this._objects[e]=t)}this._objects.push(t)},e.prototype.all=function(){return this._objects.slice()},e.prototype.allSorted=function(){var t=this.all();return t.sort(function(t,e){return t.measure+t.fraction-(e.measure+e.fraction)}),t}},function(t,e,n){function r(t){this._segments=t.map(i)}var i=n(61);t.exports=r,r.prototype.t=function(t){for(var e=0;e<this._segments.length;e++)if(e+1>=this._segments.length||t<=this._segments[e+1].x){var n=this._segments[e];return n.t+(t-n.x)/n.dx}},r.prototype.x=function(t){for(var e=0;e<this._segments.length;e++)if(e+1>=this._segments.length||t<=this._segments[e+1].t){var n=this._segments[e];return n.x+(t-n.t)*n.dx}}},function(t){function e(){this._values={}}t.exports=e,e.prototype.set=function(t,e){this._values[t]=e},e.prototype.get=function(t){return this._values[t]||1},e.prototype.getBeats=function(t){return 4*this.get(t)},e.prototype.measureToBeat=function(t,e){for(var n=0,r=0;t>r;r++)n+=this.getBeats(r);return n+this.getBeats(t)*e}},function(t){function e(t){var e=!1;return{when:function(n,r){if(e)return this;var i=t.match(n);return i&&(e=!0,r(i)),this},"else":function(t){return e?this:void t()}}}t.exports=e},function(t){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){(function(e){t.exports="undefined"!=typeof window?window:"undefined"!=typeof e?e:{}}).call(e,function(){return this}())},,function(t,e,n){"use strict";function r(t,e,n){return 1-(n-t)/(e-t)}function i(t){return t.position}var o=function(t){return t&&t.__esModule?t["default"]:t},s=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},u=o(n(2)),c=e.NoteArea=function(){function t(e,n){a(this,t),this._notes=u.sortBy(i,e),this._barLines=u.sortBy(u.identity,u.map(u.prop("position"),n))}return s(t,{getVisibleNotes:{value:function(t,e,n){var i=[],o=this._notes;n||(n=0);for(var s=0;s<o.length;s++){var a=o[s],u=a.end?!(a.position>e||a.end.position<t-n):!(a.position>e||a.position<t-n);if(u){var c={note:a};if(a.end){var l=r(t,e,a.position),h=r(t,e,a.end.position);c.y=Math.min(l,h),c.height=Math.abs(l-h)}else c.y=r(t,e,a.position);i.push(c)}}return i}},getVisibleBarLines:{value:function(t,e,n){return n||(n=0),this._barLines.filter(function(r){return r>=t-n&&e>=r}).map(function(n){return{id:n,y:r(t,e,n)}})}}}),t}();e["default"]=c,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";function r(){return window.innerWidth<window.innerHeight?"/skins/default/skin_touch.xml":"/skins/default/skin_screen.xml"}e.getSkinUrl=r;var i=n(91).load,o=n(90).Context;e.load=i,e.Context=o,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";function r(t){var e=t.match(/^(\d+)x(\d+)\+(\d+)\+(\d+)$/);return e?new o.Rectangle(+e[3],+e[4],+e[1],+e[2]):null}var i=function(t){return t&&t.__esModule?t["default"]:t};e.parseFrame=r;var o=i(n(3));Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){e.Reader=n(108),e.Compiler=n(58),e.BMSChart=n(41),e.BMSHeaders=n(42),e.BMSObjects=n(43),e.Speedcore=n(44),e.TimeSignatures=n(45),e.Notes=n(59),e.Timing=n(62),e.SongInfo=n(109),e.Keysounds=n(100)},function(t,e,n){var r=n(150);t.exports=function(t,e,n,i){if("number"==typeof t&&"number"==typeof e)return r(t,e,n);var o=Math.min(t.length,e.length);i=i||new Array(o);for(var s=0;o>s;s++)i[s]=r(t[s],e[s],n);return i}},function(t,e){"use strict";e.getName=function(t){var e=t.displayName||t.name;if(!e){var n=t.toString().match(/function ([^\s\(]+)/);e=n&&n[1]}return e},e.toString=function(){if(this.getCall&&this.callCount)for(var t,e,n=this.callCount;n--;){t=this.getCall(n).thisValue;for(e in t)if(t[e]===this)return e}return this.displayName||"sinon fake"},e.create=function(t){var e=function(){};return e.prototype=t,new e}},,function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(9)),o=r(n(39)),s=new i(o,{id:Number,end:i.maybe(o),column:String});e.GameNote=s,e["default"]=s,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){function r(t,e){t.split(/\r\n|\r|\n/).map(function(t){return t.trim()}).forEach(function(t,n){e(t,n+1)})}var i=n(46),o=n(41);e.compile=function(t,e){function n(t,e,n,r){var i=Math.floor(n.length/2);if(0!==i)for(var o=0;i>o;o++){var s=n.substr(2*o,2),u=o/i;"00"!==s&&a.objects.add({measure:t,fraction:u,value:s,channel:e,lineNumber:r})}}function s(t,e){h.warnings.push({lineNumber:t,message:e})}e=e||{};var a=new o,u=e.rng||function(t){return 1+Math.floor(Math.random()*t)},c=[],l=[!1],h={headerSentences:0,channelSentences:0,controlSentences:0,skippedSentences:0,malformedSentences:0,chart:a,warnings:[]};return r(t,function(t,e){var r=!0;if("#"===t.charAt(0)&&(i(t).when(/^#RANDOM\s+(\d+)$/i,function(t){h.controlSentences+=1,c.push(u(+t[1]))}).when(/^#IF\s+(\d+)$/i,function(t){h.controlSentences+=1,l.push(c[c.length-1]!==+t[1])}).when(/^#ENDIF$/i,function(){h.controlSentences+=1,l.pop()})["else"](function(){r=!1}),!r)){var o=l[l.length-1];i(t).when(/^#(\d\d\d)02:(\S*)$/,function(t){h.channelSentences+=1,o||a.timeSignatures.set(+t[1],+t[2])}).when(/^#(\d\d\d)(\S\S):(\S*)$/,function(t){h.channelSentences+=1,o||n(+t[1],t[2],t[3],e)}).when(/^#(\w+)(?:\s+(\S.*))?$/,function(t){h.headerSentences+=1,o||a.headers.set(t[1],t[2])})["else"](function(){s(e,"Invalid command")})}}),h}},function(t,e,n){function r(t){t.forEach(o.validate),this._notes=t}function i(t){this._chart=t}var o=n(60);t.exports=r;var s={IIDX_P1:{11:{column:"1"},12:{column:"2"},13:{column:"3"},14:{column:"4"},15:{column:"5"},18:{column:"6"},19:{column:"7"},16:{column:"SC"}}};r.prototype.count=function(){return this._notes.length},r.prototype.all=function(){return this._notes.slice()},r.fromBMSChart=function(t,e){e=e||{};var n=new i(t);return n.build()},i.prototype.build=function(){return this._notes=[],this._activeLN={},this._lastNote={},this._lnObj=(this._chart.headers.get("lnobj")||"").toLowerCase(),this._channelMapping=s.IIDX_P1,this._objects=this._chart.objects.allSorted(),this._objects.forEach(function(t){this._handle(t)}.bind(this)),new r(this._notes)},i.prototype._handle=function(t){if("01"===t.channel)this._handleNormalNote(t);else switch(t.channel.charAt(0)){case"1":case"2":this._handleNormalNote(t);break;case"5":case"6":this._handleLongNote(t)}},i.prototype._handleNormalNote=function(t){var e=this._normalizeChannel(t.channel),n=this._getBeat(t);if(t.value.toLowerCase()===this._lnObj)this._lastNote[e]&&(this._lastNote[e].endBeat=n);else{var r={beat:n,endBeat:void 0,keysound:t.value,column:this._getColumn(e)};this._lastNote[e]=r,this._notes.push(r)}},i.prototype._handleLongNote=function(t){var e=this._normalizeChannel(t.channel),n=this._getBeat(t);if(this._activeLN[e]){var r=this._activeLN[e];r.endBeat=n,this._notes.push(r),delete this._activeLN[e]}else this._activeLN[e]={beat:n,keysound:t.value,column:this._getColumn(e)}},i.prototype._getBeat=function(t){return this._chart.measureToBeat(t.measure,t.fraction)},i.prototype._getColumn=function(t){return this._channelMapping[t]},i.prototype._normalizeChannel=function(t){return t.replace(/^5/,"1").replace(/^6/,"2")}},function(t,e,n){var r=n(9),i=new r({column:String});t.exports=new r({beat:Number,endBeat:r.maybe(Number),column:r.maybe(i),keysound:String})},function(t,e,n){var r=n(9);t.exports=new r({t:Number,x:Number,dx:Number})},function(t,e,n){function r(t,e){var n={bpm:t,beat:0,seconds:0},r=[{t:0,x:0,dx:t/60}];e=e.slice(),e.sort(function(t,e){return t.beat-e.beat||o[t.type]-o[e.type]}),e.forEach(function(t){var e=t.beat,i=n.seconds+60*(e-n.beat)/n.bpm;switch(t.type){case"bpm":n.bpm=t.bpm,r.push({t:i,x:e,dx:n.bpm/60});break;case"stop":r.push({t:i,x:e,dx:0}),i+=60*(t.stopBeats||0)/n.bpm,r.push({t:i,x:e,dx:n.bpm/60});break;default:throw new Error("Unrecognized segment object!")}n.beat=e,n.seconds=i}),this._speedcore=new i(r)}var i=n(44);t.exports=r;var o={bpm:1,stop:2};r.prototype.beatToSeconds=function(t){return this._speedcore.t(t)},r.prototype.secondsToBeat=function(t){return this._speedcore.x(t)},r.fromBMSChart=function(t){var e=[];return t.objects.all().forEach(function(n){var r,i=t.measureToBeat(n.measure,n.fraction);if("03"===n.channel)r=parseInt(n.value,16),e.push({type:"bpm",beat:i,bpm:r});else if("08"===n.channel)r=t.headers.get("bpm"+n.value),e.push({type:"bpm",beat:i,bpm:r});else if("09"===n.channel){var o=t.headers.get("stop"+n.value)/48;e.push({type:"stop",beat:i,stopBeats:o})}}),new r(+t.headers.get("bpm")||60,e)}},function(t){function e(t){var e=1024*(1<<30),n=1<<30,r=1<<20,i=1024,o=Math.abs(t);return o>=e?Math.round(t/e*100)/100+"tb":o>=n?Math.round(t/n*100)/100+"gb":o>=r?Math.round(t/r*100)/100+"mb":o>=i?Math.round(t/i*100)/100+"kb":t+"b"
}t.exports=function(t){if("number"==typeof t)return e(t);var n=t.match(/^(\d+(?:\.\d+)?) *(kb|mb|gb|tb)$/),r=parseFloat(n[1]),i=n[2],o={kb:1024,mb:1<<20,gb:1<<30,tb:1024*(1<<30)};return o[i]*r}},function(t){"use strict";var e=function(){var t={constructor:function(){return"0"},toString:function(){return"1"},valueOf:function(){return"2"},toLocaleString:function(){return"3"},prototype:function(){return"4"},isPrototypeOf:function(){return"5"},propertyIsEnumerable:function(){return"6"},hasOwnProperty:function(){return"7"},length:function(){return"8"},unique:function(){return"9"}},e=[];for(var n in t)e.push(t[n]());return"0123456789"!==e.join("")}();t.exports=function(t){var n,r,i,o=Array.prototype.slice.call(arguments,1);for(r=0;r<o.length;r++){n=o[r];for(i in n)n.hasOwnProperty(i)&&(t[i]=n[i]);e&&n.hasOwnProperty("toString")&&n.toString!==t.toString&&(t.toString=n.toString)}return t}},function(t,e,n){"use strict";function r(t,e,n,r,i){var o=t.context;c.defineAttribute(this,"name","readonly",e,function(t){throw new TypeError(c.formatter.concat(this,t))}),c.defineAttribute(this,"defaultValue","readonly",n,function(t){throw new TypeError(c.formatter.concat(this,t))}),c.defineAttribute(this,"minValue","readonly",r,function(t){throw new TypeError(c.formatter.concat(this,t))}),c.defineAttribute(this,"maxValue","readonly",i,function(t){throw new TypeError(c.formatter.concat(this,t))}),Object.defineProperty(this,"value",{get:function(){return this._value=this.$valueAtTime(o.currentTime),this._value},set:function(t){if(!c.typeCheck(t,"number")){var e="";throw e+="type ",e+=c.formatter.shouldBeButGot("number",t),new TypeError(c.formatter.concat(this,e))}this._value=t},enumerable:!0}),Object.defineProperties(this,{$name:{value:"AudioParam"},$context:{value:o},$node:{value:t},$inputs:{value:[]},$events:{value:[]}}),this._value=this.defaultValue,this._tick=-1}function i(t,e){var n,r=e.time,i=t.$events,o=0,s=i.length;for(n=0;s>n;++n){if(i[n].time===r&&i[n].type===e.type){o=1;break}if(i[n].time>r)break}i.splice(n,o,e)}function o(t,e,n,r,i,o){var s=(r-i)/(o-i);return(1-s)*e+s*n}function s(t,e,n,r,i,o){var s=(r-i)/(o-i);return e>0&&n>0?e*Math.pow(n/e,s):t}function a(t,e,n,r,i){return e+(t-e)*Math.exp((r-n)/i)}function u(t,e,n,r,i){var o=(e-n)/(r-n);return 0>=o?c.defaults(i[0],t):o>=1?c.defaults(i[i.length-1],t):c.defaults(i[i.length*o|0],t)}var c=n(5),l=n(24),h=n(4),f=function(){throw new TypeError("Illegal constructor")};c.inherits(r,f),r.exports=f,f.prototype.setValueAtTime=function(t,e){var n=new l(this,"setValueTime",[{name:"value",type:"number"},{name:"startTime",type:"number"}]);n.validateArguments(arguments,function(t){throw new TypeError(n.form+"; "+t)}),i(this,{type:"SetValue",value:t,time:e})},f.prototype.linearRampToValueAtTime=function(t,e){var n=new l(this,"linearRampToValueAtTime",[{name:"value",type:"number"},{name:"endTime",type:"number"}]);n.validateArguments(arguments,function(t){throw new TypeError(n.form+"; "+t)}),i(this,{type:"LinearRampToValue",value:t,time:e})},f.prototype.exponentialRampToValueAtTime=function(t,e){var n=new l(this,"exponentialRampToValueAtTime",[{name:"value",type:"number"},{name:"endTime",type:"number"}]);n.validateArguments(arguments,function(t){throw new TypeError(n.form+"; "+t)}),i(this,{type:"ExponentialRampToValue",value:t,time:e})},f.prototype.setTargetAtTime=function(t,e,n){var r=new l(this,"setTargetAtTime",[{name:"target",type:"number"},{name:"startTime",type:"number"},{name:"timeConstant",type:"number"}]);r.validateArguments(arguments,function(t){throw new TypeError(r.form+"; "+t)}),i(this,{type:"SetTarget",value:t,time:e,timeConstant:n})},f.prototype.setValueCurveAtTime=function(t,e,n){var r=new l(this,"setValueCurveAtTime",[{name:"values",type:"Float32Array"},{name:"startTime",type:"number"},{name:"duration",type:"number"}]);r.validateArguments(arguments,function(t){throw new TypeError(r.form+"; "+t)}),i(this,{type:"SetValueCurve",time:e,duration:n,curve:t})},f.prototype.cancelScheduledValues=function(t){var e=new l(this,"cancelScheduledValues",[{name:"startTime",type:"number"}]);e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)});for(var n=this.$events,r=0,i=n.length;i>r;++r)if(n[r].time>=t)return n.splice(r)},r.prototype.toJSON=function(t){return c.toJSON(this,function(t,e){var n={};return n.value=t.value,n.inputs=t.$inputs.map(function(t){return t.toJSON(e)}),n},t)},r.prototype.$valueAtTime=function(t){t=c.toSeconds(t);for(var e,n=this._value,r=this.$events,i=0;i<r.length;i++){var l=r[i],h=r[i+1];if(t<l.time)break;if(e=Math.min(t,h?h.time:t),h&&"LinearRampToValue"===h.type)n=o(n,l.value,h.value,e,l.time,h.time);else if(h&&"ExponentialRampToValue"===h.type)n=s(n,l.value,h.value,e,l.time,h.time);else switch(l.type){case"SetValue":case"LinearRampToValue":case"ExponentialRampToValue":n=l.value;break;case"SetTarget":n=a(n,l.value,e,l.time,l.timeConstant);break;case"SetValueCurve":n=u(n,e,l.time,l.time+l.duration,l.curve)}}return n},r.prototype.$process=function(t,e){this._tick!==e&&(this._tick=e,this.$inputs.forEach(function(n){n.$process(t,e)}))},t.exports=h.AudioParam=r},function(t,e){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===s||e===h?62:e===a||e===f?63:u>e?-1:u+10>e?e-u+26+26:l+26>e?e-l:c+26>e?e-c+26:void 0}function r(t){function n(t){c[h++]=t}var r,i,s,a,u,c;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=t.length;u="="===t.charAt(l-2)?2:"="===t.charAt(l-1)?1:0,c=new o(3*t.length/4-u),s=u>0?t.length-4:t.length;var h=0;for(r=0,i=0;s>r;r+=4,i+=3)a=e(t.charAt(r))<<18|e(t.charAt(r+1))<<12|e(t.charAt(r+2))<<6|e(t.charAt(r+3)),n((16711680&a)>>16),n((65280&a)>>8),n(255&a);return 2===u?(a=e(t.charAt(r))<<2|e(t.charAt(r+1))>>4,n(255&a)):1===u&&(a=e(t.charAt(r))<<10|e(t.charAt(r+1))<<4|e(t.charAt(r+2))>>2,n(a>>8&255),n(255&a)),c}function i(t){function e(t){return n.charAt(t)}function r(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var i,o,s,a=t.length%3,u="";for(i=0,s=t.length-a;s>i;i+=3)o=(t[i]<<16)+(t[i+1]<<8)+t[i+2],u+=r(o);switch(a){case 1:o=t[t.length-1],u+=e(o>>2),u+=e(o<<4&63),u+="==";break;case 2:o=(t[t.length-2]<<8)+t[t.length-1],u+=e(o>>10),u+=e(o>>4&63),u+=e(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),u="0".charCodeAt(0),c="a".charCodeAt(0),l="A".charCodeAt(0),h="-".charCodeAt(0),f="_".charCodeAt(0);t.toByteArray=r,t.fromByteArray=i}(e)},function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,h=n?i-1:0,f=n?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+h],h+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+t[e+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return s?0/0:1/0*(p?-1:1);s+=Math.pow(2,r),o-=c}return(p?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,m=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||1/0===e?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+h>=1?f/u:f*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+p]=255&s,p+=d,s/=256,c-=8);t[n+p-d]|=128*m}},function(t){var e=Array.isArray,n=Object.prototype.toString;t.exports=e||function(t){return!!t&&"[object Array]"==n.call(t)}},function(t,e,n){var r;(function(t,i){!function(o){function s(t){throw RangeError(R[t])}function a(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function u(t,e){var n=t.split("@"),r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(M,".");var i=t.split("."),o=a(i,e).join(".");return r+o}function c(t){for(var e,n,r=[],i=0,o=t.length;o>i;)e=t.charCodeAt(i++),e>=55296&&56319>=e&&o>i?(n=t.charCodeAt(i++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--)):r.push(e);return r}function l(t){return a(t,function(t){var e="";return t>65535&&(t-=65536,e+=L(t>>>10&1023|55296),t=56320|1023&t),e+=L(t)}).join("")}function h(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:w}function f(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function p(t,e,n){var r=0;for(t=n?I(t/E):t>>1,t+=I(t/e);t>P*T>>1;r+=w)t=I(t/P);return I(r+(P+1)*t/(t+S))}function d(t){var e,n,r,i,o,a,u,c,f,d,m=[],g=t.length,v=0,y=A,b=C;for(n=t.lastIndexOf(j),0>n&&(n=0),r=0;n>r;++r)t.charCodeAt(r)>=128&&s("not-basic"),m.push(t.charCodeAt(r));for(i=n>0?n+1:0;g>i;){for(o=v,a=1,u=w;i>=g&&s("invalid-input"),c=h(t.charCodeAt(i++)),(c>=w||c>I((x-v)/a))&&s("overflow"),v+=c*a,f=b>=u?_:u>=b+T?T:u-b,!(f>c);u+=w)d=w-f,a>I(x/d)&&s("overflow"),a*=d;e=m.length+1,b=p(v-o,e,0==o),I(v/e)>x-y&&s("overflow"),y+=I(v/e),v%=e,m.splice(v++,0,y)}return l(m)}function m(t){var e,n,r,i,o,a,u,l,h,d,m,g,v,y,b,S=[];for(t=c(t),g=t.length,e=A,n=0,o=C,a=0;g>a;++a)m=t[a],128>m&&S.push(L(m));for(r=i=S.length,i&&S.push(j);g>r;){for(u=x,a=0;g>a;++a)m=t[a],m>=e&&u>m&&(u=m);for(v=r+1,u-e>I((x-n)/v)&&s("overflow"),n+=(u-e)*v,e=u,a=0;g>a;++a)if(m=t[a],e>m&&++n>x&&s("overflow"),m==e){for(l=n,h=w;d=o>=h?_:h>=o+T?T:h-o,!(d>l);h+=w)b=l-d,y=w-d,S.push(L(f(d+b%y,0))),l=I(b/y);S.push(L(f(l,0))),o=p(n,v,r==i),n=0,++r}++n,++e}return S.join("")}function g(t){return u(t,function(t){return k.test(t)?d(t.slice(4).toLowerCase()):t})}function v(t){return u(t,function(t){return O.test(t)?"xn--"+m(t):t})}var y=("object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof i&&i);(y.global===y||y.window===y||y.self===y)&&(o=y);var b,x=2147483647,w=36,_=1,T=26,S=38,E=700,C=72,A=128,j="-",k=/^xn--/,O=/[^\x20-\x7E]/,M=/[\x2E\u3002\uFF0E\uFF61]/g,R={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P=w-_,I=Math.floor,L=String.fromCharCode;b={version:"1.3.2",ucs2:{decode:c,encode:l},decode:d,encode:m,toASCII:v,toUnicode:g},r=function(){return b}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}(this)}).call(e,n(47)(t),function(){return this}())},function(t){"use strict";function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,n,r,i){n=n||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var s=/\+/g;t=t.split(n);var a=1e3;i&&"number"==typeof i.maxKeys&&(a=i.maxKeys);var u=t.length;a>0&&u>a&&(u=a);for(var c=0;u>c;++c){var l,h,f,p,d=t[c].replace(s,"%20"),m=d.indexOf(r);m>=0?(l=d.substr(0,m),h=d.substr(m+1)):(l=d,h=""),f=decodeURIComponent(l),p=decodeURIComponent(h),e(o,f)?Array.isArray(o[f])?o[f].push(p):o[f]=[o[f],p]:o[f]=p}return o}},function(t){"use strict";var e=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,n,r,i){return n=n||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(i){var o=encodeURIComponent(e(i))+r;return Array.isArray(t[i])?t[i].map(function(t){return o+encodeURIComponent(e(t))}).join(n):o+encodeURIComponent(e(t[i]))}).join(n):i?encodeURIComponent(e(i))+r+encodeURIComponent(e(t)):""}},function(t,e,n){"use strict";e.decode=e.parse=n(70),e.encode=e.stringify=n(71)},function(t,e){"use strict";var n=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i=e.WaveFactory=function(){function t(e,n,i){r(this,t),this._master=e,this._samples=n,this._map=i,this._exclusiveInstances=new Map}return n(t,{playAuto:{value:function(t,e){return this._play({keysound:t,delay:e,exclusive:!0})}},playNote:{value:function(t,e){return this._play({keysound:t,delay:e,exclusive:!0})}},playFree:{value:function(t){return this._play({keysound:t,delay:0,exclusive:!1})}},_play:{value:function(t){var e=t.keysound,n=t.delay,r=t.exclusive;r&&this._stopOldExclusiveSound(e,n);var i=this._map[e.toLowerCase()];if(i){var o=this._samples[i];if(o){var s=o.play(n);return r&&this._exclusiveInstances.set(e,s),s}}}},_stopOldExclusiveSound:{value:function(t,e){var n=this._exclusiveInstances.get(t);n&&(setTimeout(function(){return n.stop()},1e3*e),this._exclusiveInstances["delete"](t))}}}),t}();e["default"]=i,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";function r(){var t=(f.keyboard||"").split(",").map(function(t){return+t}),e={};return c(window).keydown(function(t){return e[t.which]=1}).keyup(function(t){return e[t.which]=0}),{get:function(){return{p1_1:e[t[0]||83],p1_2:e[t[1]||68],p1_3:e[t[2]||70],p1_4:e[t[3]||32],p1_5:e[t[4]||74],p1_6:e[t[5]||75],p1_7:e[t[6]||76],p1_SC:e[t[7]||65],start:e[13]}}}}function i(){function t(t){return n.some(function(e){return e.buttons[t].pressed})}function e(t){for(var e=0;e<n.length;e++){var r=n[e];if(Math.abs(r.axes[t])>.01)return r.axes[t]}return 0}var n=[];return window.addEventListener("gamepadconnected",function(t){n.push(t.gamepad)}),{get:function(){return{p1_1:t(3),p1_2:t(6),p1_3:t(2),p1_4:t(7),p1_5:t(1),p1_6:t(4),p1_7:e(3),p1_SC:e(4)}}}}var o=function(t){return t&&t.__esModule?t["default"]:t},s=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t)){for(var n,r=[],i=t[Symbol.iterator]();!(n=i.next()).done&&(r.push(n.value),!e||r.length!==e););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},c=o(n(6)),l=o(n(83)),h=o(n(2)),f=o(n(77)),p=e.GameInput=function(){function t(){u(this,t),this._controls=new Map,this._plugins=[],this.use(new r),this.use(new i)}return a(t,{update:{value:function(){var t=new Map,e=!0,n=!1,r=void 0;try{for(var i,o=this._controls[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=s(i.value,2),u=(a[0],a[1]);u.changed=!1}}catch(c){n=!0,r=c}finally{try{!e&&o["return"]&&o["return"]()}finally{if(n)throw r}}var l=!0,h=!1,f=void 0;try{for(var p,d=this._plugins[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var m=p.value,g=!0,v=!1,y=void 0;try{for(var b,x=m()[Symbol.iterator]();!(g=(b=x.next()).done);g=!0){var w=s(b.value,2),_=w[0],T=w[1];t.set(_,T)}}catch(c){v=!0,y=c}finally{try{!g&&x["return"]&&x["return"]()}finally{if(v)throw y}}}}catch(c){h=!0,f=c}finally{try{!l&&d["return"]&&d["return"]()}finally{if(h)throw f}}var S=!0,E=!1,C=void 0;try{for(var A,j=t[Symbol.iterator]();!(S=(A=j.next()).done);S=!0){var k=s(A.value,2),O=k[0],T=k[1],u=this.get(O);u.value!==T&&(u.changed=!0,u.value=T)}}catch(c){E=!0,C=c}finally{try{!S&&j["return"]&&j["return"]()}finally{if(E)throw C}}}},get:{value:function(t){return this._controls.has(t)||this._controls.set(t,new l),this._controls.get(t)}},use:{value:function(t){var e={};this._plugins.push(function(){var n=t.get(),r=[],i=!0,o=!1,s=void 0;try{for(var a,u=h.union(h.keys(n),h.keys(e))[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var c=a.value,l=+e[c]||0,f=+n[c]||0;l!==f&&r.push([c,f]),e[c]=f}}catch(p){o=!0,s=p}finally{try{!i&&u["return"]&&u["return"]()}finally{if(o)throw s}}return r})}}}),t}();e["default"]=p,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e){"use strict";var n=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i=e.Player=function(){function t(e,n,i){r(this,t),this._notechart=e,this._number=n,this._options={autosound:!!i.autosound,speed:+i.speed,placement:i.placement||"center"}}return n(t,{notechart:{get:function(){return this._notechart}},columns:{get:function(){return this._notechart.columns}},number:{get:function(){return this._number}},options:{get:function(){return this._options}}}),t}();e["default"]=i,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{"default":t}},i=function(t){return t&&t.__esModule?t["default"]:t},o=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},a=i(n(2)),u=r(n(18)),c=e.PlayerStats=function(){function t(e){s(this,t),this.totalCombo=a.sum(a.map(function(t){return e.info(t).combos})(e.notes)),this.combo=0,this.maxCombo=0,this.rawSumJudgmentWeight=0,this.rawTotalComboScore=this._calculateRawTotalComboScore(),this.rawSumComboScore=0,this.poor=!1}return o(t,{score:{get:function(){var t=u.weight(1)*this.totalCombo,e=Math.floor(5e5*this.rawSumJudgmentWeight/t),n=Math.floor(55555*this.rawSumComboScore/this.rawTotalComboScore);return e+n}},handleJudgment:{value:function(t){u.breaksCombo(t)?(this.combo=0,this.poor=!0):(this.combo+=1,this.rawSumComboScore+=this._calculateRawComboScore(this.combo),this.poor=!1),this.rawSumJudgmentWeight+=u.weight(t),this.combo>this.maxCombo&&(this.maxCombo=this.combo)}},_calculateRawTotalComboScore:{value:function(){for(var t=0,e=1;e<=this.totalCombo;e++)t+=this._calculateRawComboScore(e);return t}},_calculateRawComboScore:{value:function(t){return 0===t?0:23>t?1:51>t?2:92>t?3:161>t?4:230>t?5:6}}}),t}();e["default"]=c,Object.defineProperty(e,"__esModule",{value:!0})},,function(t,e,n){"use strict";function r(t){var e=l.map(o,Array.from(t.children("keyframe"))),n={},r=!0,s=!1,a=void 0;try{for(var u,c=e[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){var h=u.value,f=+h.t,p=h.ease||"linear";if(isNaN(f))throw new Error('Expected keyframe to have "t" attribute');for(var d in h)if("t"!==d&&"ease"!==d){var m=+h[d],g=n[d]||(n[d]=i(d));g.keyframes.push({time:f,value:m,ease:p})}}}catch(v){s=!0,a=v}finally{try{!r&&c["return"]&&c["return"]()}finally{if(s)throw a}}return{on:t.attr("on")||"",data:l.values(n)}}function i(t){return{name:t,keyframes:[]}}function o(t){return l.fromPairs(l.map(function(t){return[t.name.toLowerCase(),t.value]},t.attributes))}var s=function(t){return t&&t.__esModule?t["default"]:t},a=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},u=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};e._compile=r,e._attrs=o;var l=s(n(2)),h=s(n(6)),f=s(n(114)),p=l.evolve({data:f}),d=l.pipe(l.prop("data"),l.map(l.prop("name"))),m=e.Animation=function(){function t(e){c(this,t),this._properties=new Set(l.chain(d,e)),this._animations=l.map(p,e),this._events=l.uniq(l.map(l.prop("on"),e))}return u(t,{prop:{value:function(t,e){var n=this;return this._properties.has(t)?function(r){var i=n._getAnimation(r);return i.hasOwnProperty(t)?i[t]:e(r)}:e}},_getAnimation:{value:function(t){var e=l.maxBy(function(e){return t[e]||0},this._events.filter(function(e){return""===e||e in t})),n=t.t-(t[e]||0),r=this._animations.filter(function(t){return t.on===e}),i=r.map(function(t){return t.data.values(n)});return Object.assign.apply(Object,[{}].concat(a(i)))}}},{compile:{value:function(e,n){var i=Array.from(n.children("animation")),o=l.map(function(t){return r(h(t))},i);return new t(o)}}}),t}();e["default"]=m,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";function r(t,e,n){var r=a(t);if(r!==e)throw new TypeError("Expected type of "+n+" to be "+e+", but was "+r)}function i(t){return c.isPrototypeOf(t)}function o(t,e){if(null===e||void 0===e)return!1;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n],i=e[n];if(l.isMatcher(r)){if(!r.test(i))return!1}else if("object"===a(r)){if(!o(r,i))return!1}else if(!l.equal(r,i))return!1}return!0}function s(t,e){return function(n,i){r(n,"string","property");var o=1===arguments.length,s=e+'("'+n+'"';return o||(s+=", "+i),s+=")",l(function(e){return void 0!==e&&null!==e&&t(e,n)?o||l.equal(i,e[n]):!1},s)}}var a=n(231),u=n(55),c={toString:function(){return this.message}};c.or=function(t){if(!arguments.length)throw new TypeError("Matcher expected");i(t)||(t=l(t));var e=this,n=u.create(c);return n.test=function(n){return e.test(n)||t.test(n)},n.message=e.message+".or("+t.message+")",n},c.and=function(t){if(!arguments.length)throw new TypeError("Matcher expected");i(t)||(t=l(t));var e=this,n=u.create(c);return n.test=function(n){return e.test(n)&&t.test(n)},n.message=e.message+".and("+t.message+")",n};var l=function(t,e){var n=u.create(c),r=a(t);switch(r){case"object":if("function"==typeof t.test)return n.test=function(e){return t.test(e)===!0},n.message="match("+u.getName(t.test)+")",n;var i=[];for(var s in t)t.hasOwnProperty(s)&&i.push(s+": "+t[s]);n.test=function(e){return o(t,e)},n.message="match("+i.join(", ")+")";break;case"number":n.test=function(e){return t==e};break;case"string":n.test=function(e){return"string"!=typeof e?!1:-1!==e.indexOf(t)},n.message='match("'+t+'")';break;case"regexp":n.test=function(e){return"string"!=typeof e?!1:t.test(e)};break;case"function":n.test=t,n.message=e?e:"match("+u.getName(t)+")";break;default:n.test=function(e){return l.equal(t,e)}}return n.message||(n.message="match("+t+")"),n};l.isMatcher=i,l.any=l(function(){return!0},"any"),l.defined=l(function(t){return null!==t&&void 0!==t},"defined"),l.truthy=l(function(t){return!!t},"truthy"),l.falsy=l(function(t){return!t},"falsy"),l.same=function(t){return l(function(e){return t===e},"same("+t+")")},l.typeOf=function(t){return r(t,"string","type"),l(function(e){return a(e)===t},'typeOf("'+t+'")')},l.instanceOf=function(t){return r(t,"function","type"),l(function(e){return e instanceof t},"instanceOf("+u.getName(t)+")")},l.has=s(function(t,e){return"object"==typeof t?e in t:void 0!==t[e]},"has"),l.hasOwn=s(function(t,e){return t.hasOwnProperty(e)},"hasOwn"),l.bool=l.typeOf("boolean"),l.number=l.typeOf("number"),l.string=l.typeOf("string"),l.object=l.typeOf("object"),l.func=l.typeOf("function"),l.array=l.typeOf("array"),l.regexp=l.typeOf("regexp"),l.date=l.typeOf("date"),l.equal=function(t,e){return t==e},t.exports=l},function(t,e,n){"use strict";function r(t){return void 0===t&&(t=""),a.Compiler.compile(t).chart}function i(t){return u.fromBMSChart(r(t))}function o(t){return new c(i(t),1,{})}var s=function(t){return t&&t.__esModule?t["default"]:t};e.chart=r,e.notechart=i,e.playerWithBMS=o;var a=s(n(53)),u=s(n(86)),c=s(n(75)),l=s(n(2)),h=l.tap;e.tap=h,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";function r(t){t=a.sortBy(a.prop("time"),t);var e=0;return{next:function(n){for(var r=[];e<t.length&&n>=t[e].time;e++)r.push(t[e]);return r}}}var i=function(t){return t&&t.__esModule?t["default"]:t},o=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},a=i(n(2)),u=i(n(73)),c=n(18).isBad,l=e.PlayerAudio=function(){function t(e){var n=e.player,i=e.samples,o=e.master,a=e.waveFactory;s(this,t);var c=n.notechart;this._waveFactory=a||new u(o,i,c.keysounds),this._autos=r(c.autos),this._notes=r(c.notes),this._played=new Map,this._autosound=!!n.options.autosound}return o(t,{update:{value:function(t,e){this._playAutokeysounds(t),this._playAutosounds(t,e),this._handleSoundNotifications(e&&e.notifications.sounds||[])}},_playAutokeysounds:{value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=this._autos.next(t+1/30)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value;this._waveFactory.playAuto(s.keysound,s.time-t)}}catch(a){n=!0,r=a}finally{try{!e&&o["return"]&&o["return"]()}finally{if(n)throw r}}}},_playAutosounds:{value:function(t,e){var n=this._notes.next(t+1/30),r=e&&e.stats.poor,i=this._autosound&&!r;if(i){var o=!0,s=!1,a=void 0;try{for(var u,c=n[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;this._hitNote(l,l.time-t)}}catch(h){s=!0,a=h}finally{try{!o&&c["return"]&&c["return"]()}finally{if(s)throw a}}}}},_handleSoundNotifications:{value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value,a=s.type,u=s.note;"hit"===a?this._hitNote(u,0,s.judgment):"break"===a?this._breakNote(u):"free"===a&&this._waveFactory.playFree(u.keysound,0)}}catch(c){n=!0,r=c}finally{try{!e&&o["return"]&&o["return"]()}finally{if(n)throw r}}}},_hitNote:{value:function(t,e,n){var r=this._played.get(t);r||(r=this._waveFactory.playNote(t.keysound,e),this._played.set(t,r)),r&&c(n)&&r.bad()}},_breakNote:{value:function(t){var e=this._played.get(t);e&&(console.log(e),e.stop())}}}),t}();e["default"]=l,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s=r(n(50)),a=n(18),u=a.MISSED,c=a.breaksCombo,l=e.PlayerDisplay=function(){function t(e){o(this,t);var n=e.notechart;this._player=e,this._noteArea=new s(n.notes,n.barLines),this._stateful={},this._defaultData={placement:e.options.placement}}return i(t,{update:{value:function(t,e,n){function r(){var t=p.getVisibleBarLines(m,l(),1),e=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value;v("barlines",{key:s.id,y:s.y})}}catch(a){n=!0,r=a}finally{try{!e&&o["return"]&&o["return"]()}finally{if(n)throw r}}}function i(){var t=p.getVisibleNotes(m,l(),1),e=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(e=(o=s.next()).done);e=!0){var a=o.value,c=a.note,h=c.column;if(a.height){var f=n.getNoteJudgment(c),d=n.getNoteStatus(c);v("longnote_"+h,{key:c.id,y:a.y,height:a.height,active:0!==f&&f!==u,missed:"judged"===d&&f===u})}else"judged"!==n.getNoteStatus(c)&&v("note_"+h,{key:c.id,y:a.y})}}catch(g){r=!0,i=g}finally{try{!e&&s["return"]&&s["return"]()}finally{if(r)throw i}}}function o(){var e=n.input,r=!0,i=!1,o=void 0;try{for(var s,a=f.columns[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var u=s.value,c=e.get(u);g[""+u+"_active"]=0!==c.value?1:0,c.changed&&(0!==c.value?d[""+u+"_down"]=t:d[""+u+"_up"]=t)}}catch(l){i=!0,o=l}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw o}}}function s(){var e=n.notifications.judgments,r=e[e.length-1];if(r){var i=-1===r.judgment?"missed":""+r.judgment;d["judge_"+i]=t,d.combo=r.combo}g.score=n.stats.score}function a(){for(var e=n.notifications.judgments,r=0;r<e.length;r++){var i=e[r];c(i.judgment)||(d[""+i.column+"_explode"]=t)}}function l(){return m+5/h()}function h(){return n.speed}var f=this._player,p=this._noteArea,d=this._stateful,m=f.notechart.secondsToPosition(e),g=Object.assign({},this._defaultData),v=function(t,e){return(g[t]||(g[t]=[])).push(e)};return i(),r(),o(),s(),a(),Object.assign(g,d),g}}}),t}();e["default"]=l,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e){"use strict";var n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},r=e.Control=function i(){n(this,i),this.value=0,this.changed=!1};e["default"]=r,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e){"use strict";function n(t){function e(e){var n=t.refs[e];if(n){var r=!0,i=!1,o=void 0;try{for(var s,a=n[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var u=s.value,c=u.getBounds(),l=!0,h=!1,f=void 0;try{for(var p,d=t.input[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var m=p.value;if(c.contains(m.x,m.y))return 1}}catch(g){h=!0,f=g}finally{try{!l&&d["return"]&&d["return"]()}finally{if(h)throw f}}}}catch(g){i=!0,o=g}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw o}}}return 0}function n(){var e=t.refs.p1_SC;if(e){o=null;var n=!0,r=!1,s=void 0;try{for(var a,u=t.input[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var c=a.value,l=!0,h=!1,f=void 0;try{for(var p,d=e[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var m=p.value;if(m.getBounds().contains(c.x,c.y)){o=c.y,d["return"]&&d["return"]();break}}}catch(g){h=!0,f=g}finally{try{!l&&d["return"]&&d["return"]()}finally{if(h)throw f}}if(null!==o){u["return"]&&u["return"]();break}}}catch(g){r=!0,s=g}finally{try{!n&&u["return"]&&u["return"]()}finally{if(r)throw s}}return null===o?(i=null,0):(null===i&&(i=o),o>i+16?i=o-16:i-16>o&&(i=o+16),o>i+4?-1:i-4>o?1:0)}}var i=null,o=null;return{get:function(){var t={};t.p1_SC=n();var i=!0,o=!1,s=void 0;try{for(var a,u=r[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var c=a.value;t[c]=e(c)}}catch(l){o=!0,s=l}finally{try{!i&&u["return"]&&u["return"]()}finally{if(o)throw s}}return t}}}e.TouchPlugin=n;var r=["p1_1","p1_2","p1_3","p1_4","p1_5","p1_6","p1_7","start"];e["default"]=n,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{"default":t}},i=function(t){return t&&t.__esModule?t["default"]:t},o=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},a=i(n(2)),u=r(n(20)),c=n(29).EXTRA_FORMATTER,l=e.SamplesLoader=function(){function t(e,n){s(this,t),this._assets=e,this._master=n}return o(t,{loadFiles:{value:function(t,e,n){var r=this,i=u.fixed(t.length,e),o=u.fixed(t.length,n),s=function(t){return r._loadSample(t,i,o)};return n&&(n.formatter=c),Promise.map(t,s).then(a.fromPairs)}},_loadSample:{value:function(t,e,n){var r=this;return this._getFile(t).then(function(i){return i.read().tap(function(){return e(t)}).then(function(t){return r._decode(t)}).tap(function(){return n(t)}).then(function(e){return[t,e]})["catch"](function(e){return console.error("Unable to decode: "+t,e),null})},function(){return null})}},_decode:{value:function(t){return this._master.sample(t)}},_getFile:{value:function(t){var e=this;return this._assets.file(t)["catch"](function(){return e._assets.file(t.replace(/\.\w+$/,".ogg"))})["catch"](function(){return e._assets.file(t.replace(/\.\w+$/,".mp3"))})}}}),t}();e["default"]=l,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s=r(n(53)),a=r(n(2)),u=r(n(39)),c=r(n(57)),l=e.Notechart=function(){function t(e){var n=this;o(this,t);var r=s.Notes.fromBMSChart(e),i=s.Timing.fromBMSChart(e),a=s.Keysounds.fromBMSChart(e);this._timing=i,this._keysounds=a,this._notes=this._generatePlayableNotesFromBMS(r),this._autos=this._generateAutoKeysoundEventsFromBMS(r),this._barLines=this._generateBarLines(r,e),this._samples=this._generateKeysoundFiles(a),this._infos=new Map(this._notes.map(function(t){return[t,n._getNoteInfo(t)]}))}return i(t,{notes:{get:function(){return this._notes}},autos:{get:function(){return this._autos}},samples:{get:function(){return this._samples}},keysounds:{get:function(){return this._keysounds.all()
}},barLines:{get:function(){return this._barLines}},columns:{get:function(){return["SC","1","2","3","4","5","6","7"]}},info:{value:function(t){return this._infos.get(t)}},beatToSeconds:{value:function(t){return this._timing.beatToSeconds(t)}},beatToPosition:{value:function(t){return t}},secondsToBeat:{value:function(t){return this._timing.secondsToBeat(t)}},secondsToPosition:{value:function(t){return this.beatToPosition(this.secondsToBeat(t))}},_generatePlayableNotesFromBMS:{value:function(t){var e=this,n=1;return t.all().filter(function(t){return t.column}).map(function(t){var r=e._generateEvent(t.beat);return r.id=n++,r.column=t.column.column,r.keysound=t.keysound,r.end=void 0!==t.endBeat?e._generateEvent(t.endBeat):void 0,new c(r)})}},_generateAutoKeysoundEventsFromBMS:{value:function(t){var e=this;return t.all().filter(function(t){return!t.column}).map(function(t){var n=e._generateEvent(t.beat);return n.keysound=t.keysound,new u(n)})}},_generateBarLines:{value:function(t,e){var n=a.max(t.all().map(function(t){return t.endBeat||t.beat})),r=[{beat:0,position:0}],i=0,o=0,s=0;do i+=e.timeSignatures.getBeats(o),o+=1,s=this.beatToPosition(i),r.push({beat:i,position:s});while(n>=i);return r}},_generateKeysoundFiles:{value:function(t){var e=new Set,n=!0,r=!1,i=void 0;try{for(var o,s=[this.notes,this.autos][Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value,u=!0,c=!1,l=void 0;try{for(var h,f=a[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var p=h.value,d=t.get(p.keysound);d&&e.add(d)}}catch(m){c=!0,l=m}finally{try{!u&&f["return"]&&f["return"]()}finally{if(c)throw l}}}}catch(m){r=!0,i=m}finally{try{!n&&s["return"]&&s["return"]()}finally{if(r)throw i}}return Array.from(e)}},_generateEvent:{value:function(t){return{beat:t,time:this.beatToSeconds(t),position:this.beatToPosition(t)}}},_getNoteInfo:{value:function(t){var e=t.end?2:1;return{combos:e}}}},{fromBMSChart:{value:function(e,n,r){return new t(e,n,r)}}}),t}();e["default"]=l,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";function r(t){return function(e){var n=0;return Object.defineProperties({notes:e,update:function(){for(;n<e.length&&"judged"===t.getNoteStatus(e[n]);)n+=1}},{startIndex:{get:function(){return n},configurable:!0,enumerable:!0}})}}var i=function(t){return t&&t.__esModule?t["default"]:t},o=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},a=i(n(2)),u=n(18),c=u.judgeTime,l=u.judgeEndTime,h=u.isBad,f=u.MISSED,p=i(n(76)),d=e.PlayerState=function(){function t(e){s(this,t),this._player=e,this._columns=e.columns,this._noteBufferByColumn=a.mapObj(r(this))(a.groupBy(a.prop("column"))(a.sortBy(a.prop("time"),e.notechart.notes))),this._noteResult=new Map,this.stats=new p(e.notechart),this.notifications={},this.speed=e.options.speed}return o(t,{update:{value:function(t,e){this._gameTime=t,this.notifications={},this.notifications.sounds=[],this.notifications.judgments=[],this.input=this._createInputColumnMap(e),this._judgeNotes(t)}},getNoteStatus:{value:function(t){var e=this._noteResult.get(t);return e?e.status:"unjudged"}},getNoteJudgment:{value:function(t){var e=this._noteResult.get(t);return e?e.judgment:0}},_createInputColumnMap:{value:function(t){var e="p"+this._player.number+"_";return new Map(this._columns.map(function(n){return[n,t.get(""+e+n)]}))}},_judgeNotes:{value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this._columns[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value,s=this._noteBufferByColumn[o];if(s){var a=this.input.get(o);this._judgeColumn(s,a),s.update()}}}catch(u){e=!0,n=u}finally{try{!t&&i["return"]&&i["return"]()}finally{if(e)throw n}}}},_judgeColumn:{value:function(t,e){for(var n=void 0,r=void 0,i=t.notes,o=t.startIndex;o<i.length;o++){var s=i[o];if(this._shouldJudge(s,e,t)){n=s,r=this._judge(s);break}}var a=e.changed&&e.value;if(a)if(n)this.notifications.sounds.push({note:n,type:"hit",judgment:r});else{var u=this._getClosestNote(i);u&&this.notifications.sounds.push({note:u,type:"free"})}}},_getClosestNote:{value:function(t){var e=this;return a.minBy(function(t){return Math.abs(e._gameTime-t.time)},t)}},_shouldJudge:{value:function(t,e,n){var r=this.getNoteStatus(t);if("unjudged"===r){var i=c(this._gameTime,t.time),o=i===f,s=i>0&&e.changed&&e.value;return h(i)&&this._getClosestNote(n.notes)!==t&&(s=!1),o||s}if("active"===r){var i=l(this._gameTime,t.end.time),o=i===f,a=!e.value;return o||a}return!1}},_judge:{value:function(t){var e=this._gameTime-t.time,n=c(this._gameTime,t.time),r=this._noteResult.get(t);if(t.end)if(r&&"unjudged"!==r.status)"active"===r.status&&(e=this._gameTime-t.end.time,n=l(this._gameTime,t.end.time)||f,r={status:"judged",judgment:n,delta:e});else{var i=n===f?"judged":"active";r={status:i,judgment:n,delta:e}}else r={status:"judged",judgment:n,delta:e};return n===f&&this.notifications.sounds.push({note:t,type:"break"}),this._noteResult.set(t,r),this._setJudgment(n,e,t.column),n}},_setJudgment:{value:function(t,e,n){this.stats.handleJudgment(t);var r={judgment:t,combo:this.stats.combo,delta:e,column:n};this.notifications.judgments.push(r)}}}),t}();e["default"]=d,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";function r(t){return p(t.slice(0,10)).as("text").then(function(e){if("BEMUSEPACK"!==e)throw new Error("Invalid magic number");return p(t.slice(10,14)).as("arraybuffer")}).then(function(t){var e=new Uint8Array(t),n=e[0]+(e[1]<<8)+(e[2]<<16)+(e[3]<<24);return n}).then(function(e){return t.slice(14+e)})}var i=function(t){return t&&t.__esModule?t:{"default":t}},o=function(t){return t&&t.__esModule?t["default"]:t},s=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t)){for(var n,r=[],i=t[Symbol.iterator]();!(n=i.next()).done&&(r.push(n.value),!e||r.length!==e););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},c=n(37).resolve,l=o(n(153)),h=o(n(2)),f=o(n(38)),p=o(n(16)),d=o(n(157)),m=o(n(30)),g=i(n(20)),v=e.BemusePackageResources=function(){function t(e){var n=this;u(this,t);var i=l.bind(null,this);this._url=e,i("metadata",function(){return f(c(n._url,"metadata.json")).as("text").then(function(t){return JSON.parse(t)})}),i("refs",function(){return n.metadata.then(function(t){return t.refs.map(function(t){return new b(n,t)})})}),this.progress={all:new m,current:new m},this._loadPayload=g.wrapPromise(this.progress.all,d(1,function(t){return f(t).as("blob",n.progress.current).then(r)}))}return a(t,{url:{get:function(){return this._url}},file:{value:function(t){var e=this;return this.metadata.then(function(n){var r=h.find(function(e){return e.name===t},n.files);if(!r)throw new Error("Unable to find: "+t);return new y(e,r.ref,r.name)})}},getBlob:{value:function(t){var e=s(t,3),n=e[0],r=e[1],i=e[2];return this.refs.then(function(t){return t[n]}).then(function(t){return t.load()}).then(function(t){return t.slice(r,i)})}}}),t}(),y=function(){function t(e,n,r){u(this,t),this._resources=e,this._ref=n,this._name=r}return a(t,{read:{value:function(){return this._resources.getBlob(this._ref).then(function(t){return p(t).as("arraybuffer")})}},name:{get:function(){return this._name}}}),t}(),b=function(){function t(e,n){u(this,t),this._resources=e,this._url=c(e.url,n.path)}return a(t,{load:{value:function(){return this._promise||(this._promise=this._resources._loadPayload(this._url))}}}),t}();e["default"]=v,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s=r(n(10)),a=s("scintillator:compiler"),u=r(n(6)),c=r(n(95)),l=r(n(96)),h=r(n(92)),f=r(n(94)),p=r(n(97)),d=r(n(93)),m={skin:c,sprite:l,group:h,object:f,text:p,"if":d},g=function(){function t(e){o(this,t),Object.assign(this,e)}return i(t,{compile:{value:function(e){var n=e[0].nodeName;a("compiling",e[0]);var r=t.getNodeClass(n);if(!r)throw new Error("Invalid node name: "+n);return r.compile(this,e)}},compileChildren:{value:function(e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=Array.from(e.children())[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var c=s.value,l=c.nodeName,h=t.getNodeClass(l);h&&n.push(this.compile(u(c)))}}catch(f){i=!0,o=f}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw o}}return n}}},{getNodeClass:{value:function(t){return m[t]}}}),t}();t.exports=g},function(t,e,n){"use strict";function r(t,e){return navigator.userAgent.match(/Gecko\//)?new a.autoDetectRenderer(t,e):new a.CanvasRenderer(t,e)}var i=function(t){return t&&t.__esModule?t["default"]:t},o=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},a=i(n(3)),u=e.Context=function(){function t(e){s(this,t),this.refs={},this._skin=e,this._instance=e.instantiate(this),this._renderer=r(e.width,e.height),this.stage=this._instance.object,this.view=this._renderer.view,this._setupInteractivity()}return o(t,{render:{value:function(t){this._instance.push(t),this._renderer.render(this.stage)}},destroy:{value:function(){this._instance.destroy(),this._instance=null}},input:{get:function(){return this._input.get()}},ref:{value:function(t,e){var n=this.refs[t]||(this.refs[t]=new Set);n.add(e)}},unref:{value:function(t,e){var n=this.refs[t];n&&n["delete"](e)}},_setupInteractivity:{value:function(){var t=this.stage,e=t.interactionManager,n=!1;t.interactive=!0,t.mousedown=function(){n=!0},t.mouseup=function(){n=!1},t.mouseupoutside=function(){n=!1},this._input={get:function(){var t=[];if(n){var r=e.mouse.global;t.push({x:r.x,y:r.y,id:"mouse"})}for(var i in e.touches)if(e.touches[i]){var o=e.touches[i].global;t.push({x:o.x,y:o.y,id:"touch"+i})}return t}}}}}),t}();e["default"]=u,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";function r(t,e){return f(regeneratorRuntime.mark(function n(){var r,s,a,u,f,p,v,y,b,x,w,_,T,S,E,C,A,j,k,O,M,R,P;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return c("load XML from %s",t),n.next=3,i(t);case 3:for(r=n.sent,s=new m,a=new Set,u=!0,f=!1,p=void 0,n.prev=9,v=Array.from(r.find("[image]"))[Symbol.iterator]();!(u=(y=v.next()).done);u=!0)b=y.value,a.add(l(b).attr("image"));n.next=17;break;case 13:n.prev=13,n.t5=n["catch"](9),f=!0,p=n.t5;case 17:n.prev=17,n.prev=18,!u&&v["return"]&&v["return"]();case 20:if(n.prev=20,!f){n.next=23;break}throw p;case 23:return n.finish(20);case 24:return n.finish(17);case 25:for(x=!0,w=!1,_=void 0,n.prev=28,T=Array.from(r.find("[font-src]"))[Symbol.iterator]();!(x=(S=T.next()).done);x=!0)b=S.value,a.add(l(b).attr("font-src"));n.next=36;break;case 32:n.prev=32,n.t6=n["catch"](28),w=!0,_=n.t6;case 36:n.prev=36,n.prev=37,!x&&T["return"]&&T["return"]();case 39:if(n.prev=39,!w){n.next=42;break}throw _;case 42:return n.finish(39);case 43:return n.finish(36);case 44:for(E=!0,C=!1,A=void 0,n.prev=47,j=a[Symbol.iterator]();!(E=(k=j.next()).done);E=!0)O=k.value,M=h.resolve(t,O),s.add(O,M);n.next=55;break;case 51:n.prev=51,n.t7=n["catch"](47),C=!0,A=n.t7;case 55:n.prev=55,n.prev=56,!E&&j["return"]&&j["return"]();case 58:if(n.prev=58,!C){n.next=61;break}throw A;case 61:return n.finish(58);case 62:return n.finish(55);case 63:return R=d.fixed(1+a.size,e),R(),n.next=67,o(s,R);case 67:return c("compiling"),P=new g({resources:s}).compile(r),n.abrupt("return",P);case 70:case"end":return n.stop()}},n,this,[[9,13,17,25],[18,,20,24],[28,32,36,44],[37,,39,43],[47,51,55,63],[56,,58,62]])}))}function i(t){return Promise.resolve(l.ajax({url:t,dataType:"xml"})).then(function(t){return l(t.documentElement)})}function o(t,e){return c("loading resources"),new Promise(function(n){if(0===t.urls.length)return n();var r=new p.AssetLoader(t.urls);r.on("onComplete",function(){c("resources finished loading"),n()}),e&&r.on("onProgress",e),r.load()})}var s=function(t){return t&&t.__esModule?t:{"default":t}},a=function(t){return t&&t.__esModule?t["default"]:t};e.load=r;var u=a(n(10)),c=u("scintillator:loader"),l=a(n(6)),h=a(n(37)),f=a(n(11)),p=a(n(3)),d=s(n(20)),m=a(n(98)),g=a(n(89));Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},o=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},a=r(n(3)),u=r(n(7)),c=r(n(8)),l=r(n(31)),h=n(52).parseFrame,f=e.Mask=function(){function t(e){s(this,t),this._frame=e}return o(t,{instantiate:{value:function(t,e){var n=new a.Graphics;return n.beginFill(),n.drawShape(this._frame),n.endFill(),e.object.mask=n,new c({context:t,object:n,parent:e.object})}}}),t}(),p=e.GroupNode=function(t){function e(){s(this,e),null!=t&&t.apply(this,arguments)}return i(e,t),o(e,{compile:{value:function(t,e){this.children=t.compileChildren(e),this.display=l.compile(t,e);var n=h(e.attr("mask")||"");n&&(this.mask=new f(n))}},instantiate:{value:function(t,e){var n=new a.DisplayObjectContainer,r=[this.display];return this.mask&&r.push(this.mask),new c({context:t,object:n,parent:e,concerns:r,children:this.children})}}}),e}(u);e["default"]=p,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},a=r(n(3)),u=r(n(7)),c=r(n(8)),l=r(n(17)),h=e.IfNode=function(t){function e(){s(this,e),null!=t&&t.apply(this,arguments)}return o(e,t),i(e,{compile:{value:function(t,e){var n=t.compileChildren(e);if(1!==n.length)throw new Error("Expected exactly 1 children, "+n.length+" found");this.child=n[0],this.key=new l(e.attr("key")),this.value=String(e.attr("value"))}},instantiate:{value:function(t,e){var n=new a.DisplayObjectContainer,r=this.key,i=this.value,o=this.child,s=null;return new c({context:t,parent:e,object:n,onData:function(e){String(r(e))===i?(null===s&&(s=o.instantiate(t,n)),s.push(e)):null!==s&&(s.destroy(),s=null)}})}}}),e}(u);e["default"]=h,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";function r(t,e,n){return{instantiate:function(r,i){function o(){var t;console.log("init i"+n);for(var o=0;n>o;o++)t=e.instantiate(r,i.object),t.detach(),c.push(t)}function s(t){var e,n,r,i=new Set(u.keys());t||(t=[]);for(var o=0;o<t.length;o++)n=t[o],e=n.key,u.has(e)?r=u.get(e):(r=a(),u.set(e,r)),r.push(n),i["delete"](e);var s=!0,l=!1,h=void 0;try{for(var f,p=i[Symbol.iterator]();!(s=(f=p.next()).done);s=!0)e=f.value,r=u.get(e),r.detach(),u["delete"](e),c.push(r)}catch(d){l=!0,h=d}finally{try{!s&&p["return"]&&p["return"]()}finally{if(l)throw h}}}function a(){var t=c.pop();return t?t.attachTo(i.object):t=e.instantiate(r,i.object),t}var u=new Map,c=[];return o(),new l({context:r,onData:function(e){s(t(e))}})}}}var i=function(t){return t&&t.__esModule?t["default"]:t},o=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},u=i(n(3)),c=i(n(7)),l=i(n(8)),h=i(n(17)),f=e.ObjectNode=function(t){function e(){a(this,e),null!=t&&t.apply(this,arguments)}return s(e,t),o(e,{compile:{value:function(t,e){if(this.children=t.compileChildren(e),1!==this.children.length)throw new Error("Expected exactly 1 children, "+this.children.length+" given");this.pool=+e.attr("pool")||1,this.key=new h(e.attr("key"))}},instantiate:{value:function(t,e){var n=new u.SpriteBatch,i=new r(this.key,this.children[0],this.pool);return new l({context:t,parent:e,object:n,concerns:[i]})}}}),e}(c);e["default"]=f,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},a=r(n(3)),u=r(n(7)),c=r(n(8)),l=e.SkinRootNode=function(t){function e(){s(this,e),null!=t&&t.apply(this,arguments)}return o(e,t),i(e,{compile:{value:function(t,e){this.children=t.compileChildren(e),this.width=+e.attr("width"),this.height=+e.attr("height")}},instantiate:{value:function(t){var e=new a.Stage(591879);return new c({context:t,object:e,children:this.children})}}}),e}(u);e["default"]=l,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},a=r(n(3)),u=r(n(7)),c=r(n(8)),l=n(52).parseFrame,h=r(n(31)),f=e.SpriteNode=function(t){function e(){s(this,e),null!=t&&t.apply(this,arguments)}return o(e,t),i(e,{compile:{value:function(t,e){this.url=t.resources.get(e.attr("image")),this.display=h.compile(t,e),this.frame=l(e.attr("frame")||"")}},instantiate:{value:function(t,e){var n=new a.Sprite(this.getTexture());return new c({context:t,object:n,parent:e,concerns:[this.display]})}},getTexture:{value:function(){if(this._texture)return this._texture;var t=a.scaleModes.NEAREST,e=a.BaseTexture.fromImage(this.url,void 0,t),n=new a.Texture(e,this.frame);return this._texture=n,n}}}),e}(u);e["default"]=f,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)},s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},a=r(n(3)),u=r(n(7)),c=r(n(8)),l=r(n(31)),h=r(n(17)),f=e.TextNode=function(t){function e(){s(this,e),null!=t&&t.apply(this,arguments)}return o(e,t),i(e,{compile:{value:function(t,e){this.font=e.attr("font"),this.text=e.attr("text"),this.data=new h(e.attr("data")||"0"),this.display=l.compile(t,e),this.align="center"===e.attr("align")?.5:0}},instantiate:{value:function(t,e){var n=this,r=new a.BitmapText(this.text,{font:this.font}),i=new a.DisplayObjectContainer;return i.addChild(r),new c({context:t,parent:e,object:i,concerns:[this.display],bindings:[[this.data,function(t){r.setText(n.text.replace("%s",t)),r.x=r.width*-n.align}]]})}}}),e}(u);e["default"]=f,Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s=r(n(2)),a=e.Resources=function(){function t(){o(this,t),this._map={}}return i(t,{add:{value:function(t,e){this._map[t]=e}},get:{value:function(t){if(!(t in this._map))throw new Error("Not registered: "+t);return this._map[t]}},urls:{get:function(){return s.values(this._map)}}}),t}();e["default"]=a,Object.defineProperty(e,"__esModule",{value:!0})},,function(t,e,n){function r(t){this._map=t}var i=n(107);r.prototype.get=function(t){return this._map[t.toLowerCase()]},r.prototype.files=function(){return i.uniq(i.values(this._map))},r.prototype.all=function(){return this._map},r.fromBMSChart=function(t){var e={};return t.headers.each(function(t,n){var r=t.match(/^wav(\S\S)$/i);r&&(e[r[1].toLowerCase()]=n)}),new r(e)},t.exports=r},function(t,e,n){var r=n(106),i=n(105),o=n(103),s=(n(104),n(102),[new r,new i.UTF_16BE,new i.UTF_16LE,new o.sjis,new o.euc_kr]);t.exports.detect=function(t){for(var e=[],n=0;256>n;n++)e[n]=0;for(var n=t.length-1;n>=0;n--)e[255&t[n]]++;for(var r=!1,n=128;159>=n;n+=1)if(0!=e[n]){r=!0;break}var i={fByteStats:e,fC1Bytes:r,fRawInput:t,fRawLength:t.length,fInputBytes:t,fInputLen:t.length},o=s.map(function(t){return t.match(i)}).filter(function(t){return!!t}).sort(function(t,e){return t.confidence-e.confidence}).pop();return o?o.name:null}},function(t,e,n){function r(){}var i=n(19),o=n(13);r.prototype.match=function(t){var e,n,r,i,s=0,a=0,u=0,c=t.fInputBytes,l=t.fInputLen;t:for(e=0;l>e;e++){if(27==c[e]){e:for(r=0;r<this.escapeSequences.length;r++){var h=this.escapeSequences[r];if(!(l-e<h.length)){for(n=1;n<h.length;n++)if(h[n]!=c[e+n])continue e;s++,e+=h.length-1;continue t}}a++}(14==c[e]||15==c[e])&&u++}return 0==s?null:(i=(100*s-100*a)/(s+a),5>s+u&&(i-=10*(5-(s+u))),0>=i?null:new o(t,this,i))},t.exports.ISO_2022_JP=function(){this.name=function(){return"ISO-2022-JP"},this.escapeSequences=[[27,36,40,67],[27,36,40,68],[27,36,64],[27,36,65],[27,36,66],[27,38,64],[27,40,66],[27,40,72],[27,40,73],[27,40,74],[27,46,65],[27,46,70]]},i.inherits(t.exports.ISO_2022_JP,r),t.exports.ISO_2022_KR=function(){this.name=function(){return"ISO-2022-KR"},this.escapeSequences=[[27,36,41,67]]},i.inherits(t.exports.ISO_2022_KR,r),t.exports.ISO_2022_CN=function(){this.name=function(){return"ISO-2022-CN"},this.escapeSequences=[[27,36,41,65],[27,36,41,71],[27,36,42,72],[27,36,41,69],[27,36,43,73],[27,36,43,74],[27,36,43,75],[27,36,43,76],[27,36,43,77],[27,78],[27,79]]},i.inherits(t.exports.ISO_2022_CN,r)},function(t,e,n){function r(t,e){function n(t,e,r,i){if(r>i)return-1;var o=Math.floor(r+i>>>1);return e>t[o]?n(t,e,o+1,i):e<t[o]?n(t,e,r,o-1):o}return n(t,e,0,t.length-1)}function i(){this.charValue=0,this.index=0,this.nextIndex=0,this.error=!1,this.done=!1,this.reset=function(){this.charValue=0,this.index=-1,this.nextIndex=0,this.error=!1,this.done=!1},this.nextByte=function(t){if(this.nextIndex>=t.fRawLength)return this.done=!0,-1;var e=255&t.fRawInput[this.nextIndex++];return e}}function o(){}function s(t,e){t.index=t.nextIndex,t.error=!1;var n=0,r=0,i=0;return n=t.charValue=t.nextByte(e),0>n?t.done=!0:141>=n||(r=t.nextByte(e),t.charValue=t.charValue<<8|r,n>=161&&254>=n?161>r&&(t.error=!0):142!=n?143==n&&(i=t.nextByte(e),t.charValue=t.charValue<<8|i,161>i&&(t.error=!0)):161>r&&(t.error=!0)),0==t.done}var a=n(19),u=n(13);o.prototype.match=function(t){var e=0,n=0,o=0,s=0,a=0,c=0,l=new i;t:{for(l.reset();this.nextChar(l,t);){if(a++,l.error)s++;else{var h=4294967295&l.charValue;255>=h?e++:(n++,null!=this.commonChars&&r(this.commonChars,h)>=0&&o++)}if(s>=2&&5*s>=n)break t}if(10>=n&&0==s)c=0==n&&10>a?0:10;else if(20*s>n)c=0;else if(null==this.commonChars)c=30+n-20*s,c>100&&(c=100);else{var f=Math.log(parseFloat(n)/4),p=90/f;c=Math.floor(Math.log(o+1)*p+10),c=Math.min(c,100)}}return 0==c?null:new u(t,this,c)},o.prototype.nextChar=function(){},t.exports.sjis=function(){this.name=function(){return"Shift-JIS"},this.language=function(){return"ja"},this.commonChars=[33088,33089,33090,33093,33115,33129,33130,33141,33142,33440,33442,33444,33449,33450,33451,33453,33455,33457,33459,33461,33463,33469,33470,33473,33476,33477,33478,33480,33481,33484,33485,33500,33504,33511,33512,33513,33514,33520,33521,33601,33603,33614,33615,33624,33630,33634,33639,33653,33654,33673,33674,33675,33677,33683,36502,37882,38314],this.nextChar=function(t,e){t.index=t.nextIndex,t.error=!1;var n;if(n=t.charValue=t.nextByte(e),0>n)return!1;if(127>=n||n>160&&223>=n)return!0;var r=t.nextByte(e);return 0>r?!1:(t.charValue=n<<8|r,r>=64&&127>=r||r>=128&&255>=r||(t.error=!0),!0)}},a.inherits(t.exports.sjis,o),t.exports.big5=function(){this.name=function(){return"Big5"},this.language=function(){return"zh"},this.commonChars=[41280,41281,41282,41283,41287,41289,41333,41334,42048,42054,42055,42056,42065,42068,42071,42084,42090,42092,42103,42147,42148,42151,42177,42190,42193,42207,42216,42237,42304,42312,42328,42345,42445,42471,42583,42593,42594,42600,42608,42664,42675,42681,42707,42715,42726,42738,42816,42833,42841,42970,43171,43173,43181,43217,43219,43236,43260,43456,43474,43507,43627,43706,43710,43724,43772,44103,44111,44208,44242,44377,44745,45024,45290,45423,45747,45764,45935,46156,46158,46412,46501,46525,46544,46552,46705,47085,47207,47428,47832,47940,48033,48593,49860,50105,50240,50271],this.nextChar=function(t,e){t.index=t.nextIndex,t.error=!1;var n=t.charValue=t.nextByte(e);if(0>n)return!1;if(127>=n||255==n)return!0;var r=t.nextByte(e);return 0>r?!1:(t.charValue=t.charValue<<8|r,(64>r||127==r||255==r)&&(t.error=!0),!0)}},a.inherits(t.exports.big5,o),t.exports.euc_jp=function(){this.name=function(){return"EUC-JP"},this.language=function(){return"ja"},this.commonChars=[41377,41378,41379,41382,41404,41418,41419,41430,41431,42146,42148,42150,42152,42154,42155,42156,42157,42159,42161,42163,42165,42167,42169,42171,42173,42175,42176,42177,42179,42180,42182,42183,42184,42185,42186,42187,42190,42191,42192,42206,42207,42209,42210,42212,42216,42217,42218,42219,42220,42223,42226,42227,42402,42403,42404,42406,42407,42410,42413,42415,42416,42419,42421,42423,42424,42425,42431,42435,42438,42439,42440,42441,42443,42448,42453,42454,42455,42462,42464,42465,42469,42473,42474,42475,42476,42477,42483,47273,47572,47854,48072,48880,49079,50410,50940,51133,51896,51955,52188,52689],this.nextChar=s},a.inherits(t.exports.euc_jp,o),t.exports.euc_kr=function(){this.name=function(){return"EUC-KR"},this.language=function(){return"ko"},this.commonChars=[45217,45235,45253,45261,45268,45286,45293,45304,45306,45308,45496,45497,45511,45527,45538,45994,46011,46274,46287,46297,46315,46501,46517,46527,46535,46569,46835,47023,47042,47054,47270,47278,47286,47288,47291,47337,47531,47534,47564,47566,47613,47800,47822,47824,47857,48103,48115,48125,48301,48314,48338,48374,48570,48576,48579,48581,48838,48840,48863,48878,48888,48890,49057,49065,49088,49124,49131,49132,49144,49319,49327,49336,49338,49339,49341,49351,49356,49358,49359,49366,49370,49381,49403,49404,49572,49574,49590,49622,49631,49654,49656,50337,50637,50862,51151,51153,51154,51160,51173,51373],this.nextChar=s},a.inherits(t.exports.euc_kr,o),t.exports.gb_18030=function(){this.name=function(){return"GB18030"},this.language=function(){return"zh"},this.nextChar=function(t,e){t.index=t.nextIndex,t.error=!1;var n=0,r=0,i=0,o=0;t:if(n=t.charValue=t.nextByte(e),0>n)t.done=!0;else if(!(128>=n))if(r=t.nextByte(e),t.charValue=t.charValue<<8|r,n>=129&&254>=n){if(r>=64&&126>=r||r>=80&&254>=r)break t;if(r>=48&&57>=r&&(i=t.nextByte(e),i>=129&&254>=i&&(o=t.nextByte(e),o>=48&&57>=o))){t.charValue=t.charValue<<16|i<<8|o;break t}t.error=!0}else;return 0==t.done},this.commonChars=[41377,41378,41379,41380,41392,41393,41457,41459,41889,41900,41914,45480,45496,45502,45755,46025,46070,46323,46525,46532,46563,46767,46804,46816,47010,47016,47037,47062,47069,47284,47327,47350,47531,47561,47576,47610,47613,47821,48039,48086,48097,48122,48316,48347,48382,48588,48845,48861,49076,49094,49097,49332,49389,49611,49883,50119,50396,50410,50636,50935,51192,51371,51403,51413,51431,51663,51706,51889,51893,51911,51920,51926,51957,51965,52460,52728,52906,52932,52946,52965,53173,53186,53206,53442,53445,53456,53460,53671,53930,53938,53941,53947,53972,54211,54224,54269,54466,54490,54754,54992]},a.inherits(t.exports.gb_18030,o)},function(t,e,n){function r(t,e){var n=16777215;this.byteIndex=0,this.ngram=0,this.ngramList=t,this.byteMap=e,this.ngramCount=0,this.hitCount=0,this.spaceChar,this.search=function(t,e){var n=0;return t[n+32]<=e&&(n+=32),t[n+16]<=e&&(n+=16),t[n+8]<=e&&(n+=8),t[n+4]<=e&&(n+=4),t[n+2]<=e&&(n+=2),t[n+1]<=e&&(n+=1),t[n]>e&&(n-=1),0>n||t[n]!=e?-1:n},this.lookup=function(t){this.ngramCount+=1,this.search(this.ngramList,t)>=0&&(this.hitCount+=1)},this.addByte=function(t){this.ngram=(this.ngram<<8)+(255&t)&n,this.lookup(this.ngram)},this.nextByte=function(t){return this.byteIndex>=t.fInputLen?-1:255&t.fInputBytes[this.byteIndex++]},this.parse=function(t,e){var n,r=!1;for(this.spaceChar=e;(n=this.nextByte(t))>=0;){var i=this.byteMap[n];0!=i&&(i==this.spaceChar&&r||this.addByte(i),r=i==this.spaceChar)}this.addByte(this.spaceChar);var o=this.hitCount/this.ngramCount;return o>.33?98:Math.floor(300*o)}}function i(t,e){this.fLang=t,this.fNGrams=e}function o(){}var s=n(19),a=n(13);o.prototype.spaceChar=32,o.prototype.ngrams=function(){},o.prototype.byteMap=function(){},o.prototype.match=function(t){var e=this.ngrams(),n=Array.isArray(e)&&e[0]instanceof i;if(!n){var o=new r(e,this.byteMap()),s=o.parse(t,this.spaceChar);return 0>=s?null:new a(t,this,s)}for(var u=-1,c=null,l=e.length-1;l>=0;l--){var h=e[l],o=new r(h.fNGrams,this.byteMap()),s=o.parse(t,this.spaceChar);s>u&&(u=s,c=h.fLang)}var f=this.name(t);return 0>=u?null:new a(t,this,u,f,c)},t.exports.ISO_8859_1=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,170,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,186,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,255]
},this.ngrams=function(){return[new i("da",[2122086,2122100,2122853,2123118,2123122,2123375,2123873,2124064,2125157,2125671,2126053,2126697,2126708,2126953,2127465,6383136,6385184,6385252,6386208,6386720,6579488,6579566,6579570,6579572,6627443,6644768,6644837,6647328,6647396,6648352,6648421,6648608,6648864,6713202,6776096,6776174,6776178,6907749,6908960,6909543,7038240,7039845,7103858,7104871,7105637,7169380,7234661,7234848,7235360,7235429,7300896,7302432,7303712,7398688,7479396,7479397,7479411,7496992,7566437,7610483,7628064,7628146,7629164,7759218]),new i("de",[2122094,2122101,2122341,2122849,2122853,2122857,2123113,2123621,2123873,2124142,2125161,2126691,2126693,2127214,2127461,2127471,2127717,2128501,6448498,6514720,6514789,6514804,6578547,6579566,6579570,6580581,6627428,6627443,6646126,6646132,6647328,6648352,6648608,6776174,6841710,6845472,6906728,6907168,6909472,6909541,6911008,7104867,7105637,7217249,7217252,7217267,7234592,7234661,7234848,7235360,7235429,7238757,7479396,7496805,7497065,7562088,7566437,7610468,7628064,7628142,7628146,7695972,7695975,7759218]),new i("en",[2122016,2122094,2122341,2122607,2123375,2123873,2123877,2124142,2125153,2125670,2125938,2126437,2126689,2126708,2126952,2126959,2127720,6383972,6384672,6385184,6385252,6386464,6386720,6386789,6386793,6561889,6561908,6627425,6627443,6627444,6644768,6647412,6648352,6648608,6713202,6840692,6841632,6841714,6906912,6909472,6909543,6909806,6910752,7217249,7217268,7234592,7235360,7238688,7300640,7302688,7303712,7496992,7500576,7544929,7544948,7561577,7566368,7610484,7628146,7628897,7628901,7629167,7630624,7631648]),new i("es",[2122016,2122593,2122607,2122853,2123116,2123118,2123123,2124142,2124897,2124911,2125921,2125935,2125938,2126197,2126437,2126693,2127214,2128160,6365283,6365284,6365285,6365292,6365296,6382441,6382703,6384672,6386208,6386464,6515187,6516590,6579488,6579564,6582048,6627428,6627429,6627436,6646816,6647328,6647412,6648608,6648692,6907246,6943598,7102752,7106419,7217253,7238757,7282788,7282789,7302688,7303712,7303968,7364978,7435621,7495968,7497075,7544932,7544933,7544944,7562528,7628064,7630624,7693600,15953440]),new i("fr",[2122101,2122607,2122849,2122853,2122869,2123118,2123124,2124897,2124901,2125921,2125935,2125938,2126197,2126693,2126703,2127214,2154528,6385268,6386793,6513952,6516590,6579488,6579571,6583584,6627425,6627427,6627428,6627429,6627436,6627440,6627443,6647328,6647412,6648352,6648608,6648864,6649202,6909806,6910752,6911008,7102752,7103776,7103859,7169390,7217252,7234848,7238432,7238688,7302688,7302772,7304562,7435621,7479404,7496992,7544929,7544932,7544933,7544940,7544944,7610468,7628064,7629167,7693600,7696928]),new i("it",[2122092,2122600,2122607,2122853,2122857,2123040,2124140,2124142,2124897,2125925,2125938,2127214,6365283,6365284,6365296,6365299,6386799,6514789,6516590,6579564,6580512,6627425,6627427,6627428,6627433,6627436,6627440,6627443,6646816,6646892,6647412,6648352,6841632,6889569,6889571,6889572,6889587,6906144,6908960,6909472,6909806,7102752,7103776,7104800,7105633,7234848,7235872,7237408,7238757,7282785,7282788,7282793,7282803,7302688,7302757,7366002,7495968,7496992,7563552,7627040,7628064,7629088,7630624,8022383]),new i("nl",[2122092,2122341,2122849,2122853,2122857,2123109,2123118,2123621,2123877,2124142,2125153,2125157,2125680,2126949,2127457,2127461,2127471,2127717,2128489,6381934,6381938,6385184,6385252,6386208,6386720,6514804,6579488,6579566,6579570,6627426,6627446,6645102,6645106,6647328,6648352,6648435,6648864,6776174,6841716,6907168,6909472,6909543,6910752,7217250,7217252,7217253,7217256,7217263,7217270,7234661,7235360,7302756,7303026,7303200,7303712,7562088,7566437,7610468,7628064,7628142,7628146,7758190,7759218,7761775]),new i("no",[2122100,2122102,2122853,2123118,2123122,2123375,2123873,2124064,2125157,2125671,2126053,2126693,2126699,2126703,2126708,2126953,2127465,2155808,6385252,6386208,6386720,6579488,6579566,6579572,6627443,6644768,6647328,6647397,6648352,6648421,6648864,6648948,6713202,6776174,6908779,6908960,6909543,7038240,7039845,7103776,7105637,7169380,7169390,7217267,7234848,7235360,7235429,7237221,7300896,7302432,7303712,7398688,7479411,7496992,7565165,7566437,7610483,7628064,7628142,7628146,7629164,7631904,7631973,7759218]),new i("pt",[2122016,2122607,2122849,2122853,2122863,2123040,2123123,2125153,2125423,2125600,2125921,2125935,2125938,2126197,2126437,2126693,2127213,6365281,6365283,6365284,6365296,6382693,6382703,6384672,6386208,6386273,6386464,6516589,6516590,6578464,6579488,6582048,6582131,6627425,6627428,6647072,6647412,6648608,6648692,6906144,6906721,7169390,7238757,7238767,7282785,7282787,7282788,7282789,7282800,7303968,7364978,7435621,7495968,7497075,7544929,7544932,7544933,7544944,7566433,7628064,7630624,7693600,14905120,15197039]),new i("sv",[2122100,2122102,2122853,2123118,2123510,2123873,2124064,2124142,2124655,2125157,2125667,2126053,2126699,2126703,2126708,2126953,2127457,2127465,2155634,6382693,6385184,6385252,6386208,6386804,6514720,6579488,6579566,6579570,6579572,6644768,6647328,6648352,6648864,6747762,6776174,6909036,6909543,7037216,7105568,7169380,7217267,7233824,7234661,7235360,7235429,7235950,7299944,7302432,7302688,7398688,7479393,7479411,7495968,7564129,7565165,7610483,7627040,7628064,7628146,7629164,7631904,7758194,14971424,16151072])]},this.name=function(t){return t&&t.fC1Bytes?"windows-1252":"ISO-8859-1"}},s.inherits(t.exports.ISO_8859_1,o),t.exports.ISO_8859_2=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,177,32,179,32,181,182,32,32,185,186,187,188,32,190,191,32,177,32,179,32,181,182,183,32,185,186,187,188,32,190,191,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,32]},this.ngrams=function(){return[new i("cs",[2122016,2122361,2122863,2124389,2125409,2125413,2125600,2125668,2125935,2125938,2126072,2126447,2126693,2126703,2126708,2126959,2127392,2127481,2128481,6365296,6513952,6514720,6627440,6627443,6627446,6647072,6647533,6844192,6844260,6910836,6972704,7042149,7103776,7104800,7233824,7268640,7269408,7269664,7282800,7300206,7301737,7304052,7304480,7304801,7368548,7368554,7369327,7403621,7562528,7565173,7566433,7566441,7566446,7628146,7630573,7630624,7676016,12477728,14773997,15296623,15540336,15540339,15559968,16278884]),new i("hu",[2122016,2122106,2122341,2123111,2123116,2123365,2123873,2123887,2124147,2124645,2124649,2124790,2124901,2125153,2125157,2125161,2125413,2126714,2126949,2156915,6365281,6365291,6365293,6365299,6384416,6385184,6388256,6447470,6448494,6645625,6646560,6646816,6646885,6647072,6647328,6648421,6648864,6648933,6648948,6781216,6844263,6909556,6910752,7020641,7075450,7169383,7170414,7217249,7233899,7234923,7234925,7238688,7300985,7544929,7567973,7567988,7568097,7596391,7610465,7631904,7659891,8021362,14773792,15299360]),new i("pl",[2122618,2122863,2124064,2124389,2124655,2125153,2125161,2125409,2125417,2125668,2125935,2125938,2126697,2127648,2127721,2127737,2128416,2128481,6365296,6365303,6385257,6514720,6519397,6519417,6582048,6584937,6627440,6627443,6627447,6627450,6645615,6646304,6647072,6647401,6778656,6906144,6907168,6907242,7037216,7039264,7039333,7170405,7233824,7235937,7235941,7282800,7305057,7305065,7368556,7369313,7369327,7369338,7502437,7502457,7563754,7564137,7566433,7825765,7955304,7957792,8021280,8022373,8026400,15955744]),new i("ro",[2122016,2122083,2122593,2122597,2122607,2122613,2122853,2122857,2124897,2125153,2125925,2125938,2126693,2126819,2127214,2144873,2158190,6365283,6365284,6386277,6386720,6386789,6386976,6513010,6516590,6518048,6546208,6579488,6627425,6627427,6627428,6627440,6627443,6644e3,6646048,6646885,6647412,6648692,6889569,6889571,6889572,6889584,6907168,6908192,6909472,7102752,7103776,7106418,7107945,7234848,7238770,7303712,7365998,7496992,7497057,7501088,7594784,7628064,7631477,7660320,7694624,7695392,12216608,15625760])]},this.name=function(t){return t&&t.fC1Bytes?"windows-1250":"ISO-8859-2"}},s.inherits(t.exports.ISO_8859_2,o),t.exports.ISO_8859_5=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,241,242,243,244,245,246,247,248,249,250,251,252,32,254,255,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,32,241,242,243,244,245,246,247,248,249,250,251,252,32,254,255]},this.ngrams=function(){return[2150944,2151134,2151646,2152400,2152480,2153168,2153182,2153936,2153941,2154193,2154462,2154464,2154704,2154974,2154978,2155230,2156514,2158050,13688280,13689580,13884960,14015468,14015960,14016994,14017056,14164191,14210336,14211104,14216992,14407133,14407712,14413021,14536736,14538016,14538965,14538991,14540320,14540498,14557394,14557407,14557409,14602784,14602960,14603230,14604576,14605292,14605344,14606818,14671579,14672085,14672088,14672094,14733522,14734804,14803664,14803666,14803672,14806816,14865883,14868e3,14868192,14871584,15196894,15459616]},this.name=function(){return"ISO-8859-5"},this.language=function(){return"ru"}},s.inherits(t.exports.ISO_8859_5,o),t.exports.ISO_8859_6=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32]},this.ngrams=function(){return[2148324,2148326,2148551,2152932,2154986,2155748,2156006,2156743,13050055,13091104,13093408,13095200,13100064,13100227,13100231,13100232,13100234,13100236,13100237,13100239,13100243,13100249,13100258,13100261,13100264,13100266,13100320,13100576,13100746,13115591,13181127,13181153,13181156,13181157,13181160,13246663,13574343,13617440,13705415,13748512,13836487,14229703,14279913,14805536,14950599,14993696,15001888,15002144,15016135,15058720,15059232,15066656,15081671,15147207,15189792,15255524,15263264,15278279,15343815,15343845,15343848,15386912,15388960,15394336]},this.name=function(){return"ISO-8859-6"},this.language=function(){return"ar"}},s.inherits(t.exports.ISO_8859_6,o),t.exports.ISO_8859_7=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,161,162,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,220,32,221,222,223,32,252,32,253,254,192,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,32,243,244,245,246,247,248,249,250,251,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,32]},this.ngrams=function(){return[2154989,2154992,2155497,2155753,2156016,2156320,2157281,2157797,2158049,2158368,2158817,2158831,2158833,2159604,2159605,2159847,2159855,14672160,14754017,14754036,14805280,14806304,14807292,14807584,14936545,15067424,15069728,15147252,15199520,15200800,15278324,15327520,15330014,15331872,15393257,15393268,15525152,15540449,15540453,15540464,15589664,15725088,15725856,15790069,15790575,15793184,15868129,15868133,15868138,15868144,15868148,15983904,15984416,15987951,16048416,16048617,16050157,16050162,16050666,16052e3,16052213,16054765,16379168,16706848]},this.name=function(t){return t&&t.fC1Bytes?"windows-1253":"ISO-8859-7"},this.language=function(){return"el"}},s.inherits(t.exports.ISO_8859_7,o),t.exports.ISO_8859_8=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,32,32,32,32,32]},this.ngrams=function(){return[new i("he",[2154725,2154727,2154729,2154746,2154985,2154990,2155744,2155749,2155753,2155758,2155762,2155769,2155770,2157792,2157796,2158304,2159340,2161132,14744096,14950624,14950625,14950628,14950636,14950638,14950649,15001056,15065120,15068448,15068960,15071264,15071776,15278308,15328288,15328762,15329773,15330592,15331104,15333408,15333920,15474912,15474916,15523872,15524896,15540448,15540449,15540452,15540460,15540462,15540473,15655968,15671524,15787040,15788320,15788525,15920160,16261348,16312813,16378912,16392416,16392417,16392420,16392428,16392430,16392441]),new i("he",[2154725,2154732,2155753,2155756,2155758,2155760,2157040,2157810,2157817,2158053,2158057,2158565,2158569,2160869,2160873,2161376,2161381,2161385,14688484,14688492,14688493,14688506,14738464,14738916,14740512,14741024,14754020,14754029,14754042,14950628,14950633,14950636,14950637,14950639,14950648,14950650,15002656,15065120,15066144,15196192,15327264,15327520,15328288,15474916,15474925,15474938,15528480,15530272,15591913,15591920,15591928,15605988,15605997,15606010,15655200,15655968,15918112,16326884,16326893,16326906,16376864,16441376,16442400,16442857])]},this.name=function(t){return t&&t.fC1Bytes?"windows-1255":"ISO-8859-8"},this.language=function(){return"he"}},s.inherits(t.exports.ISO_8859_8,o),t.exports.ISO_8859_9=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,170,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,186,32,32,32,32,32,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,105,254,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,32,248,249,250,251,252,253,254,255]},this.ngrams=function(){return[2122337,2122345,2122357,2122849,2122853,2123621,2123873,2124140,2124641,2124655,2125153,2125676,2126689,2126945,2127461,2128225,6365282,6384416,6384737,6384993,6385184,6385405,6386208,6386273,6386429,6386685,6388065,6449522,6578464,6579488,6580512,6627426,6627435,6644841,6647328,6648352,6648425,6648681,6909029,6909472,6909545,6910496,7102830,7102834,7103776,7103858,7217249,7217250,7217259,7234657,7234661,7234848,7235872,7235950,7273760,7498094,7535982,7759136,7954720,7958386,16608800,16608868,16609021,16642301]},this.name=function(t){return t&&t.fC1Bytes?"windows-1254":"ISO-8859-9"},this.language=function(){return"tr"}},s.inherits(t.exports.ISO_8859_9,o),t.exports.windows_1251=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,144,131,32,131,32,32,32,32,32,32,154,32,156,157,158,159,144,32,32,32,32,32,32,32,32,32,154,32,156,157,158,159,32,162,162,188,32,180,32,32,184,32,186,32,32,32,32,191,32,32,179,179,180,181,32,32,184,32,186,32,188,190,190,191,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},this.ngrams=function(){return[2155040,2155246,2155758,2156512,2156576,2157280,2157294,2158048,2158053,2158305,2158574,2158576,2158816,2159086,2159090,2159342,2160626,2162162,14740968,14742268,14937632,15068156,15068648,15069682,15069728,15212783,15263008,15263776,15269664,15459821,15460384,15465709,15589408,15590688,15591653,15591679,15592992,15593186,15605986,15605999,15606001,15655456,15655648,15655918,15657248,15657980,15658016,15659506,15724267,15724773,15724776,15724782,15786210,15787492,15856352,15856354,15856360,15859488,15918571,15920672,15920880,15924256,16249582,16512288]},this.name=function(){return"windows-1251"},this.language=function(){return"ru"}},s.inherits(t.exports.windows_1251,o),t.exports.windows_1256=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,129,32,131,32,32,32,32,136,32,138,32,156,141,142,143,144,32,32,32,32,32,32,32,152,32,154,32,156,32,32,159,32,32,32,32,32,32,32,32,32,32,170,32,32,32,32,32,32,32,32,32,32,181,32,32,32,32,32,32,32,32,32,32,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,32,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,32,32,32,32,244,32,32,32,32,249,32,251,252,32,32,255]},this.ngrams=function(){return[2148321,2148324,2148551,2153185,2153965,2154977,2155492,2156231,13050055,13091104,13093408,13095200,13099296,13099459,13099463,13099464,13099466,13099468,13099469,13099471,13099475,13099482,13099486,13099491,13099494,13099501,13099808,13100064,13100234,13115591,13181127,13181149,13181153,13181155,13181158,13246663,13574343,13617440,13705415,13748512,13836487,14295239,14344684,14544160,14753991,14797088,14806048,14806304,14885063,14927648,14928160,14935072,14950599,15016135,15058720,15124449,15131680,15474887,15540423,15540451,15540454,15583520,15585568,15590432]},this.name=function(){return"windows-1256"},this.language=function(){return"ar"}},s.inherits(t.exports.windows_1256,o),t.exports.KOI8_R=function(){this.byteMap=function(){return[32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,163,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,163,32,32,32,32,32,32,32,32,32,32,32,32,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223]},this.ngrams=function(){return[2147535,2148640,2149313,2149327,2150081,2150085,2150338,2150607,2150610,2151105,2151375,2151380,2151631,2152224,2152399,2153153,2153684,2154196,12701385,12702936,12963032,12963529,12964820,12964896,13094688,13181136,13223200,13224224,13226272,13419982,13420832,13424846,13549856,13550880,13552069,13552081,13553440,13553623,13574352,13574355,13574359,13617103,13617696,13618392,13618464,13620180,13621024,13621185,13684684,13685445,13685449,13685455,13812183,13813188,13881632,13882561,13882569,13882583,13944268,13946656,13946834,13948960,14272544,14603471]},this.name=function(){return"KOI8-R"},this.language=function(){return"ru"}},s.inherits(t.exports.KOI8_R,o)},function(t,e,n){function r(){}var i=n(19),o=n(13);t.exports.UTF_16BE=function(){this.name=function(){return"UTF-16BE"},this.match=function(t){var e=t.fRawInput;return e.length>=2&&254==(255&e[0])&&255==(255&e[1])?new o(t,this,confidence=100):null}},t.exports.UTF_16LE=function(){this.name=function(){return"UTF-16LE"},this.match=function(t){var e=t.fRawInput;return e.length>=2&&255==(255&e[0])&&254==(255&e[1])?e.length>=4&&0==e[2]&&0==e[3]?null:new o(t,this,confidence=100):null}},r.prototype.match=function(t){var e=t.fRawInput,n=t.fRawLength/4*4,r=0,i=0,s=!1,a=0;if(0==n)return null;65279==this.getChar(e,0)&&(s=!0);for(var u=0;n>u;u+=4){var c=this.getChar(e,u);0>c||c>=1114111||c>=55296&&57343>=c?i+=1:r+=1}return s&&0==i?a=100:s&&r>10*i?a=80:r>3&&0==i?a=100:r>0&&0==i?a=80:r>10*i&&(a=25),0==a?null:new o(t,this,a)},t.exports.UTF_32BE=function(){this.name=function(){return"UTF-32BE"},this.getChar=function(t,e){return(255&t[e+0])<<24|(255&t[e+1])<<16|(255&t[e+2])<<8|255&t[e+3]}},i.inherits(t.exports.UTF_32BE,r),t.exports.UTF_32LE=function(){this.name=function(){return"UTF-32LE"},this.getChar=function(t,e){return(255&t[e+3])<<24|(255&t[e+2])<<16|(255&t[e+1])<<8|255&t[e+0]}},i.inherits(t.exports.UTF_32LE,r)},function(t,e,n){var r=n(13);t.exports=function(){this.name=function(){return"UTF-8"},this.match=function(t){var e,n=!1,i=0,o=0,s=t.fRawInput,a=0;t.fRawLength>=3&&239==(255&s[0])&&187==(255&s[1])&&191==(255&s[2])&&(n=!0);for(var u=0;u<t.fRawLength;u++){var c=s[u];if(0!=(128&c)){if(192==(224&c))a=1;else if(224==(240&c))a=2;else if(240==(248&c))a=3;else{if(o++,o>5)break;a=0}for(;u++,!(u>=t.fRawLength);){if(128!=(192&s[u])){o++;break}if(0==--a){i++;break}}}}if(e=0,n&&0==o)e=100;else if(n&&i>10*o)e=80;else if(i>3&&0==o)e=100;else if(i>0&&0==o)e=80;else if(0==i&&0==o)e=10;else{if(!(i>10*o))return null;e=25}return new r(t,this,e)}}},function(t,e,n){var r;(function(t,i){(function(){function o(t,e){if(t!==e){var n=t===t,r=e===e;if(t>e||!n||"undefined"==typeof t&&r)return 1;if(e>t||!r||"undefined"==typeof e&&n)return-1}return 0}function s(t,e,n){for(var r=t.length,i=n?r:-1;n?i--:++i<r;)if(e(t[i],i,t))return i;return-1}function a(t,e,n){if(e!==e)return y(t,n);for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function u(t){return"function"==typeof t||!1}function c(t){return"string"==typeof t?t:null==t?"":t+""}function l(t){return t.charCodeAt(0)}function h(t,e){for(var n=-1,r=t.length;++n<r&&e.indexOf(t.charAt(n))>-1;);return n}function f(t,e){for(var n=t.length;n--&&e.indexOf(t.charAt(n))>-1;);return n}function p(t,e){return o(t.criteria,e.criteria)||t.index-e.index}function d(t,e,n){for(var r=-1,i=t.criteria,s=e.criteria,a=i.length,u=n.length;++r<a;){var c=o(i[r],s[r]);if(c)return r>=u?c:c*(n[r]?1:-1)}return t.index-e.index}function m(t){return Ge[t]}function g(t){return Ve[t]}function v(t){return"\\"+Ye[t]}function y(t,e,n){for(var r=t.length,i=e+(n?0:-1);n?i--:++i<r;){var o=t[i];if(o!==o)return i}return-1}function b(t){return!!t&&"object"==typeof t}function x(t){return 160>=t&&t>=9&&13>=t||32==t||160==t||5760==t||6158==t||t>=8192&&(8202>=t||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function w(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;)t[n]===e&&(t[n]=z,o[++i]=n);return o}function _(t,e){for(var n,r=-1,i=t.length,o=-1,s=[];++r<i;){var a=t[r],u=e?e(a,r,t):a;r&&n===u||(n=u,s[++o]=a)}return s}function T(t){for(var e=-1,n=t.length;++e<n&&x(t.charCodeAt(e)););return e}function S(t){for(var e=t.length;e--&&x(t.charCodeAt(e)););return e}function E(t){return He[t]}function C(t){function e(t){if(b(t)&&!su(t)&&!(t instanceof i)){if(t instanceof r)return t;if(Ms.call(t,"__chain__")&&Ms.call(t,"__wrapped__"))return Xr(t)}return new r(t)}function n(){}function r(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}function i(t){this.__wrapped__=t,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=aa,this.__views__=null}function x(){var t=this.__actions__,e=this.__iteratees__,n=this.__views__,r=new i(this.__wrapped__);return r.__actions__=t?Je(t):null,r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=e?Je(e):null,r.__takeCount__=this.__takeCount__,r.__views__=n?Je(n):null,r}function Z(){if(this.__filtered__){var t=new i(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function re(){var t=this.__wrapped__.value();if(!su(t))return Xn(t,this.__actions__);var e=this.__dir__,n=0>e,r=Mr(0,t.length,this.__views__),i=r.start,o=r.end,s=o-i,a=n?o:i-1,u=ea(s,this.__takeCount__),c=this.__iteratees__,l=c?c.length:0,h=0,f=[];t:for(;s--&&u>h;){a+=e;for(var p=-1,d=t[a];++p<l;){var m=c[p],g=m.iteratee,v=m.type;if(v==W){if(m.done&&(n?a>m.index:a<m.index)&&(m.count=0,m.done=!1),m.index=a,!m.done){var y=m.limit;if(!(m.done=y>-1?m.count++>=y:!g(d)))continue t}}else{var b=g(d);if(v==V)d=b;else if(!b){if(v==G)continue t;break t}}}f[h++]=d}return f}function oe(){this.__data__={}}function Ge(t){return this.has(t)&&delete this.__data__[t]}function Ve(t){return"__proto__"==t?A:this.__data__[t]}function He(t){return"__proto__"!=t&&Ms.call(this.__data__,t)}function ze(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function Ye(t){var e=t?t.length:0;for(this.data={hash:Ks(null),set:new Vs};e--;)this.push(t[e])}function Xe(t,e){var n=t.data,r="string"==typeof e||fo(e)?n.set.has(e):n.hash[e];return r?0:-1}function $e(t){var e=this.data;"string"==typeof t||fo(t)?e.set.add(t):e.hash[t]=!0}function Je(t,e){var n=-1,r=t.length;for(e||(e=ms(r));++n<r;)e[n]=t[n];return e}function Ke(t,e){for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function Qe(t,e){for(var n=t.length;n--&&e(t[n],n,t)!==!1;);return t}function en(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function nn(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[++i]=s)}return o}function rn(t,e){for(var n=-1,r=t.length,i=ms(r);++n<r;)i[n]=e(t[n],n,t);return i}function on(t){for(var e=-1,n=t.length,r=sa;++e<n;){var i=t[e];i>r&&(r=i)}return r}function sn(t){for(var e=-1,n=t.length,r=aa;++e<n;){var i=t[e];r>i&&(r=i)}return r}function an(t,e,n,r){var i=-1,o=t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function un(t,e,n,r){var i=t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function cn(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function ln(t){for(var e=t.length,n=0;e--;)n+=+t[e]||0;return n}function hn(t,e){return"undefined"==typeof t?e:t}function fn(t,e,n,r){return"undefined"!=typeof t&&Ms.call(r,n)?t:e}function pn(t,e,n){var r=yu(e);if(!n)return mn(e,t,r);for(var i=-1,o=r.length;++i<o;){var s=r[i],a=t[s],u=n(a,e[s],s,t,e);(u===u?u===a:a!==a)&&("undefined"!=typeof a||s in t)||(t[s]=u)}return t}function dn(t,e){for(var n=-1,r=t.length,i=Dr(r),o=e.length,s=ms(o);++n<o;){var a=e[n];i?(a=parseFloat(a),s[n]=Lr(a,r)?t[a]:A):s[n]=t[a]}return s}function mn(t,e,n){n||(n=e,e={});for(var r=-1,i=n.length;++r<i;){var o=n[r];e[o]=t[o]}return e}function gn(t,e,n){var r=typeof t;return"function"==r?"undefined"==typeof e?t:Kn(t,e,n):null==t?ns:"object"==r?Pn(t):"undefined"==typeof e?Bn(t+""):In(t+"",e)}function vn(t,e,n,r,i,o,s){var a;if(n&&(a=i?n(t,r,i):n(t)),"undefined"!=typeof a)return a;if(!fo(t))return t;var u=su(t);if(u){if(a=Rr(t),!e)return Je(t,a)}else{var c=Ps.call(t),l=c==Q;if(c!=ee&&c!=Y&&(!l||i))return Ue[c]?Ir(t,c,e):i?t:{};if(a=Pr(l?{}:t),!e)return mn(t,a,yu(t))}o||(o=[]),s||(s=[]);for(var h=o.length;h--;)if(o[h]==t)return s[h];return o.push(t),s.push(a),(u?Ke:Cn)(t,function(r,i){a[i]=vn(r,e,n,i,t,o,s)}),a}function yn(t,e,n){if("function"!=typeof t)throw new Ss(H);return Hs(function(){t.apply(A,n)},e)}function bn(t,e){var n=t?t.length:0,r=[];if(!n)return r;var i=-1,o=Or(),s=o==a,u=s&&e.length>=200?_a(e):null,c=e.length;u&&(o=Xe,s=!1,e=u);t:for(;++i<n;){var l=t[i];if(s&&l===l){for(var h=c;h--;)if(e[h]===l)continue t;r.push(l)}else o(e,l,0)<0&&r.push(l)}return r}function xn(t,e){var n=!0;return va(t,function(t,r,i){return n=!!e(t,r,i)}),n}function wn(t,e,n,r){var i=t.length;for(n=null==n?0:+n||0,0>n&&(n=-n>i?0:i+n),r="undefined"==typeof r||r>i?i:+r||0,0>r&&(r+=i),i=n>r?0:r>>>0,n>>>=0;i>n;)t[n++]=e;return t}function _n(t,e){var n=[];return va(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Tn(t,e,n,r){var i;return n(t,function(t,n,o){return e(t,n,o)?(i=r?n:t,!1):void 0}),i}function Sn(t,e,n){for(var r=-1,i=t.length,o=-1,s=[];++r<i;){var a=t[r];if(b(a)&&Dr(a.length)&&(su(a)||oo(a))){e&&(a=Sn(a,e,n));var u=-1,c=a.length;for(s.length+=c;++u<c;)s[++o]=a[u]}else n||(s[++o]=a)}return s}function En(t,e){return ba(t,e,ko)}function Cn(t,e){return ba(t,e,yu)}function An(t,e){return xa(t,e,yu)}function jn(t,e){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var s=e[n];uu(t[s])&&(o[++i]=s)}return o}function kn(t,e,n,r,i,o){if(t===e)return 0!==t||1/t==1/e;var s=typeof t,a=typeof e;return"function"!=s&&"object"!=s&&"function"!=a&&"object"!=a||null==t||null==e?t!==t&&e!==e:On(t,e,kn,n,r,i,o)}function On(t,e,n,r,i,o,s){var a=su(t),u=su(e),c=X,l=X;a||(c=Ps.call(t),c==Y?c=ee:c!=ee&&(a=wo(t))),u||(l=Ps.call(e),l==Y?l=ee:l!=ee&&(u=wo(e)));var h=c==ee||i&&c==Q,f=l==ee||i&&l==Q,p=c==l;if(p&&!a&&!h)return Cr(t,e,c);if(i){if(!(p||h&&f))return!1}else{var d=h&&Ms.call(t,"__wrapped__"),m=f&&Ms.call(e,"__wrapped__");if(d||m)return n(d?t.value():t,m?e.value():e,r,i,o,s);if(!p)return!1}o||(o=[]),s||(s=[]);for(var g=o.length;g--;)if(o[g]==t)return s[g]==e;o.push(t),s.push(e);var v=(a?Er:Ar)(t,e,n,r,i,o,s);return o.pop(),s.pop(),v}function Mn(t,e,n,r,i){for(var o=-1,s=e.length,a=!i;++o<s;)if(a&&r[o]?n[o]!==t[e[o]]:!(e[o]in t))return!1;
for(o=-1;++o<s;){var u=e[o],c=t[u],l=n[o];if(a&&r[o])var h="undefined"!=typeof c||u in t;else h=i?i(c,l,u):A,"undefined"==typeof h&&(h=kn(l,c,i,!0));if(!h)return!1}return!0}function Rn(t,e){var n=[];return va(t,function(t,r,i){n.push(e(t,r,i))}),n}function Pn(t){var e=yu(t),n=e.length;if(!n)return es(!0);if(1==n){var r=e[0],i=t[r];if(Nr(i))return function(t){return null!=t&&t[r]===i&&("undefined"!=typeof i||r in Yr(t))}}for(var o=ms(n),s=ms(n);n--;)i=t[e[n]],o[n]=i,s[n]=Nr(i);return function(t){return null!=t&&Mn(Yr(t),e,o,s)}}function In(t,e){return Nr(e)?function(n){return null!=n&&n[t]===e&&("undefined"!=typeof e||t in Yr(n))}:function(n){return null!=n&&kn(e,n[t],null,!0)}}function Ln(t,e,n,r,i){if(!fo(t))return t;var o=Dr(e.length)&&(su(e)||wo(e));return(o?Ke:Cn)(e,function(e,s,a){if(b(e))return r||(r=[]),i||(i=[]),Fn(t,a,s,Ln,n,r,i);var u=t[s],c=n?n(u,e,s,t,a):A,l="undefined"==typeof c;l&&(c=e),!o&&"undefined"==typeof c||!l&&(c===c?c===u:u!==u)||(t[s]=c)}),t}function Fn(t,e,n,r,i,o,s){for(var a=o.length,u=e[n];a--;)if(o[a]==u)return void(t[n]=s[a]);var c=t[n],l=i?i(c,u,n,t,e):A,h="undefined"==typeof l;h&&(l=u,Dr(u.length)&&(su(u)||wo(u))?l=su(c)?c:c&&c.length?Je(c):[]:cu(u)||oo(u)?l=oo(c)?So(c):cu(c)?c:{}:h=!1),o.push(u),s.push(l),h?t[n]=r(l,u,i,o,s):(l===l?l!==c:c===c)&&(t[n]=l)}function Bn(t){return function(e){return null==e?A:e[t]}}function Dn(t,e){return t+qs(oa()*(e-t+1))}function Nn(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function qn(t,e,n){var r=-1,i=t.length;e=null==e?0:+e||0,0>e&&(e=-e>i?0:i+e),n="undefined"==typeof n||n>i?i:+n||0,0>n&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=ms(i);++r<i;)o[r]=t[r+e];return o}function Un(t,e){var n;return va(t,function(t,r,i){return n=e(t,r,i),!n}),!!n}function Wn(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Gn(t,e,n){var r=-1,i=t.length,o=Dr(i)?ms(i):[];return va(t,function(t){for(var n=e.length,i=ms(n);n--;)i[n]=null==t?A:t[e[n]];o[++r]={criteria:i,index:r,value:t}}),Wn(o,function(t,e){return d(t,e,n)})}function Vn(t,e){var n=0;return va(t,function(t,r,i){n+=+e(t,r,i)||0}),n}function Hn(t,e){var n=-1,r=Or(),i=t.length,o=r==a,s=o&&i>=200,u=s?_a():null,c=[];u?(r=Xe,o=!1):(s=!1,u=e?[]:c);t:for(;++n<i;){var l=t[n],h=e?e(l,n,t):l;if(o&&l===l){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),c.push(l)}else r(u,h,0)<0&&((e||s)&&u.push(h),c.push(l))}return c}function zn(t,e){for(var n=-1,r=e.length,i=ms(r);++n<r;)i[n]=t[e[n]];return i}function Yn(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?qn(t,r?0:o,r?o+1:i):qn(t,r?o+1:0,r?i:o)}function Xn(t,e){var n=t;n instanceof i&&(n=n.value());for(var r=-1,o=e.length;++r<o;){var s=[n],a=e[r];Ws.apply(s,a.args),n=a.func.apply(a.thisArg,s)}return n}function $n(t,e,n){var r=0,i=t?t.length:r;if("number"==typeof e&&e===e&&la>=i){for(;i>r;){var o=r+i>>>1,s=t[o];(n?e>=s:e>s)?r=o+1:i=o}return i}return Jn(t,e,ns,n)}function Jn(t,e,n,r){e=n(e);for(var i=0,o=t?t.length:0,s=e!==e,a="undefined"==typeof e;o>i;){var u=qs((i+o)/2),c=n(t[u]),l=c===c;if(s)var h=l||r;else h=a?l&&(r||"undefined"!=typeof c):r?e>=c:e>c;h?i=u+1:o=u}return ea(o,ca)}function Kn(t,e,n){if("function"!=typeof t)return ns;if("undefined"==typeof e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)};case 5:return function(n,r,i,o,s){return t.call(e,n,r,i,o,s)}}return function(){return t.apply(e,arguments)}}function Qn(t){return Bs.call(t,0)}function Zn(t,e,n){for(var r=n.length,i=-1,o=ta(t.length-r,0),s=-1,a=e.length,u=ms(o+a);++s<a;)u[s]=e[s];for(;++i<r;)u[n[i]]=t[i];for(;o--;)u[s++]=t[i++];return u}function tr(t,e,n){for(var r=-1,i=n.length,o=-1,s=ta(t.length-i,0),a=-1,u=e.length,c=ms(s+u);++o<s;)c[o]=t[o];for(var l=o;++a<u;)c[l+a]=e[a];for(;++r<i;)c[l+n[r]]=t[o++];return c}function er(t,e){return function(n,r,i){var o=e?e():{};if(r=kr(r,i,3),su(n))for(var s=-1,a=n.length;++s<a;){var u=n[s];t(o,u,r(u,s,n),n)}else va(n,function(e,n,i){t(o,e,r(e,n,i),i)});return o}}function nr(t){return function(){var e=arguments,n=e.length,r=e[0];if(2>n||null==r)return r;var i=e[n-2],o=e[n-1],s=e[3];n>3&&"function"==typeof i?(i=Kn(i,o,5),n-=2):(i=n>2&&"function"==typeof o?o:null,n-=i?1:0),s&&Fr(e[1],e[2],s)&&(i=3==n?null:i,n=2);for(var a=0;++a<n;){var u=e[a];u&&t(r,u,i)}return r}}function rr(t,e){return function(n,r){var i=n?n.length:0;if(!Dr(i))return t(n,r);for(var o=e?i:-1,s=Yr(n);(e?o--:++o<i)&&r(s[o],o,s)!==!1;);return n}}function ir(t){return function(e,n,r){for(var i=Yr(e),o=r(e),s=o.length,a=t?s:-1;t?a--:++a<s;){var u=o[a];if(n(i[u],u,i)===!1)break}return e}}function or(t,e){function n(){var i=this&&this!==Ze&&this instanceof n?r:t;return i.apply(e,arguments)}var r=ar(t);return n}function sr(t){return function(e){for(var n=-1,r=Zo(No(e)),i=r.length,o="";++n<i;)o=t(o,r[n],n);return o}}function ar(t){return function(){var e=ga(t.prototype),n=t.apply(e,arguments);return fo(n)?n:e}}function ur(t){function e(n,r,i){i&&Fr(n,r,i)&&(r=null);var o=Sr(n,t,null,null,null,null,null,r);return o.placeholder=e.placeholder,o}return e}function cr(t,e){return function(n,r,i){i&&Fr(n,r,i)&&(r=null);var o=kr(),s=null==r;if(o===gn&&s||(s=!1,r=o(r,i,3)),s){var a=su(n);if(a||!xo(n))return t(a?n:zr(n));r=l}return jr(n,r,e)}}function lr(t,e){return function(n,r,i){if(r=kr(r,i,3),su(n)){var o=s(n,r,e);return o>-1?n[o]:A}return Tn(n,r,t)}}function hr(t){return function(e,n,r){return e&&e.length?(n=kr(n,r,3),s(e,n,t)):-1}}function fr(t){return function(e,n,r){return n=kr(n,r,3),Tn(e,n,t,!0)}}function pr(t){return function(){var e=arguments.length;if(!e)return function(){return arguments[0]};for(var n,i=t?e:-1,o=0,s=ms(e);t?i--:++i<e;){var a=s[o++]=arguments[i];if("function"!=typeof a)throw new Ss(H);var u=n?"":Sa(a);n="wrapper"==u?new r([]):n}for(i=n?-1:e;++i<e;){a=s[i],u=Sa(a);var c="wrapper"==u?Ta(a):null;n=c&&Br(c[0])?n[Sa(c[0])].apply(n,c[3]):1==a.length&&Br(a)?n[u]():n.thru(a)}return function(){var t=arguments;if(n&&1==t.length&&su(t[0]))return n.plant(t[0]).value();for(var r=0,i=s[r].apply(this,t);++r<e;)i=s[r].call(this,i);return i}}}function dr(t,e){return function(n,r,i){return"function"==typeof r&&"undefined"==typeof i&&su(n)?t(n,r):e(n,Kn(r,i,3))}}function mr(t){return function(e,n,r){return("function"!=typeof n||"undefined"!=typeof r)&&(n=Kn(n,r,3)),t(e,n,ko)}}function gr(t){return function(e,n,r){return("function"!=typeof n||"undefined"!=typeof r)&&(n=Kn(n,r,3)),t(e,n)}}function vr(t){return function(e,n,r){return e=c(e),e&&(t?e:"")+wr(e,n,r)+(t?"":e)}}function yr(t){var e=Zi(function(n,r){var i=w(r,e.placeholder);return Sr(n,t,null,r,i)});return e}function br(t,e){return function(n,r,i,o){var s=arguments.length<3;return"function"==typeof r&&"undefined"==typeof o&&su(n)?t(n,r,i,s):Nn(n,kr(r,o,4),i,s,e)}}function xr(t,e,n,r,i,o,s,a,u,c){function l(){for(var b=arguments.length,x=b,_=ms(b);x--;)_[x]=arguments[x];if(r&&(_=Zn(_,r,i)),o&&(_=tr(_,o,s)),d||g){var T=l.placeholder,S=w(_,T);if(b-=S.length,c>b){var E=a?Je(a):null,C=ta(c-b,0),j=d?S:null,M=d?null:S,R=d?_:null,P=d?null:_;e|=d?I:L,e&=~(d?L:I),m||(e&=~(k|O));var F=[t,e,n,R,j,P,M,E,u,C],B=xr.apply(A,F);return Br(t)&&Ea(B,F),B.placeholder=T,B}}var D=f?n:this;p&&(t=D[y]),a&&(_=Gr(_,a)),h&&u<_.length&&(_.length=u);var N=this&&this!==Ze&&this instanceof l?v||ar(t):t;return N.apply(D,_)}var h=e&F,f=e&k,p=e&O,d=e&R,m=e&M,g=e&P,v=!p&&ar(t),y=t;return l}function wr(t,e,n){var r=t.length;if(e=+e,r>=e||!Qs(e))return"";var i=e-r;return n=null==n?" ":n+"",Ho(n,Ds(i/n.length)).slice(0,i)}function _r(t,e,n,r){function i(){for(var e=-1,a=arguments.length,u=-1,c=r.length,l=ms(a+c);++u<c;)l[u]=r[u];for(;a--;)l[u++]=arguments[++e];var h=this&&this!==Ze&&this instanceof i?s:t;return h.apply(o?n:this,l)}var o=e&k,s=ar(t);return i}function Tr(t){return function(e,n,r,i){var o=kr(r);return o===gn&&null==r?$n(e,n,t):Jn(e,n,o(r,i,1),t)}}function Sr(t,e,n,r,i,o,s,a){var u=e&O;if(!u&&"function"!=typeof t)throw new Ss(H);var c=r?r.length:0;if(c||(e&=~(I|L),r=i=null),c-=i?i.length:0,e&L){var l=r,h=i;r=i=null}var f=u?null:Ta(t),p=[t,e,n,r,i,l,h,o,s,a];if(f&&(qr(p,f),e=p[1],a=p[9]),p[9]=null==a?u?0:t.length:ta(a-c,0)||0,e==k)var d=or(p[0],p[2]);else d=e!=I&&e!=(k|I)||p[4].length?xr.apply(A,p):_r.apply(A,p);var m=f?wa:Ea;return m(d,p)}function Er(t,e,n,r,i,o,s){var a=-1,u=t.length,c=e.length,l=!0;if(u!=c&&!(i&&c>u))return!1;for(;l&&++a<u;){var h=t[a],f=e[a];if(l=A,r&&(l=i?r(f,h,a):r(h,f,a)),"undefined"==typeof l)if(i)for(var p=c;p--&&(f=e[p],!(l=h&&h===f||n(h,f,r,i,o,s))););else l=h&&h===f||n(h,f,r,i,o,s)}return!!l}function Cr(t,e,n){switch(n){case $:case J:return+t==+e;case K:return t.name==e.name&&t.message==e.message;case te:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case ne:case ie:return t==e+""}return!1}function Ar(t,e,n,r,i,o,s){var a=yu(t),u=a.length,c=yu(e),l=c.length;if(u!=l&&!i)return!1;for(var h=i,f=-1;++f<u;){var p=a[f],d=i?p in e:Ms.call(e,p);if(d){var m=t[p],g=e[p];d=A,r&&(d=i?r(g,m,p):r(m,g,p)),"undefined"==typeof d&&(d=m&&m===g||n(m,g,r,i,o,s))}if(!d)return!1;h||(h="constructor"==p)}if(!h){var v=t.constructor,y=e.constructor;if(v!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y))return!1}return!0}function jr(t,e,n){var r=n?aa:sa,i=r,o=i;return va(t,function(t,s,a){var u=e(t,s,a);((n?i>u:u>i)||u===r&&u===o)&&(i=u,o=t)}),o}function kr(t,n,r){var i=e.callback||ts;return i=i===ts?gn:i,r?i(t,n,r):i}function Or(t,n,r){var i=e.indexOf||oi;return i=i===oi?a:i,t?i(t,n,r):i}function Mr(t,e,n){for(var r=-1,i=n?n.length:0;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=ea(e,t+s);break;case"takeRight":t=ta(t,e-s)}}return{start:t,end:e}}function Rr(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Ms.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Pr(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=ws),new e}function Ir(t,e,n){var r=t.constructor;switch(e){case se:return Qn(t);case $:case J:return new r(+t);case ae:case ue:case ce:case le:case he:case fe:case pe:case de:case me:var i=t.buffer;return new r(n?Qn(i):i,t.byteOffset,t.length);case te:case ie:return new r(t);case ne:var o=new r(t.source,je.exec(t));o.lastIndex=t.lastIndex}return o}function Lr(t,e){return t=+t,e=null==e?fa:e,t>-1&&t%1==0&&e>t}function Fr(t,e,n){if(!fo(n))return!1;var r=typeof e;if("number"==r)var i=n.length,o=Dr(i)&&Lr(e,i);else o="string"==r&&e in n;if(o){var s=n[e];return t===t?t===s:s!==s}return!1}function Br(t){var n=Sa(t);return!!n&&t===e[n]&&n in i.prototype}function Dr(t){return"number"==typeof t&&t>-1&&t%1==0&&fa>=t}function Nr(t){return t===t&&(0===t?1/t>0:!fo(t))}function qr(t,e){var n=t[1],r=e[1],i=n|r,o=F>i,s=r==F&&n==R||r==F&&n==B&&t[7].length<=e[8]||r==(F|B)&&n==R;if(!o&&!s)return t;r&k&&(t[2]=e[2],i|=n&k?0:M);var a=e[3];if(a){var u=t[3];t[3]=u?Zn(u,a,e[4]):Je(a),t[4]=u?w(t[3],z):Je(e[4])}return a=e[5],a&&(u=t[5],t[5]=u?tr(u,a,e[6]):Je(a),t[6]=u?w(t[5],z):Je(e[6])),a=e[7],a&&(t[7]=Je(a)),r&F&&(t[8]=null==t[8]?e[8]:ea(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function Ur(t,e){t=Yr(t);for(var n=-1,r=e.length,i={};++n<r;){var o=e[n];o in t&&(i[o]=t[o])}return i}function Wr(t,e){var n={};return En(t,function(t,r,i){e(t,r,i)&&(n[r]=t)}),n}function Gr(t,e){for(var n=t.length,r=ea(e.length,n),i=Je(t);r--;){var o=e[r];t[r]=Lr(o,n)?i[o]:A}return t}function Vr(t){{var n;e.support}if(!b(t)||Ps.call(t)!=ee||!Ms.call(t,"constructor")&&(n=t.constructor,"function"==typeof n&&!(n instanceof n)))return!1;var r;return En(t,function(t,e){r=e}),"undefined"==typeof r||Ms.call(t,r)}function Hr(t){for(var n=ko(t),r=n.length,i=r&&t.length,o=e.support,s=i&&Dr(i)&&(su(t)||o.nonEnumArgs&&oo(t)),a=-1,u=[];++a<r;){var c=n[a];(s&&Lr(c,i)||Ms.call(t,c))&&u.push(c)}return u}function zr(t){return null==t?[]:Dr(t.length)?fo(t)?t:ws(t):Io(t)}function Yr(t){return fo(t)?t:ws(t)}function Xr(t){return t instanceof i?t.clone():new r(t.__wrapped__,t.__chain__,Je(t.__actions__))}function $r(t,e,n){e=(n?Fr(t,e,n):null==e)?1:ta(+e||1,1);for(var r=0,i=t?t.length:0,o=-1,s=ms(Ds(i/e));i>r;)s[++o]=qn(t,r,r+=e);return s}function Jr(t){for(var e=-1,n=t?t.length:0,r=-1,i=[];++e<n;){var o=t[e];o&&(i[++r]=o)}return i}function Kr(t,e,n){var r=t?t.length:0;return r?((n?Fr(t,e,n):null==e)&&(e=1),qn(t,0>e?0:e)):[]}function Qr(t,e,n){var r=t?t.length:0;return r?((n?Fr(t,e,n):null==e)&&(e=1),e=r-(+e||0),qn(t,0,0>e?0:e)):[]}function Zr(t,e,n){return t&&t.length?Yn(t,kr(e,n,3),!0,!0):[]}function ti(t,e,n){return t&&t.length?Yn(t,kr(e,n,3),!0):[]}function ei(t,e,n,r){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&Fr(t,e,n)&&(n=0,r=i),wn(t,e,n,r)):[]}function ni(t){return t?t[0]:A}function ri(t,e,n){var r=t?t.length:0;return n&&Fr(t,e,n)&&(e=!1),r?Sn(t,e):[]}function ii(t){var e=t?t.length:0;return e?Sn(t,!0):[]}function oi(t,e,n){var r=t?t.length:0;if(!r)return-1;if("number"==typeof n)n=0>n?ta(r+n,0):n;else if(n){var i=$n(t,e),o=t[i];return(e===e?e===o:o!==o)?i:-1}return a(t,e,n||0)}function si(t){return Qr(t,1)}function ai(){for(var t=[],e=-1,n=arguments.length,r=[],i=Or(),o=i==a;++e<n;){var s=arguments[e];(su(s)||oo(s))&&(t.push(s),r.push(o&&s.length>=120?_a(e&&s):null))}n=t.length;var u=t[0],c=-1,l=u?u.length:0,h=[],f=r[0];t:for(;++c<l;)if(s=u[c],(f?Xe(f,s):i(h,s,0))<0){for(e=n;--e;){var p=r[e];if((p?Xe(p,s):i(t[e],s,0))<0)continue t}f&&f.push(s),h.push(s)}return h}function ui(t){var e=t?t.length:0;return e?t[e-1]:A}function ci(t,e,n){var r=t?t.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(0>n?ta(r+n,0):ea(n||0,r-1))+1;else if(n){i=$n(t,e,!0)-1;var o=t[i];return(e===e?e===o:o!==o)?i:-1}if(e!==e)return y(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1}function li(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,r=Or(),i=t.length;++n<i;)for(var o=0,s=t[n];(o=r(e,s,o))>-1;)zs.call(e,o,1);return e}function hi(t,e,n){var r=-1,i=t?t.length:0,o=[];for(e=kr(e,n,3);++r<i;){var s=t[r];e(s,r,t)&&(o.push(s),zs.call(t,r--,1),i--)}return o}function fi(t){return Kr(t,1)}function pi(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&Fr(t,e,n)&&(e=0,n=r),qn(t,e,n)):[]}function di(t,e,n){var r=t?t.length:0;return r?((n?Fr(t,e,n):null==e)&&(e=1),qn(t,0,0>e?0:e)):[]}function mi(t,e,n){var r=t?t.length:0;return r?((n?Fr(t,e,n):null==e)&&(e=1),e=r-(+e||0),qn(t,0>e?0:e)):[]}function gi(t,e,n){return t&&t.length?Yn(t,kr(e,n,3),!1,!0):[]}function vi(t,e,n){return t&&t.length?Yn(t,kr(e,n,3)):[]}function yi(t,e,n,r){var i=t?t.length:0;if(!i)return[];null!=e&&"boolean"!=typeof e&&(r=n,n=Fr(t,e,r)?null:e,e=!1);var o=kr();return(o!==gn||null!=n)&&(n=o(n,r,3)),e&&Or()==a?_(t,n):Hn(t,n)}function bi(t){for(var e=-1,n=(t&&t.length&&on(rn(t,Os)))>>>0,r=ms(n);++e<n;)r[e]=rn(t,Bn(e));return r}function xi(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(su(n)||oo(n))var r=r?bn(r,n).concat(bn(n,r)):n}return r?Hn(r):[]}function wi(t,e){var n=-1,r=t?t.length:0,i={};for(!r||e||su(t[0])||(e=[]);++n<r;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}function _i(t){var n=e(t);return n.__chain__=!0,n}function Ti(t,e,n){return e.call(n,t),t}function Si(t,e,n){return e.call(n,t)}function Ei(){return _i(this)}function Ci(){return new r(this.value(),this.__chain__)}function Ai(t){for(var e,r=this;r instanceof n;){var i=Xr(r);e?o.__wrapped__=i:e=i;var o=i;r=r.__wrapped__}return o.__wrapped__=t,e}function ji(){var t=this.__wrapped__;return t instanceof i?(this.__actions__.length&&(t=new i(this)),new r(t.reverse(),this.__chain__)):this.thru(function(t){return t.reverse()})}function ki(){return this.value()+""}function Oi(){return Xn(this.__wrapped__,this.__actions__)}function Mi(t,e,n){var r=su(t)?en:xn;return n&&Fr(t,e,n)&&(e=null),("function"!=typeof e||"undefined"!=typeof n)&&(e=kr(e,n,3)),r(t,e)}function Ri(t,e,n){var r=su(t)?nn:_n;return e=kr(e,n,3),r(t,e)}function Pi(t,e){return Ba(t,Pn(e))}function Ii(t,e,n,r){var i=t?t.length:0;return Dr(i)||(t=Io(t),i=t.length),i?(n="number"!=typeof n||r&&Fr(e,n,r)?0:0>n?ta(i+n,0):n||0,"string"==typeof t||!su(t)&&xo(t)?i>n&&t.indexOf(e,n)>-1:Or(t,e,n)>-1):!1}function Li(t,e,n){var r=su(t)?rn:Rn;return e=kr(e,n,3),r(t,e)}function Fi(t,e){return Li(t,Bn(e))}function Bi(t,e,n){var r=su(t)?nn:_n;return e=kr(e,n,3),r(t,function(t,n,r){return!e(t,n,r)})}function Di(t,e,n){if(n?Fr(t,e,n):null==e){t=zr(t);var r=t.length;return r>0?t[Dn(0,r-1)]:A}var i=Ni(t);return i.length=ea(0>e?0:+e||0,i.length),i}function Ni(t){t=zr(t);for(var e=-1,n=t.length,r=ms(n);++e<n;){var i=Dn(0,e);e!=i&&(r[e]=r[i]),r[i]=t[e]}return r}function qi(t){var e=t?t.length:0;return Dr(e)?e:yu(t).length}function Ui(t,e,n){var r=su(t)?cn:Un;return n&&Fr(t,e,n)&&(e=null),("function"!=typeof e||"undefined"!=typeof n)&&(e=kr(e,n,3)),r(t,e)}function Wi(t,e,n){if(null==t)return[];var r=-1,i=t.length,o=Dr(i)?ms(i):[];return n&&Fr(t,e,n)&&(e=null),e=kr(e,n,3),va(t,function(t,n,i){o[++r]={criteria:e(t,n,i),index:r,value:t}}),Wn(o,p)}function Gi(){var t=arguments,e=t[0],n=t[3],r=0,i=t.length-1;if(null==e)return[];for(var o=ms(i);i>r;)o[r]=t[++r];return n&&Fr(t[1],t[2],n)&&(o=t[1]),Gn(e,Sn(o),[])}function Vi(t,e,n,r){return null==t?[]:(r&&Fr(e,n,r)&&(n=null),su(e)||(e=null==e?[]:[e]),su(n)||(n=null==n?[]:[n]),Gn(t,e,n))}function Hi(t,e){return Ri(t,Pn(e))}function zi(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Ss(H);var n=t;t=e,e=n}return t=Qs(t=+t)?t:0,function(){return--t<1?e.apply(this,arguments):void 0}}function Yi(t,e,n){return n&&Fr(t,e,n)&&(e=null),e=t&&null==e?t.length:ta(+e||0,0),Sr(t,F,null,null,null,null,e)}function Xi(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new Ss(H);var r=t;t=e,e=r}return function(){return--t>0?n=e.apply(this,arguments):e=null,n}}function $i(t,e,n){function r(){f&&Ns(f),u&&Ns(u),u=f=p=A}function i(){var n=e-(Ya()-l);if(0>=n||n>e){u&&Ns(u);var r=p;u=f=p=A,r&&(d=Ya(),c=t.apply(h,a),f||u||(a=h=null))}else f=Hs(i,n)}function o(){f&&Ns(f),u=f=p=A,(g||m!==e)&&(d=Ya(),c=t.apply(h,a),f||u||(a=h=null))}function s(){if(a=arguments,l=Ya(),h=this,p=g&&(f||!v),m===!1)var n=v&&!f;else{u||v||(d=l);var r=m-(l-d),s=0>=r||r>m;s?(u&&(u=Ns(u)),d=l,c=t.apply(h,a)):u||(u=Hs(o,r))}return s&&f?f=Ns(f):f||e===m||(f=Hs(i,e)),n&&(s=!0,c=t.apply(h,a)),!s||f||u||(a=h=null),c}var a,u,c,l,h,f,p,d=0,m=!1,g=!0;if("function"!=typeof t)throw new Ss(H);if(e=0>e?0:+e||0,n===!0){var v=!0;g=!1}else fo(n)&&(v=n.leading,m="maxWait"in n&&ta(+n.maxWait||0,e),g="trailing"in n?n.trailing:g);return s.cancel=r,s}function Ji(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Ss(H);var n=function(){var r=arguments,i=n.cache,o=e?e.apply(this,r):r[0];if(i.has(o))return i.get(o);var s=t.apply(this,r);return i.set(o,s),s};return n.cache=new Ji.Cache,n}function Ki(t){if("function"!=typeof t)throw new Ss(H);return function(){return!t.apply(this,arguments)}}function Qi(t){return Xi(t,2)}function Zi(t,e){if("function"!=typeof t)throw new Ss(H);return e=ta("undefined"==typeof e?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,i=ta(n.length-e,0),o=ms(i);++r<i;)o[r]=n[e+r];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,n[0],o);case 2:return t.call(this,n[0],n[1],o)}var s=ms(e+1);for(r=-1;++r<e;)s[r]=n[r];return s[e]=o,t.apply(this,s)}}function to(t){if("function"!=typeof t)throw new Ss(H);return function(e){return t.apply(this,e)}}function eo(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Ss(H);return n===!1?r=!1:fo(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),We.leading=r,We.maxWait=+e,We.trailing=i,$i(t,e,We)}function no(t,e){return e=null==e?ns:e,Sr(e,I,null,[t],[])}function ro(t,e,n,r){return e&&"boolean"!=typeof e&&Fr(t,e,n)?e=!1:"function"==typeof e&&(r=n,n=e,e=!1),n="function"==typeof n&&Kn(n,r,1),vn(t,e,n)}function io(t,e,n){return e="function"==typeof e&&Kn(e,n,1),vn(t,!0,e)}function oo(t){var e=b(t)?t.length:A;return Dr(e)&&Ps.call(t)==Y}function so(t){return t===!0||t===!1||b(t)&&Ps.call(t)==$}function ao(t){return b(t)&&Ps.call(t)==J}function uo(t){return!!t&&1===t.nodeType&&b(t)&&Ps.call(t).indexOf("Element")>-1}function co(t){if(null==t)return!0;var e=t.length;return Dr(e)&&(su(t)||xo(t)||oo(t)||b(t)&&uu(t.splice))?!e:!yu(t).length}function lo(t,e,n,r){if(n="function"==typeof n&&Kn(n,r,3),!n&&Nr(t)&&Nr(e))return t===e;var i=n?n(t,e):A;return"undefined"==typeof i?kn(t,e,n):!!i}function ho(t){return b(t)&&"string"==typeof t.message&&Ps.call(t)==K}function fo(t){var e=typeof t;return"function"==e||!!t&&"object"==e}function po(t,e,n,r){var i=yu(e),o=i.length;if(!o)return!0;if(null==t)return!1;if(n="function"==typeof n&&Kn(n,r,3),!n&&1==o){var s=i[0],a=e[s];if(Nr(a))return a===t[s]&&("undefined"!=typeof a||s in Yr(t))}for(var u=ms(o),c=ms(o);o--;)a=u[o]=e[i[o]],c[o]=Nr(a);return Mn(Yr(t),i,u,c,n)}function mo(t){return yo(t)&&t!=+t}function go(t){return null==t?!1:Ps.call(t)==Q?Ls.test(ks.call(t)):b(t)&&Oe.test(t)}function vo(t){return null===t}function yo(t){return"number"==typeof t||b(t)&&Ps.call(t)==te}function bo(t){return b(t)&&Ps.call(t)==ne||!1}function xo(t){return"string"==typeof t||b(t)&&Ps.call(t)==ie}function wo(t){return b(t)&&Dr(t.length)&&!!qe[Ps.call(t)]}function _o(t){return"undefined"==typeof t}function To(t){var e=t?t.length:0;return Dr(e)?e?Je(t):[]:Io(t)}function So(t){return mn(t,ko(t))}function Eo(t,e,n){var r=ga(t);return n&&Fr(t,e,n)&&(e=null),e?mn(e,r,yu(e)):r}function Co(t){return jn(t,ko(t))}function Ao(t,e){return t?Ms.call(t,e):!1}function jo(t,e,n){n&&Fr(t,e,n)&&(e=null);for(var r=-1,i=yu(t),o=i.length,s={};++r<o;){var a=i[r],u=t[a];e?Ms.call(s,u)?s[u].push(a):s[u]=[a]:s[u]=a}return s}function ko(t){if(null==t)return[];fo(t)||(t=ws(t));var e=t.length;e=e&&Dr(e)&&(su(t)||ma.nonEnumArgs&&oo(t))&&e||0;for(var n=t.constructor,r=-1,i="function"==typeof n&&n.prototype===t,o=ms(e),s=e>0;++r<e;)o[r]=r+"";for(var a in t)s&&Lr(a,e)||"constructor"==a&&(i||!Ms.call(t,a))||o.push(a);return o}function Oo(t,e,n){var r={};return e=kr(e,n,3),Cn(t,function(t,n,i){r[n]=e(t,n,i)}),r}function Mo(t){for(var e=-1,n=yu(t),r=n.length,i=ms(r);++e<r;){var o=n[e];i[e]=[o,t[o]]}return i}function Ro(t,e,n){var r=null==t?A:t[e];return"undefined"==typeof r&&(r=n),uu(r)?r.call(t):r}function Po(t,e,n,r){var i=su(t)||wo(t);if(e=kr(e,r,4),null==n)if(i||fo(t)){var o=t.constructor;n=i?su(t)?new o:[]:ga(uu(o)&&o.prototype)}else n={};return(i?Ke:Cn)(t,function(t,r,i){return e(n,t,r,i)}),n}function Io(t){return zn(t,yu(t))}function Lo(t){return zn(t,ko(t))}function Fo(t,e,n){return e=+e||0,"undefined"==typeof n?(n=e,e=0):n=+n||0,t>=e&&n>t}function Bo(t,e,n){n&&Fr(t,e,n)&&(e=n=null);var r=null==t,i=null==e;if(null==n&&(i&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,i=!0)),r&&i&&(e=1,i=!1),t=+t||0,i?(e=t,t=0):e=+e||0,n||t%1||e%1){var o=oa();return ea(t+o*(e-t+parseFloat("1e-"+((o+"").length-1))),e)}return Dn(t,e)}function Do(t){return t=c(t),t&&t.charAt(0).toUpperCase()+t.slice(1)}function No(t){return t=c(t),t&&t.replace(Me,m).replace(Ce,"")}function qo(t,e,n){t=c(t),e+="";var r=t.length;return n="undefined"==typeof n?r:ea(0>n?0:+n||0,r),n-=e.length,n>=0&&t.indexOf(e,n)==n}function Uo(t){return t=c(t),t&&_e.test(t)?t.replace(xe,g):t}function Wo(t){return t=c(t),t&&Ie.test(t)?t.replace(Pe,"\\$&"):t}function Go(t,e,n){t=c(t),e=+e;var r=t.length;if(r>=e||!Qs(e))return t;var i=(e-r)/2,o=qs(i),s=Ds(i);return n=wr("",s,n),n.slice(0,o)+t+n}function Vo(t,e,n){return n&&Fr(t,e,n)&&(e=0),ia(t,e)}function Ho(t,e){var n="";if(t=c(t),e=+e,1>e||!t||!Qs(e))return n;do e%2&&(n+=t),e=qs(e/2),t+=t;while(e);return n}function zo(t,e,n){return t=c(t),n=null==n?0:ea(0>n?0:+n||0,t.length),t.lastIndexOf(e,n)==n}function Yo(t,n,r){var i=e.templateSettings;r&&Fr(t,n,r)&&(n=r=null),t=c(t),n=pn(pn({},r||n),i,fn);var o,s,a=pn(pn({},n.imports),i.imports,fn),u=yu(a),l=zn(a,u),h=0,f=n.interpolate||Re,p="__p += '",d=_s((n.escape||Re).source+"|"+f.source+"|"+(f===Ee?Ae:Re).source+"|"+(n.evaluate||Re).source+"|$","g"),m="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Ne+"]")+"\n";t.replace(d,function(e,n,r,i,a,u){return r||(r=i),p+=t.slice(h,u).replace(Le,v),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),a&&(s=!0,p+="';\n"+a+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),h=u+e.length,e}),p+="';\n";var g=n.variable;g||(p="with (obj) {\n"+p+"\n}\n"),p=(s?p.replace(ge,""):p).replace(ve,"$1").replace(ye,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var y=ju(function(){return ys(u,m+"return "+p).apply(A,l)});if(y.source=p,ho(y))throw y;return y}function Xo(t,e,n){var r=t;return(t=c(t))?(n?Fr(r,e,n):null==e)?t.slice(T(t),S(t)+1):(e+="",t.slice(h(t,e),f(t,e)+1)):t}function $o(t,e,n){var r=t;return t=c(t),t?t.slice((n?Fr(r,e,n):null==e)?T(t):h(t,e+"")):t}function Jo(t,e,n){var r=t;return t=c(t),t?(n?Fr(r,e,n):null==e)?t.slice(0,S(t)+1):t.slice(0,f(t,e+"")+1):t}function Ko(t,e,n){n&&Fr(t,e,n)&&(e=null);var r=D,i=N;if(null!=e)if(fo(e)){var o="separator"in e?e.separator:o;r="length"in e?+e.length||0:r,i="omission"in e?c(e.omission):i}else r=+e||0;if(t=c(t),r>=t.length)return t;var s=r-i.length;if(1>s)return i;var a=t.slice(0,s);if(null==o)return a+i;if(bo(o)){if(t.slice(s).search(o)){var u,l,h=t.slice(0,s);for(o.global||(o=_s(o.source,(je.exec(o)||"")+"g")),o.lastIndex=0;u=o.exec(h);)l=u.index;a=a.slice(0,null==l?s:l)}}else if(t.indexOf(o,s)!=s){var f=a.lastIndexOf(o);f>-1&&(a=a.slice(0,f))}return a+i}function Qo(t){return t=c(t),t&&we.test(t)?t.replace(be,E):t}function Zo(t,e,n){return n&&Fr(t,e,n)&&(e=null),t=c(t),t.match(e||Fe)||[]}function ts(t,e,n){return n&&Fr(t,e,n)&&(e=null),b(t)?rs(t):gn(t,e)}function es(t){return function(){return t}}function ns(t){return t}function rs(t){return Pn(vn(t,!0))}function is(t,e){return In(t+"",vn(e,!0))}function os(t,e,n){if(null==n){var r=fo(e),i=r&&yu(e),o=i&&i.length&&jn(e,i);(o?o.length:r)||(o=!1,n=e,e=t,t=this)}o||(o=jn(e,yu(e)));var s=!0,a=-1,u=uu(t),c=o.length;n===!1?s=!1:fo(n)&&"chain"in n&&(s=n.chain);for(;++a<c;){var l=o[a],h=e[l];t[l]=h,u&&(t.prototype[l]=function(e){return function(){var n=this.__chain__;if(s||n){var r=t(this.__wrapped__),i=r.__actions__=Je(this.__actions__);return i.push({func:e,args:arguments,thisArg:t}),r.__chain__=n,r}var o=[this.value()];return Ws.apply(o,arguments),e.apply(t,o)}}(h))}return t}function ss(){return t._=Is,this}function as(){}function us(t){return Bn(t+"")}function cs(t){return function(e){return null==t?A:t[e]}}function ls(t,e,n){n&&Fr(t,e,n)&&(e=n=null),t=+t||0,n=null==n?1:+n||0,null==e?(e=t,t=0):e=+e||0;for(var r=-1,i=ta(Ds((e-t)/(n||1)),0),o=ms(i);++r<i;)o[r]=t,t+=n;return o}function hs(t,e,n){if(t=+t,1>t||!Qs(t))return[];var r=-1,i=ms(ea(t,ua));for(e=Kn(e,n,1);++r<t;)ua>r?i[r]=e(r):e(r);return i}function fs(t){var e=++Rs;return c(t)+e}function ps(t,e){return t+e}function ds(t,e,n){n&&Fr(t,e,n)&&(e=null);var r=kr(),i=null==e;return r===gn&&i||(i=!1,e=r(e,n,3)),i?ln(su(t)?t:zr(t)):Vn(t,e)}t=t?tn.defaults(Ze.Object(),t,tn.pick(Ze,De)):Ze;var ms=t.Array,gs=t.Date,vs=t.Error,ys=t.Function,bs=t.Math,xs=t.Number,ws=t.Object,_s=t.RegExp,Ts=t.String,Ss=t.TypeError,Es=ms.prototype,Cs=ws.prototype,As=Ts.prototype,js=(js=t.window)&&js.document,ks=ys.prototype.toString,Os=Bn("length"),Ms=Cs.hasOwnProperty,Rs=0,Ps=Cs.toString,Is=t._,Ls=_s("^"+Wo(Ps).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Fs=go(Fs=t.ArrayBuffer)&&Fs,Bs=go(Bs=Fs&&new Fs(0).slice)&&Bs,Ds=bs.ceil,Ns=t.clearTimeout,qs=bs.floor,Us=go(Us=ws.getPrototypeOf)&&Us,Ws=Es.push,Gs=Cs.propertyIsEnumerable,Vs=go(Vs=t.Set)&&Vs,Hs=t.setTimeout,zs=Es.splice,Ys=go(Ys=t.Uint8Array)&&Ys,Xs=go(Xs=t.WeakMap)&&Xs,$s=function(){try{var e=go(e=t.Float64Array)&&e,n=new e(new Fs(10),0,1)&&e}catch(r){}return n}(),Js=go(Js=ms.isArray)&&Js,Ks=go(Ks=ws.create)&&Ks,Qs=t.isFinite,Zs=go(Zs=ws.keys)&&Zs,ta=bs.max,ea=bs.min,na=go(na=gs.now)&&na,ra=go(ra=xs.isFinite)&&ra,ia=t.parseInt,oa=bs.random,sa=xs.NEGATIVE_INFINITY,aa=xs.POSITIVE_INFINITY,ua=bs.pow(2,32)-1,ca=ua-1,la=ua>>>1,ha=$s?$s.BYTES_PER_ELEMENT:0,fa=bs.pow(2,53)-1,pa=Xs&&new Xs,da={},ma=e.support={};!function(){ma.funcDecomp=/\bthis\b/.test(function(){return this}),ma.funcNames="string"==typeof ys.name;try{ma.dom=11===js.createDocumentFragment().nodeType}catch(t){ma.dom=!1}try{ma.nonEnumArgs=!Gs.call(arguments,1)}catch(t){ma.nonEnumArgs=!0}}(0,0),e.templateSettings={escape:Te,evaluate:Se,interpolate:Ee,variable:"",imports:{_:e}};var ga=function(){function e(){}return function(n){if(fo(n)){e.prototype=n;var r=new e;e.prototype=null}return r||t.Object()}}(),va=rr(Cn),ya=rr(An,!0),ba=ir(),xa=ir(!0),wa=pa?function(t,e){return pa.set(t,e),t}:ns;Bs||(Qn=Fs&&Ys?function(t){var e=t.byteLength,n=$s?qs(e/ha):0,r=n*ha,i=new Fs(e);if(n){var o=new $s(i,0,n);o.set(new $s(t,0,n))}return e!=r&&(o=new Ys(i,r),o.set(new Ys(t,r))),i}:es(null));var _a=Ks&&Vs?function(t){return new Ye(t)}:es(null),Ta=pa?function(t){return pa.get(t)}:as,Sa=function(){return ma.funcNames?"constant"==es.name?Bn("name"):function(t){for(var e=t.name,n=da[e],r=n?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}:es("")}(),Ea=function(){var t=0,e=0;return function(n,r){var i=Ya(),o=U-(i-e);if(e=i,o>0){if(++t>=q)return n}else t=0;return wa(n,r)}}(),Ca=Zi(function(t,e){return su(t)||oo(t)?bn(t,Sn(e,!1,!0)):[]}),Aa=hr(),ja=hr(!0),ka=Zi(function(t,e){t||(t=[]),e=Sn(e);var n=e.length,r=dn(t,e);for(e.sort(o);n--;){var i=parseFloat(e[n]);if(i!=s&&Lr(i)){var s=i;zs.call(t,i,1)}}return r}),Oa=Tr(),Ma=Tr(!0),Ra=Zi(function(t){return Hn(Sn(t,!1,!0))}),Pa=Zi(function(t,e){return su(t)||oo(t)?bn(t,e):[]}),Ia=Zi(bi),La=Zi(function(t,e){var n=t?t.length:0;return Dr(n)&&(t=zr(t)),dn(t,Sn(e))}),Fa=er(function(t,e,n){Ms.call(t,n)?++t[n]:t[n]=1}),Ba=lr(va),Da=lr(ya,!0),Na=dr(Ke,va),qa=dr(Qe,ya),Ua=er(function(t,e,n){Ms.call(t,n)?t[n].push(e):t[n]=[e]}),Wa=er(function(t,e,n){t[n]=e}),Ga=Zi(function(t,e,n){var r=-1,i="function"==typeof e,o=t?t.length:0,s=Dr(o)?ms(o):[];return va(t,function(t){var o=i?e:null!=t&&t[e];s[++r]=o?o.apply(t,n):A}),s}),Va=er(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),Ha=br(an,va),za=br(un,ya),Ya=na||function(){return(new gs).getTime()},Xa=Zi(function(t,e,n){var r=k;if(n.length){var i=w(n,Xa.placeholder);r|=I}return Sr(t,r,e,n,i)}),$a=Zi(function(t,e){e=e.length?Sn(e):Co(t);for(var n=-1,r=e.length;++n<r;){var i=e[n];t[i]=Sr(t[i],k,t)}return t}),Ja=Zi(function(t,e,n){var r=k|O;if(n.length){var i=w(n,Ja.placeholder);r|=I}return Sr(e,r,t,n,i)}),Ka=ur(R),Qa=ur(P),Za=Zi(function(t,e){return yn(t,1,e)}),tu=Zi(function(t,e,n){return yn(t,e,n)}),eu=pr(),nu=pr(!0),ru=yr(I),iu=yr(L),ou=Zi(function(t,e){return Sr(t,B,null,null,null,Sn(e))}),su=Js||function(t){return b(t)&&Dr(t.length)&&Ps.call(t)==X};ma.dom||(uo=function(t){return!!t&&1===t.nodeType&&b(t)&&!cu(t)});var au=ra||function(t){return"number"==typeof t&&Qs(t)},uu=u(/x/)||Ys&&!u(Ys)?function(t){return Ps.call(t)==Q}:u,cu=Us?function(t){if(!t||Ps.call(t)!=ee)return!1;var e=t.valueOf,n=go(e)&&(n=Us(e))&&Us(n);return n?t==n||Us(t)==n:Vr(t)}:Vr,lu=nr(pn),hu=Zi(function(t){var e=t[0];return null==e?e:(t.push(hn),lu.apply(A,t))}),fu=fr(Cn),pu=fr(An),du=mr(ba),mu=mr(xa),gu=gr(Cn),vu=gr(An),yu=Zs?function(t){if(t)var e=t.constructor,n=t.length;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&n&&Dr(n)?Hr(t):fo(t)?Zs(t):[]}:Hr,bu=nr(Ln),xu=Zi(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=rn(Sn(e),Ts);return Ur(t,bn(ko(t),e))}var n=Kn(e[0],e[1],3);return Wr(t,function(t,e,r){return!n(t,e,r)})}),wu=Zi(function(t,e){return null==t?{}:"function"==typeof e[0]?Wr(t,Kn(e[0],e[1],3)):Ur(t,Sn(e))}),_u=sr(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)}),Tu=sr(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Su=vr(),Eu=vr(!0);
8!=ia(Be+"08")&&(Vo=function(t,e,n){return(n?Fr(t,e,n):null==e)?e=0:e&&(e=+e),t=Xo(t),ia(t,e||(ke.test(t)?16:10))});var Cu=sr(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Au=sr(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),ju=Zi(function(t,e){try{return t.apply(A,e)}catch(n){return ho(n)?n:new vs(n)}}),ku=cr(on),Ou=cr(sn,!0);return e.prototype=n.prototype,r.prototype=ga(n.prototype),r.prototype.constructor=r,i.prototype=ga(n.prototype),i.prototype.constructor=i,oe.prototype["delete"]=Ge,oe.prototype.get=Ve,oe.prototype.has=He,oe.prototype.set=ze,Ye.prototype.push=$e,Ji.Cache=oe,e.after=zi,e.ary=Yi,e.assign=lu,e.at=La,e.before=Xi,e.bind=Xa,e.bindAll=$a,e.bindKey=Ja,e.callback=ts,e.chain=_i,e.chunk=$r,e.compact=Jr,e.constant=es,e.countBy=Fa,e.create=Eo,e.curry=Ka,e.curryRight=Qa,e.debounce=$i,e.defaults=hu,e.defer=Za,e.delay=tu,e.difference=Ca,e.drop=Kr,e.dropRight=Qr,e.dropRightWhile=Zr,e.dropWhile=ti,e.fill=ei,e.filter=Ri,e.flatten=ri,e.flattenDeep=ii,e.flow=eu,e.flowRight=nu,e.forEach=Na,e.forEachRight=qa,e.forIn=du,e.forInRight=mu,e.forOwn=gu,e.forOwnRight=vu,e.functions=Co,e.groupBy=Ua,e.indexBy=Wa,e.initial=si,e.intersection=ai,e.invert=jo,e.invoke=Ga,e.keys=yu,e.keysIn=ko,e.map=Li,e.mapValues=Oo,e.matches=rs,e.matchesProperty=is,e.memoize=Ji,e.merge=bu,e.mixin=os,e.negate=Ki,e.omit=xu,e.once=Qi,e.pairs=Mo,e.partial=ru,e.partialRight=iu,e.partition=Va,e.pick=wu,e.pluck=Fi,e.property=us,e.propertyOf=cs,e.pull=li,e.pullAt=ka,e.range=ls,e.rearg=ou,e.reject=Bi,e.remove=hi,e.rest=fi,e.restParam=Zi,e.shuffle=Ni,e.slice=pi,e.sortBy=Wi,e.sortByAll=Gi,e.sortByOrder=Vi,e.spread=to,e.take=di,e.takeRight=mi,e.takeRightWhile=gi,e.takeWhile=vi,e.tap=Ti,e.throttle=eo,e.thru=Si,e.times=hs,e.toArray=To,e.toPlainObject=So,e.transform=Po,e.union=Ra,e.uniq=yi,e.unzip=bi,e.values=Io,e.valuesIn=Lo,e.where=Hi,e.without=Pa,e.wrap=no,e.xor=xi,e.zip=Ia,e.zipObject=wi,e.backflow=nu,e.collect=Li,e.compose=nu,e.each=Na,e.eachRight=qa,e.extend=lu,e.iteratee=ts,e.methods=Co,e.object=wi,e.select=Ri,e.tail=fi,e.unique=yi,os(e,e),e.add=ps,e.attempt=ju,e.camelCase=_u,e.capitalize=Do,e.clone=ro,e.cloneDeep=io,e.deburr=No,e.endsWith=qo,e.escape=Uo,e.escapeRegExp=Wo,e.every=Mi,e.find=Ba,e.findIndex=Aa,e.findKey=fu,e.findLast=Da,e.findLastIndex=ja,e.findLastKey=pu,e.findWhere=Pi,e.first=ni,e.has=Ao,e.identity=ns,e.includes=Ii,e.indexOf=oi,e.inRange=Fo,e.isArguments=oo,e.isArray=su,e.isBoolean=so,e.isDate=ao,e.isElement=uo,e.isEmpty=co,e.isEqual=lo,e.isError=ho,e.isFinite=au,e.isFunction=uu,e.isMatch=po,e.isNaN=mo,e.isNative=go,e.isNull=vo,e.isNumber=yo,e.isObject=fo,e.isPlainObject=cu,e.isRegExp=bo,e.isString=xo,e.isTypedArray=wo,e.isUndefined=_o,e.kebabCase=Tu,e.last=ui,e.lastIndexOf=ci,e.max=ku,e.min=Ou,e.noConflict=ss,e.noop=as,e.now=Ya,e.pad=Go,e.padLeft=Su,e.padRight=Eu,e.parseInt=Vo,e.random=Bo,e.reduce=Ha,e.reduceRight=za,e.repeat=Ho,e.result=Ro,e.runInContext=C,e.size=qi,e.snakeCase=Cu,e.some=Ui,e.sortedIndex=Oa,e.sortedLastIndex=Ma,e.startCase=Au,e.startsWith=zo,e.sum=ds,e.template=Yo,e.trim=Xo,e.trimLeft=$o,e.trimRight=Jo,e.trunc=Ko,e.unescape=Qo,e.uniqueId=fs,e.words=Zo,e.all=Mi,e.any=Ui,e.contains=Ii,e.detect=Ba,e.foldl=Ha,e.foldr=za,e.head=ni,e.include=Ii,e.inject=Ha,os(e,function(){var t={};return Cn(e,function(n,r){e.prototype[r]||(t[r]=n)}),t}(),!1),e.sample=Di,e.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return Di(e,t)}):Di(this.value())},e.VERSION=j,Ke(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),Ke(["dropWhile","filter","map","takeWhile"],function(t,e){var n=e!=V,r=e==W;i.prototype[t]=function(t,o){var s=this.__filtered__,a=s&&r?new i(this):this.clone(),u=a.__iteratees__||(a.__iteratees__=[]);return u.push({done:!1,count:0,index:0,iteratee:kr(t,o,1),limit:-1,type:e}),a.__filtered__=s||n,a}}),Ke(["drop","take"],function(t,e){var n=t+"While";i.prototype[t]=function(n){var r=this.__filtered__,i=r&&!e?this.dropWhile():this.clone();if(n=null==n?1:ta(qs(n)||0,0),r)e?i.__takeCount__=ea(i.__takeCount__,n):ui(i.__iteratees__).limit=n;else{var o=i.__views__||(i.__views__=[]);o.push({size:n,type:t+(i.__dir__<0?"Right":"")})}return i},i.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()},i.prototype[t+"RightWhile"]=function(t,e){return this.reverse()[n](t,e).reverse()}}),Ke(["first","last"],function(t,e){var n="take"+(e?"Right":"");i.prototype[t]=function(){return this[n](1).value()[0]}}),Ke(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");i.prototype[t]=function(){return this[n](1)}}),Ke(["pluck","where"],function(t,e){var n=e?"filter":"map",r=e?Pn:Bn;i.prototype[t]=function(t){return this[n](r(t))}}),i.prototype.compact=function(){return this.filter(ns)},i.prototype.reject=function(t,e){return t=kr(t,e,1),this.filter(function(e){return!t(e)})},i.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=0>t?this.takeRight(-t):this.drop(t);return"undefined"!=typeof e&&(e=+e||0,n=0>e?n.dropRight(-e):n.take(e-t)),n},i.prototype.toArray=function(){return this.drop(0)},Cn(i.prototype,function(t,n){var o=e[n];if(o){var s=/^(?:filter|map|reject)|While$/.test(n),a=/^(?:first|last)$/.test(n);e.prototype[n]=function(){var n=arguments,u=(n.length,this.__chain__),c=this.__wrapped__,l=!!this.__actions__.length,h=c instanceof i,f=n[0],p=h||su(c);p&&s&&"function"==typeof f&&1!=f.length&&(h=p=!1);var d=h&&!l;if(a&&!u)return d?t.call(c):o.call(e,this.value());var m=function(t){var r=[t];return Ws.apply(r,n),o.apply(e,r)};if(p){var g=d?c:new i(this),v=t.apply(g,n);if(!a&&(l||v.__actions__)){var y=v.__actions__||(v.__actions__=[]);y.push({func:Si,args:[m],thisArg:e})}return new r(v,u)}return this.thru(m)}}}),Ke(["concat","join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var n=(/^(?:replace|split)$/.test(t)?As:Es)[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;return i&&!this.__chain__?n.apply(this.value(),t):this[r](function(e){return n.apply(e,t)})}}),Cn(i.prototype,function(t,n){var r=e[n];if(r){var i=r.name,o=da[i]||(da[i]=[]);o.push({name:n,func:r})}}),da[xr(null,O).name]=[{name:"wrapper",func:null}],i.prototype.clone=x,i.prototype.reverse=Z,i.prototype.value=re,e.prototype.chain=Ei,e.prototype.commit=Ci,e.prototype.plant=Ai,e.prototype.reverse=ji,e.prototype.toString=ki,e.prototype.run=e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=Oi,e.prototype.collect=e.prototype.map,e.prototype.head=e.prototype.first,e.prototype.select=e.prototype.filter,e.prototype.tail=e.prototype.rest,e}var A,j="3.6.0",k=1,O=2,M=4,R=8,P=16,I=32,L=64,F=128,B=256,D=30,N="...",q=150,U=16,W=0,G=1,V=2,H="Expected a function",z="__lodash_placeholder__",Y="[object Arguments]",X="[object Array]",$="[object Boolean]",J="[object Date]",K="[object Error]",Q="[object Function]",Z="[object Map]",te="[object Number]",ee="[object Object]",ne="[object RegExp]",re="[object Set]",ie="[object String]",oe="[object WeakMap]",se="[object ArrayBuffer]",ae="[object Float32Array]",ue="[object Float64Array]",ce="[object Int8Array]",le="[object Int16Array]",he="[object Int32Array]",fe="[object Uint8Array]",pe="[object Uint8ClampedArray]",de="[object Uint16Array]",me="[object Uint32Array]",ge=/\b__p \+= '';/g,ve=/\b(__p \+=) '' \+/g,ye=/(__e\(.*?\)|\b__t\)) \+\n'';/g,be=/&(?:amp|lt|gt|quot|#39|#96);/g,xe=/[&<>"'`]/g,we=RegExp(be.source),_e=RegExp(xe.source),Te=/<%-([\s\S]+?)%>/g,Se=/<%([\s\S]+?)%>/g,Ee=/<%=([\s\S]+?)%>/g,Ce=/[\u0300-\u036f\ufe20-\ufe23]/g,Ae=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,je=/\w*$/,ke=/^0[xX]/,Oe=/^\[object .+?Constructor\]$/,Me=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Re=/($^)/,Pe=/[.*+?^${}()|[\]\/\\]/g,Ie=RegExp(Pe.source),Le=/['\n\r\u2028\u2029\\]/g,Fe=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),Be=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",De=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window"],Ne=-1,qe={};qe[ae]=qe[ue]=qe[ce]=qe[le]=qe[he]=qe[fe]=qe[pe]=qe[de]=qe[me]=!0,qe[Y]=qe[X]=qe[se]=qe[$]=qe[J]=qe[K]=qe[Q]=qe[Z]=qe[te]=qe[ee]=qe[ne]=qe[re]=qe[ie]=qe[oe]=!1;var Ue={};Ue[Y]=Ue[X]=Ue[se]=Ue[$]=Ue[J]=Ue[ae]=Ue[ue]=Ue[ce]=Ue[le]=Ue[he]=Ue[te]=Ue[ee]=Ue[ne]=Ue[ie]=Ue[fe]=Ue[pe]=Ue[de]=Ue[me]=!0,Ue[K]=Ue[Q]=Ue[Z]=Ue[re]=Ue[oe]=!1;var We={leading:!1,maxWait:0,trailing:!1},Ge={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Ve={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},He={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},ze={"function":!0,object:!0},Ye={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Xe=ze[typeof e]&&e&&!e.nodeType&&e,$e=ze[typeof t]&&t&&!t.nodeType&&t,Je=Xe&&$e&&"object"==typeof i&&i,Ke=ze[typeof self]&&self&&self.Object&&self,Qe=ze[typeof window]&&window&&window.Object&&window,Ze=($e&&$e.exports===Xe&&Xe,Je||Qe!==(this&&this.window)&&Qe||Ke||this),tn=C();Ze._=tn,r=function(){return tn}.call(e,n,e,t),!(r!==A&&(t.exports=r))}).call(this)}).call(e,n(47)(t),function(){return this}())},function(t,e,n){var r=n(101);e.read=function(){throw new Error("Synchronous read unsupported in browser!")},e.readAsync=function(t,e){var n=r.detect(t),i=new FileReader;i.onload=function(){e(null,i.result)},i.onerror=function(){e(new Error("cannot read it"))},i.readAsText(new Blob([t]),n)}},function(t,e,n){function r(){this.title="NO TITLE",this.artist="NO ARTIST",this.genre="NO GENRE",this.subtitles=[],this.subartists=[],this.difficulty=0,this.level=0}var i=n(46);t.exports=r,r.fromBMSChart=function(t){var e=new r,n=t.headers.get("title"),o=t.headers.get("artist"),s=t.headers.get("genre"),a=+t.headers.get("difficulty"),u=+t.headers.get("playlevel"),c=t.headers.getAll("subtitle"),l=t.headers.getAll("subartist");if("string"==typeof n&&!c){var h=function(t){n=t[1],c=[t[2]]};i(n).when(/^(.*\S)\s*-(.+?)-$/,h).when(/^(.*\S)\s*～(.+?)～$/,h).when(/^(.*\S)\s*\((.+?)\)$/,h).when(/^(.*\S)\s*\[(.+?)\]$/,h).when(/^(.*\S)\s*<(.+?)>$/,h)}return n&&(e.title=n),o&&(e.artist=o),s&&(e.genre=s),c&&(e.subtitles=c),l&&(e.subartists=l),a&&(e.difficulty=a),u&&(e.level=u),e}},function(t){t.exports={includeStack:!1,showDiff:!0,truncateThreshold:40}},function(t){/*!
	 * Chai - flag utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e,n){var r=t.__flags||(t.__flags=Object.create(null));return 3!==arguments.length?r[e]:void(r[e]=n)}},,function(t,e,n){function r(t,e){for(var n=0;n<t.length;n++)if(t[n].name===e)return n;return-1}function i(t){return this instanceof i?(this.properties=[],void(t&&this.load(t))):new i(t)}var o=n(54),s=n(152);i.prototype.dispose=function(){this.properties.forEach(function(t){t.dispose()}),this.properties.length=0},i.prototype.addProperty=function(t){this.properties.push(new s(t))},i.prototype.duration=function(){for(var t=0,e=0;e<this.properties.length;e++)for(var n=this.properties[e],r=n.keyframes.frames,i=0;i<r.length;i++)t=Math.max(r[i].time,t);return t},i.prototype.property=function(t){var e="number"==typeof t?t:r(this.properties,t);return 0>e?void 0:this.properties[e]},i.prototype.load=function(t){this.dispose(),t&&(this.properties=t.map(function(t){return new s(t)}))},i.prototype["export"]=function(){return this.properties.map(function(t){return t["export"]()})},i.prototype.ease=function(t,e){return e},i.prototype.interpolate=function(t,e,n,r){return o(e.value,n.value,r)},i.prototype.valueOf=function(t,e){var n=e.keyframes,r=n.interpolation(t),i=r[0],o=r[1],s=r[2];if(-1===i||-1===o)return e.value;var a=n.frames[i],u=n.frames[o];if(i===o)return a.value;var c=u.ease;return c&&(s=this.ease(c,s)),this.interpolate(e,a,u,s)},i.prototype.values=function(t,e){e||(e={});for(var n=0;n<this.properties.length;n++){var r=this.properties[n];e[r.name]=this.valueOf(t,r)}return e},t.exports=i},function(t,e,n){function r(t){return this instanceof r?void s.call(this,t):new r(t)}var i=n(132),o=n(146),s=n(113);o(r,s),r.prototype.ease=function(t,e){return i[t](e)},t.exports=r},function(t){function e(t){var e=2.5949095;return(t*=2)<1?.5*t*t*((e+1)*t-e):.5*((t-=2)*t*((e+1)*t+e)+2)}t.exports=e},function(t){function e(t){var e=1.70158;return t*t*((e+1)*t-e)}t.exports=e},function(t){function e(t){var e=1.70158;return--t*t*((e+1)*t+e)+1}t.exports=e},function(t,e,n){function r(t){return.5>t?.5*(1-i(1-2*t)):.5*i(2*t-1)+.5}var i=n(35);t.exports=r},function(t,e,n){function r(t){return 1-i(1-t)}var i=n(35);t.exports=r},function(t){function e(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}t.exports=e},function(t){function e(t){return 1-Math.sqrt(1-t*t)}t.exports=e},function(t){function e(t){return Math.sqrt(1- --t*t)}t.exports=e},function(t){function e(t){return.5>t?4*t*t*t:.5*Math.pow(2*t-2,3)+1}t.exports=e},function(t){function e(t){return t*t*t}t.exports=e},function(t){function e(t){var e=t-1;return e*e*e+1}t.exports=e},function(t){function e(t){return.5>t?.5*Math.sin(13*Math.PI/2*2*t)*Math.pow(2,10*(2*t-1)):.5*Math.sin(-13*Math.PI/2*(2*t-1+1))*Math.pow(2,-10*(2*t-1))+1}t.exports=e},function(t){function e(t){return Math.sin(13*t*Math.PI/2)*Math.pow(2,10*(t-1))}t.exports=e},function(t){function e(t){return Math.sin(-13*(t+1)*Math.PI/2)*Math.pow(2,-10*t)+1}t.exports=e},function(t){function e(t){return 0===t||1===t?t:.5>t?.5*Math.pow(2,20*t-10):-.5*Math.pow(2,10-20*t)+1}t.exports=e},function(t){function e(t){return 0===t?t:Math.pow(2,10*(t-1))}t.exports=e},function(t){function e(t){return 1===t?t:1-Math.pow(2,-10*t)}t.exports=e},function(t,e,n){t.exports={backInOut:n(115),backIn:n(116),backOut:n(117),bounceInOut:n(118),bounceIn:n(119),bounceOut:n(35),circInOut:n(120),circIn:n(121),circOut:n(122),cubicInOut:n(123),cubicIn:n(124),cubicOut:n(125),elasticInOut:n(126),elasticIn:n(127),elasticOut:n(128),expoInOut:n(129),expoIn:n(130),expoOut:n(131),linear:n(133),quadInOut:n(134),quadIn:n(135),quadOut:n(136),quartInOut:n(137),quartIn:n(138),quartOut:n(139),quintInOut:n(140),quintIn:n(141),quintOut:n(142),sineInOut:n(143),sineIn:n(144),sineOut:n(145)}},function(t){function e(t){return t}t.exports=e},function(t){function e(t){return t/=.5,1>t?.5*t*t:(t--,-.5*(t*(t-2)-1))}t.exports=e},function(t){function e(t){return t*t}t.exports=e},function(t){function e(t){return-t*(t-2)}t.exports=e},function(t){function e(t){return.5>t?8*Math.pow(t,4):-8*Math.pow(t-1,4)+1}t.exports=e},function(t){function e(t){return Math.pow(t,4)}t.exports=e},function(t){function e(t){return Math.pow(t-1,3)*(1-t)+1}t.exports=e},function(t){function e(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}t.exports=e},function(t){function e(t){return t*t*t*t*t}t.exports=e},function(t){function e(t){return--t*t*t*t*t+1}t.exports=e},function(t){function e(t){return-.5*(Math.cos(Math.PI*t)-1)}t.exports=e},function(t){function e(t){return 1-Math.cos(t*Math.PI/2)}t.exports=e},function(t){function e(t){return Math.sin(t*Math.PI/2)}t.exports=e},function(t){t.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){function r(t,e){return t.time-e.time}function i(t,e){return this instanceof i?(this.frames=t||[],void(e||this.sort())):new i(t,e)}var o=n(54),s=n(149),a=n(148),u=[0,0,0];i.prototype.nearestIndex=function(t,e){e="number"==typeof e?e:Number.MAX_VALUE;for(var n=Number.MAX_VALUE,r=-1,i=0;i<this.frames.length;i++){var o=Math.abs(this.frames[i].time-t);n>o&&e>=o&&(n=o,r=i)}return r},i.prototype.nearest=function(t,e){var n=this.nearestIndex(t,e);return-1===n?null:this.frames[n]},i.prototype.get=function(t){return this.nearest(t,0)},i.prototype.getIndex=function(t){return this.nearestIndex(t,0)},i.prototype.value=function(t,e){var n=this.interpolation(t);if(-1===n[0]||-1===n[1])return null;var r=this.frames[n[0]],i=this.frames[n[1]],s=n[2];return"function"==typeof e?e(r,i,s):o(r.value,i.value,s)},i.prototype.interpolation=function(t){if(0===this.frames.length)return a(u,-1,-1,0);for(var e=-1,n=this.frames.length-1;n>=0;n--)if(t>=this.frames[n].time){e=n;break}if(-1===e||e===this.frames.length-1)return 0>e&&(e=0),a(u,e,e,0);var r=this.frames[e],i=this.frames[e+1];t=Math.max(r.time,Math.min(t,i.time));var o=s(r.time,i.time,t);return a(u,e,e+1,o)},i.prototype.next=function(t){if(this.frames.length<1)return null;for(var e=-1,n=0;n<this.frames.length;n++)if(t<this.frames[n].time){e=n;break}return-1===e?null:this.frames[e]},i.prototype.previous=function(t){if(this.frames.length<1)return null;for(var e=-1,n=this.frames.length-1;n>=0;n--)if(t>this.frames[n].time){e=n;break}return-1===e?null:this.frames[e]},i.prototype.add=function(t){this.frames.push(t),this.sort()},i.prototype.splice=function(){this.frames.splice.apply(this.frames,arguments),arguments.length>2&&this.sort()},i.prototype.sort=function(){this.frames.sort(r)},i.prototype.clear=function(){this.frames.length=0},Object.defineProperty(i.prototype,"count",{get:function(){return this.frames.length}}),t.exports=i},function(t){function e(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}t.exports=e},function(t){t.exports=function(t,e,n){return(n-t)/(e-t)}},function(t){function e(t,e,n){return t*(1-n)+e*n}t.exports=e},function(t){function e(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t}t.exports=e},function(t,e,n){function r(t){return this instanceof r?(this.keyframes=i(),this.value=null,this.name="",void(t&&this.load(t))):new r(t)}var i=n(147),o=n(151);r.prototype.dispose=function(){this.keyframes.clear()},r.prototype["export"]=function(){return o(this,{keyframes:this.keyframes.frames})},r.prototype.load=function(t){if(this.dispose(),t)for(var e in t)t.hasOwnProperty(e)&&("keyframes"===e?this.keyframes.frames=t.keyframes:this[e]=t[e])},t.exports=r},function(t){"use strict";function e(t,e,n,r){Object.defineProperty(t,e,{get:function(){var t=n.call(this);return Object.defineProperty(this,e,{value:t,enumerable:!!r,writable:!0}),t},set:function(t){return Object.defineProperty(this,e,{value:t,enumerable:!!r,writable:!0}),t},enumerable:!!r,configurable:!0})}t.exports=e},function(t){t.exports=function(){function t(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}function e(t,e,n,r,i,o){this.message=t,this.expected=e,this.found=n,this.offset=r,this.line=i,this.column=o,this.name="SyntaxError"}function n(t){function n(){return t.substring(ve,ge)}function r(e){function n(e,n,r){var i,o;for(i=n;r>i;i++)o=t.charAt(i),"\n"===o?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1)}return ye!==e&&(ye>e&&(ye=0,be={line:1,column:1,seenCR:!1}),n(be,ye,e),ye=e),be}function i(t){xe>ge||(ge>xe&&(xe=ge,we=[]),we.push(t))}function o(n,i,o){function s(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}function a(t,e){function n(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0180-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1080-\uFFFF]/g,function(t){return"\\u"+e(t)})}var r,i,o,s=new Array(t.length);for(o=0;o<t.length;o++)s[o]=t[o].description;return r=t.length>1?s.slice(0,-1).join(", ")+" or "+s[t.length-1]:s[0],i=e?'"'+n(e)+'"':"end of input","Expected "+r+" but "+i+" found."}var u=r(o),c=o<t.length?t.charAt(o):null;return null!==i&&s(i),new e(null!==n?n:a(i,c),i,c,o,u.line,u.column)}function s(){var t;return t=a()}function a(){var e,n,r,o,s,a,c,l;if(e=ge,n=u(),n!==_){for(r=[],o=ge,s=v(),s!==_?(t.substr(ge,2)===C?(a=C,ge+=2):(a=_,0===_e&&i(A)),a!==_?(c=v(),c!==_?(l=u(),l!==_?(s=[s,a,c,l],o=s):(ge=o,o=E)):(ge=o,o=E)):(ge=o,o=E)):(ge=o,o=E);o!==_;)r.push(o),o=ge,s=v(),s!==_?(t.substr(ge,2)===C?(a=C,ge+=2):(a=_,0===_e&&i(A)),a!==_?(c=v(),c!==_?(l=u(),l!==_?(s=[s,a,c,l],o=s):(ge=o,o=E)):(ge=o,o=E)):(ge=o,o=E)):(ge=o,o=E);r!==_?(ve=e,n=j(n,r),e=n):(ge=e,e=E)}else ge=e,e=E;return e}function u(){var e,n,r,o,s,a,u,l;if(e=ge,n=c(),n!==_){for(r=[],o=ge,s=v(),s!==_?(t.substr(ge,2)===k?(a=k,ge+=2):(a=_,0===_e&&i(O)),a!==_?(u=v(),u!==_?(l=c(),l!==_?(s=[s,a,u,l],o=s):(ge=o,o=E)):(ge=o,o=E)):(ge=o,o=E)):(ge=o,o=E);o!==_;)r.push(o),o=ge,s=v(),s!==_?(t.substr(ge,2)===k?(a=k,ge+=2):(a=_,0===_e&&i(O)),a!==_?(u=v(),u!==_?(l=c(),l!==_?(s=[s,a,u,l],o=s):(ge=o,o=E)):(ge=o,o=E)):(ge=o,o=E)):(ge=o,o=E);r!==_?(ve=e,n=j(n,r),e=n):(ge=e,e=E)}else ge=e,e=E;return e}function c(){var e,n,r,o,s,a,u,c;if(e=ge,n=l(),n!==_){for(r=[],o=ge,s=v(),s!==_?(43===t.charCodeAt(ge)?(a=M,ge++):(a=_,0===_e&&i(R)),a===_&&(45===t.charCodeAt(ge)?(a=P,ge++):(a=_,0===_e&&i(I))),a!==_?(u=v(),u!==_?(c=l(),c!==_?(s=[s,a,u,c],o=s):(ge=o,o=E)):(ge=o,o=E)):(ge=o,o=E)):(ge=o,o=E);o!==_;)r.push(o),o=ge,s=v(),s!==_?(43===t.charCodeAt(ge)?(a=M,ge++):(a=_,0===_e&&i(R)),a===_&&(45===t.charCodeAt(ge)?(a=P,ge++):(a=_,0===_e&&i(I))),a!==_?(u=v(),u!==_?(c=l(),c!==_?(s=[s,a,u,c],o=s):(ge=o,o=E)):(ge=o,o=E)):(ge=o,o=E)):(ge=o,o=E);r!==_?(ve=e,n=j(n,r),e=n):(ge=e,e=E)}else ge=e,e=E;return e}function l(){var e,n,r,o,s,a,u,c;if(e=ge,n=h(),n!==_){for(r=[],o=ge,s=v(),s!==_?(42===t.charCodeAt(ge)?(a=L,ge++):(a=_,0===_e&&i(F)),a===_&&(47===t.charCodeAt(ge)?(a=B,ge++):(a=_,0===_e&&i(D)),a===_&&(37===t.charCodeAt(ge)?(a=N,ge++):(a=_,0===_e&&i(q)))),a!==_?(u=v(),u!==_?(c=h(),c!==_?(s=[s,a,u,c],o=s):(ge=o,o=E)):(ge=o,o=E)):(ge=o,o=E)):(ge=o,o=E);o!==_;)r.push(o),o=ge,s=v(),s!==_?(42===t.charCodeAt(ge)?(a=L,ge++):(a=_,0===_e&&i(F)),a===_&&(47===t.charCodeAt(ge)?(a=B,ge++):(a=_,0===_e&&i(D)),a===_&&(37===t.charCodeAt(ge)?(a=N,ge++):(a=_,0===_e&&i(q)))),a!==_?(u=v(),u!==_?(c=h(),c!==_?(s=[s,a,u,c],o=s):(ge=o,o=E)):(ge=o,o=E)):(ge=o,o=E)):(ge=o,o=E);r!==_?(ve=e,n=j(n,r),e=n):(ge=e,e=E)}else ge=e,e=E;return e}function h(){var e,n,r,o,s,u;return e=ge,40===t.charCodeAt(ge)?(n=U,ge++):(n=_,0===_e&&i(W)),n!==_?(r=v(),r!==_?(o=a(),o!==_?(s=v(),s!==_?(41===t.charCodeAt(ge)?(u=G,ge++):(u=_,0===_e&&i(V)),u!==_?(ve=e,n=H(o),e=n):(ge=e,e=E)):(ge=e,e=E)):(ge=e,e=E)):(ge=e,e=E)):(ge=e,e=E),e===_&&(e=ge,33===t.charCodeAt(ge)?(n=z,ge++):(n=_,0===_e&&i(Y)),n!==_?(r=h(),r!==_?(ve=e,n=X(r),e=n):(ge=e,e=E)):(ge=e,e=E),e===_&&(e=f(),e===_&&(e=g()))),e}function f(){var e,n,r,o,s;return _e++,e=ge,45===t.charCodeAt(ge)?(n=P,ge++):(n=_,0===_e&&i(I)),n===_&&(n=J),n!==_?(r=m(),r!==_?(o=d(),o===_&&(o=J),o!==_?(s=p(),s===_&&(s=J),s!==_?(ve=e,n=K(),e=n):(ge=e,e=E)):(ge=e,e=E)):(ge=e,e=E)):(ge=e,e=E),_e--,e===_&&(n=_,0===_e&&i($)),e}function p(){var e,n,r,o,s;if(e=ge,Q.test(t.charAt(ge))?(n=t.charAt(ge),ge++):(n=_,0===_e&&i(Z)),n!==_)if(45===t.charCodeAt(ge)?(r=P,ge++):(r=_,0===_e&&i(I)),r===_&&(43===t.charCodeAt(ge)?(r=M,ge++):(r=_,0===_e&&i(R))),r===_&&(r=J),r!==_){if(o=[],te.test(t.charAt(ge))?(s=t.charAt(ge),ge++):(s=_,0===_e&&i(ee)),s!==_)for(;s!==_;)o.push(s),te.test(t.charAt(ge))?(s=t.charAt(ge),ge++):(s=_,0===_e&&i(ee));else o=E;o!==_?(n=[n,r,o],e=n):(ge=e,e=E)}else ge=e,e=E;else ge=e,e=E;return e}function d(){var e,n,r,o;if(e=ge,46===t.charCodeAt(ge)?(n=ne,ge++):(n=_,0===_e&&i(re)),n!==_){if(r=[],te.test(t.charAt(ge))?(o=t.charAt(ge),ge++):(o=_,0===_e&&i(ee)),o!==_)for(;o!==_;)r.push(o),te.test(t.charAt(ge))?(o=t.charAt(ge),ge++):(o=_,0===_e&&i(ee));else r=E;r!==_?(n=[n,r],e=n):(ge=e,e=E)}else ge=e,e=E;return e}function m(){var e,n,r,o;if(48===t.charCodeAt(ge)?(e=ie,ge++):(e=_,0===_e&&i(oe)),e===_)if(e=ge,se.test(t.charAt(ge))?(n=t.charAt(ge),ge++):(n=_,0===_e&&i(ae)),n!==_){for(r=[],te.test(t.charAt(ge))?(o=t.charAt(ge),ge++):(o=_,0===_e&&i(ee));o!==_;)r.push(o),te.test(t.charAt(ge))?(o=t.charAt(ge),ge++):(o=_,0===_e&&i(ee));r!==_?(n=[n,r],e=n):(ge=e,e=E)}else ge=e,e=E;return e}function g(){var e,n,r,o;if(e=ge,n=[],ue.test(t.charAt(ge))?(r=t.charAt(ge),ge++):(r=_,0===_e&&i(ce)),r!==_)for(;r!==_;)n.push(r),ue.test(t.charAt(ge))?(r=t.charAt(ge),ge++):(r=_,0===_e&&i(ce));else n=E;if(n!==_){for(r=[],le.test(t.charAt(ge))?(o=t.charAt(ge),ge++):(o=_,0===_e&&i(he));o!==_;)r.push(o),le.test(t.charAt(ge))?(o=t.charAt(ge),ge++):(o=_,0===_e&&i(he));r!==_?(ve=e,n=fe(),e=n):(ge=e,e=E)}else ge=e,e=E;return e}function v(){var e,n;for(_e++,e=[],de.test(t.charAt(ge))?(n=t.charAt(ge),ge++):(n=_,0===_e&&i(me));n!==_;)e.push(n),de.test(t.charAt(ge))?(n=t.charAt(ge),ge++):(n=_,0===_e&&i(me));return _e--,e===_&&(n=_,0===_e&&i(pe)),e}function y(t){var e=t[1],n=t[3];return" "+e+" "+n}function b(t,e){return t+e.map(y).join("")}var x,w=arguments.length>1?arguments[1]:{},_={},T={expr:s},S=s,E=_,C="||",A={type:"literal",value:"||",description:'"||"'},j=function(t,e){return b(t,e)},k="&&",O={type:"literal",value:"&&",description:'"&&"'},M="+",R={type:"literal",value:"+",description:'"+"'},P="-",I={type:"literal",value:"-",description:'"-"'},L="*",F={type:"literal",value:"*",description:'"*"'},B="/",D={type:"literal",value:"/",description:'"/"'},N="%",q={type:"literal",value:"%",description:'"%"'},U="(",W={type:"literal",value:"(",description:'"("'},G=")",V={type:"literal",value:")",description:'")"'},H=function(t){return"("+t+")"},z="!",Y={type:"literal",value:"!",description:'"!"'},X=function(t){return"!"+t},$={type:"other",description:"number"},J=null,K=function(){return n()},Q=/^[eE]/,Z={type:"class",value:"[eE]",description:"[eE]"},te=/^[0-9]/,ee={type:"class",value:"[0-9]",description:"[0-9]"},ne=".",re={type:"literal",value:".",description:'"."'},ie="0",oe={type:"literal",value:"0",description:'"0"'},se=/^[1-9]/,ae={type:"class",value:"[1-9]",description:"[1-9]"},ue=/^[a-zA-Z]/,ce={type:"class",value:"[a-zA-Z]",description:"[a-zA-Z]"},le=/^[a-zA-Z0-9_]/,he={type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},fe=function(){return"get("+JSON.stringify(n())+")"},pe={type:"other",description:"whitespace"},de=/^[ \t\n\r]/,me={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},ge=0,ve=0,ye=0,be={line:1,column:1,seenCR:!1},xe=0,we=[],_e=0;if("startRule"in w){if(!(w.startRule in T))throw new Error("Can't start parsing from rule \""+w.startRule+'".');S=T[w.startRule]}if(x=S(),x!==_&&ge===t.length)return x;throw x!==_&&ge<t.length&&i({type:"end",description:"end of input"}),o(null,we,xe)}return t(e,Error),{SyntaxError:e,parse:n}}()},function(t,e,n){"use strict";function r(t){var e=!1;try{t.appendChild(a),e=a.parentNode==t}catch(n){return!1}finally{try{t.removeChild(a)}catch(n){}}return e}function i(t){return"number"==typeof t&&isNaN(t)}function o(t){return a&&t&&1===t.nodeType&&r(t)}var s=n(79),a="undefined"!=typeof document&&document.createElement("div");t.exports=function u(t,e){if(s.isMatcher(t))return t.test(e);if("object"!=typeof t||"object"!=typeof e)return i(t)&&i(e)?!0:t===e;if(o(t)||o(e))return t===e;if(t===e)return!0;if(null===t&&null!==e||null!==t&&null===e)return!1;if(t instanceof RegExp&&e instanceof RegExp)return t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline;var n=Object.prototype.toString.call(t);if(n!==Object.prototype.toString.call(e))return!1;if("[object Date]"===n)return t.valueOf()===e.valueOf();var r,a=0,c=0;if("[object Array]"==n&&t.length!==e.length)return!1;for(r in t){if(a+=1,!(r in e))return!1;if(!u(t[r],e[r]))return!1}for(r in e)c+=1;return a==c}},function(t,e,n){"use strict";var r=n(340),i=r.configure({quoteStrings:!1,limitChildrenCount:250});t.exports=function(){return i.ascii.apply(i,arguments)}},function(t){"use strict";function e(t,e,n,r){this.resolve=t,this.fn=e,this.self=n||null,this.args=r}t.exports=function(n){function r(t,n){function r(n,r,a){if(t){t--;var u=new i(function(t){t(n.apply(r,a))});return u.then(o,o),u}return new i(function(t){s.push(new e(t,n,r,a))})}function o(){if(t++,s.length){var e=s.shift();e.resolve(r(e.fn,e.self,e.args))}}var s=[];if("function"==typeof t&&"number"==typeof n){var a=n;n=t,t=a}return"function"==typeof n?function(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);return r(n,this,t)}:function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);return r(t,this,e)}}var i;if("number"==typeof arguments[0]||"number"==typeof arguments[1]){if(i=t.exports.Promise,"function"!=typeof i)throw new Error("You must provide a Promise polyfill for this library to work in older environments");return r(arguments[0],arguments[1])}return i=n,r},"function"==typeof Promise&&(t.exports.Promise=Promise)},,,,,function(t,e,n){(function(e){"use strict";function r(){this._listeners={}}var i=n(5),o=n(24),s=n(4);"undefined"==typeof e.EventTarget&&(e.EventTarget=function(){throw new TypeError("Illegal constructor")}),i.inherits(r,e.EventTarget),r.prototype.addEventListener=function(t,e){var n=new o(this,"addEventListener",[{name:"type",type:"string"},{name:"listener",type:"function"}]);n.validateArguments(arguments,function(t){throw new TypeError(n.form+"; "+t)}),this._listeners[t]=this._listeners[t]||[],this._listeners[t].push(e)},r.prototype.removeEventListener=function(t,e){var n=new o(this,"addEventListener",[{name:"type",type:"string"},{name:"listener",type:"function"}]);n.validateArguments(arguments,function(t){throw new TypeError(n.form+"; "+t)}),this._listeners[t]=this._listeners[t]||[];var r=this._listeners[t].indexOf(e);-1!==r&&this._listeners[t].splice(r,1)},r.prototype.dispatchEvent=function(t){var e=new o(this,"addEventListener",[{name:"event",type:"Event"}]);e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)});var n=t.type;return"function"==typeof this["on"+n]&&this["on"+n].call(this,t),this.$listeners(n).forEach(function(e){e.call(this,t)},this),!0},r.prototype.$listeners=function(t){return(this._listeners[t]||[]).slice()},t.exports=s.EventTarget=r}).call(e,function(){return this}())},function(t,e,n){(function(t,r){function i(t,e){this._id=t,this._clearFn=e}var o=n(12).nextTick,s=Function.prototype.apply,a=Array.prototype.slice,u={},c=0;e.setTimeout=function(){return new i(s.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(s.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var n=c++,r=arguments.length<2?!1:a.call(arguments,1);return u[n]=!0,o(function(){u[n]&&(r?t.apply(null,r):t.call(null),e.clearImmediate(n))}),n},e.clearImmediate="function"==typeof r?r:function(t){delete u[t]}}).call(e,n(163).setImmediate,n(163).clearImmediate)},function(t){t.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},,,,,function(t,e,n){"use strict";function r(t,e,n){var r=o.getName(t)+e;throw n.length&&(r+=" Received ["+c.call(n).join(", ")+"]"),new Error(r)}function i(t,e,n,r,i,s){if("number"!=typeof s)throw new TypeError("Call id is not a number");var a=o.create(l);return a.proxy=t,a.thisValue=e,a.args=n,a.returnValue=r,a.exception=i,a.callId=s,a}var o=n(55),s=n(79),a=n(155),u=n(156),c=Array.prototype.slice,l={calledOn:function(t){return s.isMatcher(t)?t.test(this.thisValue):this.thisValue===t},calledWith:function(){for(var t=0,e=arguments.length;e>t;t+=1)if(!a(arguments[t],this.args[t]))return!1;return!0},calledWithMatch:function(){for(var t=0,e=arguments.length;e>t;t+=1){var n=this.args[t],r=arguments[t];if(!s(r).test(n))return!1}return!0},calledWithExactly:function(){return arguments.length==this.args.length&&this.calledWith.apply(this,arguments)},notCalledWith:function(){return!this.calledWith.apply(this,arguments)},notCalledWithMatch:function(){return!this.calledWithMatch.apply(this,arguments)},returned:function(t){return a(t,this.returnValue)},threw:function(t){return"undefined"!=typeof t&&this.exception?this.exception===t||this.exception.name===t:!!this.exception},calledWithNew:function(){return this.proxy.prototype&&this.thisValue instanceof this.proxy},calledBefore:function(t){return this.callId<t.callId},calledAfter:function(t){return this.callId>t.callId},callArg:function(t){this.args[t]()},callArgOn:function(t,e){this.args[t].apply(e)},callArgWith:function(t){this.callArgOnWith.apply(this,[t,null].concat(c.call(arguments,1)))},callArgOnWith:function(t,e){var n=c.call(arguments,2);this.args[t].apply(e,n)},"yield":function(){this.yieldOn.apply(this,[null].concat(c.call(arguments,0)))},yieldOn:function(t){for(var e=this.args,n=0,i=e.length;i>n;++n)if("function"==typeof e[n])return void e[n].apply(t,c.call(arguments,1));r(this.proxy," cannot yield since no callback was passed.",e)},yieldTo:function(t){this.yieldToOn.apply(this,[t,null].concat(c.call(arguments,1)))},yieldToOn:function(t,e){for(var n=this.args,i=0,o=n.length;o>i;++i)if(n[i]&&"function"==typeof n[i][t])return void n[i][t].apply(e,c.call(arguments,2));r(this.proxy," cannot yield to '"+t+"' since no callback was passed.",n)},toString:function(){for(var t=this.proxy.toString()+"(",e=[],n=0,r=this.args.length;r>n;++n)e.push(u(this.args[n]));return t=t+e.join(", ")+")","undefined"!=typeof this.returnValue&&(t+=" => "+u(this.returnValue)),this.exception&&(t+=" !"+this.exception.name,this.exception.message&&(t+="("+this.exception.message+")")),t}};l.invokeCallback=l["yield"],i.toString=l.toString,t.exports=i},function(module,exports,__webpack_require__){"use strict";function spy(t,e){if(!e&&"function"==typeof t)return spy.create(t);if(!t&&!e)return spy.create(function(){});var n=t[e];return wrapMethod(t,e,spy.create(n))}function matchingFake(t,e,n){if(t)for(var r=0,i=t.length;i>r;r++)if(t[r].matches(e,n))return t[r]}function incrementCallCount(){this.called=!0,this.callCount+=1,this.notCalled=!1,this.calledOnce=1==this.callCount,this.calledTwice=2==this.callCount,this.calledThrice=3==this.callCount}function createCallProperties(){this.firstCall=this.getCall(0),this.secondCall=this.getCall(1),this.thirdCall=this.getCall(2),this.lastCall=this.getCall(this.callCount-1),this.calledWithNew=!!(this.calledWithNew||this.lastCall&&this.lastCall.calledWithNew())}function createProxy(func){var p;return func.length?eval("p = (function proxy("+vars.substring(0,2*func.length-1)+") { return p.invoke(func, this, slice.call(arguments)); });"):p=function(){return p.invoke(func,this,slice.call(arguments))},p}function delegateToCalls(t,e,n,r){spyApi[t]=function(){if(!this.called)return r?r.apply(this,arguments):!1;for(var i,o=0,s=0,a=this.callCount;a>s;s+=1)if(i=this.getCall(s),i[n||t].apply(i,arguments)&&(o+=1,e))return!0;return o===this.callCount}}var timesInWords=__webpack_require__(173),wrapMethod=__webpack_require__(174),fn=__webpack_require__(55),extend=__webpack_require__(64),spyCall=__webpack_require__(170),deepEqual=__webpack_require__(155),format=__webpack_require__(156),push=Array.prototype.push,slice=Array.prototype.slice,callId=0,vars="a,b,c,d,e,f,g,h,i,j,k,l",uuid=0,spyApi={reset:function(){if(this.invoking){var t=new Error("Cannot reset Sinon function while invoking it. Move the call to .reset outside of the callback.");throw t.name="InvalidResetException",t}if(this.called=!1,this.notCalled=!0,this.calledOnce=!1,this.calledTwice=!1,this.calledThrice=!1,this.callCount=0,this.firstCall=null,this.secondCall=null,this.thirdCall=null,this.lastCall=null,this.calledWithNew=!1,this.args=[],this.returnValues=[],this.thisValues=[],this.exceptions=[],this.callIds=[],this.fakes)for(var e=0;e<this.fakes.length;e++)this.fakes[e].reset()},create:function(t){var e;"function"!=typeof t?t=function(){}:e=fn.getName(t);var n=createProxy(t);return extend(n,spy),delete n.create,extend(n,t),n.reset(),n.prototype=t.prototype,n.displayName=e||"spy",n.toString=fn.toString,n.instantiateFake=spy.create,n.id="spy#"+uuid++,n},invoke:function(t,e,n){var r,i,o=matchingFake(this.fakes,n);incrementCallCount.call(this),push.call(this.thisValues,e),push.call(this.args,n),push.call(this.callIds,callId++),createCallProperties.call(this);try{this.invoking=!0,i=o?o.invoke(t,e,n):(this.func||t).apply(e,n);var s=this.getCall(this.callCount-1);s.calledWithNew()&&"object"!=typeof i&&(i=e)}catch(a){r=a}finally{delete this.invoking}if(push.call(this.exceptions,r),push.call(this.returnValues,i),createCallProperties.call(this),void 0!==r)throw r;return i},named:function(t){return this.displayName=t,this},getCall:function(t){return 0>t||t>=this.callCount?null:spyCall(this,this.thisValues[t],this.args[t],this.returnValues[t],this.exceptions[t],this.callIds[t])},getCalls:function(){var t,e=[];for(t=0;t<this.callCount;t++)e.push(this.getCall(t));return e},calledBefore:function(t){return this.called?t.called?this.callIds[0]<t.callIds[t.callIds.length-1]:!0:!1},calledAfter:function(t){return this.called&&t.called?this.callIds[this.callCount-1]>t.callIds[t.callCount-1]:!1},withArgs:function(){var t=slice.call(arguments);if(this.fakes){var e=matchingFake(this.fakes,t,!0);if(e)return e}else this.fakes=[];var n=this,r=this.instantiateFake();r.matchingAguments=t,r.parent=this,push.call(this.fakes,r),r.withArgs=function(){return n.withArgs.apply(n,arguments)};for(var i=0;i<this.args.length;i++)r.matches(this.args[i])&&(incrementCallCount.call(r),push.call(r.thisValues,this.thisValues[i]),push.call(r.args,this.args[i]),push.call(r.returnValues,this.returnValues[i]),push.call(r.exceptions,this.exceptions[i]),push.call(r.callIds,this.callIds[i]));return createCallProperties.call(r),r},matches:function(t,e){var n=this.matchingAguments;return n.length<=t.length&&deepEqual(n,t.slice(0,n.length))?!e||n.length==t.length:void 0},printf:function(t){var e,n=this,r=slice.call(arguments,1);return(t||"").replace(/%(.)/g,function(t,i){if(e=spyApi.formatters[i],"function"==typeof e)return e.call(null,n,r);if(!isNaN(parseInt(i,10))){var o=r[i-1];return format(o)}return"%"+i})}};delegateToCalls("calledOn",!0),delegateToCalls("alwaysCalledOn",!1,"calledOn"),delegateToCalls("calledWith",!0),delegateToCalls("calledWithMatch",!0),delegateToCalls("alwaysCalledWith",!1,"calledWith"),delegateToCalls("alwaysCalledWithMatch",!1,"calledWithMatch"),delegateToCalls("calledWithExactly",!0),delegateToCalls("alwaysCalledWithExactly",!1,"calledWithExactly"),delegateToCalls("neverCalledWith",!1,"notCalledWith",function(){return!0}),delegateToCalls("neverCalledWithMatch",!1,"notCalledWithMatch",function(){return!0}),delegateToCalls("threw",!0),delegateToCalls("alwaysThrew",!1,"threw"),delegateToCalls("returned",!0),delegateToCalls("alwaysReturned",!1,"returned"),delegateToCalls("alwaysCalledWithNew",!1,"calledWithNew"),delegateToCalls("callArg",!1,"callArgWith",function(){throw new Error(this.toString()+" cannot call arg since it was not yet invoked.")}),spyApi.callArgWith=spyApi.callArg,delegateToCalls("callArgOn",!1,"callArgOnWith",function(){throw new Error(this.toString()+" cannot call arg since it was not yet invoked.")}),spyApi.callArgOnWith=spyApi.callArgOn,delegateToCalls("yield",!1,"yield",function(){throw new Error(this.toString()+" cannot yield since it was not yet invoked.")}),spyApi.invokeCallback=spyApi["yield"],delegateToCalls("yieldOn",!1,"yieldOn",function(){throw new Error(this.toString()+" cannot yield since it was not yet invoked.")}),delegateToCalls("yieldTo",!1,"yieldTo",function(t){throw new Error(this.toString()+" cannot yield to '"+t+"' since it was not yet invoked.")}),delegateToCalls("yieldToOn",!1,"yieldToOn",function(t){throw new Error(this.toString()+" cannot yield to '"+t+"' since it was not yet invoked.")}),spyApi.formatters={c:function(t){return timesInWords(t.callCount)},n:function(t){return t.toString()},C:function(t){for(var e=[],n=0,r=t.callCount;r>n;++n){var i="    "+t.getCall(n).toString();/\n/.test(e[n-1])&&(i="\n"+i),push.call(e,i)}return e.length>0?"\n"+e.join("\n"):""},t:function(t){for(var e=[],n=0,r=t.callCount;r>n;++n)push.call(e,format(t.thisValues[n]));return e.join(", ")},"*":function(t,e){for(var n=[],r=0,i=e.length;i>r;++r)push.call(n,format(e[r]));return n.join(", ")}},extend(spy,spyApi),module.exports=spy},function(t,e,n){"use strict";function r(t,e,n){if(n&&"function"!=typeof n)throw new TypeError("Custom stub should be function");var i;if(i=n?a(n):r.create(),!t&&void 0===e)return r.create();if(void 0===e&&"object"==typeof t){for(var o in t)"function"==typeof t[o]&&r(t,o);return t}return u(t,e,i)}function i(t){return t.defaultBehavior||o(t)||c.create(t)}function o(t){return t.parent&&s(t.parent)}function s(t){var e=t.behaviors[t.callCount-1];return e&&e.isPresent()?e:i(t)}var a=n(171),u=n(174),c=n(334),l=n(64),h=n(55),f=0,p={create:function(){var t=function(){return s(t).invoke(this,arguments)};t.id="stub#"+f++;var e=t;return t=a(t),t.func=e,l(t,r),t.instantiateFake=r.create,t.displayName="stub",t.toString=h.toString,t.defaultBehavior=null,t.behaviors=[],t},resetBehavior:function(){var t;if(this.defaultBehavior=null,this.behaviors=[],delete this.returnValue,delete this.returnArgAt,this.returnThis=!1,this.fakes)for(t=0;t<this.fakes.length;t++)this.fakes[t].resetBehavior()},onCall:function(t){return this.behaviors[t]||(this.behaviors[t]=c.create(this)),this.behaviors[t]},onFirstCall:function(){return this.onCall(0)},onSecondCall:function(){return this.onCall(1)},onThirdCall:function(){return this.onCall(2)}};for(var d in c)c.hasOwnProperty(d)&&!p.hasOwnProperty(d)&&"create"!=d&&"withArgs"!=d&&"invoke"!=d&&(p[d]=function(t){return function(){return this.defaultBehavior=this.defaultBehavior||c.create(this),this.defaultBehavior[t].apply(this.defaultBehavior,arguments),this
}}(d));l(r,p),t.exports=r},function(t){"use strict";t.exports=function(t){switch(t){case 1:return"once";case 2:return"twice";case 3:return"thrice";default:return(t||0)+" times"}}},function(t){"use strict";function e(t,e){for(var n in e)r.call(t,n)||(t[n]=e[n])}function n(t){return"function"==typeof t||!!(t&&t.constructor&&t.call&&t.apply)}var r=Object.prototype.hasOwnProperty;t.exports=function(t,i,o){if(!t)throw new TypeError("Should wrap property of object");if("function"!=typeof o)throw new TypeError("Method wrapper should be function");var s,a=t[i];if(n(a)){if(a.restore&&a.restore.sinon)s=new TypeError("Attempted to wrap "+i+" which is already wrapped");else if(a.calledBefore){var u=a.returns?"stubbed":"spied on";s=new TypeError("Attempted to wrap "+i+" which is already "+u)}}else s=new TypeError("Attempted to wrap "+typeof a+" property "+i+" as function");if(s)throw a&&a.stackTrace&&(s.stack+="\n--------------\n"+a.stackTrace),s;var c=t.hasOwnProperty?t.hasOwnProperty(i):r.call(t,i);return t[i]=o,o.displayName=i,o.stackTrace=new Error("Stack Trace for original").stack,o.restore=function(){c||delete t[i],t[i]===o&&(t[i]=a)},o.restore.sinon=!0,e(o,a),o}},,,,function(t,e,n){(function(e){"use strict";function r(t,e){this.type=t,this.target=i.defaults(e,null),this.timeStamp=Date.now()}var i=n(5),o=n(4);i.inherits(r,e.Event),"undefined"==typeof e.Event&&(e.Event=r),t.exports=o.Event=r}).call(e,function(){return this}())},,,,,,,,,,,,,,function(t,e,n){function r(t,e,n){var r={showHidden:e,seen:[],stylize:function(t){return t}};return i(r,t,"undefined"==typeof n?2:n)}function i(t,n,r){if(n&&"function"==typeof n.inspect&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var d=n.inspect(r);return"string"!=typeof d&&(d=i(t,d,r)),d}var b=o(t,n);if(b)return b;if(y(n)){if("outerHTML"in n)return n.outerHTML;try{if(document.xmlVersion){var x=new XMLSerializer;return x.serializeToString(n)}var w="http://www.w3.org/1999/xhtml",_=document.createElementNS(w,"_");return _.appendChild(n.cloneNode(!1)),html=_.innerHTML.replace("><",">"+n.innerHTML+"<"),_.innerHTML="",html}catch(T){}}var S=v(n),E=t.showHidden?g(n):S;if(0===E.length||p(n)&&(1===E.length&&"stack"===E[0]||2===E.length&&"description"===E[0]&&"stack"===E[1])){if("function"==typeof n){var C=m(n),A=C?": "+C:"";return t.stylize("[Function"+A+"]","special")}if(h(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(f(n))return t.stylize(Date.prototype.toUTCString.call(n),"date");if(p(n))return s(n)}var j="",k=!1,O=["{","}"];if(l(n)&&(k=!0,O=["[","]"]),"function"==typeof n){var C=m(n),A=C?": "+C:"";j=" [Function"+A+"]"}if(h(n)&&(j=" "+RegExp.prototype.toString.call(n)),f(n)&&(j=" "+Date.prototype.toUTCString.call(n)),p(n))return s(n);if(0===E.length&&(!k||0==n.length))return O[0]+j+O[1];if(0>r)return h(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var M;return M=k?a(t,n,r,S,E):E.map(function(e){return u(t,n,r,S,e,k)}),t.seen.pop(),c(M,j,O)}function o(t,e){switch(typeof e){case"undefined":return t.stylize("undefined","undefined");case"string":var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string");case"number":return 0===e&&1/e===-1/0?t.stylize("-0","number"):t.stylize(""+e,"number");case"boolean":return t.stylize(""+e,"boolean")}return null===e?t.stylize("null","null"):void 0}function s(t){return"["+Error.prototype.toString.call(t)+"]"}function a(t,e,n,r,i){for(var o=[],s=0,a=e.length;a>s;++s)o.push(Object.prototype.hasOwnProperty.call(e,String(s))?u(t,e,n,r,String(s),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||o.push(u(t,e,n,r,i,!0))}),o}function u(t,e,n,r,o,s){var a,u;if(e.__lookupGetter__&&(e.__lookupGetter__(o)?u=e.__lookupSetter__(o)?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):e.__lookupSetter__(o)&&(u=t.stylize("[Setter]","special"))),r.indexOf(o)<0&&(a="["+o+"]"),u||(t.seen.indexOf(e[o])<0?(u=null===n?i(t,e[o],null):i(t,e[o],n-1),u.indexOf("\n")>-1&&(u=s?u.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+u.split("\n").map(function(t){return"   "+t}).join("\n"))):u=t.stylize("[Circular]","special")),"undefined"==typeof a){if(s&&o.match(/^\d+$/))return u;a=JSON.stringify(""+o),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+u}function c(t,e,n){var r=0,i=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.length+1},0);return i>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function l(t){return Array.isArray(t)||"object"==typeof t&&"[object Array]"===d(t)}function h(t){return"object"==typeof t&&"[object RegExp]"===d(t)}function f(t){return"object"==typeof t&&"[object Date]"===d(t)}function p(t){return"object"==typeof t&&"[object Error]"===d(t)}function d(t){return Object.prototype.toString.call(t)}var m=n(219),g=n(288),v=n(285);t.exports=r;var y=function(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName}},,,,,,,,,,,,function(t,e,n){"use strict";function r(t,e,n,r){i.defineAttribute(this,"sampleRate","readonly",r,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"length","readonly",n,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"duration","readonly",n/r,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"numberOfChannels","readonly",e,function(t){throw new TypeError(i.formatter.concat(this,t))}),Object.defineProperties(this,{$name:{value:"AudioBuffer"},$context:{value:t}}),this._data=new Array(e);for(var o=0;e>o;o++)this._data[o]=new Float32Array(n)}var i=n(5),o=n(24),s=n(4),a=function(){throw new TypeError("Illegal constructor: use audioContext.createBuffer(numberOfChannels: number, length: number, sampleRate: number)")};i.inherits(r,a),r.exports=a,a.prototype.getChannelData=function(t){var e=new o(this,"getChannelData",[{name:"channel",type:"number"}]);return e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)}),e.assert(t>=0&&t<this._data.length,function(){throw new TypeError(e.form+"; channel index ("+t+") exceeds number of channels (#{"+this._data.length+"})")}),this._data[t]},r.prototype.toJSON=function(){var t={name:this.$name,sampleRate:this.sampleRate,length:this.length,duration:this.duration,numberOfChannels:this.numberOfChannels};return this.$context.VERBOSE_JSON&&(t.data=this._data.map(function(t){return Array.prototype.slice.call(t)})),t},t.exports=s.AudioBuffer=r},function(t){"use strict";function e(t){return/[aeiou]/i.test(t.charAt(0))?"an":"a"}t.exports=e},function(t,e,n){"use strict";function r(t,e,n){var r="";return t?(r+=t.constructor.name,e&&(r+="#"+e)):r+=e,r+="(",r+=n.map(function(t){return t.name+": "+t.type}).join(", "),r+=")"}function i(t,e){var n="";return t=t.replace(/^optional\s*/,"").trim(),n+="should be "+s(t)+" "+t+", ",n+="but got: "+a(e)}function o(t,e){return t.constructor.name+"#"+e}var s=n(205),a=n(436);t.exports={methodForm:r,shouldBeButGot:i,concat:o}},function(t,e){(function(e){"use strict";function n(t,n){switch(n){case"boolean":return"boolean"==typeof t;case"function":return"function"==typeof t;case"number":return"number"==typeof t&&!isNaN(t);case"string":return"string"==typeof t;case"null":return null===t}if(/[A-Z]/.test(n.charAt(0))&&"function"==typeof e[n])return t instanceof e[n];var i=/^enum\s*{(.*?)}$/.exec(n);return i?r(t,i[1].split(",").map(function(t){return t.trim()})):!1}function r(t,e){return e.some(function(e){return/^\d+$/.test(e)?t===+e:t===e})}t.exports=function(t,e){return e.split("|").some(function(e){return n(t,e.trim())})}}).call(e,function(){return this}())},,,,,,,,,,function(t,e,n){(function(t){"use strict";function r(){i(),o(),s()}function i(){var e=document.createElement("div");e.id="mocha",document.body.appendChild(e),mocha.setup("bdd"),u.use(c),u.use(l),t.expect=u.expect,t.sinon=h}function o(){n(359)}function s(){var t=[];mocha.run().on("test end",function(t){t.err&&(console.log("%cFailed Spec: %c%s\n %c%s","color: black; font: 16px sans-serif","color: black; font: bold 16px sans-serif",t.title,"color: red; font: bold 1em sans-serif",t.err.message),console.error(t.err.stack))}).on("test end",function(e){t.push("passed"===e.state?{fullName:e.title,status:"passed"}:e.pending?{fullName:e.title,status:"pending"}:{fullName:e.title,status:"failed",failedExpectations:[{message:e.err.message,stack:e.err.stack}]})}).on("suite end",function(e){if(e.root){var n=window.__coverage__||null,r=JSON.stringify({specs:t,coverage:n}),i=new XMLHttpRequest;i.open("POST","/api/test",!0),i.setRequestHeader("Content-Type","application/json"),i.send(r)}})}var a=function(t){return t&&t.__esModule?t["default"]:t};e.main=r,n(23),n(329),n(353),n(355);var u=a(n(275)),c=a(n(274)),l=a(n(331)),h=a(n(332));Object.defineProperty(e,"__esModule",{value:!0})}).call(e,function(){return this}())},function(t){/*!
	 * Chai - getActual utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e){return e.length>4?e[4]:t._obj}},function(t){/*!
	 * Chai - getName utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t){if(t.name)return t.name;var e=/^\s?function ([^(]*)\(/.exec(t);return e&&e[1]?e[1]:""}},function(t,e,n){/*!
	 * ## parsePath(path)
	 *
	 * Helper function used to parse string object
	 * paths. Use in conjunction with `_getPathValue`.
	 *
	 *      var parsed = parsePath('myobject.property.subprop');
	 *
	 * ### Paths:
	 *
	 * * Can be as near infinitely deep and nested
	 * * Arrays are also valid using the formal `myobject.document[3].property`.
	 * * Literal dots and brackets (not delimiter) must be backslash-escaped.
	 *
	 * @param {String} path
	 * @returns {Object} parsed
	 * @api private
	 */
function r(t){var e=t.replace(/([^\\])\[/g,"$1.["),n=e.match(/(\\\.|[^.]+?)+/g);return n.map(function(t){var e=/^\[(\d+)\]$/,n=e.exec(t);return n?{i:parseFloat(n[1])}:{p:t.replace(/\\([.\[\]])/g,"$1")}})}/*!
	 * ## _getPathValue(parsed, obj)
	 *
	 * Helper companion function for `.parsePath` that returns
	 * the value located at the parsed address.
	 *
	 *      var value = getPathValue(parsed, obj);
	 *
	 * @param {Object} parsed definition from `parsePath`.
	 * @param {Object} object to search against
	 * @param {Number} object to search against
	 * @returns {Object|Undefined} value
	 * @api private
	 */
function i(t,e,n){var r,i=e;n=void 0===n?t.length:n;for(var o=0,s=n;s>o;o++){var a=t[o];i?("undefined"!=typeof a.p?i=i[a.p]:"undefined"!=typeof a.i&&(i=i[a.i]),o==s-1&&(r=i)):r=void 0}return r}/*!
	 * Chai - getPathInfo utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var o=n(221);t.exports=function(t,e){var n=r(t),s=n[n.length-1],a={parent:n.length>1?i(n,e,n.length-1):e,name:s.p||s.i,value:i(n,e)};return a.exists=o(a.name,a.parent),a}},function(t,e,n){/*!
	 * Chai - hasProperty utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=n(224),i={number:Number,string:String};t.exports=function(t,e){var n=r(e);return"null"===n||"undefined"===n?!1:(i[n]&&"object"!=typeof e&&(e=new i[n](e)),t in e)}},function(t,e,n){/*!
	 * Chai - flag utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependancies
	 */
var r=n(192),i=n(110);t.exports=function(t){var e=r(t),n=Object.prototype.toString.call(t);if(i.truncateThreshold&&e.length>=i.truncateThreshold){if("[object Function]"===n)return t.name&&""!==t.name?"[Function: "+t.name+"]":"[Function]";if("[object Array]"===n)return"[ Array("+t.length+") ]";if("[object Object]"===n){var o=Object.keys(t),s=o.length>2?o.splice(0,2).join(", ")+", ...":o.join(", ");return"{ Object ("+s+") }"}return e}return e}},function(t){/*!
	 * Chai - transferFlags utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e,n){var r=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),n=3===arguments.length?n:!0;for(var i in r)(n||"object"!==i&&"ssfi"!==i&&"message"!=i)&&(e.__flags[i]=r[i])}},function(t){/*!
	 * Chai - type utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Detectable javascript natives
	 */
var e={"[object Arguments]":"arguments","[object Array]":"array","[object Date]":"date","[object Function]":"function","[object Number]":"number","[object RegExp]":"regexp","[object String]":"string"};t.exports=function(t){var n=Object.prototype.toString.call(t);return e[n]?e[n]:null===t?"null":void 0===t?"undefined":t===Object(t)?"object":typeof t}},function(t,e,n){"use strict";function r(t){return t.fakes||(t.fakes=[]),t.fakes}function i(t,e){for(var n=r(t),i=0,o=n.length;o>i;i+=1)"function"==typeof n[i][e]&&n[i][e]()}function o(t){for(var e=r(t),n=0;n<e.length;)e.splice(n,1)}var s=n(171),a=n(172),u=n(228),c=[].push,l=Object.prototype.hasOwnProperty;t.exports={verify:function(){i(this,"verify")},restore:function(){i(this,"restore"),o(this)},reset:function(){i(this,"reset")},verifyAndRestore:function(){var t;try{this.verify()}catch(e){t=e}if(this.restore(),t)throw t},add:function(t){return c.call(r(this),t),t},spy:function(){return this.add(s.apply(null,arguments))},stub:function(t,e,n){if(e){var r=t[e];if("function"!=typeof r){if(!l.call(t,e))throw new TypeError("Cannot stub non-existent own property "+e);return t[e]=n,this.add({restore:function(){t[e]=r}})}}if(!e&&t&&"object"==typeof t){var i=a.apply(null,arguments);for(var o in i)"function"==typeof i[o]&&this.add(i[o]);return i}return this.add(a.apply(null,arguments))},mock:function(){return this.add(u.apply(null,arguments))},inject:function(t){var e=this;return t.spy=function(){return e.spy.apply(e,arguments)},t.stub=function(){return e.stub.apply(e,arguments)},t.mock=function(){return e.mock.apply(e,arguments)},t}}},function(t,e){"use strict";var n=Object.prototype.hasOwnProperty;e.defaultConfig={injectIntoThis:!0,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:!0,useFakeServer:!0},e.getConfig=function(t){var r={};t=t||{};var i=e.defaultConfig;for(var o in i)n.call(i,o)&&(r[o]=n.call(t,o)?t[o]:i[o]);return r}},function(t,e,n){"use strict";function r(t){var e="number"==typeof t.minCalls;return!e||t.callCount>=t.minCalls}function i(t){return"number"!=typeof t.maxCalls?!1:t.callCount===t.maxCalls}function o(t,e){return d&&d.isMatcher(t)?t.test(e):!0}function s(t){return 0==t?"never called":"called "+m(t)}function a(t){var e=t.minCalls,n=t.maxCalls;if("number"==typeof e&&"number"==typeof n){var r=m(e);return e!==n&&(r="at least "+r+" and at most "+m(n)),r}return"number"==typeof e?"at least "+m(e):"at most "+m(n)}var u=n(64),c=n(172),l=n(171),h=n(156),f=n(155),p=n(170),d=n(79),m=n(173),g=Array.prototype.push,v=Array.prototype.slice;t.exports={minCalls:1,maxCalls:1,create:function(e){var n=u(c(),t.exports);return delete n.create,n.method=e,n},invoke:function(t,e,n){return this.verifyCallAllowed(e,n),l.invoke.apply(this,arguments)},atLeast:function(t){if("number"!=typeof t)throw new TypeError("'"+t+"' is not number");return this.limitsSet||(this.maxCalls=null,this.limitsSet=!0),this.minCalls=t,this},atMost:function(t){if("number"!=typeof t)throw new TypeError("'"+t+"' is not number");return this.limitsSet||(this.minCalls=null,this.limitsSet=!0),this.maxCalls=t,this},never:function(){return this.exactly(0)},once:function(){return this.exactly(1)},twice:function(){return this.exactly(2)},thrice:function(){return this.exactly(3)},exactly:function(t){if("number"!=typeof t)throw new TypeError("'"+t+"' is not a number");return this.atLeast(t),this.atMost(t)},met:function(){return!this.failed&&r(this)},verifyCallAllowed:function(e,n){if(i(this)&&(this.failed=!0,t.exports.fail(this.method+" already called "+m(this.maxCalls))),"expectedThis"in this&&this.expectedThis!==e&&t.exports.fail(this.method+" called with "+e+" as thisValue, expected "+this.expectedThis),"expectedArguments"in this){n||t.exports.fail(this.method+" received no arguments, expected "+h(this.expectedArguments)),n.length<this.expectedArguments.length&&t.exports.fail(this.method+" received too few arguments ("+h(n)+"), expected "+h(this.expectedArguments)),this.expectsExactArgCount&&n.length!==this.expectedArguments.length&&t.exports.fail(this.method+" received too many arguments ("+h(n)+"), expected "+h(this.expectedArguments));for(var r=0,s=this.expectedArguments.length;s>r;r+=1)o(this.expectedArguments[r],n[r])||t.exports.fail(this.method+" received wrong arguments "+h(n)+", didn't match "+this.expectedArguments.toString()),f(this.expectedArguments[r],n[r])||t.exports.fail(this.method+" received wrong arguments "+h(n)+", expected "+h(this.expectedArguments))}},allowsCall:function(t,e){if(this.met()&&i(this))return!1;if("expectedThis"in this&&this.expectedThis!==t)return!1;if(!("expectedArguments"in this))return!0;if(e=e||[],e.length<this.expectedArguments.length)return!1;if(this.expectsExactArgCount&&e.length!=this.expectedArguments.length)return!1;for(var n=0,r=this.expectedArguments.length;r>n;n+=1){if(!o(this.expectedArguments[n],e[n]))return!1;if(!f(this.expectedArguments[n],e[n]))return!1}return!0},withArgs:function(){return this.expectedArguments=v.call(arguments),this},withExactArgs:function(){return this.withArgs.apply(this,arguments),this.expectsExactArgCount=!0,this},on:function(t){return this.expectedThis=t,this},toString:function(){var t=(this.expectedArguments||[]).slice();this.expectsExactArgCount||g.call(t,"[...]");var e=p.toString.call({proxy:this.method||"anonymous mock expectation",args:t}),n=e.replace(", [...","[, ...")+" "+a(this);return this.met()?"Expectation met: "+n:"Expected "+n+" ("+s(this.callCount)+")"},verify:function(){return this.met()?t.exports.pass(this.toString()):t.exports.fail(this.toString()),!0},pass:function(){},fail:function(t){var e=new Error(t);throw e.name="ExpectationError",e}}},function(t,e,n){"use strict";function r(t){return t?r.create(t):o.create("Anonymous mock")}function i(t,e){if(t)for(var n=0,r=t.length;r>n;n+=1)e(t[n])}var o=n(227),s=n(64),a=n(174),u=n(170),c=Array.prototype.push;t.exports=s(r,{create:function(t){if(!t)throw new TypeError("object is null");var e=s({},r);return e.object=t,delete e.create,e},expects:function(t){if(!t)throw new TypeError("method is falsy");if(this.expectations||(this.expectations={},this.proxies=[]),!this.expectations[t]){this.expectations[t]=[];var e=this;a(this.object,t,function(){return e.invokeMethod(t,this,arguments)}),c.call(this.proxies,t)}var n=o.create(t);return c.call(this.expectations[t],n),n},restore:function(){var t=this.object;i(this.proxies,function(e){"function"==typeof t[e].restore&&t[e].restore()})},verify:function(){var t=this.expectations||{},e=[],n=[];return i(this.proxies,function(r){i(t[r],function(t){t.met()?c.call(n,t.toString()):c.call(e,t.toString())})}),this.restore(),e.length>0?o.fail(e.concat(n).join("\n")):n.length>0&&o.pass(e.concat(n).join("\n")),!0},invokeMethod:function(t,e,n){var r,i=this.expectations&&this.expectations[t],s=i&&i.length||0;for(r=0;s>r;r+=1)if(!i[r].met()&&i[r].allowsCall(e,n))return i[r].apply(e,n);var a,l=[],h=0;for(r=0;s>r;r+=1)i[r].allowsCall(e,n)?a=a||i[r]:h+=1,c.call(l,"    "+i[r].toString());return 0===h?a.apply(e,n):(l.unshift("Unexpected call: "+u.toString.call({proxy:t,args:n})),void o.fail(l.join("\n")))}})},function(t,e,n){"use strict";function r(t,e,n,r){r&&(!e.injectInto||n in e.injectInto?l.call(t.args,r):(e.injectInto[n]=r,t.injectedKeys.push(n)))}function i(e){var n=o.create(t.exports);return e.useFakeServer&&("object"==typeof e.useFakeServer&&(n.serverPrototype=e.useFakeServer),n.useFakeServer()),e.useFakeTimers&&("object"==typeof e.useFakeTimers?n.useFakeTimers.apply(n,e.useFakeTimers):n.useFakeTimers()),n}var o=n(55),s=n(64),a=n(225),u=n(339),c=n(79),l=[].push;t.exports=s(o.create(a),{useFakeTimers:function(){return this.clock=u.apply(null,arguments),this.add(this.clock)},serverPrototype:{},useFakeServer:function(){var t=this.serverPrototype||sinon.fakeServer;return t&&t.create?(this.server=t.create(),this.add(this.server)):null},inject:function(t){return a.inject.call(this,t),this.clock&&(t.clock=this.clock),this.server&&(t.server=this.server,t.requests=this.server.requests),t.match=c,t},restore:function(){a.restore.apply(this,arguments),this.restoreContext()},restoreContext:function(){if(this.injectedKeys){for(var t=0,e=this.injectedKeys.length;e>t;t++)delete this.injectInto[this.injectedKeys[t]];this.injectedKeys=[]}},create:function(e){if(!e)return o.create(t.exports);var n=i(e);n.args=n.args||[],n.injectedKeys=[],n.injectInto=e.injectInto;var s,a,u=n.inject({});if(e.properties)for(var c=0,l=e.properties.length;l>c;c++)s=e.properties[c],a=u[s]||"sandbox"==s&&n,r(n,e,s,a);else r(n,e,"sandbox",a);return n},match:c})},function(t,e,n){"use strict";function r(t){function e(){var e=i.getConfig(i.config);e.injectInto=e.injectIntoThis&&this||e.injectInto;var n,r,s=o(e),a=!1,u=Array.prototype.slice.call(arguments);if(u.length>0&&"function"==typeof u[arguments.length-1]){var c=u[arguments.length-1];u[arguments.length-1]=function(t){if(t)throw s.restore(),n;s.verifyAndRestore(),c(t)},a=!0}var l=u.concat(s.args);try{r=t.apply(this,l)}catch(h){n=h}if(!a){if("undefined"!=typeof n)throw s.restore(),n;s.verifyAndRestore()}return r}var n=typeof t;if("function"!==n)throw new TypeError("sinon.test needs to wrap a test function, got "+n);return t.length?function(){return e.apply(this,arguments)}:e}var i=n(226),o=n(229).create;r.config={injectIntoThis:!0,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:!0,useFakeServer:!0},t.exports=r},function(t){"use strict";t.exports=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=Object.prototype.toString.call(t);return e.substring(8,e.length-1).toLowerCase()}},function(t,e,n){var r,i;(!0&&n(242)&&function(o){r=o,i="function"==typeof r?r.call(e,n,e,t):r,!(void 0!==i&&(t.exports=i))}||"object"==typeof t&&function(e){t.exports=e()}||function(t){this.samsam=t()})(function(){function t(t){var e=t;return"number"==typeof t&&t!==e}function e(t){return h.toString.call(t).split(/[ \]]/)[1]}function n(t){if("Arguments"===e(t))return!0;if("object"!=typeof t||"number"!=typeof t.length||"Array"===e(t))return!1;if("function"==typeof t.callee)return!0;try{t[t.length]=6,delete t[t.length]}catch(n){return!0}return!1}function r(t){if(!t||1!==t.nodeType||!f)return!1;try{t.appendChild(f),t.removeChild(f)}catch(e){return!1}return!0}function i(t){var e,n=[];for(e in t)h.hasOwnProperty.call(t,e)&&n.push(e);return n}function o(t){return"function"==typeof t.getTime&&t.getTime()==t.valueOf()}function s(t){return 0===t&&1/t===-1/0}function a(e,n){return e===n||t(e)&&t(n)?0!==e||s(e)===s(n):void 0}function u(s,u){function c(t){return"object"!=typeof t||null===t||t instanceof Boolean||t instanceof Date||t instanceof Number||t instanceof RegExp||t instanceof String?!1:!0}function l(t,e){var n;for(n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var f=[],p=[],d=[],m=[],g={};return function v(s,u,y,b){var x=typeof s,w=typeof u;if(s===u||t(s)||t(u)||null==s||null==u||"object"!==x||"object"!==w)return a(s,u);if(r(s)||r(u))return!1;var _=o(s),T=o(u);if(!(!_&&!T||_&&T&&s.getTime()===u.getTime()))return!1;if(s instanceof RegExp&&u instanceof RegExp&&s.toString()!==u.toString())return!1;var S=e(s),E=e(u),C=i(s),A=i(u);if(n(s)||n(u)){if(s.length!==u.length)return!1}else if(x!==w||S!==E||C.length!==A.length)return!1;var j,k,O,M,R,P,I,L,F,B,D;for(k=0,O=C.length;O>k;k++){if(j=C[k],!h.hasOwnProperty.call(u,j))return!1;if(M=s[j],R=u[j],P=c(M),I=c(R),L=P?l(f,M):-1,F=I?l(p,R):-1,B=-1!==L?d[L]:y+"["+JSON.stringify(j)+"]",D=-1!==F?m[F]:b+"["+JSON.stringify(j)+"]",g[B+D])return!0;if(-1===L&&P&&(f.push(M),d.push(B)),-1===F&&I&&(p.push(R),m.push(D)),P&&I&&(g[B+D]=!0),!v(M,R,B,D))return!1}return!0}(s,u,"$1","$2")}function c(t,e){if(0===e.length)return!0;var n,r,i,o;for(n=0,r=t.length;r>n;++n)if(l(t[n],e[0])){for(i=0,o=e.length;o>i;++i)if(!l(t[n+i],e[i]))return!1;return!0}return!1}var l,h=Object.prototype,f="undefined"!=typeof document&&document.createElement("div");return l=function p(t,n){if(n&&"function"==typeof n.test)return n.test(t);if("function"==typeof n)return n(t)===!0;if("string"==typeof n){n=n.toLowerCase();var r="string"==typeof t||!!t;return r&&String(t).toLowerCase().indexOf(n)>=0}if("number"==typeof n)return n===t;if("boolean"==typeof n)return n===t;if("undefined"==typeof n)return"undefined"==typeof t;if(null===n)return null===t;if("Array"===e(t)&&"Array"===e(n))return c(t,n);if(n&&"object"==typeof n){if(n===t)return!0;var i;for(i in n){var o=t[i];if("undefined"==typeof o&&"function"==typeof t.getAttribute&&(o=t.getAttribute(i)),null===n[i]||"undefined"==typeof n[i]){if(o!==n[i])return!1}else if("undefined"==typeof o||!p(o,n[i]))return!1}return!0}throw new Error("Matcher was not a string, a number, a function, a boolean or an object")},{isArguments:n,isElement:r,isDate:o,isNegZero:s,identical:a,deepEqual:u,match:l,keys:i}})},,,,,function(t,e,n){"use strict";function r(){if(!(this instanceof r))throw new TypeError("Failed to construct 'AudioContext': Please use the 'new' operator");A.call(this);var t=new a(this),e=s.sampleRate,n=function(){return this._microCurrentTime/1e6},o=new u(this);i.defineAttribute(this,"destination","readonly",t,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"sampleRate","readonly",e,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"currentTime","readonly",n,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"listener","readonly",o,function(t){throw new TypeError(i.formatter.concat(this,t))}),Object.defineProperties(this,{$name:{value:"AudioContext"},$context:{value:this}}),this._microCurrentTime=0,this._processedSamples=0,this._tick=0}var i=n(5),o=n(24),s=n(4),a=n(238),u=n(239),c=n(204),l=n(406),h=n(418),f=n(421),p=n(420),d=n(427),m=n(405),g=n(415),v=n(412),y=n(408),b=n(428),x=n(425),w=n(411),_=n(410),T=n(409),S=n(413),E=n(424),C=n(426),A=n(162);n(419),n(417),i.inherits(r,A),r.WEB_AUDIO_TEST_API_VERSION=s.VERSION,r.prototype.createBuffer=function(t,e,n){var r=new o(this,null,[{name:"numberOfChannels",type:"number"},{name:"length",type:"number"},{name:"sampleRate",type:"number"}]);return r.validateArguments(arguments,function(t){throw new TypeError(r.form+"; "+t)}),new c(this,t,e,n)},r.prototype.decodeAudioData=function(t,e,n){var r=new o(this,"decodeAudioData",[{name:"audioData",type:"ArrayBuffer"},{name:"successCallback",type:"function"},{name:"errorCallback",type:"optional function"}]);r.validateArguments(arguments,function(t){throw new TypeError(r.form+"; "+t)}),e=i.defaults(e,i.NOP),n=i.defaults(n,i.NOP);var s=this;setTimeout(function(){s.DECODE_AUDIO_DATA_FAILED?n():e(s.DECODE_AUDIO_DATA_RESULT||new c(s,2,1024,s.sampleRate))},0)},r.prototype.createBufferSource=function(){return new l(this)},r.prototype.createMediaElementSource=function(t){var e=new o(this,"createMediaElementSource",[{name:"mediaElement",type:"HTMLMediaElement"}]);return e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)}),new h(this,t)},r.prototype.createMediaStreamSource=function(t){var e=new o(this,"createMediaStreamSource",[{name:"mediaStream",type:"MediaStream"}]);return e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)}),new f(this,t)},r.prototype.createMediaStreamDestination=function(){return new p(this)},r.prototype.createScriptProcessor=function(t,e,n){var r=new o(this,"createScriptProcessor",[{name:"bufferSize",type:"enum { 256, 512, 1024, 2048, 4096, 8192, 16384 }"},{name:"numberOfInputChannels",type:"optional number"},{name:"numberOfOutputChannels",type:"optional number"}]);return r.validateArguments(arguments,function(t){throw new TypeError(r.form+"; "+t)}),t=i.defaults(t,0),e=i.defaults(e,2),n=i.defaults(n,2),new d(this,t,e,n)},r.prototype.createAnalyser=function(){return new m(this)},r.prototype.createGain=function(){return new g(this)},r.prototype.createDelay=function(t){var e=new o(this,"createDelay",[{name:"maxDelayTime",type:"optional number"}]);return e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)}),t=i.defaults(t,1),new v(this,t)},r.prototype.createBiquadFilter=function(){return new y(this)},r.prototype.createWaveShaper=function(){return new b(this)},r.prototype.createPanner=function(){return new x(this)},r.prototype.createConvolver=function(){return new w(this)},r.prototype.createChannelSplitter=function(t){var e=new o(this,"createChannelSplitter",[{name:"numberOfOutputs",type:"optional number"}]);return e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)}),t=i.defaults(t,6),new _(this,t)},r.prototype.createChannelMerger=function(t){var e=new o(this,"createChannelMerger",[{name:"numberOfInputs",type:"optional number"}]);return e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)}),t=i.defaults(t,6),new T(this,t)},r.prototype.createDynamicsCompressor=function(){return new S(this)},r.prototype.createOscillator=function(){return new E(this)},r.prototype.createPeriodicWave=function(t,e){function n(t,e){return 4096<t.length?"length of "+e+" array ("+t.length+") exceeds allow maximum of 4096":void 0}var r=new o(this,"createPeriodicWave",[{name:"real",type:"Float32Array",validate:n},{name:"imag",type:"Float32Array",validate:n}]);return r.validateArguments(arguments,function(t){throw new TypeError(r.form+"; "+t)}),r.assert(t.length===e.length,function(){throw new TypeError(r.form+"; length of real array ("+t.length+") and length of imaginary array ("+e.length+") must match")}),new C(t,e)},r.prototype.toJSON=function(){return this.destination.toJSON([])},r.prototype.$process=function(t){this._process(i.toMicroseconds(t))},r.prototype.$processTo=function(t){t=i.toMicroseconds(t),this._microCurrentTime<t&&this._process(t-this._microCurrentTime)},r.prototype.$reset=function(){this._microCurrentTime=0,this._processedSamples=0,this.destination.$inputs.forEach(function(t){t.disconnect()})},r.prototype._process=function(t){for(var e=this._microCurrentTime+t;this._microCurrentTime<e;){var n=Math.min(this._microCurrentTime+1e3,e),r=Math.floor(n/1e6*this.sampleRate),i=r-this._processedSamples;this._microCurrentTime=n,this._processedSamples=r,this.destination.$process(i,++this._tick)}},t.exports=s.AudioContext=r},function(t,e,n){"use strict";function r(t){o.call(this,t,{name:"AudioDestinationNode",numberOfInputs:1,numberOfOutputs:0,channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"});var e=2;i.defineAttribute(this,"maxChannelCount","readonly",e,function(t){throw new TypeError(i.formatter.concat(this,t))})}var i=n(5),o=n(15),s=n(4),a=function(){throw new TypeError("Illegal constructor")};i.inherits(a,o),i.inherits(r,a),r.exports=a,t.exports=s.AudioDestinationNode=r},function(t,e,n){"use strict";function r(t){var e=1,n=343.3;i.defineAttribute(this,"dopplerFactor","number",e,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"speedOfSound","number",n,function(t){throw new TypeError(i.formatter.concat(this,t))}),Object.defineProperties(this,{$name:{value:"AudioListener"},$context:{value:t}})}var i=n(5),o=n(24),s=n(4),a=function(){throw new TypeError("Illegal constructor")};i.inherits(r,a),r.exports=a,a.prototype.setPosition=function(){var t=new o(this,"setPosition",[{name:"x",type:"number"},{name:"y",type:"number"},{name:"z",type:"number"}]);t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)})},a.prototype.setOrientation=function(){var t=new o(this,"setOrientation",[{name:"x",type:"number"},{name:"y",type:"number"},{name:"z",type:"number"},{name:"xUp",type:"number"},{name:"yUp",type:"number"},{name:"zUp",type:"number"}]);t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)})},a.prototype.setVelocity=function(){var t=new o(this,"setVelocity",[{name:"x",type:"number"},{name:"y",type:"number"},{name:"z",type:"number"}]);t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)})},t.exports=s.AudioListener=r},function(t){"use strict";function e(t){return t.hasOwnProperty("$id")?t.$name+"#"+t.$id:t.$name}t.exports=e},function(t){"use strict";function e(t){var e=0;if("number"==typeof t)return e=Math.floor(1e3*t*1e3)||0,Math.max(n,Math.min(e,r));var i=/^([0-5]\d):([0-5]\d)\.(\d\d\d)$/.exec(t);return i?(e+=+i[1],e*=60,e+=+i[2],e*=1e3,e+=+i[3],e*=1e3,Math.max(n,Math.min(e,r))):e}var n=0,r=864e8;t.exports=e},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e,n){"use strict";var r=n(271).Cachier;describe("Cachier",function(){var t=void 0,e=0,n=function(t){return function(e){return function(){var n=function(r){var i=Promise.resolve().then(e);return r>=t?i:i["catch"](function(){return Promise.delay(100).then(function(){return n(r+1)})})};return n(1)}}};beforeEach(function(){return t=new r("test."+(new Date).getTime()+"."+ ++e)}),afterEach(n(3)(function(){return t.destroyDatabase()})),describe(".connection",function(){it("should be a promise which fullfill with the db connection",function(){return t.connection.then(function(t){expect(t.constructor+"").to.match(/DBDatabase/)})})}),describe("#save",function(){it("stores a blob",function(){var e=new Blob(["hello"]);return expect(t.save("wow",e)).to.eventually.be.ok}),it("rejects when key is invalid",function(){var e=new Blob(["hello"]);return expect(t.save(void 0,e)).to.be.rejected})}),describe("with a blob saved",function(){beforeEach(function(){var e=new Blob(["hello"]);return t.save("wow2",e,{name:"example1"}).delay(10)}),describe("#load",function(){it("should return the blob value",function(){return t.load("wow2").then(function(t){var e=t.blob,n=t.metadata;expect(e.size).to.equal(5),expect(n).to.deep.equal({name:"example1"})})})}),describe("#save",function(){it("should replace content with a new blob",function(){var e=new Blob(["world!"]);return t.save("wow2",e).delay(10).then(function(){return t.load("wow2")}).then(function(t){var e=t.blob,n=t.metadata;expect(e.size).to.equal(6),expect(n).to.equal(void 0)})})}),describe("#delete",function(){it("should remove the blob",function(){return t["delete"]("wow3").then(function(){return expect(t.load("wow3")).to.be.rejected})})})}),describe("#destroyDatabase",function(){it("may be called twice",function(){return t.destroyDatabase()})}),describe("without blob support in IndexedDB",function(){it("still works",function(){var e=new Blob(["hello"],{type:"text/plain"});return t._NO_BLOB=!0,t.save("wow4",e).delay(10).then(function(){return t.load("wow4")}).then(function(t){var e=t.blob;expect(e.size).to.equal(5),expect(e.type).to.equal("text/plain")})})})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(38));describe("download",function(){it("resolves with correct type",function(){return expect(i("/spec/download/fixtures/hello.txt").as("text")).to.eventually.match(/hello world/)}),it("rejects for 404",function(){return expect(i("/nonexistant").as("blob")).to.be.rejected}),it("rejects for bad url",function(){return expect(i("file:///nonexistant").as("blob")).to.be.rejected}),it("rejects for XHR error",function(){var t=sinon.stub(XMLHttpRequest.prototype,"send",function(){this.onerror(new Error("..."))});return expect(i("/spec/download/fixtures/hello.txt").as("blob")["finally"](function(){return t.restore()})).to.be.rejected})})},function(){"use strict";describe("The specs",function(){it("runs",function(){expect({runs:!0}.runs).to.equal(!0)})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(81)),o=n(80).playerWithBMS;describe("PlayerAudio",function(){function t(t){e=t,r={playAuto:sinon.stub().returns({}),playNote:sinon.stub().returns({}),playFree:sinon.stub().returns({})},n=new i({player:e,waveFactory:r})}var e=void 0,n=void 0,r=void 0;it("should play autokeysounds on correct time",function(){t({notechart:{autos:[{time:1,keysound:"0x"},{time:2,keysound:"0y"},{time:2,keysound:"0z"}],notes:[]},options:{autosound:!1}}),n.update(0),expect(r.playAuto).to.have.callCount(0),n.update(1),expect(r.playAuto).to.have.callCount(1),expect(r.playAuto).to.have.been.calledWith("0x"),n.update(2),expect(r.playAuto).to.have.callCount(3)}),it("should play notes automatically when autosound is on",function(){t({notechart:{autos:[],notes:[{time:1,keysound:"0x"}]},options:{autosound:!0}}),n.update(1),expect(r.playNote).to.have.been.calledWith("0x")}),it("should not play notes automatically when autosound is off",function(){t({notechart:{autos:[],notes:[{time:1,keysound:"0x"}]},options:{}}),n.update(1),void expect(r.playNote).to.not.have.been.called}),it("should play notes ahead of time",function(){t({notechart:{autos:[{time:1,keysound:"0x"}],notes:[]},options:{}}),n.update(.999),expect(r.playAuto).to.have.been.calledWith("0x"),expect(r.playAuto.getCall(0).args[1]).to.be.closeTo(.001,1e-5)}),it("should play hit notes",function(){t(o()),n.update(.999,{notifications:{sounds:[{note:{keysound:"0x"},type:"hit",judgment:1}]},stats:{}}),expect(r.playNote).to.have.been.calledWith("0x")}),it("badly hit note should sound off-pitch",function(){t(o());var e={bad:sinon.stub()};r.playNote.returns(e),n.update(.999,{notifications:{sounds:[{note:{keysound:"0x"},type:"hit",judgment:4}]},stats:{}}),void expect(e.bad).to.have.been.called}),it("should work even without audio",function(){t(o()),r.playNote.returns(null),n.update(.999,{notifications:{sounds:[{note:{keysound:"0x"},type:"hit",judgment:4}]},stats:{}})}),it("should stop sound when broken",function(){t(o());var e={keysound:"0x"},i={stop:sinon.spy()};r.playNote.returns(i),n.update(.999,{notifications:{sounds:[{note:e,type:"hit"}]},stats:{}}),n.update(1.1,{notifications:{sounds:[{note:e,type:"break"}]},stats:{}}),void expect(i.stop).to.have.been.called}),it("should play sounds when hitting blank space",function(){t(o()),n.update(.999,{notifications:{sounds:[{note:{keysound:"0x"},type:"free"}]},stats:{}}),expect(r.playFree).to.have.been.calledWith("0x")}),it("should play hit note once",function(){t(o());var e={keysound:"0x"};n.update(.999,{notifications:{sounds:[{note:e,type:"hit"}]},stats:{}}),n.update(1,{notifications:{sounds:[{note:e,type:"hit"}]},stats:{}}),expect(r.playNote).to.have.callCount(1)})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(73));describe("WaveFactory",function(){var t=void 0,e=void 0,n=void 0,r=void 0,o=void 0;beforeEach(function(){t={},e={play:sinon.stub()},n={"wow.wav":e},r={"0z":"wow.wav"},o=new i(t,n,r)}),describe("playAuto",function(){it("should play an autokeysound",function(){o.playAuto("0z",.1),expect(e.play).to.have.been.calledWith(.1)})}),describe("playNote",function(){it("should play the keysound",function(){o.playNote("0z",.1),expect(e.play).to.have.been.calledWith(.1)}),it("should stop old sound",function(){var t={stop:sinon.spy()};return e.play.returns(t),o.playNote("0z",0),o.playNote("0z",0),Promise.delay(0).then(function(){return expect(t.stop).to.have.callCount(1)})})}),describe("playFree",function(){it("should play the keysound",function(){o.playFree("0z"),void expect(e.play).to.have.been.called})})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(50));describe("NoteArea",function(){it("allows querying the visible note from a list of notes",function(){var t=[{position:1,column:"A"},{position:2,column:"A"},{position:3,column:"A"},{position:4,column:"A"},{position:5,column:"A"},{position:6,column:"A"},{position:10,end:{position:12},column:"B"},{position:11,column:"C"}],e=new i(t,[]);expect(e.getVisibleNotes(1.5,3.5)).to.have.length(2),expect(e.getVisibleNotes(2.5,3.5,1)).to.have.length(2),expect(e.getVisibleNotes(-1,7)).to.have.length(6),expect(e.getVisibleNotes(8,10.1)).to.have.length(1),expect(e.getVisibleNotes(8,10.1)).to.have.length(1),expect(e.getVisibleNotes(8,14)).to.have.length(2),expect(e.getVisibleNotes(11.5,14)).to.have.length(1),expect(e.getVisibleNotes(12.5,14)).to.have.length(0)}),it("allows querying barlines",function(){var t=new i([],[{beat:0,position:0},{beat:4,position:4},{beat:7,position:7}]);expect(t.getVisibleBarLines(1.5,4.5)).to.have.length(1)})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(82)),o=n(80),s=o.tap,a=o.notechart,u=o.playerWithBMS;describe("PlayerDisplay",function(){function t(t){o=new i(t)}function e(t,e,n){c=o.update(t,e,n)}function n(){return{speed:1,input:{get:function(){return{value:0,changed:!1}}},notifications:{judgments:[]},getNoteStatus:sinon.stub().returns("unjudged"),getNoteJudgment:sinon.stub().returns(0),stats:{score:0}}}function r(t){return Object.assign(n(),t)}var o=void 0,c=void 0;it("reacts to input",function(){var n=function(t){return r({input:new Map(t)})};t({notechart:a(),columns:["wow"],options:{placement:"center"}}),e(555,.5,n([["wow",{value:0,changed:!1}]])),expect(c.wow_active).to.equal(0),e(557,2.5,n([["wow",{value:1,changed:!0}]])),expect(c.wow_active).to.equal(1),expect(c.wow_down).to.equal(557),e(558,3.5,n([["wow",{value:0,changed:!0}]])),expect(c.wow_active).to.equal(0),expect(c.wow_up).to.equal(558)}),describe("with note",function(){beforeEach(function(){t(u("#BPM 60\n#00111:11"))}),it("displays unjudged notes",function(){e(3.95,3.95,n()),expect(c.note_1).to.have.length(1)}),it("hides judged notes",function(){var t=s(function(t){return t.getNoteStatus.returns("judged")},n());e(3.95,3.95,t),void expect(c.note_1).to.be.empty})}),describe("with long note",function(){beforeEach(function(){t(u("#BPM 60\n#00151:1111"))}),it("displays unjudged long notes",function(){e(3.95,3.95,n()),expect(c.longnote_1).to.have.length(1),void expect(c.longnote_1[0].active).to.be["false"],void expect(c.longnote_1[0].missed).to.be["false"]}),it("displays holding long notes",function(){var t=s(function(t){return t.getNoteJudgment.returns(1)},n());e(3.95,3.95,t),void expect(c.longnote_1[0].active).to.be["true"]}),it("displays holding long notes event it is bad",function(){var t=s(function(t){return t.getNoteJudgment.returns(4)},n());e(3.95,3.95,t),void expect(c.longnote_1[0].active).to.be["true"]}),it("displays missed long notes",function(){var t=n();t.getNoteJudgment.returns(-1),t.getNoteStatus.returns("judged"),e(3.95,3.95,t),void expect(c.longnote_1[0].missed).to.be["true"]})}),describe("with notification",function(){beforeEach(function(){t(u())}),it("sets judgment time",function(){var t={judgment:1,delta:0,combo:123,column:"SC"};e(12,34,r({notifications:{judgments:[t]}})),expect(c.judge_1).to.equal(12)}),it("sets judgment missed time",function(){var t={judgment:-1,delta:0,combo:0,column:"SC"};e(12,34,r({notifications:{judgments:[t]}})),expect(c.judge_missed).to.equal(12)}),it("sets combo",function(){var t={judgment:1,delta:0,combo:123,column:"SC"};e(12,34,r({notifications:{judgments:[t]}})),expect(c.combo).to.equal(123)}),it("sets note explode time",function(){var t={judgment:1,delta:0,combo:123,column:"SC"};e(12,34,r({notifications:{judgments:[t]}})),expect(c.SC_explode).to.equal(12)}),it("does not set note explode time if missed",function(){var t={judgment:-1,delta:0,combo:123,column:"SC"};e(12,34,r({notifications:{judgments:[t]}})),void expect(c.SC_explode).to.be.empty})})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(74));describe("GameInput",function(){var t=void 0,e=void 0;beforeEach(function(){t=new i,e={out:{},get:function(){return this.out}},t.use(e)}),it("should return control with default value of 0",function(){expect(t.get("wow").value).to.equal(0)}),describe("Control#value",function(){it("should return control with correct value",function(){e.out={wow:-1},t.update(),expect(t.get("wow").value).to.equal(-1)})}),describe("Control#changed",function(){it("should return changed state between last update",function(){t.update(),expect(t.get("wow").changed).to.equal(!1),e.out={wow:0},t.update(),expect(t.get("wow").changed).to.equal(!1),e.out={wow:-1},t.update(),expect(t.get("wow").changed).to.equal(!0),e.out={wow:1},t.update(),expect(t.get("wow").changed).to.equal(!0),e.out={wow:1},t.update(),expect(t.get("wow").changed).to.equal(!1),t.update(),expect(t.get("wow").changed).to.equal(!1),e.out={wow:0},t.update(),expect(t.get("wow").changed).to.equal(!0)
})})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(3)),o=r(n(84));describe("TouchPlugin",function(){it("should get value when touching",function(){var t=new o({refs:{p1_1:new Set([{getBounds:function(){return new i.Rectangle(64,64,64,64)}}]),p1_2:new Set([{getBounds:function(){return new i.Rectangle(128,64,64,64)}}])},input:[{x:72,y:72,id:"touch1"},{x:32,y:32,id:"touch2"}]}),e=t.get();expect(e.p1_1).to.equal(1),expect(e.p1_2).to.equal(0)})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(85));describe("SamplesLoader",function(){var t,e,n;beforeEach(function(){t={file:sinon.stub()},e={sample:sinon.stub()},n=new i(t,e)}),describe("#loadFiles",function(){it("should load file when matches",function(){return t.file.withArgs("a.wav").returns(Promise.resolve({read:function(){return Promise.resolve("ok1")}})),e.sample.withArgs("ok1").returns(Promise.resolve("ok2")),expect(n.loadFiles(["a.wav"])).to.eventually.deep.eq({"a.wav":"ok2"})}),it("should not include undecodable audio",function(){return t.file.withArgs("a.wav").returns(Promise.resolve({read:function(){return Promise.resolve("ok1")}})),e.sample.withArgs("ok1").returns(Promise.reject(new Error(".."))),expect(n.loadFiles(["a.wav"])).to.eventually.deep.eq({})}),it("should try mp3",function(){return t.file.withArgs("a.wav").returns(Promise.reject()),t.file.withArgs("a.ogg").returns(Promise.reject()),t.file.withArgs("a.mp3").returns(Promise.resolve({read:function(){return Promise.resolve("ok1")}})),e.sample.withArgs("ok1").returns(Promise.resolve("ok2")),expect(n.loadFiles(["a.wav"])).to.eventually.deep.eq({"a.wav":"ok2"})}),it("should not include failed matches",function(){return t.file.withArgs("a.wav").returns(Promise.reject()),t.file.withArgs("a.mp3").returns(Promise.reject()),t.file.withArgs("a.ogg").returns(Promise.reject()),expect(n.loadFiles(["a.wav"])).to.eventually.deep.eq({})})})})},function(t,e,n){"use strict";var r=n(80).notechart;describe("Notechart",function(){describe(".fromBMSChart",function(){it("should work",function(){var t=r("#00111:01\n#00101:02");expect(t.notes).to.have.length(1),expect(t.autos).to.have.length(1),expect(t.notes[0].beat).to.equal(4)}),it("should work with long notes",function(){var t=r("#00151:0101");expect(t.notes).to.have.length(1),expect(t.notes[0].beat).to.equal(4),expect(t.notes[0].end.beat).to.equal(6)})}),describe("#samples",function(){it("should return an array of all used samples",function(){var t=r("#WAV0X wow.wav\n#00101:0x0x");expect(t.samples).to.deep.equal(["wow.wav"])})}),describe("#keysounds",function(){it("should return an object of all keysounds",function(){var t=r("#WAV0X wow.wav\n#WAV0Y wow.wav\n#WAV0Z foon.wav\n#00101:0x0x0y0y0Z0Z");expect(t.keysounds).to.deep.equal({"0x":"wow.wav","0y":"wow.wav","0z":"foon.wav"})})}),describe("#barLines",function(){it("should return the list of beat with barlines",function(){var t=r("#00111:0001\n#00102:0.75");expect(t.barLines).to.deep.equal([{beat:0,position:0},{beat:4,position:4},{beat:7,position:7}])}),it("should consider long notes",function(){var t=r("#00151:0001\n#00251:0001");expect(t.barLines).to.deep.equal([{beat:0,position:0},{beat:4,position:4},{beat:8,position:8},{beat:12,position:12}])})}),describe("#secondsToBeat",function(){it("should convert seconds to beat",function(){var t=r("#BPM 120");expect(t.secondsToBeat(1)).to.equal(2)})}),describe("#secondsToPosition",function(){it("should convert seconds to position",function(){var t=r("#BPM 120");expect(t.secondsToPosition(1)).to.equal(2)})}),describe("#columns",function(){it("should return columns in notechart",function(){var t=r("#00111:11");expect(t.columns).to.deep.equal(["SC","1","2","3","4","5","6","7"])})}),describe("#info",function(){it("normal note should have 1 combo",function(){var t=r("#00111:11");expect(t.info(t.notes[0]).combos).to.equal(1)}),it("long note should have 2 combos",function(){var t=r("#00151:1111");expect(t.info(t.notes[0]).combos).to.equal(2)})})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(87)),o=r(n(75)),s=r(n(74)),a=n(80).notechart;describe("PlayerState",function(){it("updates the input",function(){var t=new i({number:1,columns:["wow"],notechart:a(""),options:{speed:1}}),e={get:function(t){return{name:t}}};t.update(0,e),expect(t.input.get("wow").name).to.equal("p1_wow")}),describe("note judging",function(){function t(t){n=a(t),r=new o(n,1,{speed:1}),u=new i(r),c=new s,l={},c.use({get:function(){return l}})}function e(t,e){l=e,c.update(),u.update(t,c)}var n=void 0,r=void 0,u=void 0,c=void 0,l=void 0;it("judges notes",function(){t("\n        #BPM 120\n        #00111:0101\n      ");var r=n.notes[0].column;expect(u.getNoteStatus(n.notes[0])).to.equal("unjudged"),expect(u.stats.combo).to.equal(0),expect(u.stats.poor).to.equal(!1),expect(u.stats.totalCombo).to.equal(2),void expect(u.notifications.judgments).to.be.empty,e(1.999,{}),expect(u.getNoteStatus(n.notes[0])).to.equal("unjudged"),e(2,{p1_1:1}),expect(u.getNoteStatus(n.notes[0])).to.equal("judged"),expect(u.getNoteJudgment(n.notes[0])).to.equal(1),expect(u.getNoteStatus(n.notes[1])).to.equal("unjudged"),expect(u.notifications.judgments[0]).to.deep.equal({judgment:1,combo:1,delta:0,column:r}),expect(u.stats.poor).to.equal(!1),e(2.1,{p1_1:0}),e(5,{p1_1:0}),expect(u.getNoteStatus(n.notes[1])).to.equal("judged"),expect(u.getNoteJudgment(n.notes[1])).to.equal(-1),expect(u.notifications.judgments[0]).to.deep.equal({judgment:-1,combo:0,delta:2,column:r}),expect(u.stats.poor).to.equal(!0)}),it("judges multiple notes in different column",function(){t("\n        #BPM 120\n        #00111:01\n        #00112:01\n      "),e(2,{p1_1:1,p1_2:1}),expect(u.getNoteStatus(n.notes[0])).to.equal("judged"),expect(u.getNoteStatus(n.notes[1])).to.equal("judged")}),it("judges single note from one column at a time",function(){t("\n        #BPM 480\n        #00111:01010100000000000000000000000000\n      "),e(.531,{p1_1:1}),expect(u.getNoteStatus(n.notes[0])).to.equal("judged"),expect(u.getNoteStatus(n.notes[1])).to.equal("unjudged"),expect(u.getNoteStatus(n.notes[2])).to.equal("unjudged"),e(.531,{p1_1:0}),e(.531,{p1_1:1}),expect(u.getNoteStatus(n.notes[0])).to.equal("judged"),expect(u.getNoteStatus(n.notes[1])).to.equal("judged"),expect(u.getNoteStatus(n.notes[2])).to.equal("unjudged"),e(.531,{p1_1:0}),e(.531,{p1_1:1}),expect(u.getNoteStatus(n.notes[0])).to.equal("judged"),expect(u.getNoteStatus(n.notes[1])).to.equal("judged"),expect(u.getNoteStatus(n.notes[2])).to.equal("judged"),expect(u.getNoteJudgment(n.notes[0])).to.gt(1),expect(u.getNoteJudgment(n.notes[1])).to.eq(1),expect(u.getNoteJudgment(n.notes[2])).to.gt(1)}),it("leaves note unjudged when bad and there are closer note",function(){t("\n        #BPM 120\n        #00111:01010100000000000000000000000000\n      "),e(2.125,{p1_1:1}),expect(u.getNoteStatus(n.notes[0])).to.equal("unjudged"),expect(u.getNoteStatus(n.notes[1])).to.equal("judged"),expect(u.getNoteStatus(n.notes[2])).to.equal("unjudged")}),describe("with long note",function(){var r=void 0;beforeEach(function(){t("\n          #BPM 120\n          #00151:0101\n        "),r=n.notes[0]}),it("judges long note",function(){e(2,{p1_1:1}),expect(u.getNoteStatus(r)).to.equal("active"),expect(u.getNoteJudgment(r)).to.equal(1),expect(u.notifications.judgments[0].judgment).to.equal(1),e(3,{p1_1:0}),expect(u.getNoteStatus(r)).to.equal("judged"),expect(u.getNoteJudgment(r)).to.equal(1),expect(u.notifications.judgments[0].judgment).to.equal(1)}),it("judges missed long note",function(){e(2.3,{p1_1:1}),expect(u.getNoteStatus(r)).to.equal("judged"),expect(u.getNoteJudgment(r)).to.equal(-1)}),it("judges long note lifted too fast as missed",function(){e(2,{p1_1:1}),e(2.01,{p1_1:0}),expect(u.getNoteStatus(r)).to.equal("judged"),expect(u.getNoteJudgment(r)).to.equal(-1)}),it("judges long note lifted too slow as missed",function(){e(2,{p1_1:1}),e(4,{p1_1:1}),expect(u.getNoteStatus(r)).to.equal("judged"),expect(u.getNoteJudgment(r)).to.equal(-1),expect(u.notifications.judgments[0]).to.deep.equal({judgment:-1,combo:0,delta:1,column:r.column})})}),describe("sound notifications",function(){it("notifies of note hit",function(){t("\n          #BPM 120\n          #00111:0102\n        "),e(2,{p1_1:1}),expect(u.notifications.sounds[0].note).to.equal(n.notes[0]),expect(u.notifications.sounds[0].type).to.equal("hit")}),it("should notify missed notes as break",function(){t("\n          #BPM 120\n          #00111:01\n        "),e(5,{p1_1:0}),expect(u.notifications.sounds[0].note).to.equal(n.notes[0]),expect(u.notifications.sounds[0].type).to.equal("break")}),it("notifies of free keysound hit",function(){t("\n          #BPM 60\n          #00111:01\n          #00211:02\n        "),e(4,{p1_1:1}),e(4,{p1_1:0}),e(4,{p1_1:1}),expect(u.notifications.sounds[0].note).to.equal(n.notes[0]),expect(u.notifications.sounds[0].type).to.equal("free"),e(4,{p1_1:0}),void expect(u.notifications.sounds).to.be.empty,e(5,{p1_1:1}),expect(u.notifications.sounds[0].note).to.equal(n.notes[0]),e(5,{p1_1:0}),e(7,{p1_1:1}),expect(u.notifications.sounds[0].note).to.equal(n.notes[1])})})})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(76)),o=n(80).notechart;describe("PlayerStats",function(){describe("#score",function(){it("returns the score",function(){var t=new i(o("#00111:1111111111"));expect(t.score).to.equal(0),t.handleJudgment(1),t.handleJudgment(1),t.handleJudgment(1),t.handleJudgment(1),t.handleJudgment(1),expect(t.score).to.equal(555555)})})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(167));describe("Observable",function(){describe("stateless mode",function(){it("should call watchers",function(){var t=sinon.spy(),e=sinon.spy(),n=new i,r=n.watch(t);void expect(t).not.to.have.been.called,n.notify("1"),expect(t).to.have.been.calledWith("1"),n.watch(e),void expect(e).not.to.have.been.called,n.notify("2"),expect(t).to.have.been.calledWith("2"),expect(e).to.have.been.calledWith("2"),r(),n.notify("3"),expect(t).not.to.have.been.calledWith("3"),expect(e).to.have.been.calledWith("3")})}),describe("stateful mode",function(){it("should have value",function(){var t=new i("0");expect(t.value).to.equal("0")}),it("should call watchers",function(){var t=sinon.spy(),e=sinon.spy(),n=new i("0"),r=n.watch(t);expect(t).to.have.been.calledWith("0"),n.value="1",expect(t).to.have.been.calledWith("1"),n.watch(e),expect(e).to.have.been.calledWith("1"),n.value="2",expect(t).to.have.been.calledWith("2"),expect(e).to.have.been.calledWith("2"),r(),n.value="3",expect(t).not.to.have.been.calledWith("3"),expect(e).to.have.been.calledWith("3")})})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{"default":t}},i=function(t){return t&&t.__esModule?t["default"]:t},o=i(n(30)),s=r(n(29));describe("ProgressFormatters",function(){describe("BYTES_FORMATTER",function(){it("should return blank for indeterminate",function(){var t=new o;expect(s.BYTES_FORMATTER(t)).to.equal("")}),it("should format as human readable size",function(){var t=new o;t.report(1,1024),expect(s.BYTES_FORMATTER(t)).to.equal("1b / 1kb")})}),describe("EXTRA_FORMATTER",function(){it("should just use the extra",function(){var t=new o;t.report(1,1024,"one.wav"),expect(s.EXTRA_FORMATTER(t)).to.equal("one.wav")})})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(30));describe("Progress",function(){describe("#watch",function(){it("should report current progress when watched",function(){var t=new i,e=sinon.spy();t.report(1,10),t.watch(e),expect(e).to.have.callCount(1),expect(e).to.have.been.calledWith(t)})}),describe("#toString",function(){it("should return blank string when no progress",function(){var t=new i;expect(t.toString()).to.equal("")}),it("should return a string representation of the progress",function(){var t=new i;t.report(1,10),expect(t.toString()).to.equal("1 / 10")}),it("should use a formatter",function(){var t=new i;t.report(1,10),t.formatter=function(t){return t.progress+""},expect(t.toString()).to.equal("0.1")})}),describe("#report",function(){it("should fire to all watchers",function(){var t=new i,e=sinon.spy();t.report(1,10),t.report(2,10),t.watch(e),t.report(3,10),t.report(4,10),expect(e).to.have.callCount(3)}),it("should return a function to unsubscribe",function(){var t=new i,e=sinon.spy();t.report(1,10),t.report(2,10);var n=t.watch(e);t.report(3,10),n(),t.report(4,10),expect(e).to.have.callCount(2)})}),describe("#progress",function(){it("returns progress in fraction",function(){var t=new i;t.report(1,10),expect(t.progress).to.equal(.1)}),it("returns null in unavailable",function(){var t=new i;expect(t.progress).to.equal(null)})})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{"default":t}},i=function(t){return t&&t.__esModule?t["default"]:t},o=i(n(30)),s=r(n(20));describe("ProgressUtils",function(){describe(".fixed",function(){it("should report for fixed number of items",function(){var t=new o,e=s.fixed(10,t);expect(t.current).to.equal(0),expect(t.total).to.equal(10),e("wow"),expect(t.current).to.equal(1),expect(t.total).to.equal(10),expect(t.extra).to.equal("wow")})}),describe(".wrapPromise",function(){it("should report number of fulfilled promises",function(){var t=new o,e=s.wrapPromise(t,function(t){return t}),n=(e(new Promise(function(){})),e(Promise.resolve(1))),r=(e(Promise.reject(new Error("no"))),e(Promise.resolve(3)));return Promise.all([n,r]).then(function(){expect(t.current).to.equal(2),expect(t.total).to.equal(4)})})}),describe(".bind",function(){it("should bind from one progress to another",function(){var t=new o,e=new o;t.report(10,20),s.bind(t,e),expect(e.current).to.equal(10),expect(e.total).to.equal(20),t.report(15,25),expect(e.current).to.equal(15),expect(e.total).to.equal(25)})})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(16));describe("readBlob",function(){it("rejects when cannot read blob",function(){var t=new Blob(["hello world"]),e=sinon.stub(FileReader.prototype,"readAsText",function(){this.onerror(new Error("..."))});return expect(i(t).as("text")["finally"](function(){return e.restore()})).to.be.rejected}),it("resolves with correct type",function(){var t=new Blob(["hello world"]);return expect(i(t).as("text")).to.eventually.equal("hello world")})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(88));describe("BemusePackageResources",function(){describe("#file",function(){var t;beforeEach(function(){t=new i("/spec/resources/fixtures/a/")}),it("returns a file",function(){return expect(t.file("do.mp3")).to.be.fulfilled}),it("rejects if file not found",function(){return expect(t.file("wow.mp3")).to.be.rejected}),it("can be read",function(){return expect(t.file("mi.mp3").then(function(t){return t.read()}).then(function(t){return t.byteLength})).to.eventually.eq(30093)}),it("cannot read if not bemuse file",function(){var t=new i("/spec/resources/fixtures/b/");return expect(t.file("do.mp3").then(function(t){return t.read()})).to.be.rejected}),it("data is correct",function(){return t.file("mi.mp3").then(function(t){return t.read()}).then(function(t){return new Uint8Array(t)}).then(function(t){expect([t[0],t[1],t[2]]).to.deep.equal([255,251,144])})})})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(40));n(430),describe("SamplingMaster",function(){var t=void 0,e=void 0;before(function(){WebAudioTestAPI.use()}),beforeEach(function(){t=new AudioContext,e=new i(t)}),describe("#unmute",function(){it("unmutes the audio",function(){var n=t.createGain();sinon.stub(t,"createGain").returns(n),sinon.spy(n,"connect"),sinon.spy(n,"disconnect"),e.unmute(),void expect(t.createGain).to.have.been.called,void expect(n.connect).to.have.been.called,void expect(n.disconnect).to.have.been.called})}),describe("#sample",function(){it("should coerce blob",function(){return e.sample(new Blob([]))}),it("should coerce array buffer",function(){return e.sample(new ArrayBuffer(0))}),it("should reject when decoding failed",function(){return t.DECODE_AUDIO_DATA_FAILED=!0,expect(e.sample(new ArrayBuffer(0))["finally"](function(){return t.DECODE_AUDIO_DATA_FAILED=!1})).to.be.rejected}),describe("#play",function(){var n=void 0,r=void 0,i=void 0;beforeEach(function(){return r=t.createBufferSource(),i=t.createBuffer(1,44100,44100),r.buffer=i,sinon.stub(t,"createBufferSource").returns(r),sinon.spy(r,"start"),e.sample(new Blob([])).then(function(t){return n=t})}),it("should play a buffer source",function(){n.play(),void expect(t.createBufferSource).to.have.been.called,expect(r.start).to.have.been.calledWith(0)}),it("should play a buffer source with delay",function(){t.$processTo(1),n.play(20),void expect(t.createBufferSource).to.have.been.called,expect(r.start).to.have.been.calledWith(21)}),void function(){try{return new Event("wat").type="customevent",it}catch(t){return it.skip}}()("should call #stop when playing finished",function(){var e=n.play();sinon.spy(e,"stop"),t.$processTo(1.5),void expect(e.stop).to.have.been.called}),describe("#stop",function(){it("should stop the buffer source",function(){var t=n.play();sinon.spy(r,"stop"),t.stop(),void expect(r.stop).to.have.been.called}),it("can be called multiple times",function(){var t=n.play();sinon.spy(r,"stop"),t.stop(),t.stop(),t.stop(),void expect(r.stop).to.have.been.calledOnce}),it("should call #onstop",function(){var t=n.play();t.onstop=sinon.spy(),t.stop(),void expect(t.onstop).to.have.been.called})}),describe("#bad",function(){it("should change pitch of sound",function(){var t=n.play();t.bad(),expect(r.playbackRate.value).not.to.equal(1)})})})}),describe("#destroy",function(){var t=void 0;beforeEach(function(){return e.sample(new Blob([])).then(function(e){return t=e})}),it("should stop all samples",function(){var n=t.play(),r=t.play(),i=t.play();sinon.spy(n,"stop"),sinon.spy(r,"stop"),sinon.spy(i,"stop"),e.destroy(),void expect(n.stop).to.have.been.called,void expect(r.stop).to.have.been.called,void expect(i.stop).to.have.been.called}),it("can no longer create samples",function(){return e.destroy(),expect(e.sample(new Blob([]))).to.be.rejected}),it("only destroys once",function(){var n=t.play();sinon.spy(n,"destroy"),e.destroy(),e.destroy(),expect(n.destroy).to.have.callCount(1)})}),after(function(){WebAudioTestAPI.unuse()})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=r(n(17));describe("Scintillator Expression",function(){describe("()",function(){it("should parse",function(){var t=new i("a+b");expect(t({a:1,b:5})).to.equal(6)})}),describe("#constant",function(){it("should be false when containing variables",function(){var t=new i("a+b");void expect(t.constant).to.be["false"]}),it("should be true when only contains number",function(){var t=new i("-1.25");void expect(t.constant).to.be["true"]})})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t["default"]:t},i=n(78),o=i._compile,s=i._attrs,a=i.Animation,u=r(n(6)),c=function(t){return u(u.parseXML(t).documentElement)};describe("Scintillator::Animation",function(){describe("_attrs",function(){it("lists all attributes of an element",function(){var t=c('<keyframe t="0" x="10" y="30" />')[0];expect(s(t)).to.deep.equal({t:"0",x:"10",y:"30"})})}),describe("_compile",function(){it("compiles animation into keyframes",function(){var t=c('<animation>\n        <keyframe t="0" x="10" y="30" />\n        <keyframe t="2" x="20" />\n        <keyframe t="5" x="15" y="20" />\n      </animation>');expect(o(t)).to.deep.equal({on:"",data:[{name:"x",keyframes:[{time:0,value:10,ease:"linear"},{time:2,value:20,ease:"linear"},{time:5,value:15,ease:"linear"}]},{name:"y",keyframes:[{time:0,value:30,ease:"linear"},{time:5,value:20,ease:"linear"}]}]})}),it("throws when there is no time",function(){var t=c("<animation>\n        <keyframe />\n      </animation>");expect(function(){return o(t)}).to["throw"](Error)})}),describe("#_properties",function(){it("should return a set of properties",function(){var t=a.compile(null,c('<group>\n        <animation>\n          <keyframe t="0" x="10" />\n          <keyframe t="1" x="20" />\n        </animation>\n        <animation>\n          <keyframe t="0" y="10" />\n          <keyframe t="1" y="20" />\n        </animation>\n      </group>'));expect(Array.from(t._properties)).to.deep.equal(["x","y"])})}),describe("#_events",function(){it("list distinct events",function(){var t=a.compile(null,c('<group>\n        <animation />\n        <animation />\n        <animation on="exit" />\n        <animation on="exit" />\n      </group>'));expect(t._events).to.deep.equal(["","exit"])})})})},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{"default":t}},i=function(t){return t&&t.__esModule?t["default"]:t},o=i(n(11)),s=r(n(51)),a=function(t){return"/spec/scintillator/fixtures/"+t};describe("Scintillator",function(){describe("#load",function(){it("should load skin and return skin node",o.wrap(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.load(a("bare.xml"));case 2:e=t.sent,expect(e.width).to.equal(123),expect(e.height).to.equal(456);case 5:case"end":return t.stop()}},t,this)}))),it("should reject if invalid",function(){return expect(s.load(a("invalid_tag.xml"))).to.be.rejected})}),describe("Context",function(){it("should instantiate and able to destroy",o.wrap(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.load(a("bare.xml"));case 2:e=t.sent,n=new s.Context(e),n.render({}),n.destroy();case 6:case"end":return t.stop()}},t,this)}))),describe("#input",function(){function t(t,e,n){r.view.dispatchEvent(new MouseEvent("mouse"+t,{clientX:e,clientY:n}))}function e(t,e,n){var i=new Event("touch"+t);i.touches=e,i.changedTouches=n,r.view.dispatchEvent(i)}var n=void 0,r=void 0;beforeEach(o.wrap(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.load(a("bare.xml"));case 2:n=t.sent,r=new s.Context(n),r.render({}),r.view.style.position="fixed",r.view.style.top="0",r.view.style.left="0",document.body.appendChild(r.view);case 9:case"end":return t.stop()}},i,this)}))),afterEach(function(){r.destroy(),document.body.removeChild(r.view)}),it("should report touches/mouse inside the region",function(){t("move",10,10),t("down",10,10),expect(r.input).to.deep.equal([{x:10,y:10,id:"mouse"}]);var n={identifier:1,clientX:80,clientY:80};e("start",[n],[n]),expect(r.input).to.deep.equal([{x:10,y:10,id:"mouse"},{x:80,y:80,id:"touch1"}]),t("move",20,20),expect(r.input).to.deep.equal([{x:20,y:20,id:"mouse"},{x:80,y:80,id:"touch1"}]),t("up",10,10),expect(r.input).to.deep.equal([{x:80,y:80,id:"touch1"}]),e("end",[],[n]),expect(r.input).to.deep.equal([])})}),describe("#refs",function(){it("should be a set of refs to the display object",o.wrap(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.load(a("refs.xml"));case 2:e=t.sent,n=new s.Context(e),n.render({}),expect(Array.from(n.refs.a)[0]).to.equal(n.stage.children[0]),n.destroy();case 7:case"end":return t.stop()}},t,this)})))})}),describe("Expressions",function(){it("should be parsed and processed",o.wrap(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.load(a("expr_basic.xml"));case 2:e=t.sent,n=new s.Context(e),n.render({}),r=n.stage,expect(r.children[0].x).to.equal(6),expect(r.children[0].y).to.equal(7),n.destroy();case 9:case"end":return t.stop()}},t,this)}))),it("should support variables",o.wrap(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.load(a("expr_variables.xml"));case 2:t=e.sent,n=new s.Context(t),r=n.stage,n.render({a:4,b:3}),expect(r.children[0].x).to.equal(7),expect(r.children[0].y).to.equal(12),n.render({a:10,b:20}),expect(r.children[0].x).to.equal(30),expect(r.children[0].y).to.equal(200),n.destroy();case 12:case"end":return e.stop()}},e,this)})))}),describe("SpriteNode",function(){it("should allow setting sprite frame",o.wrap(regeneratorRuntime.mark(function t(){var e,n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.load(a("sprite_attrs.xml"));case 2:e=t.sent,n=new s.Context(e),r=n.stage,n.render({}),i=r.children[0].texture.frame,expect(i.width).to.equal(10),expect(i.height).to.equal(11),expect(i.x).to.equal(12),expect(i.y).to.equal(13),n.destroy();case 12:case"end":return t.stop()}},t,this)}))),it("should allow setting visibility, width, height",o.wrap(regeneratorRuntime.mark(function e(){var t,n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.load(a("sprite_attrs.xml"));case 2:t=e.sent,n=new s.Context(t),r=n.stage,n.render({}),i=r.children[0],expect(i.width).to.equal(3),expect(i.height).to.equal(1),expect(i.visible).to.equal(!1),n.destroy();case 11:case"end":return e.stop()}},e,this)}))),it("should reject if blend mode is invalid",function(){return expect(s.load(a("sprite_invalid_blend.xml"))).to.be.rejected})}),describe("TextNode",function(){it("should display text",o.wrap(regeneratorRuntime.mark(function t(){var e,n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.load(a("text.xml"));case 2:e=t.sent,n=new s.Context(e),r=n.stage,n.render({}),i=r.children[0].children[0],expect(i.text).to.equal("Hello world"),n.destroy();case 9:case"end":return t.stop()}},t,this)}))),it("should center text",o.wrap(regeneratorRuntime.mark(function e(){var t,n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.load(a("text_center.xml"));case 2:t=e.sent,n=new s.Context(t),r=n.stage,n.render({}),i=r.children[0].children[0],expect(i.x).to.be.lessThan(0),n.destroy();case 9:case"end":return e.stop()}},e,this)}))),it("should support data interpolation",o.wrap(regeneratorRuntime.mark(function n(){var t,e,r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.load(a("text_interpolation.xml"));case 2:t=n.sent,e=new s.Context(t),r=e.stage,e.render({lol:"wow"}),i=r.children[0].children[0],expect(i.text).to.equal("Hello world wow"),e.destroy();case 9:case"end":return n.stop()}},n,this)})))}),describe("IfNode",function(){it("should display child when correct value",o.wrap(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.load(a("expr_if.xml"));case 2:e=t.sent,n=new s.Context(e),r=n.stage,n.render({a:"b"}),expect(r.children[0].children).to.have.length(1),n.destroy();case 8:case"end":return t.stop()}},t,this)}))),it("should not display child when correct value",o.wrap(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.load(a("expr_if.xml"));case 2:t=e.sent,n=new s.Context(t),r=n.stage,n.render({a:"x"}),expect(r.children[0].children).to.have.length(0),n.destroy();case 8:case"end":return e.stop()}},e,this)})))}),describe("ObjectNode",function(){it("should display children",o.wrap(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.load(a("expr_object.xml"));case 2:e=t.sent,n=new s.Context(e),r=n.stage,n.render({notes:[]}),expect(r.children[0].children).to.have.length(0),n.render({notes:[{key:"a",y:20}]}),expect(r.children[0].children).to.have.length(1),n.render({notes:[{key:"a",y:20},{key:"b",y:10}]}),expect(r.children[0].children).to.have.length(2),n.render({notes:[{key:"b",y:10}]}),expect(r.children[0].children).to.have.length(1),n.destroy();case 14:case"end":return t.stop()}},t,this)}))),it("should update same array with content changed",o.wrap(regeneratorRuntime.mark(function e(){var t,n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.load(a("expr_object.xml"));case 2:t=e.sent,n=new s.Context(t),r=n.stage,i=[],n.render({notes:i}),expect(r.children[0].children).to.have.length(0),i.push({key:"a",y:20}),n.render({notes:i}),expect(r.children[0].children).to.have.length(1),n.destroy();case 12:case"end":return e.stop()}},e,this)}))),it("should let children get value from item",o.wrap(regeneratorRuntime.mark(function n(){var t,e,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.load(a("expr_object_var.xml"));case 2:t=n.sent,e=new s.Context(t),r=e.stage,e.render({notes:[]}),e.render({notes:[{key:"a",y:20}]}),expect(r.children[0].children[0].y).to.equal(20),e.render({notes:[{key:"a",y:20},{key:"b",y:10}]}),expect(r.children[0].children[0].y).to.equal(20),e.render({notes:[{key:"b",y:10}]}),expect(r.children[0].children[0].y).to.equal(10),e.destroy();case 13:case"end":return n.stop()}},n,this)})))}),describe("GroupNode",function(){it("should allow masking",o.wrap(regeneratorRuntime.mark(function t(){var e,n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.load(a("group_mask.xml"));case 2:e=t.sent,n=new s.Context(e),r=n.stage,i=r.children[0].mask,expect(i).not.to.equal(null),n.destroy();case 8:case"end":return t.stop()}},t,this)})))}),describe("AnimationNode",function(){it("should allow animations",o.wrap(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.load(a("animation.xml"));case 2:e=t.sent,n=new s.Context(e),r=n.stage.children[0],n.render({t:0}),expect(r.x).to.equal(10),expect(r.y).to.equal(0),n.render({t:.5}),expect(r.x).to.equal(15),expect(r.y).to.equal(1),n.render({t:1}),expect(r.x).to.equal(20),expect(r.y).to.equal(2),n.destroy();case 15:case"end":return t.stop()}},t,this)}))),it("should allow animations on different events",o.wrap(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.load(a("animation.xml"));case 2:t=e.sent,n=new s.Context(t),r=n.stage.children[0],n.render({t:.5,exitEvent:.5}),expect(r.x).to.equal(50),expect(r.y).to.equal(0),n.render({t:1,exitEvent:.5}),expect(r.x).to.equal(60),expect(r.y).to.equal(50),n.render({t:1.5,exitEvent:.5}),expect(r.x).to.equal(70),expect(r.y).to.equal(100),n.destroy();case 15:case"end":return e.stop()}},e,this)})))})})},,,,,,function(t,e){"use strict";function n(t){function e(){return new Promise(function(e,n){var r=o.open(t,1);r.onupgradeneeded=function(t){var r=t.target.result,i=r.createObjectStore("cachier",{keyPath:"_id"});i.transaction.oncomplete=function(){e(r)},i.transaction.onerror=function(){n(new Error("Cannot upgrade database!"))}},r.onerror=function(){n(new Error("Cannot request database!"))},r.onsuccess=function(t){var n=t.target.result;e(n)}})}function n(t){return new Promise(function(e,n){t.onerror=function(){n(new Error("IndexedDB Error: "+t.error))},t.onblocked=function(){console.log(t),n(new Error("IndexedDB Blocked: "+t))},t.onsuccess=function(t){e(t)}})}function r(t){return new Promise(function(e,n){var r=new FileReader;r.onload=function(){e({buffer:r.result,type:t.type})},r.onerror=function(){n(new Error("Unable to convert blob to object!"))},r.readAsArrayBuffer(t)})}function i(t){return t instanceof Blob?t:t.buffer?new Blob([t.buffer],{type:t.type}):void 0}var o=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,s=e();
return t=t||"cachier",{connection:s,save:function(t,e,i){var o=!!this._NO_BLOB;return s.then(function(s){return Promise.resolve().then(function(){if(o)throw new Error("Requested non-Blob storing mode");var r=s.transaction("cachier","readwrite").objectStore("cachier").put({_id:t,blob:e,metadata:i});return n(r)})["catch"](function(){return console.log("Cannot store as blob, store as data-URL instead."),r(e).then(function(e){var r=s.transaction("cachier","readwrite").objectStore("cachier").put({_id:t,blob:e,metadata:i});return n(r)})})})},load:function(t){return s.then(function(e){var r=e.transaction("cachier").objectStore("cachier").get(t);return n(r).then(function(){var t=r.result;return{blob:i(t.blob),metadata:t.metadata}})})},"delete":function(t){return s.then(function(e){var r=e.transaction("cachier","readwrite").objectStore("cachier")["delete"](t);return n(r)})},destroyDatabase:function(){return s?s.then(function(t){t.close()}).then(function(){var e=o.deleteDatabase(t);return n(e)}).tap(function(){s=null}):Promise.resolve()}}}e["default"]=new n,e.Cachier=n,Object.defineProperty(e,"__esModule",{value:!0})},,,function(t){!function(){"use strict";function e(t,n){function r(t){return"function"==typeof t.always&&"function"==typeof t.done&&"function"==typeof t.fail&&"function"==typeof t.pipe&&"function"==typeof t.progress&&"function"==typeof t.state}function i(t){if("function"!=typeof t._obj.then)throw new TypeError(n.inspect(t._obj)+" is not a thenable.");if(r(t._obj))throw new TypeError("Chai as Promised is incompatible with jQuery's thenables, sorry! Please use a Promises/A+ compatible library (see http://promisesaplus.com/).")}function o(t,e){n.addMethod(f.prototype,t,function(){return i(this),e.apply(this,arguments)})}function s(t,e){n.addProperty(f.prototype,t,function(){return i(this),e.apply(this,arguments)})}function a(t,e){t.then(function(){e()},e)}function u(t,e,n){t.assert(!0,null,e,n.expected,n.actual)}function c(t,e,n){t.assert(!1,e,null,n.expected,n.actual)}function l(t){return"function"==typeof t.then?t:t._obj}function h(t,r,i){if(!n.flag(r,"eventually"))return t.apply(r,i);var o=l(r).then(function(t){return r._obj=t,n.flag(r,"eventually",!1),i?e.transformAsserterArgs(i):i}).then(function(e){return t.apply(r,e),r._obj});e.transferPromiseness(r,o)}var f=t.Assertion,p=t.assert,d=Object.getOwnPropertyNames(f.prototype),m={};d.forEach(function(t){m[t]=Object.getOwnPropertyDescriptor(f.prototype,t)}),s("fulfilled",function(){var t=this,n=l(t).then(function(e){return t._obj=e,u(t,"expected promise not to be fulfilled but it was fulfilled with #{act}",{actual:e}),e},function(e){c(t,"expected promise to be fulfilled but it was rejected with #{act}",{actual:e})});e.transferPromiseness(t,n)}),s("rejected",function(){var t=this,n=l(t).then(function(e){return t._obj=e,c(t,"expected promise to be rejected but it was fulfilled with #{act}",{actual:e}),e},function(e){return u(t,"expected promise not to be rejected but it was rejected with #{act}",{actual:e}),e});e.transferPromiseness(t,n)}),o("rejectedWith",function(t,r){var i=null,o=null;t instanceof RegExp||"string"==typeof t?(r=t,t=null):t&&t instanceof Error?(i=t,t=null,r=null):"function"==typeof t?o=(new t).name:t=null;var s=this,a=l(s).then(function(e){var n=null,a=null;if(t)n="expected promise to be rejected with #{exp} but it was fulfilled with #{act}",a=o;else if(r){var u=r instanceof RegExp?"matching":"including";n="expected promise to be rejected with an error "+u+" #{exp} but it was fulfilled with #{act}",a=r}else i&&(n="expected promise to be rejected with #{exp} but it was fulfilled with #{act}",a=i);s._obj=e,c(s,n,{expected:a,actual:e})},function(e){t&&s.assert(e instanceof t,"expected promise to be rejected with #{exp} but it was rejected with #{act}","expected promise not to be rejected with #{exp} but it was rejected with #{act}",o,e);var a="object"===n.type(e)&&"message"in e?e.message:""+e;r&&null!==a&&void 0!==a&&(r instanceof RegExp&&s.assert(r.test(a),"expected promise to be rejected with an error matching #{exp} but got #{act}","expected promise not to be rejected with an error matching #{exp}",r,a),"string"==typeof r&&s.assert(-1!==a.indexOf(r),"expected promise to be rejected with an error including #{exp} but got #{act}","expected promise not to be rejected with an error including #{exp}",r,a)),i&&s.assert(e===i,"expected promise to be rejected with #{exp} but it was rejected with #{act}","expected promise not to be rejected with #{exp}",i,e)});e.transferPromiseness(s,a)}),s("eventually",function(){n.flag(this,"eventually",!0)}),o("notify",function(t){a(l(this),t)}),o("become",function(t){return this.eventually.deep.equal(t)});var g=d.filter(function(t){return"assert"!==t&&"function"==typeof m[t].value});g.forEach(function(t){f.overwriteMethod(t,function(t){return function(){h(t,this,arguments)}})});var v=d.filter(function(t){return"_obj"!==t&&"function"==typeof m[t].get});v.forEach(function(t){var e=m[t],n=!1;try{n="function"==typeof e.get.call({})}catch(r){}n?f.addChainableMethod(t,function(){function t(){return e.get.call(n).apply(n,arguments)}var n=this;h(t,this,arguments)},function(){var t=e.get;h(t,this)}):f.overwriteProperty(t,function(t){return function(){h(t,this)}})});var y=Object.getOwnPropertyNames(p).filter(function(t){return"function"==typeof p[t]});p.isFulfilled=function(t,e){return new f(t,e).to.be.fulfilled},p.isRejected=function(t,e,n){"string"==typeof e&&(n=e,e=void 0);var r=new f(t,n);return void 0!==e?r.to.be.rejectedWith(e):r.to.be.rejected},p.becomes=function(t,e,n){return p.eventually.deepEqual(t,e,n)},p.doesNotBecome=function(t,e,n){return p.eventually.notDeepEqual(t,e,n)},p.eventually={},y.forEach(function(e){p.eventually[e]=function(r){var i,o=Array.prototype.slice.call(arguments,1),s=arguments[p[e].length-1];"string"==typeof s&&(i=function(e){throw new t.AssertionError(s+"\n\nOriginal reason: "+n.inspect(e))});var u=r.then(function(t){return p[e].apply(p,[t].concat(o))},i);return u.notify=function(t){a(u,t)},u}})}t.exports=e,e.transferPromiseness=function(t,e){t.then=e.then.bind(e)},e.transformAsserterArgs=function(t){return t}}()},function(t,e,n){t.exports=n(276)},function(t,e,n){/*!
	 * chai
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=[],e=t.exports={};/*!
	 * Chai version
	 */
e.version="2.2.0",/*!
	 * Assertion Error
	 */
e.AssertionError=n(294);/*!
	 * Utils for plugins (not exported)
	 */
var i=n(289);e.use=function(t){return~r.indexOf(t)||(t(this,i),r.push(t)),this},/*!
	 * Utility Functions
	 */
e.util=i;/*!
	 * Configuration
	 */
var o=n(110);e.config=o;/*!
	 * Primary `Assertion` prototype
	 */
var s=n(277);e.use(s);/*!
	 * Core Assertions
	 */
var a=n(278);e.use(a);/*!
	 * Expect interface
	 */
var u=n(280);e.use(u);/*!
	 * Should interface
	 */
var c=n(281);e.use(c);/*!
	 * Assert interface
	 */
var l=n(279);e.use(l)},function(t,e,n){/*!
	 * chai
	 * http://chaijs.com
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=n(110);t.exports=function(t,e){/*!
	   * Assertion Constructor
	   *
	   * Creates object for chaining.
	   *
	   * @api private
	   */
function n(t,e,n){o(this,"ssfi",n||arguments.callee),o(this,"object",t),o(this,"message",e)}/*!
	   * Module dependencies.
	   */
var i=t.AssertionError,o=e.flag;/*!
	   * Module export.
	   */
t.Assertion=n,Object.defineProperty(n,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),r.includeStack=t}}),Object.defineProperty(n,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),r.showDiff=t}}),n.addProperty=function(t,n){e.addProperty(this.prototype,t,n)},n.addMethod=function(t,n){e.addMethod(this.prototype,t,n)},n.addChainableMethod=function(t,n,r){e.addChainableMethod(this.prototype,t,n,r)},n.overwriteProperty=function(t,n){e.overwriteProperty(this.prototype,t,n)},n.overwriteMethod=function(t,n){e.overwriteMethod(this.prototype,t,n)},n.overwriteChainableMethod=function(t,n,r){e.overwriteChainableMethod(this.prototype,t,n,r)},/*!
	   * ### .assert(expression, message, negateMessage, expected, actual)
	   *
	   * Executes an expression and check expectations. Throws AssertionError for reporting if test doesn't pass.
	   *
	   * @name assert
	   * @param {Philosophical} expression to be tested
	   * @param {String or Function} message or function that returns message to display if expression fails
	   * @param {String or Function} negatedMessage or function that returns negatedMessage to display if negated expression fails
	   * @param {Mixed} expected value (remember to check for negation)
	   * @param {Mixed} actual (optional) will default to `this.obj`
	   * @param {Boolean} showDiff (optional) when set to `true`, assert will display a diff in addition to the message if expression fails
	   * @api private
	   */
n.prototype.assert=function(t,n,s,a,u,c){var l=e.test(this,arguments);if(!0!==c&&(c=!1),!0!==r.showDiff&&(c=!1),!l){var n=e.getMessage(this,arguments),h=e.getActual(this,arguments);throw new i(n,{actual:h,expected:a,showDiff:c},r.includeStack?this.assert:o(this,"ssfi"))}},/*!
	   * ### ._obj
	   *
	   * Quick reference to stored `actual` value for plugin developers.
	   *
	   * @api private
	   */
Object.defineProperty(n.prototype,"_obj",{get:function(){return o(this,"object")},set:function(t){o(this,"object",t)}})}},function(t){/*!
	 * chai
	 * http://chaijs.com
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e){function n(t,n){n&&T(this,"message",n),t=t.toLowerCase();var r=T(this,"object"),i=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";this.assert(t===e.type(r),"expected #{this} to be "+i+t,"expected #{this} not to be "+i+t)}function r(){T(this,"contains",!0)}function i(t,n){n&&T(this,"message",n);var r=T(this,"object"),i=!1;if("array"===e.type(r)&&"object"===e.type(t)){for(var o in r)if(e.eql(r[o],t)){i=!0;break}}else if("object"===e.type(t)){if(!T(this,"negate")){for(var s in t)new _(r).property(s,t[s]);return}var a={};for(var s in t)a[s]=r[s];i=e.eql(a,t)}else i=r&&~r.indexOf(t);this.assert(i,"expected #{this} to include "+e.inspect(t),"expected #{this} to not include "+e.inspect(t))}function o(){var t=T(this,"object"),e=Object.prototype.toString.call(t);this.assert("[object Arguments]"===e,"expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}function s(t,e){e&&T(this,"message",e);var n=T(this,"object");return T(this,"deep")?this.eql(t):void this.assert(t===n,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}function a(t,n){n&&T(this,"message",n),this.assert(e.eql(t,T(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}function u(t,e){e&&T(this,"message",e);var n=T(this,"object");if(T(this,"doLength")){new _(n,e).to.have.property("length");var r=n.length;this.assert(r>t,"expected #{this} to have a length above #{exp} but got #{act}","expected #{this} to not have a length above #{exp}",t,r)}else this.assert(n>t,"expected #{this} to be above "+t,"expected #{this} to be at most "+t)}function c(t,e){e&&T(this,"message",e);var n=T(this,"object");if(T(this,"doLength")){new _(n,e).to.have.property("length");var r=n.length;this.assert(r>=t,"expected #{this} to have a length at least #{exp} but got #{act}","expected #{this} to have a length below #{exp}",t,r)}else this.assert(n>=t,"expected #{this} to be at least "+t,"expected #{this} to be below "+t)}function l(t,e){e&&T(this,"message",e);var n=T(this,"object");if(T(this,"doLength")){new _(n,e).to.have.property("length");var r=n.length;this.assert(t>r,"expected #{this} to have a length below #{exp} but got #{act}","expected #{this} to not have a length below #{exp}",t,r)}else this.assert(t>n,"expected #{this} to be below "+t,"expected #{this} to be at least "+t)}function h(t,e){e&&T(this,"message",e);var n=T(this,"object");if(T(this,"doLength")){new _(n,e).to.have.property("length");var r=n.length;this.assert(t>=r,"expected #{this} to have a length at most #{exp} but got #{act}","expected #{this} to have a length above #{exp}",t,r)}else this.assert(t>=n,"expected #{this} to be at most "+t,"expected #{this} to be above "+t)}function f(t,n){n&&T(this,"message",n);var r=e.getName(t);this.assert(T(this,"object")instanceof t,"expected #{this} to be an instance of "+r,"expected #{this} to not be an instance of "+r)}function p(t,n){n&&T(this,"message",n);var r=T(this,"object");this.assert(r.hasOwnProperty(t),"expected #{this} to have own property "+e.inspect(t),"expected #{this} to not have own property "+e.inspect(t))}function d(){T(this,"doLength",!0)}function m(t,e){e&&T(this,"message",e);var n=T(this,"object");new _(n,e).to.have.property("length");var r=n.length;this.assert(r==t,"expected #{this} to have a length of #{exp} but got #{act}","expected #{this} to not have a length of #{act}",t,r)}function g(t){var n,r=T(this,"object"),i=!0,o="keys must be given single argument of Array|Object|String, or multiple String arguments";switch(e.type(t)){case"array":if(arguments.length>1)throw new Error(o);break;case"object":if(arguments.length>1)throw new Error(o);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}if(!t.length)throw new Error("keys required");var s=Object.keys(r),a=t,u=t.length,c=T(this,"any"),l=T(this,"all");if(c||l||(l=!0),c){var h=a.filter(function(t){return~s.indexOf(t)});i=h.length>0}if(l&&(i=t.every(function(t){return~s.indexOf(t)}),T(this,"negate")||T(this,"contains")||(i=i&&t.length==s.length)),u>1){t=t.map(function(t){return e.inspect(t)});var f=t.pop();l&&(n=t.join(", ")+", and "+f),c&&(n=t.join(", ")+", or "+f)}else n=e.inspect(t[0]);n=(u>1?"keys ":"key ")+n,n=(T(this,"contains")?"contain ":"have ")+n,this.assert(i,"expected #{this} to "+n,"expected #{this} to not "+n,a.slice(0).sort(),s.sort(),!0)}function v(t,n,r){r&&T(this,"message",r);var i=T(this,"object");new _(i,r).is.a("function");var o=!1,s=null,a=null,u=null;0===arguments.length?(n=null,t=null):t&&(t instanceof RegExp||"string"==typeof t)?(n=t,t=null):t&&t instanceof Error?(s=t,t=null,n=null):"function"==typeof t?(a=t.prototype.name||t.name,"Error"===a&&t!==Error&&(a=(new t).name)):t=null;try{i()}catch(c){if(s)return this.assert(c===s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}",s instanceof Error?s.toString():s,c instanceof Error?c.toString():c),T(this,"object",c),this;if(t&&(this.assert(c instanceof t,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp} but #{act} was thrown",a,c instanceof Error?c.toString():c),!n))return T(this,"object",c),this;var l="object"===e.type(c)&&"message"in c?c.message:""+c;if(null!=l&&n&&n instanceof RegExp)return this.assert(n.exec(l),"expected #{this} to throw error matching #{exp} but got #{act}","expected #{this} to throw error not matching #{exp}",n,l),T(this,"object",c),this;if(null!=l&&n&&"string"==typeof n)return this.assert(~l.indexOf(n),"expected #{this} to throw error including #{exp} but got #{act}","expected #{this} to throw error not including #{act}",n,l),T(this,"object",c),this;o=!0,u=c}var h="",f=null!==a?a:s?"#{exp}":"an error";o&&(h=" but #{act} was thrown"),this.assert(o===!0,"expected #{this} to throw "+f+h,"expected #{this} to not throw "+f+h,s instanceof Error?s.toString():s,u instanceof Error?u.toString():u),T(this,"object",u)}function y(t,e,n){return t.every(function(t){return n?e.some(function(e){return n(t,e)}):-1!==e.indexOf(t)})}function b(t,e,n){n&&T(this,"message",n);var r=T(this,"object");new _(t,n).to.have.property(e),new _(r).is.a("function");var i=t[e];r(),this.assert(i!==t[e],"expected ."+e+" to change","expected ."+e+" to not change")}function x(t,e,n){n&&T(this,"message",n);var r=T(this,"object");new _(t,n).to.have.property(e),new _(r).is.a("function");var i=t[e];r(),this.assert(t[e]-i>0,"expected ."+e+" to increase","expected ."+e+" to not increase")}function w(t,e,n){n&&T(this,"message",n);var r=T(this,"object");new _(t,n).to.have.property(e),new _(r).is.a("function");var i=t[e];r(),this.assert(t[e]-i<0,"expected ."+e+" to decrease","expected ."+e+" to not decrease")}var _=t.Assertion,T=(Object.prototype.toString,e.flag);["to","be","been","is","and","has","have","with","that","which","at","of","same"].forEach(function(t){_.addProperty(t,function(){return this})}),_.addProperty("not",function(){T(this,"negate",!0)}),_.addProperty("deep",function(){T(this,"deep",!0)}),_.addProperty("any",function(){T(this,"any",!0),T(this,"all",!1)}),_.addProperty("all",function(){T(this,"all",!0),T(this,"any",!1)}),_.addChainableMethod("an",n),_.addChainableMethod("a",n),_.addChainableMethod("include",i,r),_.addChainableMethod("contain",i,r),_.addChainableMethod("contains",i,r),_.addChainableMethod("includes",i,r),_.addProperty("ok",function(){this.assert(T(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")}),_.addProperty("true",function(){this.assert(!0===T(this,"object"),"expected #{this} to be true","expected #{this} to be false",this.negate?!1:!0)}),_.addProperty("false",function(){this.assert(!1===T(this,"object"),"expected #{this} to be false","expected #{this} to be true",this.negate?!0:!1)}),_.addProperty("null",function(){this.assert(null===T(this,"object"),"expected #{this} to be null","expected #{this} not to be null")}),_.addProperty("undefined",function(){this.assert(void 0===T(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")}),_.addProperty("exist",function(){this.assert(null!=T(this,"object"),"expected #{this} to exist","expected #{this} to not exist")}),_.addProperty("empty",function(){var t=T(this,"object"),e=t;Array.isArray(t)||"string"==typeof object?e=t.length:"object"==typeof t&&(e=Object.keys(t).length),this.assert(!e,"expected #{this} to be empty","expected #{this} not to be empty")}),_.addProperty("arguments",o),_.addProperty("Arguments",o),_.addMethod("equal",s),_.addMethod("equals",s),_.addMethod("eq",s),_.addMethod("eql",a),_.addMethod("eqls",a),_.addMethod("above",u),_.addMethod("gt",u),_.addMethod("greaterThan",u),_.addMethod("least",c),_.addMethod("gte",c),_.addMethod("below",l),_.addMethod("lt",l),_.addMethod("lessThan",l),_.addMethod("most",h),_.addMethod("lte",h),_.addMethod("within",function(t,e,n){n&&T(this,"message",n);var r=T(this,"object"),i=t+".."+e;if(T(this,"doLength")){new _(r,n).to.have.property("length");var o=r.length;this.assert(o>=t&&e>=o,"expected #{this} to have a length within "+i,"expected #{this} to not have a length within "+i)}else this.assert(r>=t&&e>=r,"expected #{this} to be within "+i,"expected #{this} to not be within "+i)}),_.addMethod("instanceof",f),_.addMethod("instanceOf",f),_.addMethod("property",function(t,n,r){r&&T(this,"message",r);var i=!!T(this,"deep"),o=i?"deep property ":"property ",s=T(this,"negate"),a=T(this,"object"),u=i?e.getPathInfo(t,a):null,c=i?u.exists:e.hasProperty(t,a),l=i?u.value:a[t];if(s&&void 0!==n){if(void 0===l)throw r=null!=r?r+": ":"",new Error(r+e.inspect(a)+" has no "+o+e.inspect(t))}else this.assert(c,"expected #{this} to have a "+o+e.inspect(t),"expected #{this} to not have "+o+e.inspect(t));void 0!==n&&this.assert(n===l,"expected #{this} to have a "+o+e.inspect(t)+" of #{exp}, but got #{act}","expected #{this} to not have a "+o+e.inspect(t)+" of #{act}",n,l),T(this,"object",l)}),_.addMethod("ownProperty",p),_.addMethod("haveOwnProperty",p),_.addChainableMethod("length",m,d),_.addMethod("lengthOf",m),_.addMethod("match",function(t,e){e&&T(this,"message",e);var n=T(this,"object");this.assert(t.exec(n),"expected #{this} to match "+t,"expected #{this} not to match "+t)}),_.addMethod("string",function(t,n){n&&T(this,"message",n);var r=T(this,"object");new _(r,n).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+e.inspect(t),"expected #{this} to not contain "+e.inspect(t))}),_.addMethod("keys",g),_.addMethod("key",g),_.addMethod("throw",v),_.addMethod("throws",v),_.addMethod("Throw",v),_.addMethod("respondTo",function(t,n){n&&T(this,"message",n);var r=T(this,"object"),i=T(this,"itself"),o="function"!==e.type(r)||i?r[t]:r.prototype[t];this.assert("function"==typeof o,"expected #{this} to respond to "+e.inspect(t),"expected #{this} to not respond to "+e.inspect(t))}),_.addProperty("itself",function(){T(this,"itself",!0)}),_.addMethod("satisfy",function(t,n){n&&T(this,"message",n);var r=T(this,"object"),i=t(r);this.assert(i,"expected #{this} to satisfy "+e.objDisplay(t),"expected #{this} to not satisfy"+e.objDisplay(t),this.negate?!1:!0,i)}),_.addMethod("closeTo",function(t,n,r){r&&T(this,"message",r);var i=T(this,"object");if(new _(i,r).is.a("number"),"number"!==e.type(t)||"number"!==e.type(n))throw new Error("the arguments to closeTo must be numbers");this.assert(Math.abs(i-t)<=n,"expected #{this} to be close to "+t+" +/- "+n,"expected #{this} not to be close to "+t+" +/- "+n)}),_.addMethod("members",function(t,n){n&&T(this,"message",n);var r=T(this,"object");new _(r).to.be.an("array"),new _(t).to.be.an("array");var i=T(this,"deep")?e.eql:void 0;return T(this,"contains")?this.assert(y(t,r,i),"expected #{this} to be a superset of #{act}","expected #{this} to not be a superset of #{act}",r,t):void this.assert(y(r,t,i)&&y(t,r,i),"expected #{this} to have the same members as #{act}","expected #{this} to not have the same members as #{act}",r,t)}),_.addChainableMethod("change",b),_.addChainableMethod("changes",b),_.addChainableMethod("increase",x),_.addChainableMethod("increases",x),_.addChainableMethod("decrease",w),_.addChainableMethod("decreases",w)}},function(t){/*!
	 * chai
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e){/*!
	   * Chai dependencies.
	   */
var n=t.Assertion,r=e.flag,i=t.assert=function(e,r){var i=new n(null,null,t.assert);i.assert(e,r,"[ negation message unavailable ]")};i.fail=function(e,n,r,o){throw r=r||"assert.fail()",new t.AssertionError(r,{actual:e,expected:n,operator:o},i.fail)},i.ok=function(t,e){new n(t,e).is.ok},i.notOk=function(t,e){new n(t,e).is.not.ok},i.equal=function(t,e,o){var s=new n(t,o,i.equal);s.assert(e==r(s,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t)},i.notEqual=function(t,e,o){var s=new n(t,o,i.notEqual);s.assert(e!=r(s,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t)},i.strictEqual=function(t,e,r){new n(t,r).to.equal(e)},i.notStrictEqual=function(t,e,r){new n(t,r).to.not.equal(e)},i.deepEqual=function(t,e,r){new n(t,r).to.eql(e)},i.notDeepEqual=function(t,e,r){new n(t,r).to.not.eql(e)},i.isAbove=function(t,e,r){new n(t,r).to.be.above(e)},i.isBelow=function(t,e,r){new n(t,r).to.be.below(e)},i.isTrue=function(t,e){new n(t,e).is["true"]},i.isFalse=function(t,e){new n(t,e).is["false"]},i.isNull=function(t,e){new n(t,e).to.equal(null)},i.isNotNull=function(t,e){new n(t,e).to.not.equal(null)},i.isUndefined=function(t,e){new n(t,e).to.equal(void 0)},i.isDefined=function(t,e){new n(t,e).to.not.equal(void 0)},i.isFunction=function(t,e){new n(t,e).to.be.a("function")},i.isNotFunction=function(t,e){new n(t,e).to.not.be.a("function")},i.isObject=function(t,e){new n(t,e).to.be.a("object")},i.isNotObject=function(t,e){new n(t,e).to.not.be.a("object")},i.isArray=function(t,e){new n(t,e).to.be.an("array")},i.isNotArray=function(t,e){new n(t,e).to.not.be.an("array")},i.isString=function(t,e){new n(t,e).to.be.a("string")},i.isNotString=function(t,e){new n(t,e).to.not.be.a("string")},i.isNumber=function(t,e){new n(t,e).to.be.a("number")},i.isNotNumber=function(t,e){new n(t,e).to.not.be.a("number")},i.isBoolean=function(t,e){new n(t,e).to.be.a("boolean")},i.isNotBoolean=function(t,e){new n(t,e).to.not.be.a("boolean")},i.typeOf=function(t,e,r){new n(t,r).to.be.a(e)},i.notTypeOf=function(t,e,r){new n(t,r).to.not.be.a(e)},i.instanceOf=function(t,e,r){new n(t,r).to.be.instanceOf(e)},i.notInstanceOf=function(t,e,r){new n(t,r).to.not.be.instanceOf(e)},i.include=function(t,e,r){new n(t,r,i.include).include(e)},i.notInclude=function(t,e,r){new n(t,r,i.notInclude).not.include(e)},i.match=function(t,e,r){new n(t,r).to.match(e)},i.notMatch=function(t,e,r){new n(t,r).to.not.match(e)},i.property=function(t,e,r){new n(t,r).to.have.property(e)},i.notProperty=function(t,e,r){new n(t,r).to.not.have.property(e)},i.deepProperty=function(t,e,r){new n(t,r).to.have.deep.property(e)},i.notDeepProperty=function(t,e,r){new n(t,r).to.not.have.deep.property(e)},i.propertyVal=function(t,e,r,i){new n(t,i).to.have.property(e,r)},i.propertyNotVal=function(t,e,r,i){new n(t,i).to.not.have.property(e,r)},i.deepPropertyVal=function(t,e,r,i){new n(t,i).to.have.deep.property(e,r)},i.deepPropertyNotVal=function(t,e,r,i){new n(t,i).to.not.have.deep.property(e,r)},i.lengthOf=function(t,e,r){new n(t,r).to.have.length(e)},i.Throw=function(t,e,i,o){("string"==typeof e||e instanceof RegExp)&&(i=e,e=null);var s=new n(t,o).to.Throw(e,i);return r(s,"object")},i.doesNotThrow=function(t,e,r){"string"==typeof e&&(r=e,e=null),new n(t,r).to.not.Throw(e)},i.operator=function(t,i,o,s){var a;switch(i){case"==":a=t==o;break;case"===":a=t===o;break;case">":a=t>o;break;case">=":a=t>=o;break;case"<":a=o>t;break;case"<=":a=o>=t;break;case"!=":a=t!=o;break;case"!==":a=t!==o;break;default:throw new Error('Invalid operator "'+i+'"')}var u=new n(a,s);u.assert(!0===r(u,"object"),"expected "+e.inspect(t)+" to be "+i+" "+e.inspect(o),"expected "+e.inspect(t)+" to not be "+i+" "+e.inspect(o))},i.closeTo=function(t,e,r,i){new n(t,i).to.be.closeTo(e,r)},i.sameMembers=function(t,e,r){new n(t,r).to.have.same.members(e)},i.sameDeepMembers=function(t,e,r){new n(t,r).to.have.same.deep.members(e)},i.includeMembers=function(t,e,r){new n(t,r).to.include.members(e)},i.changes=function(t,e,r){new n(t).to.change(e,r)},i.doesNotChange=function(t,e,r){new n(t).to.not.change(e,r)},i.increases=function(t,e,r){new n(t).to.increase(e,r)},i.doesNotIncrease=function(t,e,r){new n(t).to.not.increase(e,r)},i.decreases=function(t,e,r){new n(t).to.decrease(e,r)},i.doesNotDecrease=function(t,e,r){new n(t).to.not.decrease(e,r)},/*!
	   * Undocumented / untested
	   */
i.ifError=function(t,e){new n(t,e).to.not.be.ok},/*!
	   * Aliases.
	   */
function o(t,e){return i[e]=i[t],o}("Throw","throw")("Throw","throws")}},function(t){/*!
	 * chai
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t){t.expect=function(e,n){return new t.Assertion(e,n)},t.expect.fail=function(e,n,r,i){throw r=r||"expect.fail()",new t.AssertionError(r,{actual:e,expected:n,operator:i},t.expect.fail)}}},function(t){/*!
	 * chai
	 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t){function e(){function e(){return this instanceof String||this instanceof Number||this instanceof Boolean?new n(this.valueOf(),null,e):new n(this,null,e)}function r(t){Object.defineProperty(this,"should",{value:t,enumerable:!0,configurable:!0,writable:!0})}Object.defineProperty(Object.prototype,"should",{set:r,get:e,configurable:!0});var i={};return i.fail=function(e,n,r,o){throw r=r||"should.fail()",new t.AssertionError(r,{actual:e,expected:n,operator:o},i.fail)},i.equal=function(t,e,r){new n(t,r).to.equal(e)},i.Throw=function(t,e,r,i){new n(t,i).to.Throw(e,r)},i.exist=function(t,e){new n(t,e).to.exist},i.not={},i.not.equal=function(t,e,r){new n(t,r).to.not.equal(e)},i.not.Throw=function(t,e,r,i){new n(t,i).to.not.Throw(e,r)},i.not.exist=function(t,e){new n(t,e).to.not.exist},i["throw"]=i.Throw,i.not["throw"]=i.not.Throw,i}var n=t.Assertion;t.should=e,t.Should=e}},function(t,e,n){/*!
	 * Chai - addChainingMethod utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependencies
	 */
var r=n(223),i=n(111),o=n(110),s="__proto__"in Object,a=/^(?:length|name|arguments|caller)$/,u=Function.prototype.call,c=Function.prototype.apply;t.exports=function(t,e,n,l){"function"!=typeof l&&(l=function(){});var h={method:n,chainingBehavior:l};t.__methods||(t.__methods={}),t.__methods[e]=h,Object.defineProperty(t,e,{get:function(){h.chainingBehavior.call(this);var e=function f(){var t=i(this,"ssfi");t&&o.includeStack===!1&&i(this,"ssfi",f);var e=h.method.apply(this,arguments);return void 0===e?this:e};if(s){var n=e.__proto__=Object.create(this);n.call=u,n.apply=c}else{var l=Object.getOwnPropertyNames(t);l.forEach(function(n){if(!a.test(n)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r)}})}return r(this,e),e},configurable:!0})}},function(t,e,n){/*!
	 * Chai - addMethod utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
var r=n(110),i=n(111);t.exports=function(t,e,n){t[e]=function(){var o=i(this,"ssfi");o&&r.includeStack===!1&&i(this,"ssfi",t[e]);var s=n.apply(this,arguments);return void 0===s?this:s}}},function(t){/*!
	 * Chai - addProperty utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e,n){Object.defineProperty(t,e,{get:function(){var t=n.call(this);return void 0===t?this:t},configurable:!0})}},function(t){/*!
	 * Chai - getEnumerableProperties utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t){var e=[];for(var n in t)e.push(n);return e}},function(t,e,n){/*!
	 * Chai - message composition utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependancies
	 */
var r=n(111),i=n(218),o=(n(192),n(222));t.exports=function(t,e){var n=r(t,"negate"),s=r(t,"object"),a=e[3],u=i(t,e),c=n?e[2]:e[1],l=r(t,"message");return"function"==typeof c&&(c=c()),c=c||"",c=c.replace(/#{this}/g,o(s)).replace(/#{act}/g,o(u)).replace(/#{exp}/g,o(a)),l?l+": "+c:c}},function(t,e,n){/*!
	 * Chai - getPathValue utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * @see https://github.com/logicalparadox/filtr
	 * MIT Licensed
	 */
var r=n(220);t.exports=function(t,e){var n=r(t,e);return n.value}},function(t){/*!
	 * Chai - getProperties utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(){function t(t){-1===e.indexOf(t)&&e.push(t)}for(var e=Object.getOwnPropertyNames(subject),n=Object.getPrototypeOf(subject);null!==n;)Object.getOwnPropertyNames(n).forEach(t),n=Object.getPrototypeOf(n);return e}},function(t,e,n){/*!
	 * chai
	 * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Main exports
	 */
var e=t.exports={};/*!
	 * test utility
	 */
e.test=n(293),/*!
	 * type utility
	 */
e.type=n(224),/*!
	 * message utility
	 */
e.getMessage=n(286),/*!
	 * actual utility
	 */
e.getActual=n(218),/*!
	 * Inspect util
	 */
e.inspect=n(192),/*!
	 * Object Display util
	 */
e.objDisplay=n(222),/*!
	 * Flag utility
	 */
e.flag=n(111),/*!
	 * Flag transferring utility
	 */
e.transferFlags=n(223),/*!
	 * Deep equal utility
	 */
e.eql=n(295),/*!
	 * Deep path value
	 */
e.getPathValue=n(287),/*!
	 * Deep path info
	 */
e.getPathInfo=n(220),/*!
	 * Check if a property exists
	 */
e.hasProperty=n(221),/*!
	 * Function name
	 */
e.getName=n(219),/*!
	 * add Property
	 */
e.addProperty=n(284),/*!
	 * add Method
	 */
e.addMethod=n(283),/*!
	 * overwrite Property
	 */
e.overwriteProperty=n(292),/*!
	 * overwrite Method
	 */
e.overwriteMethod=n(291),/*!
	 * Add a chainable method
	 */
e.addChainableMethod=n(282),/*!
	 * Overwrite chainable method
	 */
e.overwriteChainableMethod=n(290)},function(t){/*!
	 * Chai - overwriteChainableMethod utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e,n,r){var i=t.__methods[e],o=i.chainingBehavior;i.chainingBehavior=function(){var t=r(o).call(this);return void 0===t?this:t};var s=i.method;i.method=function(){var t=n(s).apply(this,arguments);return void 0===t?this:t}}},function(t){/*!
	 * Chai - overwriteMethod utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e,n){var r=t[e],i=function(){return this};r&&"function"==typeof r&&(i=r),t[e]=function(){var t=n(i).apply(this,arguments);return void 0===t?this:t}}},function(t){/*!
	 * Chai - overwriteProperty utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
t.exports=function(t,e,n){var r=Object.getOwnPropertyDescriptor(t,e),i=function(){};r&&"function"==typeof r.get&&(i=r.get),Object.defineProperty(t,e,{get:function(){var t=n(i).call(this);return void 0===t?this:t},configurable:!0})}},function(t,e,n){/*!
	 * Chai - test utility
	 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependancies
	 */
var r=n(111);t.exports=function(t,e){var n=r(t,"negate"),i=e[0];return n?!i:i}},function(t){/*!
	 * assertion-error
	 * Copyright(c) 2013 Jake Luer <jake@qualiancy.com>
	 * MIT Licensed
	 */
/*!
	 * Return a function that will copy properties from
	 * one object to another excluding any originally
	 * listed. Returned function will create a new `{}`.
	 *
	 * @param {String} excluded properties ...
	 * @return {Function}
	 */
function e(){function t(t,n){Object.keys(n).forEach(function(r){~e.indexOf(r)||(t[r]=n[r])})}var e=[].slice.call(arguments);return function(){for(var e=[].slice.call(arguments),n=0,r={};n<e.length;n++)t(r,e[n]);return r}}function n(t,n,r){var i=e("name","message","stack","constructor","toJSON"),o=i(n||{});this.message=t||"Unspecified AssertionError",this.showDiff=!1;for(var s in o)this[s]=o[s];r=r||arguments.callee,r&&Error.captureStackTrace&&Error.captureStackTrace(this,r)}/*!
	 * Primary Exports
	 */
t.exports=n,/*!
	 * Inherit from Error.prototype
	 */
n.prototype=Object.create(Error.prototype),/*!
	 * Statically set name
	 */
n.prototype.name="AssertionError",/*!
	 * Ensure correct constructor
	 */
n.prototype.constructor=n,n.prototype.toJSON=function(t){var n=e("constructor","toJSON","stack"),r=n({name:this.name},this);return!1!==t&&this.stack&&(r.stack=this.stack),r}},function(t,e,n){t.exports=n(296)},function(t,e,n){function r(t,e,n){return i(t,e)?!0:"date"===m(t)?s(t,e):"regexp"===m(t)?a(t,e):d.isBuffer(t)?h(t,e):"arguments"===m(t)?u(t,e,n):o(t,e)?"object"!==m(t)&&"object"!==m(e)&&"array"!==m(t)&&"array"!==m(e)?i(t,e):p(t,e,n):!1}/*!
	 * Strict (egal) equality test. Ensures that NaN always
	 * equals NaN and `-0` does not equal `+0`.
	 *
	 * @param {Mixed} a
	 * @param {Mixed} b
	 * @return {Boolean} equal match
	 */
function i(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}/*!
	 * Compare the types of two given objects and
	 * return if they are equal. Note that an Array
	 * has a type of `array` (not `object`) and arguments
	 * have a type of `arguments` (not `array`/`object`).
	 *
	 * @param {Mixed} a
	 * @param {Mixed} b
	 * @return {Boolean} result
	 */
function o(t,e){return m(t)===m(e)}/*!
	 * Compare two Date objects by asserting that
	 * the time values are equal using `saveValue`.
	 *
	 * @param {Date} a
	 * @param {Date} b
	 * @return {Boolean} result
	 */
function s(t,e){return"date"!==m(e)?!1:i(t.getTime(),e.getTime())}/*!
	 * Compare two regular expressions by converting them
	 * to string and checking for `sameValue`.
	 *
	 * @param {RegExp} a
	 * @param {RegExp} b
	 * @return {Boolean} result
	 */
function a(t,e){return"regexp"!==m(e)?!1:i(t.toString(),e.toString())}/*!
	 * Assert deep equality of two `arguments` objects.
	 * Unfortunately, these must be sliced to arrays
	 * prior to test to ensure no bad behavior.
	 *
	 * @param {Arguments} a
	 * @param {Arguments} b
	 * @param {Array} memoize (optional)
	 * @return {Boolean} result
	 */
function u(t,e,n){return"arguments"!==m(e)?!1:(t=[].slice.call(t),e=[].slice.call(e),r(t,e,n))}/*!
	 * Get enumerable properties of a given object.
	 *
	 * @param {Object} a
	 * @return {Array} property names
	 */
function c(t){var e=[];for(var n in t)e.push(n);return e}/*!
	 * Simple equality for flat iterable objects
	 * such as Arrays or Node.js buffers.
	 *
	 * @param {Iterable} a
	 * @param {Iterable} b
	 * @return {Boolean} result
	 */
function l(t,e){if(t.length!==e.length)return!1;for(var n=0,r=!0;n<t.length;n++)if(t[n]!==e[n]){r=!1;break}return r}/*!
	 * Extension to `iterableEqual` specifically
	 * for Node.js Buffers.
	 *
	 * @param {Buffer} a
	 * @param {Mixed} b
	 * @return {Boolean} result
	 */
function h(t,e){return d.isBuffer(e)?l(t,e):!1}/*!
	 * Block for `objectEqual` ensuring non-existing
	 * values don't get in.
	 *
	 * @param {Mixed} object
	 * @return {Boolean} result
	 */
function f(t){return null!==t&&void 0!==t}/*!
	 * Recursively check the equality of two objects.
	 * Once basic sameness has been established it will
	 * defer to `deepEqual` for each enumerable key
	 * in the object.
	 *
	 * @param {Mixed} a
	 * @param {Mixed} b
	 * @return {Boolean} result
	 */
function p(t,e,n){if(!f(t)||!f(e))return!1;if(t.prototype!==e.prototype)return!1;var i;if(n){for(i=0;i<n.length;i++)if(n[i][0]===t&&n[i][1]===e||n[i][0]===e&&n[i][1]===t)return!0}else n=[];try{var o=c(t),s=c(e)}catch(a){return!1}if(o.sort(),s.sort(),!l(o,s))return!1;n.push([t,e]);var u;for(i=o.length-1;i>=0;i--)if(u=o[i],!r(t[u],e[u],n))return!1;return!0}/*!
	 * deep-eql
	 * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Module dependencies
	 */
var d,m=n(297);try{d=n(36).Buffer}catch(g){d={},d.isBuffer=function(){return!1}}/*!
	 * Primary Export
	 */
t.exports=r},function(t,e,n){t.exports=n(298)},function(t,e){function n(t){var e=Object.prototype.toString.call(t);return i[e]?i[e]:null===t?"null":void 0===t?"undefined":t===Object(t)?"object":typeof t}function r(){this.tests={}}/*!
	 * type-detect
	 * Copyright(c) 2013 jake luer <jake@alogicalparadox.com>
	 * MIT Licensed
	 */
/*!
	 * Primary Exports
	 */
var e=t.exports=n,i={"[object Array]":"array","[object RegExp]":"regexp","[object Function]":"function","[object Arguments]":"arguments","[object Date]":"date"};e.Library=r,r.prototype.of=n,r.prototype.define=function(t,e){return 1===arguments.length?this.tests[t]:(this.tests[t]=e,this)},r.prototype.test=function(t,e){if(e===n(t))return!0;var r=this.tests[e];if(r&&"regexp"===n(r))return r.test(t);if(r&&"function"===n(r))return r(t);throw new ReferenceError('Type test "'+e+'" not defined or invalid.')}},,function(t,e,n){e=t.exports=n(21)(),e.push([t.id,"@charset \"utf-8\";body{margin:0}#mocha{font:20px/1.5 \"Helvetica Neue\",Helvetica,Arial,sans-serif;margin:60px 50px}#mocha ul,#mocha li{margin:0;padding:0}#mocha ul{list-style:none}#mocha h2{margin:0}#mocha h1{margin:15px 0 0;font-size:1em;font-weight:200}#mocha h1 a{text-decoration:none;color:inherit}#mocha h1 a:hover{text-decoration:underline}#mocha .suite .suite h1{margin-top:0;font-size:.8em}#mocha .hidden{display:none}#mocha h2{font-size:12px;font-weight:400;cursor:pointer}#mocha .suite,#mocha .test{margin-left:15px}#mocha .test{overflow:hidden}#mocha .test.pending:hover h2::after{content:'(pending)';font-family:arial,sans-serif}#mocha .test.pass.medium .duration{background:#c09853}#mocha .test.pass.slow .duration{background:#b94a48}#mocha .test.pass::before{content:'✓';font-size:12px;display:block;float:left;margin-right:5px;color:#00d6b2}#mocha .test.pass .duration{font-size:9px;margin-left:5px;padding:2px 5px;color:#fff;box-shadow:inset 0 1px 1px rgba(0,0,0,.2);border-radius:5px}#mocha .test.pass.fast .duration{display:none}#mocha .test.pending{color:#0b97c4}#mocha .test.pending::before{content:'◦';color:#0b97c4}#mocha .test.fail{color:#c00}#mocha .test.fail pre{color:#000}#mocha .test.fail::before{content:'✖';font-size:12px;display:block;float:left;margin-right:5px;color:#c00}#mocha .test pre.error{color:#c00;max-height:300px;overflow:auto}#mocha .test pre{display:block;float:left;clear:left;font:12px/1.5 monaco,monospace;margin:5px;padding:15px;border:1px solid #eee;max-width:calc(100% - 42px);word-wrap:break-word;border-bottom-color:#ddd;-webkit-border-radius:3px;-webkit-box-shadow:0 1px 3px #eee;-moz-border-radius:3px;-moz-box-shadow:0 1px 3px #eee;border-radius:3px}#mocha .test h2{position:relative}#mocha .test a.replay{position:absolute;top:3px;right:0;text-decoration:none;vertical-align:middle;display:block;width:15px;height:15px;line-height:15px;text-align:center;background:#eee;font-size:15px;border-radius:15px;transition:opacity 200ms;opacity:.3;color:#888}#mocha .test:hover a.replay{opacity:1}#mocha-report.pass .test.fail,#mocha-report.fail .test.pass,#mocha-report.pending .test.pass,#mocha-report.pending .test.fail{display:none}#mocha-report.pending .test.pass.pending{display:block}#mocha-error{color:#c00;font-size:1.5em;font-weight:100;letter-spacing:1px}#mocha-stats{position:fixed;top:15px;right:10px;font-size:12px;margin:0;color:#888;z-index:1}#mocha-stats .progress{float:right;padding-top:0}#mocha-stats em{color:#000}#mocha-stats a{text-decoration:none;color:inherit}#mocha-stats a:hover{border-bottom:1px solid #eee}#mocha-stats li{display:inline-block;margin:0 5px;list-style:none;padding-top:11px}#mocha-stats canvas{width:40px;height:40px}#mocha code .comment{color:#ddd}#mocha code .init{color:#2f6fad}#mocha code .string{color:#5890ad}#mocha code .keyword{color:#8a6343}#mocha code .number{color:#2f6fad}@media screen and (max-device-width:480px){#mocha{margin:60px 0}#mocha #stats{position:absolute}}",""])},,,,,,,,,,function(t,e,n){e=t.exports=n(21)(),e.push([t.id,"#mocha-stats em{color:#fff}",""])},,,,,,,,,,,,,,,,,,function(t){t.exports=function(t){"function"==typeof execScript?execScript(t):eval.call(null,t)}},function(t,e,n){n(328)(n(330))},function(t){t.exports=";(function(){\n\n// CommonJS require()\n\nfunction require(p){\n    var path = require.resolve(p)\n      , mod = require.modules[path];\n    if (!mod) throw new Error('failed to require \"' + p + '\"');\n    if (!mod.exports) {\n      mod.exports = {};\n      mod.call(mod.exports, mod, mod.exports, require.relative(path));\n    }\n    return mod.exports;\n  }\n\nrequire.modules = {};\n\nrequire.resolve = function (path){\n    var orig = path\n      , reg = path + '.js'\n      , index = path + '/index.js';\n    return require.modules[reg] && reg\n      || require.modules[index] && index\n      || orig;\n  };\n\nrequire.register = function (path, fn){\n    require.modules[path] = fn;\n  };\n\nrequire.relative = function (parent) {\n    return function(p){\n      if ('.' != p.charAt(0)) return require(p);\n\n      var path = parent.split('/')\n        , segs = p.split('/');\n      path.pop();\n\n      for (var i = 0; i < segs.length; i++) {\n        var seg = segs[i];\n        if ('..' == seg) path.pop();\n        else if ('.' != seg) path.push(seg);\n      }\n\n      return require(path.join('/'));\n    };\n  };\n\n\nrequire.register(\"browser/debug.js\", function(module, exports, require){\nmodule.exports = function(type){\n  return function(){\n  }\n};\n\n}); // module: browser/debug.js\n\nrequire.register(\"browser/diff.js\", function(module, exports, require){\n/* See LICENSE file for terms of use */\n\n/*\n * Text diff implementation.\n *\n * This library supports the following APIS:\n * JsDiff.diffChars: Character by character diff\n * JsDiff.diffWords: Word (as defined by \\b regex) diff which ignores whitespace\n * JsDiff.diffLines: Line based diff\n *\n * JsDiff.diffCss: Diff targeted at CSS content\n *\n * These methods are based on the implementation proposed in\n * \"An O(ND) Difference Algorithm and its Variations\" (Myers, 1986).\n * http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.4.6927\n */\nvar JsDiff = (function() {\n  /*jshint maxparams: 5*/\n  function clonePath(path) {\n    return { newPos: path.newPos, components: path.components.slice(0) };\n  }\n  function removeEmpty(array) {\n    var ret = [];\n    for (var i = 0; i < array.length; i++) {\n      if (array[i]) {\n        ret.push(array[i]);\n      }\n    }\n    return ret;\n  }\n  function escapeHTML(s) {\n    var n = s;\n    n = n.replace(/&/g, '&amp;');\n    n = n.replace(/</g, '&lt;');\n    n = n.replace(/>/g, '&gt;');\n    n = n.replace(/\"/g, '&quot;');\n\n    return n;\n  }\n\n  var Diff = function(ignoreWhitespace) {\n    this.ignoreWhitespace = ignoreWhitespace;\n  };\n  Diff.prototype = {\n      diff: function(oldString, newString) {\n        // Handle the identity case (this is due to unrolling editLength == 0\n        if (newString === oldString) {\n          return [{ value: newString }];\n        }\n        if (!newString) {\n          return [{ value: oldString, removed: true }];\n        }\n        if (!oldString) {\n          return [{ value: newString, added: true }];\n        }\n\n        newString = this.tokenize(newString);\n        oldString = this.tokenize(oldString);\n\n        var newLen = newString.length, oldLen = oldString.length;\n        var maxEditLength = newLen + oldLen;\n        var bestPath = [{ newPos: -1, components: [] }];\n\n        // Seed editLength = 0\n        var oldPos = this.extractCommon(bestPath[0], newString, oldString, 0);\n        if (bestPath[0].newPos+1 >= newLen && oldPos+1 >= oldLen) {\n          return bestPath[0].components;\n        }\n\n        for (var editLength = 1; editLength <= maxEditLength; editLength++) {\n          for (var diagonalPath = -1*editLength; diagonalPath <= editLength; diagonalPath+=2) {\n            var basePath;\n            var addPath = bestPath[diagonalPath-1],\n                removePath = bestPath[diagonalPath+1];\n            oldPos = (removePath ? removePath.newPos : 0) - diagonalPath;\n            if (addPath) {\n              // No one else is going to attempt to use this value, clear it\n              bestPath[diagonalPath-1] = undefined;\n            }\n\n            var canAdd = addPath && addPath.newPos+1 < newLen;\n            var canRemove = removePath && 0 <= oldPos && oldPos < oldLen;\n            if (!canAdd && !canRemove) {\n              bestPath[diagonalPath] = undefined;\n              continue;\n            }\n\n            // Select the diagonal that we want to branch from. We select the prior\n            // path whose position in the new string is the farthest from the origin\n            // and does not pass the bounds of the diff graph\n            if (!canAdd || (canRemove && addPath.newPos < removePath.newPos)) {\n              basePath = clonePath(removePath);\n              this.pushComponent(basePath.components, oldString[oldPos], undefined, true);\n            } else {\n              basePath = clonePath(addPath);\n              basePath.newPos++;\n              this.pushComponent(basePath.components, newString[basePath.newPos], true, undefined);\n            }\n\n            var oldPos = this.extractCommon(basePath, newString, oldString, diagonalPath);\n\n            if (basePath.newPos+1 >= newLen && oldPos+1 >= oldLen) {\n              return basePath.components;\n            } else {\n              bestPath[diagonalPath] = basePath;\n            }\n          }\n        }\n      },\n\n      pushComponent: function(components, value, added, removed) {\n        var last = components[components.length-1];\n        if (last && last.added === added && last.removed === removed) {\n          // We need to clone here as the component clone operation is just\n          // as shallow array clone\n          components[components.length-1] =\n            {value: this.join(last.value, value), added: added, removed: removed };\n        } else {\n          components.push({value: value, added: added, removed: removed });\n        }\n      },\n      extractCommon: function(basePath, newString, oldString, diagonalPath) {\n        var newLen = newString.length,\n            oldLen = oldString.length,\n            newPos = basePath.newPos,\n            oldPos = newPos - diagonalPath;\n        while (newPos+1 < newLen && oldPos+1 < oldLen && this.equals(newString[newPos+1], oldString[oldPos+1])) {\n          newPos++;\n          oldPos++;\n\n          this.pushComponent(basePath.components, newString[newPos], undefined, undefined);\n        }\n        basePath.newPos = newPos;\n        return oldPos;\n      },\n\n      equals: function(left, right) {\n        var reWhitespace = /\\S/;\n        if (this.ignoreWhitespace && !reWhitespace.test(left) && !reWhitespace.test(right)) {\n          return true;\n        } else {\n          return left === right;\n        }\n      },\n      join: function(left, right) {\n        return left + right;\n      },\n      tokenize: function(value) {\n        return value;\n      }\n  };\n\n  var CharDiff = new Diff();\n\n  var WordDiff = new Diff(true);\n  var WordWithSpaceDiff = new Diff();\n  WordDiff.tokenize = WordWithSpaceDiff.tokenize = function(value) {\n    return removeEmpty(value.split(/(\\s+|\\b)/));\n  };\n\n  var CssDiff = new Diff(true);\n  CssDiff.tokenize = function(value) {\n    return removeEmpty(value.split(/([{}:;,]|\\s+)/));\n  };\n\n  var LineDiff = new Diff();\n  LineDiff.tokenize = function(value) {\n    var retLines = [],\n        lines = value.split(/^/m);\n\n    for(var i = 0; i < lines.length; i++) {\n      var line = lines[i],\n          lastLine = lines[i - 1];\n\n      // Merge lines that may contain windows new lines\n      if (line == '\\n' && lastLine && lastLine[lastLine.length - 1] === '\\r') {\n        retLines[retLines.length - 1] += '\\n';\n      } else if (line) {\n        retLines.push(line);\n      }\n    }\n\n    return retLines;\n  };\n\n  return {\n    Diff: Diff,\n\n    diffChars: function(oldStr, newStr) { return CharDiff.diff(oldStr, newStr); },\n    diffWords: function(oldStr, newStr) { return WordDiff.diff(oldStr, newStr); },\n    diffWordsWithSpace: function(oldStr, newStr) { return WordWithSpaceDiff.diff(oldStr, newStr); },\n    diffLines: function(oldStr, newStr) { return LineDiff.diff(oldStr, newStr); },\n\n    diffCss: function(oldStr, newStr) { return CssDiff.diff(oldStr, newStr); },\n\n    createPatch: function(fileName, oldStr, newStr, oldHeader, newHeader) {\n      var ret = [];\n\n      ret.push('Index: ' + fileName);\n      ret.push('===================================================================');\n      ret.push('--- ' + fileName + (typeof oldHeader === 'undefined' ? '' : '\\t' + oldHeader));\n      ret.push('+++ ' + fileName + (typeof newHeader === 'undefined' ? '' : '\\t' + newHeader));\n\n      var diff = LineDiff.diff(oldStr, newStr);\n      if (!diff[diff.length-1].value) {\n        diff.pop();   // Remove trailing newline add\n      }\n      diff.push({value: '', lines: []});   // Append an empty value to make cleanup easier\n\n      function contextLines(lines) {\n        return lines.map(function(entry) { return ' ' + entry; });\n      }\n      function eofNL(curRange, i, current) {\n        var last = diff[diff.length-2],\n            isLast = i === diff.length-2,\n            isLastOfType = i === diff.length-3 && (current.added !== last.added || current.removed !== last.removed);\n\n        // Figure out if this is the last line for the given file and missing NL\n        if (!/\\n$/.test(current.value) && (isLast || isLastOfType)) {\n          curRange.push('\\\\ No newline at end of file');\n        }\n      }\n\n      var oldRangeStart = 0, newRangeStart = 0, curRange = [],\n          oldLine = 1, newLine = 1;\n      for (var i = 0; i < diff.length; i++) {\n        var current = diff[i],\n            lines = current.lines || current.value.replace(/\\n$/, '').split('\\n');\n        current.lines = lines;\n\n        if (current.added || current.removed) {\n          if (!oldRangeStart) {\n            var prev = diff[i-1];\n            oldRangeStart = oldLine;\n            newRangeStart = newLine;\n\n            if (prev) {\n              curRange = contextLines(prev.lines.slice(-4));\n              oldRangeStart -= curRange.length;\n              newRangeStart -= curRange.length;\n            }\n          }\n          curRange.push.apply(curRange, lines.map(function(entry) { return (current.added?'+':'-') + entry; }));\n          eofNL(curRange, i, current);\n\n          if (current.added) {\n            newLine += lines.length;\n          } else {\n            oldLine += lines.length;\n          }\n        } else {\n          if (oldRangeStart) {\n            // Close out any changes that have been output (or join overlapping)\n            if (lines.length <= 8 && i < diff.length-2) {\n              // Overlapping\n              curRange.push.apply(curRange, contextLines(lines));\n            } else {\n              // end the range and output\n              var contextSize = Math.min(lines.length, 4);\n              ret.push(\n                  '@@ -' + oldRangeStart + ',' + (oldLine-oldRangeStart+contextSize)\n                  + ' +' + newRangeStart + ',' + (newLine-newRangeStart+contextSize)\n                  + ' @@');\n              ret.push.apply(ret, curRange);\n              ret.push.apply(ret, contextLines(lines.slice(0, contextSize)));\n              if (lines.length <= 4) {\n                eofNL(ret, i, current);\n              }\n\n              oldRangeStart = 0;  newRangeStart = 0; curRange = [];\n            }\n          }\n          oldLine += lines.length;\n          newLine += lines.length;\n        }\n      }\n\n      return ret.join('\\n') + '\\n';\n    },\n\n    applyPatch: function(oldStr, uniDiff) {\n      var diffstr = uniDiff.split('\\n');\n      var diff = [];\n      var remEOFNL = false,\n          addEOFNL = false;\n\n      for (var i = (diffstr[0][0]==='I'?4:0); i < diffstr.length; i++) {\n        if(diffstr[i][0] === '@') {\n          var meh = diffstr[i].split(/@@ -(\\d+),(\\d+) \\+(\\d+),(\\d+) @@/);\n          diff.unshift({\n            start:meh[3],\n            oldlength:meh[2],\n            oldlines:[],\n            newlength:meh[4],\n            newlines:[]\n          });\n        } else if(diffstr[i][0] === '+') {\n          diff[0].newlines.push(diffstr[i].substr(1));\n        } else if(diffstr[i][0] === '-') {\n          diff[0].oldlines.push(diffstr[i].substr(1));\n        } else if(diffstr[i][0] === ' ') {\n          diff[0].newlines.push(diffstr[i].substr(1));\n          diff[0].oldlines.push(diffstr[i].substr(1));\n        } else if(diffstr[i][0] === '\\\\') {\n          if (diffstr[i-1][0] === '+') {\n            remEOFNL = true;\n          } else if(diffstr[i-1][0] === '-') {\n            addEOFNL = true;\n          }\n        }\n      }\n\n      var str = oldStr.split('\\n');\n      for (var i = diff.length - 1; i >= 0; i--) {\n        var d = diff[i];\n        for (var j = 0; j < d.oldlength; j++) {\n          if(str[d.start-1+j] !== d.oldlines[j]) {\n            return false;\n          }\n        }\n        Array.prototype.splice.apply(str,[d.start-1,+d.oldlength].concat(d.newlines));\n      }\n\n      if (remEOFNL) {\n        while (!str[str.length-1]) {\n          str.pop();\n        }\n      } else if (addEOFNL) {\n        str.push('');\n      }\n      return str.join('\\n');\n    },\n\n    convertChangesToXML: function(changes){\n      var ret = [];\n      for ( var i = 0; i < changes.length; i++) {\n        var change = changes[i];\n        if (change.added) {\n          ret.push('<ins>');\n        } else if (change.removed) {\n          ret.push('<del>');\n        }\n\n        ret.push(escapeHTML(change.value));\n\n        if (change.added) {\n          ret.push('</ins>');\n        } else if (change.removed) {\n          ret.push('</del>');\n        }\n      }\n      return ret.join('');\n    },\n\n    // See: http://code.google.com/p/google-diff-match-patch/wiki/API\n    convertChangesToDMP: function(changes){\n      var ret = [], change;\n      for ( var i = 0; i < changes.length; i++) {\n        change = changes[i];\n        ret.push([(change.added ? 1 : change.removed ? -1 : 0), change.value]);\n      }\n      return ret;\n    }\n  };\n})();\n\nif (typeof module !== 'undefined') {\n    module.exports = JsDiff;\n}\n\n}); // module: browser/diff.js\n\nrequire.register(\"browser/escape-string-regexp.js\", function(module, exports, require){\n'use strict';\n\nvar matchOperatorsRe = /[|\\\\{}()[\\]^$+*?.]/g;\n\nmodule.exports = function (str) {\n  if (typeof str !== 'string') {\n    throw new TypeError('Expected a string');\n  }\n\n  return str.replace(matchOperatorsRe,  '\\\\$&');\n};\n\n}); // module: browser/escape-string-regexp.js\n\nrequire.register(\"browser/events.js\", function(module, exports, require){\n/**\n * Module exports.\n */\n\nexports.EventEmitter = EventEmitter;\n\n/**\n * Check if `obj` is an array.\n */\n\nfunction isArray(obj) {\n  return '[object Array]' == {}.toString.call(obj);\n}\n\n/**\n * Event emitter constructor.\n *\n * @api public\n */\n\nfunction EventEmitter(){};\n\n/**\n * Adds a listener.\n *\n * @api public\n */\n\nEventEmitter.prototype.on = function (name, fn) {\n  if (!this.$events) {\n    this.$events = {};\n  }\n\n  if (!this.$events[name]) {\n    this.$events[name] = fn;\n  } else if (isArray(this.$events[name])) {\n    this.$events[name].push(fn);\n  } else {\n    this.$events[name] = [this.$events[name], fn];\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n/**\n * Adds a volatile listener.\n *\n * @api public\n */\n\nEventEmitter.prototype.once = function (name, fn) {\n  var self = this;\n\n  function on () {\n    self.removeListener(name, on);\n    fn.apply(this, arguments);\n  };\n\n  on.listener = fn;\n  this.on(name, on);\n\n  return this;\n};\n\n/**\n * Removes a listener.\n *\n * @api public\n */\n\nEventEmitter.prototype.removeListener = function (name, fn) {\n  if (this.$events && this.$events[name]) {\n    var list = this.$events[name];\n\n    if (isArray(list)) {\n      var pos = -1;\n\n      for (var i = 0, l = list.length; i < l; i++) {\n        if (list[i] === fn || (list[i].listener && list[i].listener === fn)) {\n          pos = i;\n          break;\n        }\n      }\n\n      if (pos < 0) {\n        return this;\n      }\n\n      list.splice(pos, 1);\n\n      if (!list.length) {\n        delete this.$events[name];\n      }\n    } else if (list === fn || (list.listener && list.listener === fn)) {\n      delete this.$events[name];\n    }\n  }\n\n  return this;\n};\n\n/**\n * Removes all listeners for an event.\n *\n * @api public\n */\n\nEventEmitter.prototype.removeAllListeners = function (name) {\n  if (name === undefined) {\n    this.$events = {};\n    return this;\n  }\n\n  if (this.$events && this.$events[name]) {\n    this.$events[name] = null;\n  }\n\n  return this;\n};\n\n/**\n * Gets all listeners for a certain event.\n *\n * @api public\n */\n\nEventEmitter.prototype.listeners = function (name) {\n  if (!this.$events) {\n    this.$events = {};\n  }\n\n  if (!this.$events[name]) {\n    this.$events[name] = [];\n  }\n\n  if (!isArray(this.$events[name])) {\n    this.$events[name] = [this.$events[name]];\n  }\n\n  return this.$events[name];\n};\n\n/**\n * Emits an event.\n *\n * @api public\n */\n\nEventEmitter.prototype.emit = function (name) {\n  if (!this.$events) {\n    return false;\n  }\n\n  var handler = this.$events[name];\n\n  if (!handler) {\n    return false;\n  }\n\n  var args = [].slice.call(arguments, 1);\n\n  if ('function' == typeof handler) {\n    handler.apply(this, args);\n  } else if (isArray(handler)) {\n    var listeners = handler.slice();\n\n    for (var i = 0, l = listeners.length; i < l; i++) {\n      listeners[i].apply(this, args);\n    }\n  } else {\n    return false;\n  }\n\n  return true;\n};\n\n}); // module: browser/events.js\n\nrequire.register(\"browser/fs.js\", function(module, exports, require){\n\n}); // module: browser/fs.js\n\nrequire.register(\"browser/glob.js\", function(module, exports, require){\n\n}); // module: browser/glob.js\n\nrequire.register(\"browser/path.js\", function(module, exports, require){\n\n}); // module: browser/path.js\n\nrequire.register(\"browser/progress.js\", function(module, exports, require){\n/**\n * Expose `Progress`.\n */\n\nmodule.exports = Progress;\n\n/**\n * Initialize a new `Progress` indicator.\n */\n\nfunction Progress() {\n  this.percent = 0;\n  this.size(0);\n  this.fontSize(11);\n  this.font('helvetica, arial, sans-serif');\n}\n\n/**\n * Set progress size to `n`.\n *\n * @param {Number} n\n * @return {Progress} for chaining\n * @api public\n */\n\nProgress.prototype.size = function(n){\n  this._size = n;\n  return this;\n};\n\n/**\n * Set text to `str`.\n *\n * @param {String} str\n * @return {Progress} for chaining\n * @api public\n */\n\nProgress.prototype.text = function(str){\n  this._text = str;\n  return this;\n};\n\n/**\n * Set font size to `n`.\n *\n * @param {Number} n\n * @return {Progress} for chaining\n * @api public\n */\n\nProgress.prototype.fontSize = function(n){\n  this._fontSize = n;\n  return this;\n};\n\n/**\n * Set font `family`.\n *\n * @param {String} family\n * @return {Progress} for chaining\n */\n\nProgress.prototype.font = function(family){\n  this._font = family;\n  return this;\n};\n\n/**\n * Update percentage to `n`.\n *\n * @param {Number} n\n * @return {Progress} for chaining\n */\n\nProgress.prototype.update = function(n){\n  this.percent = n;\n  return this;\n};\n\n/**\n * Draw on `ctx`.\n *\n * @param {CanvasRenderingContext2d} ctx\n * @return {Progress} for chaining\n */\n\nProgress.prototype.draw = function(ctx){\n  try {\n    var percent = Math.min(this.percent, 100)\n      , size = this._size\n      , half = size / 2\n      , x = half\n      , y = half\n      , rad = half - 1\n      , fontSize = this._fontSize;\n\n    ctx.font = fontSize + 'px ' + this._font;\n\n    var angle = Math.PI * 2 * (percent / 100);\n    ctx.clearRect(0, 0, size, size);\n\n    // outer circle\n    ctx.strokeStyle = '#9f9f9f';\n    ctx.beginPath();\n    ctx.arc(x, y, rad, 0, angle, false);\n    ctx.stroke();\n\n    // inner circle\n    ctx.strokeStyle = '#eee';\n    ctx.beginPath();\n    ctx.arc(x, y, rad - 1, 0, angle, true);\n    ctx.stroke();\n\n    // text\n    var text = this._text || (percent | 0) + '%'\n      , w = ctx.measureText(text).width;\n\n    ctx.fillText(\n        text\n      , x - w / 2 + 1\n      , y + fontSize / 2 - 1);\n  } catch (ex) {} //don't fail if we can't render progress\n  return this;\n};\n\n}); // module: browser/progress.js\n\nrequire.register(\"browser/tty.js\", function(module, exports, require){\nexports.isatty = function(){\n  return true;\n};\n\nexports.getWindowSize = function(){\n  if ('innerHeight' in global) {\n    return [global.innerHeight, global.innerWidth];\n  } else {\n    // In a Web Worker, the DOM Window is not available.\n    return [640, 480];\n  }\n};\n\n}); // module: browser/tty.js\n\nrequire.register(\"context.js\", function(module, exports, require){\n/**\n * Expose `Context`.\n */\n\nmodule.exports = Context;\n\n/**\n * Initialize a new `Context`.\n *\n * @api private\n */\n\nfunction Context(){}\n\n/**\n * Set or get the context `Runnable` to `runnable`.\n *\n * @param {Runnable} runnable\n * @return {Context}\n * @api private\n */\n\nContext.prototype.runnable = function(runnable){\n  if (0 == arguments.length) return this._runnable;\n  this.test = this._runnable = runnable;\n  return this;\n};\n\n/**\n * Set test timeout `ms`.\n *\n * @param {Number} ms\n * @return {Context} self\n * @api private\n */\n\nContext.prototype.timeout = function(ms){\n  if (arguments.length === 0) return this.runnable().timeout();\n  this.runnable().timeout(ms);\n  return this;\n};\n\n/**\n * Set test timeout `enabled`.\n *\n * @param {Boolean} enabled\n * @return {Context} self\n * @api private\n */\n\nContext.prototype.enableTimeouts = function (enabled) {\n  this.runnable().enableTimeouts(enabled);\n  return this;\n};\n\n\n/**\n * Set test slowness threshold `ms`.\n *\n * @param {Number} ms\n * @return {Context} self\n * @api private\n */\n\nContext.prototype.slow = function(ms){\n  this.runnable().slow(ms);\n  return this;\n};\n\n/**\n * Mark a test as skipped.\n *\n * @return {Context} self\n * @api private\n */\n\nContext.prototype.skip = function(){\n    this.runnable().skip();\n    return this;\n};\n\n/**\n * Inspect the context void of `._runnable`.\n *\n * @return {String}\n * @api private\n */\n\nContext.prototype.inspect = function(){\n  return JSON.stringify(this, function(key, val){\n    if ('_runnable' == key) return;\n    if ('test' == key) return;\n    return val;\n  }, 2);\n};\n\n}); // module: context.js\n\nrequire.register(\"hook.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Runnable = require('./runnable');\n\n/**\n * Expose `Hook`.\n */\n\nmodule.exports = Hook;\n\n/**\n * Initialize a new `Hook` with the given `title` and callback `fn`.\n *\n * @param {String} title\n * @param {Function} fn\n * @api private\n */\n\nfunction Hook(title, fn) {\n  Runnable.call(this, title, fn);\n  this.type = 'hook';\n}\n\n/**\n * Inherit from `Runnable.prototype`.\n */\n\nfunction F(){};\nF.prototype = Runnable.prototype;\nHook.prototype = new F;\nHook.prototype.constructor = Hook;\n\n\n/**\n * Get or set the test `err`.\n *\n * @param {Error} err\n * @return {Error}\n * @api public\n */\n\nHook.prototype.error = function(err){\n  if (0 == arguments.length) {\n    var err = this._error;\n    this._error = null;\n    return err;\n  }\n\n  this._error = err;\n};\n\n}); // module: hook.js\n\nrequire.register(\"interfaces/bdd.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Suite = require('../suite')\n  , Test = require('../test')\n  , utils = require('../utils')\n  , escapeRe = require('browser/escape-string-regexp');\n\n/**\n * BDD-style interface:\n *\n *      describe('Array', function(){\n *        describe('#indexOf()', function(){\n *          it('should return -1 when not present', function(){\n *\n *          });\n *\n *          it('should return the index when present', function(){\n *\n *          });\n *        });\n *      });\n *\n */\n\nmodule.exports = function(suite){\n  var suites = [suite];\n\n  suite.on('pre-require', function(context, file, mocha){\n\n    var common = require('./common')(suites, context);\n\n    context.before = common.before;\n    context.after = common.after;\n    context.beforeEach = common.beforeEach;\n    context.afterEach = common.afterEach;\n    context.run = mocha.options.delay && common.runWithSuite(suite);\n    /**\n     * Describe a \"suite\" with the given `title`\n     * and callback `fn` containing nested suites\n     * and/or tests.\n     */\n\n    context.describe = context.context = function(title, fn){\n      var suite = Suite.create(suites[0], title);\n      suite.file = file;\n      suites.unshift(suite);\n      fn.call(suite);\n      suites.shift();\n      return suite;\n    };\n\n    /**\n     * Pending describe.\n     */\n\n    context.xdescribe =\n    context.xcontext =\n    context.describe.skip = function(title, fn){\n      var suite = Suite.create(suites[0], title);\n      suite.pending = true;\n      suites.unshift(suite);\n      fn.call(suite);\n      suites.shift();\n    };\n\n    /**\n     * Exclusive suite.\n     */\n\n    context.describe.only = function(title, fn){\n      var suite = context.describe(title, fn);\n      mocha.grep(suite.fullTitle());\n      return suite;\n    };\n\n    /**\n     * Describe a specification or test-case\n     * with the given `title` and callback `fn`\n     * acting as a thunk.\n     */\n\n    context.it = context.specify = function(title, fn){\n      var suite = suites[0];\n      if (suite.pending) fn = null;\n      var test = new Test(title, fn);\n      test.file = file;\n      suite.addTest(test);\n      return test;\n    };\n\n    /**\n     * Exclusive test-case.\n     */\n\n    context.it.only = function(title, fn){\n      var test = context.it(title, fn);\n      var reString = '^' + escapeRe(test.fullTitle()) + '$';\n      mocha.grep(new RegExp(reString));\n      return test;\n    };\n\n    /**\n     * Pending test case.\n     */\n\n    context.xit =\n    context.xspecify =\n    context.it.skip = function(title){\n      context.it(title);\n    };\n\n  });\n};\n\n}); // module: interfaces/bdd.js\n\nrequire.register(\"interfaces/common.js\", function(module, exports, require){\n/**\n * Functions common to more than one interface\n * @module lib/interfaces/common\n */\n\n'use strict';\n\nmodule.exports = function (suites, context) {\n\n  return {\n    /**\n     * This is only present if flag --delay is passed into Mocha.  It triggers\n     * root suite execution.  Returns a function which runs the root suite.\n     */\n    runWithSuite: function runWithSuite(suite) {\n      return function run() {\n        suite.run();\n      };\n    },\n\n    /**\n     * Execute before running tests.\n     */\n    before: function (name, fn) {\n      suites[0].beforeAll(name, fn);\n    },\n\n    /**\n     * Execute after running tests.\n     */\n    after: function (name, fn) {\n      suites[0].afterAll(name, fn);\n    },\n\n    /**\n     * Execute before each test case.\n     */\n    beforeEach: function (name, fn) {\n      suites[0].beforeEach(name, fn);\n    },\n\n    /**\n     * Execute after each test case.\n     */\n    afterEach: function (name, fn) {\n      suites[0].afterEach(name, fn);\n    },\n\n    test: {\n      /**\n       * Pending test case.\n       */\n      skip: function (title) {\n        context.test(title);\n      }\n    }\n  }\n};\n\n}); // module: interfaces/common.js\n\nrequire.register(\"interfaces/exports.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Suite = require('../suite')\n  , Test = require('../test');\n\n/**\n * TDD-style interface:\n *\n *     exports.Array = {\n *       '#indexOf()': {\n *         'should return -1 when the value is not present': function(){\n *\n *         },\n *\n *         'should return the correct index when the value is present': function(){\n *\n *         }\n *       }\n *     };\n *\n */\n\nmodule.exports = function(suite){\n  var suites = [suite];\n\n  suite.on('require', visit);\n\n  function visit(obj, file) {\n    var suite;\n    for (var key in obj) {\n      if ('function' == typeof obj[key]) {\n        var fn = obj[key];\n        switch (key) {\n          case 'before':\n            suites[0].beforeAll(fn);\n            break;\n          case 'after':\n            suites[0].afterAll(fn);\n            break;\n          case 'beforeEach':\n            suites[0].beforeEach(fn);\n            break;\n          case 'afterEach':\n            suites[0].afterEach(fn);\n            break;\n          default:\n            var test = new Test(key, fn);\n            test.file = file;\n            suites[0].addTest(test);\n        }\n      } else {\n        suite = Suite.create(suites[0], key);\n        suites.unshift(suite);\n        visit(obj[key]);\n        suites.shift();\n      }\n    }\n  }\n};\n\n}); // module: interfaces/exports.js\n\nrequire.register(\"interfaces/index.js\", function(module, exports, require){\nexports.bdd = require('./bdd');\nexports.tdd = require('./tdd');\nexports.qunit = require('./qunit');\nexports.exports = require('./exports');\n\n}); // module: interfaces/index.js\n\nrequire.register(\"interfaces/qunit.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Suite = require('../suite')\n  , Test = require('../test')\n  , escapeRe = require('browser/escape-string-regexp')\n  , utils = require('../utils');\n\n/**\n * QUnit-style interface:\n *\n *     suite('Array');\n *\n *     test('#length', function(){\n *       var arr = [1,2,3];\n *       ok(arr.length == 3);\n *     });\n *\n *     test('#indexOf()', function(){\n *       var arr = [1,2,3];\n *       ok(arr.indexOf(1) == 0);\n *       ok(arr.indexOf(2) == 1);\n *       ok(arr.indexOf(3) == 2);\n *     });\n *\n *     suite('String');\n *\n *     test('#length', function(){\n *       ok('foo'.length == 3);\n *     });\n *\n */\n\nmodule.exports = function(suite){\n  var suites = [suite];\n\n  suite.on('pre-require', function(context, file, mocha){\n\n    var common = require('./common')(suites, context);\n\n    context.before = common.before;\n    context.after = common.after;\n    context.beforeEach = common.beforeEach;\n    context.afterEach = common.afterEach;\n    context.run = mocha.options.delay && common.runWithSuite(suite);\n    /**\n     * Describe a \"suite\" with the given `title`.\n     */\n\n    context.suite = function(title){\n      if (suites.length > 1) suites.shift();\n      var suite = Suite.create(suites[0], title);\n      suite.file = file;\n      suites.unshift(suite);\n      return suite;\n    };\n\n    /**\n     * Exclusive test-case.\n     */\n\n    context.suite.only = function(title, fn){\n      var suite = context.suite(title, fn);\n      mocha.grep(suite.fullTitle());\n    };\n\n    /**\n     * Describe a specification or test-case\n     * with the given `title` and callback `fn`\n     * acting as a thunk.\n     */\n\n    context.test = function(title, fn){\n      var test = new Test(title, fn);\n      test.file = file;\n      suites[0].addTest(test);\n      return test;\n    };\n\n    /**\n     * Exclusive test-case.\n     */\n\n    context.test.only = function(title, fn){\n      var test = context.test(title, fn);\n      var reString = '^' + escapeRe(test.fullTitle()) + '$';\n      mocha.grep(new RegExp(reString));\n    };\n\n    context.test.skip = common.test.skip;\n\n  });\n};\n\n}); // module: interfaces/qunit.js\n\nrequire.register(\"interfaces/tdd.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Suite = require('../suite')\n  , Test = require('../test')\n  , escapeRe = require('browser/escape-string-regexp')\n  , utils = require('../utils');\n\n/**\n * TDD-style interface:\n *\n *      suite('Array', function(){\n *        suite('#indexOf()', function(){\n *          suiteSetup(function(){\n *\n *          });\n *\n *          test('should return -1 when not present', function(){\n *\n *          });\n *\n *          test('should return the index when present', function(){\n *\n *          });\n *\n *          suiteTeardown(function(){\n *\n *          });\n *        });\n *      });\n *\n */\n\nmodule.exports = function(suite){\n  var suites = [suite];\n\n  suite.on('pre-require', function(context, file, mocha){\n\n    var common = require('./common')(suites, context);\n\n    context.setup = common.beforeEach;\n    context.teardown = common.afterEach;\n    context.suiteSetup = common.before;\n    context.suiteTeardown = common.after;\n    context.run = mocha.options.delay && common.runWithSuite(suite);\n    /**\n     * Describe a \"suite\" with the given `title`\n     * and callback `fn` containing nested suites\n     * and/or tests.\n     */\n\n    context.suite = function(title, fn){\n      var suite = Suite.create(suites[0], title);\n      suite.file = file;\n      suites.unshift(suite);\n      fn.call(suite);\n      suites.shift();\n      return suite;\n    };\n\n    /**\n     * Pending suite.\n     */\n    context.suite.skip = function(title, fn) {\n      var suite = Suite.create(suites[0], title);\n      suite.pending = true;\n      suites.unshift(suite);\n      fn.call(suite);\n      suites.shift();\n    };\n\n    /**\n     * Exclusive test-case.\n     */\n\n    context.suite.only = function(title, fn){\n      var suite = context.suite(title, fn);\n      mocha.grep(suite.fullTitle());\n    };\n\n    /**\n     * Describe a specification or test-case\n     * with the given `title` and callback `fn`\n     * acting as a thunk.\n     */\n\n    context.test = function(title, fn){\n      var suite = suites[0];\n      if (suite.pending) fn = null;\n      var test = new Test(title, fn);\n      test.file = file;\n      suite.addTest(test);\n      return test;\n    };\n\n    /**\n     * Exclusive test-case.\n     */\n\n    context.test.only = function(title, fn){\n      var test = context.test(title, fn);\n      var reString = '^' + escapeRe(test.fullTitle()) + '$';\n      mocha.grep(new RegExp(reString));\n    };\n\n    context.test.skip = common.test.skip;\n  });\n};\n\n}); // module: interfaces/tdd.js\n\nrequire.register(\"mocha.js\", function(module, exports, require){\n/*!\n * mocha\n * Copyright(c) 2011 TJ Holowaychuk <tj@vision-media.ca>\n * MIT Licensed\n */\n\n/**\n * Module dependencies.\n */\n\nvar path = require('browser/path')\n  , escapeRe = require('browser/escape-string-regexp')\n  , utils = require('./utils');\n\n/**\n * Expose `Mocha`.\n */\n\nexports = module.exports = Mocha;\n\n/**\n * To require local UIs and reporters when running in node.\n */\n\nif (typeof process !== 'undefined' && typeof process.cwd === 'function') {\n  var join = path.join\n    , cwd = process.cwd();\n  module.paths.push(cwd, join(cwd, 'node_modules'));\n}\n\n/**\n * Expose internals.\n */\n\nexports.utils = utils;\nexports.interfaces = require('./interfaces');\nexports.reporters = require('./reporters');\nexports.Runnable = require('./runnable');\nexports.Context = require('./context');\nexports.Runner = require('./runner');\nexports.Suite = require('./suite');\nexports.Hook = require('./hook');\nexports.Test = require('./test');\n\n/**\n * Return image `name` path.\n *\n * @param {String} name\n * @return {String}\n * @api private\n */\n\nfunction image(name) {\n  return __dirname + '/../images/' + name + '.png';\n}\n\n/**\n * Setup mocha with `options`.\n *\n * Options:\n *\n *   - `ui` name \"bdd\", \"tdd\", \"exports\" etc\n *   - `reporter` reporter instance, defaults to `mocha.reporters.spec`\n *   - `globals` array of accepted globals\n *   - `timeout` timeout in milliseconds\n *   - `bail` bail on the first test failure\n *   - `slow` milliseconds to wait before considering a test slow\n *   - `ignoreLeaks` ignore global leaks\n *   - `grep` string or regexp to filter tests with\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Mocha(options) {\n  options = options || {};\n  this.files = [];\n  this.options = options;\n  if (options.grep) this.grep(new RegExp(options.grep));\n  if (options.fgrep) this.grep(options.fgrep);\n  this.suite = new exports.Suite('', new exports.Context);\n  this.ui(options.ui);\n  this.bail(options.bail);\n  this.reporter(options.reporter, options.reporterOptions);\n  if (null != options.timeout) this.timeout(options.timeout);\n  this.useColors(options.useColors)\n  if (options.enableTimeouts !== null) this.enableTimeouts(options.enableTimeouts);\n  if (options.slow) this.slow(options.slow);\n\n  this.suite.on('pre-require', function (context) {\n    exports.afterEach = context.afterEach || context.teardown;\n    exports.after = context.after || context.suiteTeardown;\n    exports.beforeEach = context.beforeEach || context.setup;\n    exports.before = context.before || context.suiteSetup;\n    exports.describe = context.describe || context.suite;\n    exports.it = context.it || context.test;\n    exports.setup = context.setup || context.beforeEach;\n    exports.suiteSetup = context.suiteSetup || context.before;\n    exports.suiteTeardown = context.suiteTeardown || context.after;\n    exports.suite = context.suite || context.describe;\n    exports.teardown = context.teardown || context.afterEach;\n    exports.test = context.test || context.it;\n    exports.run = context.run;\n  });\n}\n\n/**\n * Enable or disable bailing on the first failure.\n *\n * @param {Boolean} [bail]\n * @api public\n */\n\nMocha.prototype.bail = function(bail){\n  if (0 == arguments.length) bail = true;\n  this.suite.bail(bail);\n  return this;\n};\n\n/**\n * Add test `file`.\n *\n * @param {String} file\n * @api public\n */\n\nMocha.prototype.addFile = function(file){\n  this.files.push(file);\n  return this;\n};\n\n/**\n * Set reporter to `reporter`, defaults to \"spec\".\n *\n * @param {String|Function} reporter name or constructor\n * @param {Object} reporterOptions optional options\n * @api public\n */\nMocha.prototype.reporter = function(reporter, reporterOptions){\n  if ('function' == typeof reporter) {\n    this._reporter = reporter;\n  } else {\n    reporter = reporter || 'spec';\n    var _reporter;\n    try { _reporter = require('./reporters/' + reporter); } catch (err) {};\n    if (!_reporter) try { _reporter = require(reporter); } catch (err) {};\n    if (!_reporter && reporter === 'teamcity')\n      console.warn('The Teamcity reporter was moved to a package named ' +\n        'mocha-teamcity-reporter ' +\n        '(https://npmjs.org/package/mocha-teamcity-reporter).');\n    if (!_reporter) throw new Error('invalid reporter \"' + reporter + '\"');\n    this._reporter = _reporter;\n  }\n  this.options.reporterOptions = reporterOptions;\n  return this;\n};\n\n/**\n * Set test UI `name`, defaults to \"bdd\".\n *\n * @param {String} bdd\n * @api public\n */\n\nMocha.prototype.ui = function(name){\n  name = name || 'bdd';\n  this._ui = exports.interfaces[name];\n  if (!this._ui) try { this._ui = require(name); } catch (err) {};\n  if (!this._ui) throw new Error('invalid interface \"' + name + '\"');\n  this._ui = this._ui(this.suite);\n  return this;\n};\n\n/**\n * Load registered files.\n *\n * @api private\n */\n\nMocha.prototype.loadFiles = function(fn){\n  var self = this;\n  var suite = this.suite;\n  var pending = this.files.length;\n  this.files.forEach(function(file){\n    file = path.resolve(file);\n    suite.emit('pre-require', global, file, self);\n    suite.emit('require', require(file), file, self);\n    suite.emit('post-require', global, file, self);\n    --pending || (fn && fn());\n  });\n};\n\n/**\n * Enable growl support.\n *\n * @api private\n */\n\nMocha.prototype._growl = function(runner, reporter) {\n  var notify = require('growl');\n\n  runner.on('end', function(){\n    var stats = reporter.stats;\n    if (stats.failures) {\n      var msg = stats.failures + ' of ' + runner.total + ' tests failed';\n      notify(msg, { name: 'mocha', title: 'Failed', image: image('error') });\n    } else {\n      notify(stats.passes + ' tests passed in ' + stats.duration + 'ms', {\n          name: 'mocha'\n        , title: 'Passed'\n        , image: image('ok')\n      });\n    }\n  });\n};\n\n/**\n * Add regexp to grep, if `re` is a string it is escaped.\n *\n * @param {RegExp|String} re\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.grep = function(re){\n  this.options.grep = 'string' == typeof re\n    ? new RegExp(escapeRe(re))\n    : re;\n  return this;\n};\n\n/**\n * Invert `.grep()` matches.\n *\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.invert = function(){\n  this.options.invert = true;\n  return this;\n};\n\n/**\n * Ignore global leaks.\n *\n * @param {Boolean} ignore\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.ignoreLeaks = function(ignore){\n  this.options.ignoreLeaks = !!ignore;\n  return this;\n};\n\n/**\n * Enable global leak checking.\n *\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.checkLeaks = function(){\n  this.options.ignoreLeaks = false;\n  return this;\n};\n\n/**\n * Enable growl support.\n *\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.growl = function(){\n  this.options.growl = true;\n  return this;\n};\n\n/**\n * Ignore `globals` array or string.\n *\n * @param {Array|String} globals\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.globals = function(globals){\n  this.options.globals = (this.options.globals || []).concat(globals);\n  return this;\n};\n\n/**\n * Emit color output.\n *\n * @param {Boolean} colors\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.useColors = function(colors){\n  if (colors !== undefined) {\n    this.options.useColors = colors;\n  }\n  return this;\n};\n\n/**\n * Use inline diffs rather than +/-.\n *\n * @param {Boolean} inlineDiffs\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.useInlineDiffs = function(inlineDiffs) {\n  this.options.useInlineDiffs = arguments.length && inlineDiffs != undefined\n  ? inlineDiffs\n  : false;\n  return this;\n};\n\n/**\n * Set the timeout in milliseconds.\n *\n * @param {Number} timeout\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.timeout = function(timeout){\n  this.suite.timeout(timeout);\n  return this;\n};\n\n/**\n * Set slowness threshold in milliseconds.\n *\n * @param {Number} slow\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.slow = function(slow){\n  this.suite.slow(slow);\n  return this;\n};\n\n/**\n * Enable timeouts.\n *\n * @param {Boolean} enabled\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.enableTimeouts = function(enabled) {\n  this.suite.enableTimeouts(arguments.length && enabled !== undefined\n    ? enabled\n    : true);\n  return this\n};\n\n/**\n * Makes all tests async (accepting a callback)\n *\n * @return {Mocha}\n * @api public\n */\n\nMocha.prototype.asyncOnly = function(){\n  this.options.asyncOnly = true;\n  return this;\n};\n\n/**\n * Disable syntax highlighting (in browser).\n * @returns {Mocha}\n * @api public\n */\nMocha.prototype.noHighlighting = function() {\n  this.options.noHighlighting = true;\n  return this;\n};\n\n/**\n * Delay root suite execution.\n * @returns {Mocha}\n * @api public\n */\nMocha.prototype.delay = function delay() {\n  this.options.delay = true;\n  return this;\n};\n\n/**\n * Run tests and invoke `fn()` when complete.\n *\n * @param {Function} fn\n * @return {Runner}\n * @api public\n */\nMocha.prototype.run = function(fn){\n  if (this.files.length) this.loadFiles();\n  var suite = this.suite;\n  var options = this.options;\n  options.files = this.files;\n  var runner = new exports.Runner(suite, options.delay);\n  var reporter = new this._reporter(runner, options);\n  runner.ignoreLeaks = false !== options.ignoreLeaks;\n  runner.asyncOnly = options.asyncOnly;\n  if (options.grep) runner.grep(options.grep, options.invert);\n  if (options.globals) runner.globals(options.globals);\n  if (options.growl) this._growl(runner, reporter);\n  if (options.useColors !== undefined) {\n    exports.reporters.Base.useColors = options.useColors;\n  }\n  exports.reporters.Base.inlineDiffs = options.useInlineDiffs;\n\n  function done(failures) {\n      if (reporter.done) {\n          reporter.done(failures, fn);\n      } else fn && fn(failures);\n  }\n\n  return runner.run(done);\n};\n\n}); // module: mocha.js\n\nrequire.register(\"ms.js\", function(module, exports, require){\n/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} options\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options){\n  options = options || {};\n  if ('string' == typeof val) return parse(val);\n  return options['long'] ? longFormat(val) : shortFormat(val);\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  var match = /^((?:\\d+)?\\.?\\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(str);\n  if (!match) return;\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 's':\n      return n * s;\n    case 'ms':\n      return n;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction shortFormat(ms) {\n  if (ms >= d) return Math.round(ms / d) + 'd';\n  if (ms >= h) return Math.round(ms / h) + 'h';\n  if (ms >= m) return Math.round(ms / m) + 'm';\n  if (ms >= s) return Math.round(ms / s) + 's';\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction longFormat(ms) {\n  return plural(ms, d, 'day')\n    || plural(ms, h, 'hour')\n    || plural(ms, m, 'minute')\n    || plural(ms, s, 'second')\n    || ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) return;\n  if (ms < n * 1.5) return Math.floor(ms / n) + ' ' + name;\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n\n}); // module: ms.js\n\nrequire.register(\"pending.js\", function(module, exports, require){\n\n/**\n * Expose `Pending`.\n */\n\nmodule.exports = Pending;\n\n/**\n * Initialize a new `Pending` error with the given message.\n *\n * @param {String} message\n */\n\nfunction Pending(message) {\n    this.message = message;\n}\n\n}); // module: pending.js\n\nrequire.register(\"reporters/base.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar tty = require('browser/tty')\n  , diff = require('browser/diff')\n  , ms = require('../ms')\n  , utils = require('../utils')\n  , supportsColor = process.env ? require('supports-color') : null;\n\n/**\n * Save timer references to avoid Sinon interfering (see GH-237).\n */\n\nvar Date = global.Date\n  , setTimeout = global.setTimeout\n  , setInterval = global.setInterval\n  , clearTimeout = global.clearTimeout\n  , clearInterval = global.clearInterval;\n\n/**\n * Check if both stdio streams are associated with a tty.\n */\n\nvar isatty = tty.isatty(1) && tty.isatty(2);\n\n/**\n * Expose `Base`.\n */\n\nexports = module.exports = Base;\n\n/**\n * Enable coloring by default, except in the browser interface.\n */\n\nexports.useColors = process.env\n  ? (supportsColor || (process.env.MOCHA_COLORS !== undefined))\n  : false;\n\n/**\n * Inline diffs instead of +/-\n */\n\nexports.inlineDiffs = false;\n\n/**\n * Default color map.\n */\n\nexports.colors = {\n    'pass': 90\n  , 'fail': 31\n  , 'bright pass': 92\n  , 'bright fail': 91\n  , 'bright yellow': 93\n  , 'pending': 36\n  , 'suite': 0\n  , 'error title': 0\n  , 'error message': 31\n  , 'error stack': 90\n  , 'checkmark': 32\n  , 'fast': 90\n  , 'medium': 33\n  , 'slow': 31\n  , 'green': 32\n  , 'light': 90\n  , 'diff gutter': 90\n  , 'diff added': 42\n  , 'diff removed': 41\n};\n\n/**\n * Default symbol map.\n */\n\nexports.symbols = {\n  ok: '✓',\n  err: '✖',\n  dot: '․'\n};\n\n// With node.js on Windows: use symbols available in terminal default fonts\nif ('win32' == process.platform) {\n  exports.symbols.ok = '\\u221A';\n  exports.symbols.err = '\\u00D7';\n  exports.symbols.dot = '.';\n}\n\n/**\n * Color `str` with the given `type`,\n * allowing colors to be disabled,\n * as well as user-defined color\n * schemes.\n *\n * @param {String} type\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nvar color = exports.color = function(type, str) {\n  if (!exports.useColors) return String(str);\n  return '\\u001b[' + exports.colors[type] + 'm' + str + '\\u001b[0m';\n};\n\n/**\n * Expose term window size, with some\n * defaults for when stderr is not a tty.\n */\n\nexports.window = {\n  width: isatty\n    ? process.stdout.getWindowSize\n      ? process.stdout.getWindowSize(1)[0]\n      : tty.getWindowSize()[1]\n    : 75\n};\n\n/**\n * Expose some basic cursor interactions\n * that are common among reporters.\n */\n\nexports.cursor = {\n  hide: function(){\n    isatty && process.stdout.write('\\u001b[?25l');\n  },\n\n  show: function(){\n    isatty && process.stdout.write('\\u001b[?25h');\n  },\n\n  deleteLine: function(){\n    isatty && process.stdout.write('\\u001b[2K');\n  },\n\n  beginningOfLine: function(){\n    isatty && process.stdout.write('\\u001b[0G');\n  },\n\n  CR: function(){\n    if (isatty) {\n      exports.cursor.deleteLine();\n      exports.cursor.beginningOfLine();\n    } else {\n      process.stdout.write('\\r');\n    }\n  }\n};\n\n/**\n * Outut the given `failures` as a list.\n *\n * @param {Array} failures\n * @api public\n */\n\nexports.list = function(failures){\n  console.log();\n  failures.forEach(function(test, i){\n    // format\n    var fmt = color('error title', '  %s) %s:\\n')\n      + color('error message', '     %s')\n      + color('error stack', '\\n%s\\n');\n\n    // msg\n    var err = test.err\n      , message = err.message || ''\n      , stack = err.stack || message\n      , index = stack.indexOf(message) + message.length\n      , msg = stack.slice(0, index)\n      , actual = err.actual\n      , expected = err.expected\n      , escape = true;\n\n    // uncaught\n    if (err.uncaught) {\n      msg = 'Uncaught ' + msg;\n    }\n    // explicitly show diff\n    if (err.showDiff && sameType(actual, expected)) {\n\n      if ('string' !== typeof actual) {\n        escape = false;\n        err.actual = actual = utils.stringify(actual);\n        err.expected = expected = utils.stringify(expected);\n      }\n\n      fmt = color('error title', '  %s) %s:\\n%s') + color('error stack', '\\n%s\\n');\n      var match = message.match(/^([^:]+): expected/);\n      msg = '\\n      ' + color('error message', match ? match[1] : msg);\n\n      if (exports.inlineDiffs) {\n        msg += inlineDiff(err, escape);\n      } else {\n        msg += unifiedDiff(err, escape);\n      }\n    }\n\n    // indent stack trace without msg\n    stack = stack.slice(index ? index + 1 : index)\n      .replace(/^/gm, '  ');\n\n    console.log(fmt, (i + 1), test.fullTitle(), msg, stack);\n  });\n};\n\n/**\n * Initialize a new `Base` reporter.\n *\n * All other reporters generally\n * inherit from this reporter, providing\n * stats such as test duration, number\n * of tests passed / failed etc.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction Base(runner) {\n  var self = this\n    , stats = this.stats = { suites: 0, tests: 0, passes: 0, pending: 0, failures: 0 }\n    , failures = this.failures = [];\n\n  if (!runner) return;\n  this.runner = runner;\n\n  runner.stats = stats;\n\n  runner.on('start', function(){\n    stats.start = new Date;\n  });\n\n  runner.on('suite', function(suite){\n    stats.suites = stats.suites || 0;\n    suite.root || stats.suites++;\n  });\n\n  runner.on('test end', function(test){\n    stats.tests = stats.tests || 0;\n    stats.tests++;\n  });\n\n  runner.on('pass', function(test){\n    stats.passes = stats.passes || 0;\n\n    var medium = test.slow() / 2;\n    test.speed = test.duration > test.slow()\n      ? 'slow'\n      : test.duration > medium\n        ? 'medium'\n        : 'fast';\n\n    stats.passes++;\n  });\n\n  runner.on('fail', function(test, err){\n    stats.failures = stats.failures || 0;\n    stats.failures++;\n    test.err = err;\n    failures.push(test);\n  });\n\n  runner.on('end', function(){\n    stats.end = new Date;\n    stats.duration = new Date - stats.start;\n  });\n\n  runner.on('pending', function(){\n    stats.pending++;\n  });\n}\n\n/**\n * Output common epilogue used by many of\n * the bundled reporters.\n *\n * @api public\n */\n\nBase.prototype.epilogue = function(){\n  var stats = this.stats;\n  var tests;\n  var fmt;\n\n  console.log();\n\n  // passes\n  fmt = color('bright pass', ' ')\n    + color('green', ' %d passing')\n    + color('light', ' (%s)');\n\n  console.log(fmt,\n    stats.passes || 0,\n    ms(stats.duration));\n\n  // pending\n  if (stats.pending) {\n    fmt = color('pending', ' ')\n      + color('pending', ' %d pending');\n\n    console.log(fmt, stats.pending);\n  }\n\n  // failures\n  if (stats.failures) {\n    fmt = color('fail', '  %d failing');\n\n    console.log(fmt, stats.failures);\n\n    Base.list(this.failures);\n    console.log();\n  }\n\n  console.log();\n};\n\n/**\n * Pad the given `str` to `len`.\n *\n * @param {String} str\n * @param {String} len\n * @return {String}\n * @api private\n */\n\nfunction pad(str, len) {\n  str = String(str);\n  return Array(len - str.length + 1).join(' ') + str;\n}\n\n\n/**\n * Returns an inline diff between 2 strings with coloured ANSI output\n *\n * @param {Error} Error with actual/expected\n * @return {String} Diff\n * @api private\n */\n\nfunction inlineDiff(err, escape) {\n  var msg = errorDiff(err, 'WordsWithSpace', escape);\n\n  // linenos\n  var lines = msg.split('\\n');\n  if (lines.length > 4) {\n    var width = String(lines.length).length;\n    msg = lines.map(function(str, i){\n      return pad(++i, width) + ' |' + ' ' + str;\n    }).join('\\n');\n  }\n\n  // legend\n  msg = '\\n'\n    + color('diff removed', 'actual')\n    + ' '\n    + color('diff added', 'expected')\n    + '\\n\\n'\n    + msg\n    + '\\n';\n\n  // indent\n  msg = msg.replace(/^/gm, '      ');\n  return msg;\n}\n\n/**\n * Returns a unified diff between 2 strings\n *\n * @param {Error} Error with actual/expected\n * @return {String} Diff\n * @api private\n */\n\nfunction unifiedDiff(err, escape) {\n  var indent = '      ';\n  function cleanUp(line) {\n    if (escape) {\n      line = escapeInvisibles(line);\n    }\n    if (line[0] === '+') return indent + colorLines('diff added', line);\n    if (line[0] === '-') return indent + colorLines('diff removed', line);\n    if (line.match(/\\@\\@/)) return null;\n    if (line.match(/\\\\ No newline/)) return null;\n    else return indent + line;\n  }\n  function notBlank(line) {\n    return line != null;\n  }\n  var msg = diff.createPatch('string', err.actual, err.expected);\n  var lines = msg.split('\\n').splice(4);\n  return '\\n      '\n         + colorLines('diff added',   '+ expected') + ' '\n         + colorLines('diff removed', '- actual')\n         + '\\n\\n'\n         + lines.map(cleanUp).filter(notBlank).join('\\n');\n}\n\n/**\n * Return a character diff for `err`.\n *\n * @param {Error} err\n * @return {String}\n * @api private\n */\n\nfunction errorDiff(err, type, escape) {\n  var actual   = escape ? escapeInvisibles(err.actual)   : err.actual;\n  var expected = escape ? escapeInvisibles(err.expected) : err.expected;\n  return diff['diff' + type](actual, expected).map(function(str){\n    if (str.added) return colorLines('diff added', str.value);\n    if (str.removed) return colorLines('diff removed', str.value);\n    return str.value;\n  }).join('');\n}\n\n/**\n * Returns a string with all invisible characters in plain text\n *\n * @param {String} line\n * @return {String}\n * @api private\n */\nfunction escapeInvisibles(line) {\n    return line.replace(/\\t/g, '<tab>')\n               .replace(/\\r/g, '<CR>')\n               .replace(/\\n/g, '<LF>\\n');\n}\n\n/**\n * Color lines for `str`, using the color `name`.\n *\n * @param {String} name\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nfunction colorLines(name, str) {\n  return str.split('\\n').map(function(str){\n    return color(name, str);\n  }).join('\\n');\n}\n\n/**\n * Check that a / b have the same type.\n *\n * @param {Object} a\n * @param {Object} b\n * @return {Boolean}\n * @api private\n */\n\nfunction sameType(a, b) {\n  a = Object.prototype.toString.call(a);\n  b = Object.prototype.toString.call(b);\n  return a == b;\n}\n\n}); // module: reporters/base.js\n\nrequire.register(\"reporters/doc.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , utils = require('../utils');\n\n/**\n * Expose `Doc`.\n */\n\nexports = module.exports = Doc;\n\n/**\n * Initialize a new `Doc` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction Doc(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , total = runner.total\n    , indents = 2;\n\n  function indent() {\n    return Array(indents).join('  ');\n  }\n\n  runner.on('suite', function(suite){\n    if (suite.root) return;\n    ++indents;\n    console.log('%s<section class=\"suite\">', indent());\n    ++indents;\n    console.log('%s<h1>%s</h1>', indent(), utils.escape(suite.title));\n    console.log('%s<dl>', indent());\n  });\n\n  runner.on('suite end', function(suite){\n    if (suite.root) return;\n    console.log('%s</dl>', indent());\n    --indents;\n    console.log('%s</section>', indent());\n    --indents;\n  });\n\n  runner.on('pass', function(test){\n    console.log('%s  <dt>%s</dt>', indent(), utils.escape(test.title));\n    var code = utils.escape(utils.clean(test.fn.toString()));\n    console.log('%s  <dd><pre><code>%s</code></pre></dd>', indent(), code);\n  });\n\n  runner.on('fail', function(test, err){\n    console.log('%s  <dt class=\"error\">%s</dt>', indent(), utils.escape(test.title));\n    var code = utils.escape(utils.clean(test.fn.toString()));\n    console.log('%s  <dd class=\"error\"><pre><code>%s</code></pre></dd>', indent(), code);\n    console.log('%s  <dd class=\"error\">%s</dd>', indent(), utils.escape(err));\n  });\n}\n\n}); // module: reporters/doc.js\n\nrequire.register(\"reporters/dot.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , color = Base.color;\n\n/**\n * Expose `Dot`.\n */\n\nexports = module.exports = Dot;\n\n/**\n * Initialize a new `Dot` matrix test reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction Dot(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , width = Base.window.width * .75 | 0\n    , n = -1;\n\n  runner.on('start', function(){\n    process.stdout.write('\\n  ');\n  });\n\n  runner.on('pending', function(test){\n    if (++n % width == 0) process.stdout.write('\\n  ');\n    process.stdout.write(color('pending', Base.symbols.dot));\n  });\n\n  runner.on('pass', function(test){\n    if (++n % width == 0) process.stdout.write('\\n  ');\n    if ('slow' == test.speed) {\n      process.stdout.write(color('bright yellow', Base.symbols.dot));\n    } else {\n      process.stdout.write(color(test.speed, Base.symbols.dot));\n    }\n  });\n\n  runner.on('fail', function(test, err){\n    if (++n % width == 0) process.stdout.write('\\n  ');\n    process.stdout.write(color('fail', Base.symbols.dot));\n  });\n\n  runner.on('end', function(){\n    console.log();\n    self.epilogue();\n  });\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nDot.prototype = new F;\nDot.prototype.constructor = Dot;\n\n\n}); // module: reporters/dot.js\n\nrequire.register(\"reporters/html-cov.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar JSONCov = require('./json-cov')\n  , fs = require('browser/fs');\n\n/**\n * Expose `HTMLCov`.\n */\n\nexports = module.exports = HTMLCov;\n\n/**\n * Initialize a new `JsCoverage` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction HTMLCov(runner) {\n  var jade = require('jade')\n    , file = __dirname + '/templates/coverage.jade'\n    , str = fs.readFileSync(file, 'utf8')\n    , fn = jade.compile(str, { filename: file })\n    , self = this;\n\n  JSONCov.call(this, runner, false);\n\n  runner.on('end', function(){\n    process.stdout.write(fn({\n        cov: self.cov\n      , coverageClass: coverageClass\n    }));\n  });\n}\n\n/**\n * Return coverage class for `n`.\n *\n * @return {String}\n * @api private\n */\n\nfunction coverageClass(n) {\n  if (n >= 75) return 'high';\n  if (n >= 50) return 'medium';\n  if (n >= 25) return 'low';\n  return 'terrible';\n}\n\n}); // module: reporters/html-cov.js\n\nrequire.register(\"reporters/html.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , utils = require('../utils')\n  , Progress = require('../browser/progress')\n  , escape = utils.escape;\n\n/**\n * Save timer references to avoid Sinon interfering (see GH-237).\n */\n\nvar Date = global.Date\n  , setTimeout = global.setTimeout\n  , setInterval = global.setInterval\n  , clearTimeout = global.clearTimeout\n  , clearInterval = global.clearInterval;\n\n/**\n * Expose `HTML`.\n */\n\nexports = module.exports = HTML;\n\n/**\n * Stats template.\n */\n\nvar statsTemplate = '<ul id=\"mocha-stats\">'\n  + '<li class=\"progress\"><canvas width=\"40\" height=\"40\"></canvas></li>'\n  + '<li class=\"passes\"><a href=\"#\">passes:</a> <em>0</em></li>'\n  + '<li class=\"failures\"><a href=\"#\">failures:</a> <em>0</em></li>'\n  + '<li class=\"duration\">duration: <em>0</em>s</li>'\n  + '</ul>';\n\n/**\n * Initialize a new `HTML` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction HTML(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , total = runner.total\n    , stat = fragment(statsTemplate)\n    , items = stat.getElementsByTagName('li')\n    , passes = items[1].getElementsByTagName('em')[0]\n    , passesLink = items[1].getElementsByTagName('a')[0]\n    , failures = items[2].getElementsByTagName('em')[0]\n    , failuresLink = items[2].getElementsByTagName('a')[0]\n    , duration = items[3].getElementsByTagName('em')[0]\n    , canvas = stat.getElementsByTagName('canvas')[0]\n    , report = fragment('<ul id=\"mocha-report\"></ul>')\n    , stack = [report]\n    , progress\n    , ctx\n    , root = document.getElementById('mocha');\n\n  if (canvas.getContext) {\n    var ratio = window.devicePixelRatio || 1;\n    canvas.style.width = canvas.width;\n    canvas.style.height = canvas.height;\n    canvas.width *= ratio;\n    canvas.height *= ratio;\n    ctx = canvas.getContext('2d');\n    ctx.scale(ratio, ratio);\n    progress = new Progress;\n  }\n\n  if (!root) return error('#mocha div missing, add it to your document');\n\n  // pass toggle\n  on(passesLink, 'click', function(){\n    unhide();\n    var name = /pass/.test(report.className) ? '' : ' pass';\n    report.className = report.className.replace(/fail|pass/g, '') + name;\n    if (report.className.trim()) hideSuitesWithout('test pass');\n  });\n\n  // failure toggle\n  on(failuresLink, 'click', function(){\n    unhide();\n    var name = /fail/.test(report.className) ? '' : ' fail';\n    report.className = report.className.replace(/fail|pass/g, '') + name;\n    if (report.className.trim()) hideSuitesWithout('test fail');\n  });\n\n  root.appendChild(stat);\n  root.appendChild(report);\n\n  if (progress) progress.size(40);\n\n  runner.on('suite', function(suite){\n    if (suite.root) return;\n\n    // suite\n    var url = self.suiteURL(suite);\n    var el = fragment('<li class=\"suite\"><h1><a href=\"%s\">%s</a></h1></li>', url, escape(suite.title));\n\n    // container\n    stack[0].appendChild(el);\n    stack.unshift(document.createElement('ul'));\n    el.appendChild(stack[0]);\n  });\n\n  runner.on('suite end', function(suite){\n    if (suite.root) return;\n    stack.shift();\n  });\n\n  runner.on('fail', function(test, err){\n    if ('hook' == test.type) runner.emit('test end', test);\n  });\n\n  runner.on('test end', function(test){\n    // TODO: add to stats\n    var percent = stats.tests / this.total * 100 | 0;\n    if (progress) progress.update(percent).draw(ctx);\n\n    // update stats\n    var ms = new Date - stats.start;\n    text(passes, stats.passes);\n    text(failures, stats.failures);\n    text(duration, (ms / 1000).toFixed(2));\n\n    // test\n    if ('passed' == test.state) {\n      var url = self.testURL(test);\n      var el = fragment('<li class=\"test pass %e\"><h2>%e<span class=\"duration\">%ems</span> <a href=\"%s\" class=\"replay\">‣</a></h2></li>', test.speed, test.title, test.duration, url);\n    } else if (test.pending) {\n      var el = fragment('<li class=\"test pass pending\"><h2>%e</h2></li>', test.title);\n    } else {\n      var el = fragment('<li class=\"test fail\"><h2>%e <a href=\"%e\" class=\"replay\">‣</a></h2></li>', test.title, self.testURL(test));\n      var str = test.err.stack || test.err.toString();\n\n      // FF / Opera do not add the message\n      if (!~str.indexOf(test.err.message)) {\n        str = test.err.message + '\\n' + str;\n      }\n\n      // <=IE7 stringifies to [Object Error]. Since it can be overloaded, we\n      // check for the result of the stringifying.\n      if ('[object Error]' == str) str = test.err.message;\n\n      // Safari doesn't give you a stack. Let's at least provide a source line.\n      if (!test.err.stack && test.err.sourceURL && test.err.line !== undefined) {\n        str += \"\\n(\" + test.err.sourceURL + \":\" + test.err.line + \")\";\n      }\n\n      el.appendChild(fragment('<pre class=\"error\">%e</pre>', str));\n    }\n\n    // toggle code\n    // TODO: defer\n    if (!test.pending) {\n      var h2 = el.getElementsByTagName('h2')[0];\n\n      on(h2, 'click', function(){\n        pre.style.display = 'none' == pre.style.display\n          ? 'block'\n          : 'none';\n      });\n\n      var pre = fragment('<pre><code>%e</code></pre>', utils.clean(test.fn.toString()));\n      el.appendChild(pre);\n      pre.style.display = 'none';\n    }\n\n    // Don't call .appendChild if #mocha-report was already .shift()'ed off the stack.\n    if (stack[0]) stack[0].appendChild(el);\n  });\n}\n\n/**\n * Makes a URL, preserving querystring (\"search\") parameters.\n * @param {string} s\n * @returns {string} your new URL\n */\nvar makeUrl = function makeUrl(s) {\n  var search = window.location.search;\n\n  // Remove previous grep query parameter if present\n  if (search) {\n    search = search.replace(/[?&]grep=[^&\\s]*/g, '').replace(/^&/, '?');\n  }\n\n  return window.location.pathname + (search ? search + '&' : '?' ) + 'grep=' + encodeURIComponent(s);\n};\n\n/**\n * Provide suite URL\n *\n * @param {Object} [suite]\n */\nHTML.prototype.suiteURL = function(suite){\n  return makeUrl(suite.fullTitle());\n};\n\n/**\n * Provide test URL\n *\n * @param {Object} [test]\n */\n\nHTML.prototype.testURL = function(test){\n  return makeUrl(test.fullTitle());\n};\n\n/**\n * Display error `msg`.\n */\n\nfunction error(msg) {\n  document.body.appendChild(fragment('<div id=\"mocha-error\">%s</div>', msg));\n}\n\n/**\n * Return a DOM fragment from `html`.\n */\n\nfunction fragment(html) {\n  var args = arguments\n    , div = document.createElement('div')\n    , i = 1;\n\n  div.innerHTML = html.replace(/%([se])/g, function(_, type){\n    switch (type) {\n      case 's': return String(args[i++]);\n      case 'e': return escape(args[i++]);\n    }\n  });\n\n  return div.firstChild;\n}\n\n/**\n * Check for suites that do not have elements\n * with `classname`, and hide them.\n */\n\nfunction hideSuitesWithout(classname) {\n  var suites = document.getElementsByClassName('suite');\n  for (var i = 0; i < suites.length; i++) {\n    var els = suites[i].getElementsByClassName(classname);\n    if (0 == els.length) suites[i].className += ' hidden';\n  }\n}\n\n/**\n * Unhide .hidden suites.\n */\n\nfunction unhide() {\n  var els = document.getElementsByClassName('suite hidden');\n  for (var i = 0; i < els.length; ++i) {\n    els[i].className = els[i].className.replace('suite hidden', 'suite');\n  }\n}\n\n/**\n * Set `el` text to `str`.\n */\n\nfunction text(el, str) {\n  if (el.textContent) {\n    el.textContent = str;\n  } else {\n    el.innerText = str;\n  }\n}\n\n/**\n * Listen on `event` with callback `fn`.\n */\n\nfunction on(el, event, fn) {\n  if (el.addEventListener) {\n    el.addEventListener(event, fn, false);\n  } else {\n    el.attachEvent('on' + event, fn);\n  }\n}\n\n}); // module: reporters/html.js\n\nrequire.register(\"reporters/index.js\", function(module, exports, require){\nexports.Base = require('./base');\nexports.Dot = require('./dot');\nexports.Doc = require('./doc');\nexports.TAP = require('./tap');\nexports.JSON = require('./json');\nexports.HTML = require('./html');\nexports.List = require('./list');\nexports.Min = require('./min');\nexports.Spec = require('./spec');\nexports.Nyan = require('./nyan');\nexports.XUnit = require('./xunit');\nexports.Markdown = require('./markdown');\nexports.Progress = require('./progress');\nexports.Landing = require('./landing');\nexports.JSONCov = require('./json-cov');\nexports.HTMLCov = require('./html-cov');\nexports.JSONStream = require('./json-stream');\n\n}); // module: reporters/index.js\n\nrequire.register(\"reporters/json-cov.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base');\n\n/**\n * Expose `JSONCov`.\n */\n\nexports = module.exports = JSONCov;\n\n/**\n * Initialize a new `JsCoverage` reporter.\n *\n * @param {Runner} runner\n * @param {Boolean} output\n * @api public\n */\n\nfunction JSONCov(runner, output) {\n  var self = this\n    , output = 1 == arguments.length ? true : output;\n\n  Base.call(this, runner);\n\n  var tests = []\n    , failures = []\n    , passes = [];\n\n  runner.on('test end', function(test){\n    tests.push(test);\n  });\n\n  runner.on('pass', function(test){\n    passes.push(test);\n  });\n\n  runner.on('fail', function(test){\n    failures.push(test);\n  });\n\n  runner.on('end', function(){\n    var cov = global._$jscoverage || {};\n    var result = self.cov = map(cov);\n    result.stats = self.stats;\n    result.tests = tests.map(clean);\n    result.failures = failures.map(clean);\n    result.passes = passes.map(clean);\n    if (!output) return;\n    process.stdout.write(JSON.stringify(result, null, 2 ));\n  });\n}\n\n/**\n * Map jscoverage data to a JSON structure\n * suitable for reporting.\n *\n * @param {Object} cov\n * @return {Object}\n * @api private\n */\n\nfunction map(cov) {\n  var ret = {\n      instrumentation: 'node-jscoverage'\n    , sloc: 0\n    , hits: 0\n    , misses: 0\n    , coverage: 0\n    , files: []\n  };\n\n  for (var filename in cov) {\n    var data = coverage(filename, cov[filename]);\n    ret.files.push(data);\n    ret.hits += data.hits;\n    ret.misses += data.misses;\n    ret.sloc += data.sloc;\n  }\n\n  ret.files.sort(function(a, b) {\n    return a.filename.localeCompare(b.filename);\n  });\n\n  if (ret.sloc > 0) {\n    ret.coverage = (ret.hits / ret.sloc) * 100;\n  }\n\n  return ret;\n}\n\n/**\n * Map jscoverage data for a single source file\n * to a JSON structure suitable for reporting.\n *\n * @param {String} filename name of the source file\n * @param {Object} data jscoverage coverage data\n * @return {Object}\n * @api private\n */\n\nfunction coverage(filename, data) {\n  var ret = {\n    filename: filename,\n    coverage: 0,\n    hits: 0,\n    misses: 0,\n    sloc: 0,\n    source: {}\n  };\n\n  data.source.forEach(function(line, num){\n    num++;\n\n    if (data[num] === 0) {\n      ret.misses++;\n      ret.sloc++;\n    } else if (data[num] !== undefined) {\n      ret.hits++;\n      ret.sloc++;\n    }\n\n    ret.source[num] = {\n        source: line\n      , coverage: data[num] === undefined\n        ? ''\n        : data[num]\n    };\n  });\n\n  ret.coverage = ret.hits / ret.sloc * 100;\n\n  return ret;\n}\n\n/**\n * Return a plain-object representation of `test`\n * free of cyclic properties etc.\n *\n * @param {Object} test\n * @return {Object}\n * @api private\n */\n\nfunction clean(test) {\n  return {\n      title: test.title\n    , fullTitle: test.fullTitle()\n    , duration: test.duration\n  }\n}\n\n}); // module: reporters/json-cov.js\n\nrequire.register(\"reporters/json-stream.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , color = Base.color;\n\n/**\n * Expose `List`.\n */\n\nexports = module.exports = List;\n\n/**\n * Initialize a new `List` test reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction List(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , total = runner.total;\n\n  runner.on('start', function(){\n    console.log(JSON.stringify(['start', { total: total }]));\n  });\n\n  runner.on('pass', function(test){\n    console.log(JSON.stringify(['pass', clean(test)]));\n  });\n\n  runner.on('fail', function(test, err){\n    test = clean(test);\n    test.err = err.message;\n    console.log(JSON.stringify(['fail', test]));\n  });\n\n  runner.on('end', function(){\n    process.stdout.write(JSON.stringify(['end', self.stats]));\n  });\n}\n\n/**\n * Return a plain-object representation of `test`\n * free of cyclic properties etc.\n *\n * @param {Object} test\n * @return {Object}\n * @api private\n */\n\nfunction clean(test) {\n  return {\n      title: test.title\n    , fullTitle: test.fullTitle()\n    , duration: test.duration\n  }\n}\n\n}); // module: reporters/json-stream.js\n\nrequire.register(\"reporters/json.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , cursor = Base.cursor\n  , color = Base.color;\n\n/**\n * Expose `JSON`.\n */\n\nexports = module.exports = JSONReporter;\n\n/**\n * Initialize a new `JSON` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction JSONReporter(runner) {\n  var self = this;\n  Base.call(this, runner);\n\n  var tests = []\n    , pending = []\n    , failures = []\n    , passes = [];\n\n  runner.on('test end', function(test){\n    tests.push(test);\n  });\n\n  runner.on('pass', function(test){\n    passes.push(test);\n  });\n\n  runner.on('fail', function(test){\n    failures.push(test);\n  });\n\n  runner.on('pending', function(test){\n    pending.push(test);\n  });\n\n  runner.on('end', function(){\n    var obj = {\n      stats: self.stats,\n      tests: tests.map(clean),\n      pending: pending.map(clean),\n      failures: failures.map(clean),\n      passes: passes.map(clean)\n    };\n\n    runner.testResults = obj;\n\n    process.stdout.write(JSON.stringify(obj, null, 2));\n  });\n}\n\n/**\n * Return a plain-object representation of `test`\n * free of cyclic properties etc.\n *\n * @param {Object} test\n * @return {Object}\n * @api private\n */\n\nfunction clean(test) {\n  return {\n    title: test.title,\n    fullTitle: test.fullTitle(),\n    duration: test.duration,\n    err: errorJSON(test.err || {})\n  }\n}\n\n/**\n * Transform `error` into a JSON object.\n * @param {Error} err\n * @return {Object}\n */\n\nfunction errorJSON(err) {\n  var res = {};\n  Object.getOwnPropertyNames(err).forEach(function(key) {\n    res[key] = err[key];\n  }, err);\n  return res;\n}\n\n}); // module: reporters/json.js\n\nrequire.register(\"reporters/landing.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , cursor = Base.cursor\n  , color = Base.color;\n\n/**\n * Expose `Landing`.\n */\n\nexports = module.exports = Landing;\n\n/**\n * Airplane color.\n */\n\nBase.colors.plane = 0;\n\n/**\n * Airplane crash color.\n */\n\nBase.colors['plane crash'] = 31;\n\n/**\n * Runway color.\n */\n\nBase.colors.runway = 90;\n\n/**\n * Initialize a new `Landing` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction Landing(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , width = Base.window.width * .75 | 0\n    , total = runner.total\n    , stream = process.stdout\n    , plane = color('plane', '✈')\n    , crashed = -1\n    , n = 0;\n\n  function runway() {\n    var buf = Array(width).join('-');\n    return '  ' + color('runway', buf);\n  }\n\n  runner.on('start', function(){\n    stream.write('\\n\\n\\n  ');\n    cursor.hide();\n  });\n\n  runner.on('test end', function(test){\n    // check if the plane crashed\n    var col = -1 == crashed\n      ? width * ++n / total | 0\n      : crashed;\n\n    // show the crash\n    if ('failed' == test.state) {\n      plane = color('plane crash', '✈');\n      crashed = col;\n    }\n\n    // render landing strip\n    stream.write('\\u001b['+(width+1)+'D\\u001b[2A');\n    stream.write(runway());\n    stream.write('\\n  ');\n    stream.write(color('runway', Array(col).join('⋅')));\n    stream.write(plane)\n    stream.write(color('runway', Array(width - col).join('⋅') + '\\n'));\n    stream.write(runway());\n    stream.write('\\u001b[0m');\n  });\n\n  runner.on('end', function(){\n    cursor.show();\n    console.log();\n    self.epilogue();\n  });\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nLanding.prototype = new F;\nLanding.prototype.constructor = Landing;\n\n\n}); // module: reporters/landing.js\n\nrequire.register(\"reporters/list.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , cursor = Base.cursor\n  , color = Base.color;\n\n/**\n * Expose `List`.\n */\n\nexports = module.exports = List;\n\n/**\n * Initialize a new `List` test reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction List(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , n = 0;\n\n  runner.on('start', function(){\n    console.log();\n  });\n\n  runner.on('test', function(test){\n    process.stdout.write(color('pass', '    ' + test.fullTitle() + ': '));\n  });\n\n  runner.on('pending', function(test){\n    var fmt = color('checkmark', '  -')\n      + color('pending', ' %s');\n    console.log(fmt, test.fullTitle());\n  });\n\n  runner.on('pass', function(test){\n    var fmt = color('checkmark', '  '+Base.symbols.dot)\n      + color('pass', ' %s: ')\n      + color(test.speed, '%dms');\n    cursor.CR();\n    console.log(fmt, test.fullTitle(), test.duration);\n  });\n\n  runner.on('fail', function(test, err){\n    cursor.CR();\n    console.log(color('fail', '  %d) %s'), ++n, test.fullTitle());\n  });\n\n  runner.on('end', self.epilogue.bind(self));\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nList.prototype = new F;\nList.prototype.constructor = List;\n\n\n}); // module: reporters/list.js\n\nrequire.register(\"reporters/markdown.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , utils = require('../utils');\n\n/**\n * Constants\n */\n\nvar SUITE_PREFIX = '$';\n\n/**\n * Expose `Markdown`.\n */\n\nexports = module.exports = Markdown;\n\n/**\n * Initialize a new `Markdown` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction Markdown(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , level = 0\n    , buf = '';\n\n  function title(str) {\n    return Array(level).join('#') + ' ' + str;\n  }\n\n  function indent() {\n    return Array(level).join('  ');\n  }\n\n  function mapTOC(suite, obj) {\n    var ret = obj,\n        key = SUITE_PREFIX + suite.title;\n    obj = obj[key] = obj[key] || { suite: suite };\n    suite.suites.forEach(function(suite){\n      mapTOC(suite, obj);\n    });\n    return ret;\n  }\n\n  function stringifyTOC(obj, level) {\n    ++level;\n    var buf = '';\n    var link;\n    for (var key in obj) {\n      if ('suite' == key) continue;\n      if (key !== SUITE_PREFIX) {\n        link = ' - [' + key.substring(1) + ']';\n        link += '(#' + utils.slug(obj[key].suite.fullTitle()) + ')\\n';\n        buf += Array(level).join('  ') + link;\n      }\n      buf += stringifyTOC(obj[key], level);\n    }\n    return buf;\n  }\n\n  function generateTOC(suite) {\n    var obj = mapTOC(suite, {});\n    return stringifyTOC(obj, 0);\n  }\n\n  generateTOC(runner.suite);\n\n  runner.on('suite', function(suite){\n    ++level;\n    var slug = utils.slug(suite.fullTitle());\n    buf += '<a name=\"' + slug + '\"></a>' + '\\n';\n    buf += title(suite.title) + '\\n';\n  });\n\n  runner.on('suite end', function(suite){\n    --level;\n  });\n\n  runner.on('pass', function(test){\n    var code = utils.clean(test.fn.toString());\n    buf += test.title + '.\\n';\n    buf += '\\n```js\\n';\n    buf += code + '\\n';\n    buf += '```\\n\\n';\n  });\n\n  runner.on('end', function(){\n    process.stdout.write('# TOC\\n');\n    process.stdout.write(generateTOC(runner.suite));\n    process.stdout.write(buf);\n  });\n}\n\n}); // module: reporters/markdown.js\n\nrequire.register(\"reporters/min.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base');\n\n/**\n * Expose `Min`.\n */\n\nexports = module.exports = Min;\n\n/**\n * Initialize a new `Min` minimal test reporter (best used with --watch).\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction Min(runner) {\n  Base.call(this, runner);\n\n  runner.on('start', function(){\n    // clear screen\n    process.stdout.write('\\u001b[2J');\n    // set cursor position\n    process.stdout.write('\\u001b[1;3H');\n  });\n\n  runner.on('end', this.epilogue.bind(this));\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nMin.prototype = new F;\nMin.prototype.constructor = Min;\n\n\n}); // module: reporters/min.js\n\nrequire.register(\"reporters/nyan.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base');\n\n/**\n * Expose `Dot`.\n */\n\nexports = module.exports = NyanCat;\n\n/**\n * Initialize a new `Dot` matrix test reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction NyanCat(runner) {\n  Base.call(this, runner);\n  var self = this\n    , stats = this.stats\n    , width = Base.window.width * .75 | 0\n    , rainbowColors = this.rainbowColors = self.generateColors()\n    , colorIndex = this.colorIndex = 0\n    , numerOfLines = this.numberOfLines = 4\n    , trajectories = this.trajectories = [[], [], [], []]\n    , nyanCatWidth = this.nyanCatWidth = 11\n    , trajectoryWidthMax = this.trajectoryWidthMax = (width - nyanCatWidth)\n    , scoreboardWidth = this.scoreboardWidth = 5\n    , tick = this.tick = 0\n    , n = 0;\n\n  runner.on('start', function(){\n    Base.cursor.hide();\n    self.draw();\n  });\n\n  runner.on('pending', function(test){\n    self.draw();\n  });\n\n  runner.on('pass', function(test){\n    self.draw();\n  });\n\n  runner.on('fail', function(test, err){\n    self.draw();\n  });\n\n  runner.on('end', function(){\n    Base.cursor.show();\n    for (var i = 0; i < self.numberOfLines; i++) write('\\n');\n    self.epilogue();\n  });\n}\n\n/**\n * Draw the nyan cat\n *\n * @api private\n */\n\nNyanCat.prototype.draw = function(){\n  this.appendRainbow();\n  this.drawScoreboard();\n  this.drawRainbow();\n  this.drawNyanCat();\n  this.tick = !this.tick;\n};\n\n/**\n * Draw the \"scoreboard\" showing the number\n * of passes, failures and pending tests.\n *\n * @api private\n */\n\nNyanCat.prototype.drawScoreboard = function(){\n  var stats = this.stats;\n\n  function draw(type, n) {\n    write(' ');\n    write(Base.color(type, n));\n    write('\\n');\n  }\n\n  draw('green', stats.passes);\n  draw('fail', stats.failures);\n  draw('pending', stats.pending);\n  write('\\n');\n\n  this.cursorUp(this.numberOfLines);\n};\n\n/**\n * Append the rainbow.\n *\n * @api private\n */\n\nNyanCat.prototype.appendRainbow = function(){\n  var segment = this.tick ? '_' : '-';\n  var rainbowified = this.rainbowify(segment);\n\n  for (var index = 0; index < this.numberOfLines; index++) {\n    var trajectory = this.trajectories[index];\n    if (trajectory.length >= this.trajectoryWidthMax) trajectory.shift();\n    trajectory.push(rainbowified);\n  }\n};\n\n/**\n * Draw the rainbow.\n *\n * @api private\n */\n\nNyanCat.prototype.drawRainbow = function(){\n  var self = this;\n\n  this.trajectories.forEach(function(line, index) {\n    write('\\u001b[' + self.scoreboardWidth + 'C');\n    write(line.join(''));\n    write('\\n');\n  });\n\n  this.cursorUp(this.numberOfLines);\n};\n\n/**\n * Draw the nyan cat\n *\n * @api private\n */\n\nNyanCat.prototype.drawNyanCat = function() {\n  var self = this;\n  var startWidth = this.scoreboardWidth + this.trajectories[0].length;\n  var dist = '\\u001b[' + startWidth + 'C';\n  var padding = '';\n\n  write(dist);\n  write('_,------,');\n  write('\\n');\n\n  write(dist);\n  padding = self.tick ? '  ' : '   ';\n  write('_|' + padding + '/\\\\_/\\\\ ');\n  write('\\n');\n\n  write(dist);\n  padding = self.tick ? '_' : '__';\n  var tail = self.tick ? '~' : '^';\n  var face;\n  write(tail + '|' + padding + this.face() + ' ');\n  write('\\n');\n\n  write(dist);\n  padding = self.tick ? ' ' : '  ';\n  write(padding + '\"\"  \"\" ');\n  write('\\n');\n\n  this.cursorUp(this.numberOfLines);\n};\n\n/**\n * Draw nyan cat face.\n *\n * @return {String}\n * @api private\n */\n\nNyanCat.prototype.face = function() {\n  var stats = this.stats;\n  if (stats.failures) {\n    return '( x .x)';\n  } else if (stats.pending) {\n    return '( o .o)';\n  } else if(stats.passes) {\n    return '( ^ .^)';\n  } else {\n    return '( - .-)';\n  }\n};\n\n/**\n * Move cursor up `n`.\n *\n * @param {Number} n\n * @api private\n */\n\nNyanCat.prototype.cursorUp = function(n) {\n  write('\\u001b[' + n + 'A');\n};\n\n/**\n * Move cursor down `n`.\n *\n * @param {Number} n\n * @api private\n */\n\nNyanCat.prototype.cursorDown = function(n) {\n  write('\\u001b[' + n + 'B');\n};\n\n/**\n * Generate rainbow colors.\n *\n * @return {Array}\n * @api private\n */\n\nNyanCat.prototype.generateColors = function(){\n  var colors = [];\n\n  for (var i = 0; i < (6 * 7); i++) {\n    var pi3 = Math.floor(Math.PI / 3);\n    var n = (i * (1.0 / 6));\n    var r = Math.floor(3 * Math.sin(n) + 3);\n    var g = Math.floor(3 * Math.sin(n + 2 * pi3) + 3);\n    var b = Math.floor(3 * Math.sin(n + 4 * pi3) + 3);\n    colors.push(36 * r + 6 * g + b + 16);\n  }\n\n  return colors;\n};\n\n/**\n * Apply rainbow to the given `str`.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nNyanCat.prototype.rainbowify = function(str){\n  if (!Base.useColors)\n    return str;\n  var color = this.rainbowColors[this.colorIndex % this.rainbowColors.length];\n  this.colorIndex += 1;\n  return '\\u001b[38;5;' + color + 'm' + str + '\\u001b[0m';\n};\n\n/**\n * Stdout helper.\n */\n\nfunction write(string) {\n  process.stdout.write(string);\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nNyanCat.prototype = new F;\nNyanCat.prototype.constructor = NyanCat;\n\n\n}); // module: reporters/nyan.js\n\nrequire.register(\"reporters/progress.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , cursor = Base.cursor\n  , color = Base.color;\n\n/**\n * Expose `Progress`.\n */\n\nexports = module.exports = Progress;\n\n/**\n * General progress bar color.\n */\n\nBase.colors.progress = 90;\n\n/**\n * Initialize a new `Progress` bar test reporter.\n *\n * @param {Runner} runner\n * @param {Object} options\n * @api public\n */\n\nfunction Progress(runner, options) {\n  Base.call(this, runner);\n\n  var self = this\n    , options = options || {}\n    , stats = this.stats\n    , width = Base.window.width * .50 | 0\n    , total = runner.total\n    , complete = 0\n    , max = Math.max\n    , lastN = -1;\n\n  // default chars\n  options.open = options.open || '[';\n  options.complete = options.complete || '▬';\n  options.incomplete = options.incomplete || Base.symbols.dot;\n  options.close = options.close || ']';\n  options.verbose = false;\n\n  // tests started\n  runner.on('start', function(){\n    console.log();\n    cursor.hide();\n  });\n\n  // tests complete\n  runner.on('test end', function(){\n    complete++;\n    var incomplete = total - complete\n      , percent = complete / total\n      , n = width * percent | 0\n      , i = width - n;\n\n    if (lastN === n && !options.verbose) {\n      // Don't re-render the line if it hasn't changed\n      return;\n    }\n    lastN = n;\n\n    cursor.CR();\n    process.stdout.write('\\u001b[J');\n    process.stdout.write(color('progress', '  ' + options.open));\n    process.stdout.write(Array(n).join(options.complete));\n    process.stdout.write(Array(i).join(options.incomplete));\n    process.stdout.write(color('progress', options.close));\n    if (options.verbose) {\n      process.stdout.write(color('progress', ' ' + complete + ' of ' + total));\n    }\n  });\n\n  // tests are complete, output some stats\n  // and the failures if any\n  runner.on('end', function(){\n    cursor.show();\n    console.log();\n    self.epilogue();\n  });\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nProgress.prototype = new F;\nProgress.prototype.constructor = Progress;\n\n\n}); // module: reporters/progress.js\n\nrequire.register(\"reporters/spec.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , cursor = Base.cursor\n  , color = Base.color;\n\n/**\n * Expose `Spec`.\n */\n\nexports = module.exports = Spec;\n\n/**\n * Initialize a new `Spec` test reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction Spec(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , indents = 0\n    , n = 0;\n\n  function indent() {\n    return Array(indents).join('  ')\n  }\n\n  runner.on('start', function(){\n    console.log();\n  });\n\n  runner.on('suite', function(suite){\n    ++indents;\n    console.log(color('suite', '%s%s'), indent(), suite.title);\n  });\n\n  runner.on('suite end', function(suite){\n    --indents;\n    if (1 == indents) console.log();\n  });\n\n  runner.on('pending', function(test){\n    var fmt = indent() + color('pending', '  - %s');\n    console.log(fmt, test.title);\n  });\n\n  runner.on('pass', function(test){\n    if ('fast' == test.speed) {\n      var fmt = indent()\n        + color('checkmark', '  ' + Base.symbols.ok)\n        + color('pass', ' %s ');\n      cursor.CR();\n      console.log(fmt, test.title);\n    } else {\n      var fmt = indent()\n        + color('checkmark', '  ' + Base.symbols.ok)\n        + color('pass', ' %s ')\n        + color(test.speed, '(%dms)');\n      cursor.CR();\n      console.log(fmt, test.title, test.duration);\n    }\n  });\n\n  runner.on('fail', function(test, err){\n    cursor.CR();\n    console.log(indent() + color('fail', '  %d) %s'), ++n, test.title);\n  });\n\n  runner.on('end', self.epilogue.bind(self));\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nSpec.prototype = new F;\nSpec.prototype.constructor = Spec;\n\n\n}); // module: reporters/spec.js\n\nrequire.register(\"reporters/tap.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , cursor = Base.cursor\n  , color = Base.color;\n\n/**\n * Expose `TAP`.\n */\n\nexports = module.exports = TAP;\n\n/**\n * Initialize a new `TAP` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction TAP(runner) {\n  Base.call(this, runner);\n\n  var self = this\n    , stats = this.stats\n    , n = 1\n    , passes = 0\n    , failures = 0;\n\n  runner.on('start', function(){\n    var total = runner.grepTotal(runner.suite);\n    console.log('%d..%d', 1, total);\n  });\n\n  runner.on('test end', function(){\n    ++n;\n  });\n\n  runner.on('pending', function(test){\n    console.log('ok %d %s # SKIP -', n, title(test));\n  });\n\n  runner.on('pass', function(test){\n    passes++;\n    console.log('ok %d %s', n, title(test));\n  });\n\n  runner.on('fail', function(test, err){\n    failures++;\n    console.log('not ok %d %s', n, title(test));\n    if (err.stack) console.log(err.stack.replace(/^/gm, '  '));\n  });\n\n  runner.on('end', function(){\n    console.log('# tests ' + (passes + failures));\n    console.log('# pass ' + passes);\n    console.log('# fail ' + failures);\n  });\n}\n\n/**\n * Return a TAP-safe title of `test`\n *\n * @param {Object} test\n * @return {String}\n * @api private\n */\n\nfunction title(test) {\n  return test.fullTitle().replace(/#/g, '');\n}\n\n}); // module: reporters/tap.js\n\nrequire.register(\"reporters/xunit.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Base = require('./base')\n  , utils = require('../utils')\n  , fs = require('browser/fs')\n  , escape = utils.escape;\n\n/**\n * Save timer references to avoid Sinon interfering (see GH-237).\n */\n\nvar Date = global.Date\n  , setTimeout = global.setTimeout\n  , setInterval = global.setInterval\n  , clearTimeout = global.clearTimeout\n  , clearInterval = global.clearInterval;\n\n/**\n * Expose `XUnit`.\n */\n\nexports = module.exports = XUnit;\n\n/**\n * Initialize a new `XUnit` reporter.\n *\n * @param {Runner} runner\n * @api public\n */\n\nfunction XUnit(runner, options) {\n  Base.call(this, runner);\n  var stats = this.stats\n    , tests = []\n    , self = this;\n\n  if (options.reporterOptions && options.reporterOptions.output) {\n      if (! fs.createWriteStream) {\n          throw new Error('file output not supported in browser');\n      }\n      self.fileStream = fs.createWriteStream(options.reporterOptions.output);\n  }\n\n  runner.on('pending', function(test){\n    tests.push(test);\n  });\n\n  runner.on('pass', function(test){\n    tests.push(test);\n  });\n\n  runner.on('fail', function(test){\n    tests.push(test);\n  });\n\n  runner.on('end', function(){\n    self.write(tag('testsuite', {\n        name: 'Mocha Tests'\n      , tests: stats.tests\n      , failures: stats.failures\n      , errors: stats.failures\n      , skipped: stats.tests - stats.failures - stats.passes\n      , timestamp: (new Date).toUTCString()\n      , time: (stats.duration / 1000) || 0\n    }, false));\n\n    tests.forEach(function(t) { self.test(t); });\n    self.write('</testsuite>');\n  });\n}\n\n/**\n * Override done to close the stream (if it's a file).\n */\nXUnit.prototype.done = function(failures, fn) {\n    if (this.fileStream) {\n        this.fileStream.end(function() {\n            fn(failures);\n        });\n    } else {\n        fn(failures);\n    }\n};\n\n/**\n * Inherit from `Base.prototype`.\n */\n\nfunction F(){};\nF.prototype = Base.prototype;\nXUnit.prototype = new F;\nXUnit.prototype.constructor = XUnit;\n\n\n/**\n * Write out the given line\n */\nXUnit.prototype.write = function(line) {\n    if (this.fileStream) {\n        this.fileStream.write(line + '\\n');\n    } else {\n        console.log(line);\n    }\n};\n\n/**\n * Output tag for the given `test.`\n */\n\nXUnit.prototype.test = function(test, ostream) {\n  var attrs = {\n      classname: test.parent.fullTitle()\n    , name: test.title\n    , time: (test.duration / 1000) || 0\n  };\n\n  if ('failed' == test.state) {\n    var err = test.err;\n    this.write(tag('testcase', attrs, false, tag('failure', {}, false, cdata(escape(err.message) + \"\\n\" + err.stack))));\n  } else if (test.pending) {\n    this.write(tag('testcase', attrs, false, tag('skipped', {}, true)));\n  } else {\n    this.write(tag('testcase', attrs, true) );\n  }\n};\n\n/**\n * HTML tag helper.\n */\n\nfunction tag(name, attrs, close, content) {\n  var end = close ? '/>' : '>'\n    , pairs = []\n    , tag;\n\n  for (var key in attrs) {\n    pairs.push(key + '=\"' + escape(attrs[key]) + '\"');\n  }\n\n  tag = '<' + name + (pairs.length ? ' ' + pairs.join(' ') : '') + end;\n  if (content) tag += content + '</' + name + end;\n  return tag;\n}\n\n/**\n * Return cdata escaped CDATA `str`.\n */\n\nfunction cdata(str) {\n  return '<![CDATA[' + escape(str) + ']]>';\n}\n\n}); // module: reporters/xunit.js\n\nrequire.register(\"runnable.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar EventEmitter = require('browser/events').EventEmitter\n  , debug = require('browser/debug')('mocha:runnable')\n  , Pending = require('./pending')\n  , milliseconds = require('./ms')\n  , utils = require('./utils');\n\n/**\n * Save timer references to avoid Sinon interfering (see GH-237).\n */\n\nvar Date = global.Date\n  , setTimeout = global.setTimeout\n  , setInterval = global.setInterval\n  , clearTimeout = global.clearTimeout\n  , clearInterval = global.clearInterval;\n\n/**\n * Object#toString().\n */\n\nvar toString = Object.prototype.toString;\n\n/**\n * Expose `Runnable`.\n */\n\nmodule.exports = Runnable;\n\n/**\n * Initialize a new `Runnable` with the given `title` and callback `fn`.\n *\n * @param {String} title\n * @param {Function} fn\n * @api private\n */\n\nfunction Runnable(title, fn) {\n  this.title = title;\n  this.fn = fn;\n  this.async = fn && fn.length;\n  this.sync = ! this.async;\n  this._timeout = 2000;\n  this._slow = 75;\n  this._enableTimeouts = true;\n  this.timedOut = false;\n  this._trace = new Error('done() called multiple times')\n}\n\n/**\n * Inherit from `EventEmitter.prototype`.\n */\n\nfunction F(){};\nF.prototype = EventEmitter.prototype;\nRunnable.prototype = new F;\nRunnable.prototype.constructor = Runnable;\n\n\n/**\n * Set & get timeout `ms`.\n *\n * @param {Number|String} ms\n * @return {Runnable|Number} ms or self\n * @api private\n */\n\nRunnable.prototype.timeout = function(ms){\n  if (0 == arguments.length) return this._timeout;\n  if (ms === 0) this._enableTimeouts = false;\n  if ('string' == typeof ms) ms = milliseconds(ms);\n  debug('timeout %d', ms);\n  this._timeout = ms;\n  if (this.timer) this.resetTimeout();\n  return this;\n};\n\n/**\n * Set & get slow `ms`.\n *\n * @param {Number|String} ms\n * @return {Runnable|Number} ms or self\n * @api private\n */\n\nRunnable.prototype.slow = function(ms){\n  if (0 === arguments.length) return this._slow;\n  if ('string' == typeof ms) ms = milliseconds(ms);\n  debug('timeout %d', ms);\n  this._slow = ms;\n  return this;\n};\n\n/**\n * Set and & get timeout `enabled`.\n *\n * @param {Boolean} enabled\n * @return {Runnable|Boolean} enabled or self\n * @api private\n */\n\nRunnable.prototype.enableTimeouts = function(enabled){\n  if (arguments.length === 0) return this._enableTimeouts;\n  debug('enableTimeouts %s', enabled);\n  this._enableTimeouts = enabled;\n  return this;\n};\n\n/**\n * Halt and mark as pending.\n *\n * @api private\n */\n\nRunnable.prototype.skip = function(){\n    throw new Pending();\n};\n\n/**\n * Return the full title generated by recursively\n * concatenating the parent's full title.\n *\n * @return {String}\n * @api public\n */\n\nRunnable.prototype.fullTitle = function(){\n  return this.parent.fullTitle() + ' ' + this.title;\n};\n\n/**\n * Clear the timeout.\n *\n * @api private\n */\n\nRunnable.prototype.clearTimeout = function(){\n  clearTimeout(this.timer);\n};\n\n/**\n * Inspect the runnable void of private properties.\n *\n * @return {String}\n * @api private\n */\n\nRunnable.prototype.inspect = function(){\n  return JSON.stringify(this, function(key, val){\n    if ('_' == key[0]) return;\n    if ('parent' == key) return '#<Suite>';\n    if ('ctx' == key) return '#<Context>';\n    return val;\n  }, 2);\n};\n\n/**\n * Reset the timeout.\n *\n * @api private\n */\n\nRunnable.prototype.resetTimeout = function(){\n  var self = this;\n  var ms = this.timeout() || 1e9;\n\n  if (!this._enableTimeouts) return;\n  this.clearTimeout();\n  this.timer = setTimeout(function(){\n    if (!self._enableTimeouts) return;\n    self.callback(new Error('timeout of ' + ms + 'ms exceeded. Ensure the done() callback is being called in this test.'));\n    self.timedOut = true;\n  }, ms);\n};\n\n/**\n * Whitelist these globals for this test run\n *\n * @api private\n */\nRunnable.prototype.globals = function(arr){\n  var self = this;\n  this._allowedGlobals = arr;\n};\n\n/**\n * Run the test and invoke `fn(err)`.\n *\n * @param {Function} fn\n * @api private\n */\n\nRunnable.prototype.run = function(fn){\n  var self = this\n    , start = new Date\n    , ctx = this.ctx\n    , finished\n    , emitted;\n\n  // Some times the ctx exists but it is not runnable\n  if (ctx && ctx.runnable) ctx.runnable(this);\n\n  // called multiple times\n  function multiple(err) {\n    if (emitted) return;\n    emitted = true;\n    self.emit('error', err || new Error('done() called multiple times; stacktrace may be inaccurate'));\n  }\n\n  // finished\n  function done(err) {\n    var ms = self.timeout();\n    if (self.timedOut) return;\n    if (finished) return multiple(err || self._trace);\n\n    // Discard the resolution if this test has already failed asynchronously\n    if (self.state) return;\n\n    self.clearTimeout();\n    self.duration = new Date - start;\n    finished = true;\n    if (!err && self.duration > ms && self._enableTimeouts) err = new Error('timeout of ' + ms + 'ms exceeded. Ensure the done() callback is being called in this test.');\n    fn(err);\n  }\n\n  // for .resetTimeout()\n  this.callback = done;\n\n  // explicit async with `done` argument\n  if (this.async) {\n    this.resetTimeout();\n\n    try {\n      this.fn.call(ctx, function(err){\n        if (err instanceof Error || toString.call(err) === \"[object Error]\") return done(err);\n        if (null != err) {\n          if (Object.prototype.toString.call(err) === '[object Object]') {\n            return done(new Error('done() invoked with non-Error: ' + JSON.stringify(err)));\n          } else {\n            return done(new Error('done() invoked with non-Error: ' + err));\n          }\n        }\n        done();\n      });\n    } catch (err) {\n      done(utils.getError(err));\n    }\n    return;\n  }\n\n  if (this.asyncOnly) {\n    return done(new Error('--async-only option in use without declaring `done()`'));\n  }\n\n  // sync or promise-returning\n  try {\n    if (this.pending) {\n      done();\n    } else {\n      callFn(this.fn);\n    }\n  } catch (err) {\n    done(utils.getError(err));\n  }\n\n  function callFn(fn) {\n    var result = fn.call(ctx);\n    if (result && typeof result.then === 'function') {\n      self.resetTimeout();\n      result\n        .then(function() {\n          done()\n        },\n        function(reason) {\n          done(reason || new Error('Promise rejected with no or falsy reason'))\n        });\n    } else {\n      done();\n    }\n  }\n};\n\n}); // module: runnable.js\n\nrequire.register(\"runner.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar EventEmitter = require('browser/events').EventEmitter\n  , debug = require('browser/debug')('mocha:runner')\n  , Pending = require('./pending')\n  , Test = require('./test')\n  , utils = require('./utils')\n  , filter = utils.filter\n  , keys = utils.keys\n  , type = utils.type\n  , stringify = utils.stringify;\n\n/**\n * Non-enumerable globals.\n */\n\nvar globals = [\n  'setTimeout',\n  'clearTimeout',\n  'setInterval',\n  'clearInterval',\n  'XMLHttpRequest',\n  'Date',\n  'setImmediate',\n  'clearImmediate'\n];\n\n/**\n * Expose `Runner`.\n */\n\nmodule.exports = Runner;\n\n/**\n * Initialize a `Runner` for the given `suite`.\n *\n * Events:\n *\n *   - `start`  execution started\n *   - `end`  execution complete\n *   - `suite`  (suite) test suite execution started\n *   - `suite end`  (suite) all tests (and sub-suites) have finished\n *   - `test`  (test) test execution started\n *   - `test end`  (test) test completed\n *   - `hook`  (hook) hook execution started\n *   - `hook end`  (hook) hook complete\n *   - `pass`  (test) test passed\n *   - `fail`  (test, err) test failed\n *   - `pending`  (test) test pending\n *\n * @param {Suite} suite Root suite\n * @param {boolean} [delay] Whether or not to delay execution of root suite\n *   until ready.\n * @api public\n */\n\nfunction Runner(suite, delay) {\n  var self = this;\n  this._globals = [];\n  this._abort = false;\n  this._delay = delay;\n  this.suite = suite;\n  this.total = suite.total();\n  this.failures = 0;\n  this.on('test end', function(test){ self.checkGlobals(test); });\n  this.on('hook end', function(hook){ self.checkGlobals(hook); });\n  this.grep(/.*/);\n  this.globals(this.globalProps().concat(extraGlobals()));\n}\n\n/**\n * Wrapper for setImmediate, process.nextTick, or browser polyfill.\n *\n * @param {Function} fn\n * @api private\n */\n\nRunner.immediately = global.setImmediate || process.nextTick;\n\n/**\n * Inherit from `EventEmitter.prototype`.\n */\n\nfunction F(){};\nF.prototype = EventEmitter.prototype;\nRunner.prototype = new F;\nRunner.prototype.constructor = Runner;\n\n\n/**\n * Run tests with full titles matching `re`. Updates runner.total\n * with number of tests matched.\n *\n * @param {RegExp} re\n * @param {Boolean} invert\n * @return {Runner} for chaining\n * @api public\n */\n\nRunner.prototype.grep = function(re, invert){\n  debug('grep %s', re);\n  this._grep = re;\n  this._invert = invert;\n  this.total = this.grepTotal(this.suite);\n  return this;\n};\n\n/**\n * Returns the number of tests matching the grep search for the\n * given suite.\n *\n * @param {Suite} suite\n * @return {Number}\n * @api public\n */\n\nRunner.prototype.grepTotal = function(suite) {\n  var self = this;\n  var total = 0;\n\n  suite.eachTest(function(test){\n    var match = self._grep.test(test.fullTitle());\n    if (self._invert) match = !match;\n    if (match) total++;\n  });\n\n  return total;\n};\n\n/**\n * Return a list of global properties.\n *\n * @return {Array}\n * @api private\n */\n\nRunner.prototype.globalProps = function() {\n  var props = utils.keys(global);\n\n  // non-enumerables\n  for (var i = 0; i < globals.length; ++i) {\n    if (~utils.indexOf(props, globals[i])) continue;\n    props.push(globals[i]);\n  }\n\n  return props;\n};\n\n/**\n * Allow the given `arr` of globals.\n *\n * @param {Array} arr\n * @return {Runner} for chaining\n * @api public\n */\n\nRunner.prototype.globals = function(arr){\n  if (0 == arguments.length) return this._globals;\n  debug('globals %j', arr);\n  this._globals = this._globals.concat(arr);\n  return this;\n};\n\n/**\n * Check for global variable leaks.\n *\n * @api private\n */\n\nRunner.prototype.checkGlobals = function(test){\n  if (this.ignoreLeaks) return;\n  var ok = this._globals;\n\n  var globals = this.globalProps();\n  var leaks;\n\n  if (test) {\n    ok = ok.concat(test._allowedGlobals || []);\n  }\n\n  if(this.prevGlobalsLength == globals.length) return;\n  this.prevGlobalsLength = globals.length;\n\n  leaks = filterLeaks(ok, globals);\n  this._globals = this._globals.concat(leaks);\n\n  if (leaks.length > 1) {\n    this.fail(test, new Error('global leaks detected: ' + leaks.join(', ') + ''));\n  } else if (leaks.length) {\n    this.fail(test, new Error('global leak detected: ' + leaks[0]));\n  }\n};\n\n/**\n * Fail the given `test`.\n *\n * @param {Test} test\n * @param {Error} err\n * @api private\n */\n\nRunner.prototype.fail = function(test, err){\n  ++this.failures;\n  test.state = 'failed';\n\n  if ('string' == typeof err) {\n    err = new Error('the string \"' + err + '\" was thrown, throw an Error :)');\n  } else if (!(err instanceof Error)) {\n    err = new Error('the ' + type(err) + ' ' + stringify(err) + ' was thrown, throw an Error :)');\n  }\n\n  this.emit('fail', test, err);\n};\n\n/**\n * Fail the given `hook` with `err`.\n *\n * Hook failures work in the following pattern:\n * - If bail, then exit\n * - Failed `before` hook skips all tests in a suite and subsuites,\n *   but jumps to corresponding `after` hook\n * - Failed `before each` hook skips remaining tests in a\n *   suite and jumps to corresponding `after each` hook,\n *   which is run only once\n * - Failed `after` hook does not alter\n *   execution order\n * - Failed `after each` hook skips remaining tests in a\n *   suite and subsuites, but executes other `after each`\n *   hooks\n *\n * @param {Hook} hook\n * @param {Error} err\n * @api private\n */\n\nRunner.prototype.failHook = function(hook, err){\n  this.fail(hook, err);\n  if (this.suite.bail()) {\n    this.emit('end');\n  }\n};\n\n/**\n * Run hook `name` callbacks and then invoke `fn()`.\n *\n * @param {String} name\n * @param {Function} function\n * @api private\n */\n\nRunner.prototype.hook = function(name, fn){\n  var suite = this.suite\n    , hooks = suite['_' + name]\n    , self = this\n    , timer;\n\n  function next(i) {\n    var hook = hooks[i];\n    if (!hook) return fn();\n    self.currentRunnable = hook;\n\n    hook.ctx.currentTest = self.test;\n\n    self.emit('hook', hook);\n\n    hook.on('error', function(err){\n      self.failHook(hook, err);\n    });\n\n    hook.run(function(err){\n      hook.removeAllListeners('error');\n      var testError = hook.error();\n      if (testError) self.fail(self.test, testError);\n      if (err) {\n        if (err instanceof Pending) {\n          suite.pending = true;\n        } else {\n          self.failHook(hook, err);\n\n          // stop executing hooks, notify callee of hook err\n          return fn(err);\n        }\n      }\n      self.emit('hook end', hook);\n      delete hook.ctx.currentTest;\n      next(++i);\n    });\n  }\n\n  Runner.immediately(function(){\n    next(0);\n  });\n};\n\n/**\n * Run hook `name` for the given array of `suites`\n * in order, and callback `fn(err, errSuite)`.\n *\n * @param {String} name\n * @param {Array} suites\n * @param {Function} fn\n * @api private\n */\n\nRunner.prototype.hooks = function(name, suites, fn){\n  var self = this\n    , orig = this.suite;\n\n  function next(suite) {\n    self.suite = suite;\n\n    if (!suite) {\n      self.suite = orig;\n      return fn();\n    }\n\n    self.hook(name, function(err){\n      if (err) {\n        var errSuite = self.suite;\n        self.suite = orig;\n        return fn(err, errSuite);\n      }\n\n      next(suites.pop());\n    });\n  }\n\n  next(suites.pop());\n};\n\n/**\n * Run hooks from the top level down.\n *\n * @param {String} name\n * @param {Function} fn\n * @api private\n */\n\nRunner.prototype.hookUp = function(name, fn){\n  var suites = [this.suite].concat(this.parents()).reverse();\n  this.hooks(name, suites, fn);\n};\n\n/**\n * Run hooks from the bottom up.\n *\n * @param {String} name\n * @param {Function} fn\n * @api private\n */\n\nRunner.prototype.hookDown = function(name, fn){\n  var suites = [this.suite].concat(this.parents());\n  this.hooks(name, suites, fn);\n};\n\n/**\n * Return an array of parent Suites from\n * closest to furthest.\n *\n * @return {Array}\n * @api private\n */\n\nRunner.prototype.parents = function(){\n  var suite = this.suite\n    , suites = [];\n  while (suite = suite.parent) suites.push(suite);\n  return suites;\n};\n\n/**\n * Run the current test and callback `fn(err)`.\n *\n * @param {Function} fn\n * @api private\n */\n\nRunner.prototype.runTest = function(fn){\n  var test = this.test\n    , self = this;\n\n  if (this.asyncOnly) test.asyncOnly = true;\n\n  try {\n    test.on('error', function(err){\n      self.fail(test, err);\n    });\n    test.run(fn);\n  } catch (err) {\n    fn(err);\n  }\n};\n\n/**\n * Run tests in the given `suite` and invoke\n * the callback `fn()` when complete.\n *\n * @param {Suite} suite\n * @param {Function} fn\n * @api private\n */\n\nRunner.prototype.runTests = function(suite, fn){\n  var self = this\n    , tests = suite.tests.slice()\n    , test;\n\n\n  function hookErr(err, errSuite, after) {\n    // before/after Each hook for errSuite failed:\n    var orig = self.suite;\n\n    // for failed 'after each' hook start from errSuite parent,\n    // otherwise start from errSuite itself\n    self.suite = after ? errSuite.parent : errSuite;\n\n    if (self.suite) {\n      // call hookUp afterEach\n      self.hookUp('afterEach', function(err2, errSuite2) {\n        self.suite = orig;\n        // some hooks may fail even now\n        if (err2) return hookErr(err2, errSuite2, true);\n        // report error suite\n        fn(errSuite);\n      });\n    } else {\n      // there is no need calling other 'after each' hooks\n      self.suite = orig;\n      fn(errSuite);\n    }\n  }\n\n  function next(err, errSuite) {\n    // if we bail after first err\n    if (self.failures && suite._bail) return fn();\n\n    if (self._abort) return fn();\n\n    if (err) return hookErr(err, errSuite, true);\n\n    // next test\n    test = tests.shift();\n\n    // all done\n    if (!test) return fn();\n\n    // grep\n    var match = self._grep.test(test.fullTitle());\n    if (self._invert) match = !match;\n    if (!match) return next();\n\n    // pending\n    if (test.pending) {\n      self.emit('pending', test);\n      self.emit('test end', test);\n      return next();\n    }\n\n    // execute test and hook(s)\n    self.emit('test', self.test = test);\n    self.hookDown('beforeEach', function(err, errSuite){\n\n      if (suite.pending) {\n        self.emit('pending', test);\n        self.emit('test end', test);\n        return next();\n      }\n      if (err) return hookErr(err, errSuite, false);\n\n      self.currentRunnable = self.test;\n      self.runTest(function(err){\n        test = self.test;\n\n        if (err) {\n          if (err instanceof Pending) {\n            self.emit('pending', test);\n          } else {\n            self.fail(test, err);\n          }\n          self.emit('test end', test);\n\n          if (err instanceof Pending) {\n            return next();\n          }\n\n          return self.hookUp('afterEach', next);\n        }\n\n        test.state = 'passed';\n        self.emit('pass', test);\n        self.emit('test end', test);\n        self.hookUp('afterEach', next);\n      });\n    });\n  }\n\n  this.next = next;\n  next();\n};\n\n/**\n * Run the given `suite` and invoke the\n * callback `fn()` when complete.\n *\n * @param {Suite} suite\n * @param {Function} fn\n * @api private\n */\n\nRunner.prototype.runSuite = function(suite, fn){\n  var total = this.grepTotal(suite)\n    , self = this\n    , i = 0;\n\n  debug('run suite %s', suite.fullTitle());\n\n  if (!total) return fn();\n\n  this.emit('suite', this.suite = suite);\n\n  function next(errSuite) {\n    if (errSuite) {\n      // current suite failed on a hook from errSuite\n      if (errSuite == suite) {\n        // if errSuite is current suite\n        // continue to the next sibling suite\n        return done();\n      } else {\n        // errSuite is among the parents of current suite\n        // stop execution of errSuite and all sub-suites\n        return done(errSuite);\n      }\n    }\n\n    if (self._abort) return done();\n\n    var curr = suite.suites[i++];\n    if (!curr) return done();\n    self.runSuite(curr, next);\n  }\n\n  function done(errSuite) {\n    self.suite = suite;\n    self.hook('afterAll', function(){\n      self.emit('suite end', suite);\n      fn(errSuite);\n    });\n  }\n\n  this.hook('beforeAll', function(err){\n    if (err) return done();\n    self.runTests(suite, next);\n  });\n};\n\n/**\n * Handle uncaught exceptions.\n *\n * @param {Error} err\n * @api private\n */\n\nRunner.prototype.uncaught = function(err){\n  if (err) {\n    debug('uncaught exception %s', err !== function () {\n      return this;\n    }.call(err) ? err : ( err.message || err ));\n  } else {\n    debug('uncaught undefined exception');\n    err = utils.undefinedError();\n  }\n  err.uncaught = true;\n\n  var runnable = this.currentRunnable;\n  if (!runnable) return;\n\n  runnable.clearTimeout();\n\n  // Ignore errors if complete\n  if (runnable.state) return;\n  this.fail(runnable, err);\n\n  // recover from test\n  if ('test' == runnable.type) {\n    this.emit('test end', runnable);\n    this.hookUp('afterEach', this.next);\n    return;\n  }\n\n  // bail on hooks\n  this.emit('end');\n};\n\n/**\n * Run the root suite and invoke `fn(failures)`\n * on completion.\n *\n * @param {Function} fn\n * @return {Runner} for chaining\n * @api public\n */\n\nRunner.prototype.run = function(fn){\n  var self = this,\n    rootSuite = this.suite;\n\n  fn = fn || function(){};\n\n  function uncaught(err){\n    self.uncaught(err);\n  }\n\n  function start() {\n    self.emit('start');\n    self.runSuite(rootSuite, function(){\n      debug('finished running');\n      self.emit('end');\n    });\n  }\n\n  debug('start');\n\n  // callback\n  this.on('end', function(){\n    debug('end');\n    process.removeListener('uncaughtException', uncaught);\n    fn(self.failures);\n  });\n\n  // uncaught exception\n  process.on('uncaughtException', uncaught);\n\n  if (this._delay) {\n    // for reporters, I guess.\n    // might be nice to debounce some dots while we wait.\n    this.emit('waiting', rootSuite);\n    rootSuite.once('run', start);\n  }\n  else {\n    start();\n  }\n\n  return this;\n};\n\n/**\n * Cleanly abort execution\n *\n * @return {Runner} for chaining\n * @api public\n */\nRunner.prototype.abort = function(){\n  debug('aborting');\n  this._abort = true;\n};\n\n/**\n * Filter leaks with the given globals flagged as `ok`.\n *\n * @param {Array} ok\n * @param {Array} globals\n * @return {Array}\n * @api private\n */\n\nfunction filterLeaks(ok, globals) {\n  return filter(globals, function(key){\n    // Firefox and Chrome exposes iframes as index inside the window object\n    if (/^d+/.test(key)) return false;\n\n    // in firefox\n    // if runner runs in an iframe, this iframe's window.getInterface method not init at first\n    // it is assigned in some seconds\n    if (global.navigator && /^getInterface/.test(key)) return false;\n\n    // an iframe could be approached by window[iframeIndex]\n    // in ie6,7,8 and opera, iframeIndex is enumerable, this could cause leak\n    if (global.navigator && /^\\d+/.test(key)) return false;\n\n    // Opera and IE expose global variables for HTML element IDs (issue #243)\n    if (/^mocha-/.test(key)) return false;\n\n    var matched = filter(ok, function(ok){\n      if (~ok.indexOf('*')) return 0 == key.indexOf(ok.split('*')[0]);\n      return key == ok;\n    });\n    return matched.length == 0 && (!global.navigator || 'onerror' !== key);\n  });\n}\n\n/**\n * Array of globals dependent on the environment.\n *\n * @return {Array}\n * @api private\n */\n\n function extraGlobals() {\n  if (typeof(process) === 'object' &&\n      typeof(process.version) === 'string') {\n\n    var nodeVersion = process.version.split('.').reduce(function(a, v) {\n      return a << 8 | v;\n    });\n\n    // 'errno' was renamed to process._errno in v0.9.11.\n\n    if (nodeVersion < 0x00090B) {\n      return ['errno'];\n    }\n  }\n\n  return [];\n }\n\n}); // module: runner.js\n\nrequire.register(\"suite.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar EventEmitter = require('browser/events').EventEmitter\n  , debug = require('browser/debug')('mocha:suite')\n  , milliseconds = require('./ms')\n  , utils = require('./utils')\n  , Hook = require('./hook');\n\n/**\n * Expose `Suite`.\n */\n\nexports = module.exports = Suite;\n\n/**\n * Create a new `Suite` with the given `title`\n * and parent `Suite`. When a suite with the\n * same title is already present, that suite\n * is returned to provide nicer reporter\n * and more flexible meta-testing.\n *\n * @param {Suite} parent\n * @param {String} title\n * @return {Suite}\n * @api public\n */\n\nexports.create = function(parent, title){\n  var suite = new Suite(title, parent.ctx);\n  suite.parent = parent;\n  if (parent.pending) suite.pending = true;\n  title = suite.fullTitle();\n  parent.addSuite(suite);\n  return suite;\n};\n\n/**\n * Initialize a new `Suite` with the given\n * `title` and `ctx`.\n *\n * @param {String} title\n * @param {Context} ctx\n * @api private\n */\n\nfunction Suite(title, parentContext) {\n  this.title = title;\n  var context = function() {};\n  context.prototype = parentContext;\n  this.ctx = new context();\n  this.suites = [];\n  this.tests = [];\n  this.pending = false;\n  this._beforeEach = [];\n  this._beforeAll = [];\n  this._afterEach = [];\n  this._afterAll = [];\n  this.root = !title;\n  this._timeout = 2000;\n  this._enableTimeouts = true;\n  this._slow = 75;\n  this._bail = false;\n  this.delayed = false;\n}\n\n/**\n * Inherit from `EventEmitter.prototype`.\n */\n\nfunction F(){};\nF.prototype = EventEmitter.prototype;\nSuite.prototype = new F;\nSuite.prototype.constructor = Suite;\n\n\n/**\n * Return a clone of this `Suite`.\n *\n * @return {Suite}\n * @api private\n */\n\nSuite.prototype.clone = function(){\n  var suite = new Suite(this.title);\n  debug('clone');\n  suite.ctx = this.ctx;\n  suite.timeout(this.timeout());\n  suite.enableTimeouts(this.enableTimeouts());\n  suite.slow(this.slow());\n  suite.bail(this.bail());\n  return suite;\n};\n\n/**\n * Set timeout `ms` or short-hand such as \"2s\".\n *\n * @param {Number|String} ms\n * @return {Suite|Number} for chaining\n * @api private\n */\n\nSuite.prototype.timeout = function(ms){\n  if (0 == arguments.length) return this._timeout;\n  if (ms.toString() === '0') this._enableTimeouts = false;\n  if ('string' == typeof ms) ms = milliseconds(ms);\n  debug('timeout %d', ms);\n  this._timeout = parseInt(ms, 10);\n  return this;\n};\n\n/**\n  * Set timeout `enabled`.\n  *\n  * @param {Boolean} enabled\n  * @return {Suite|Boolean} self or enabled\n  * @api private\n  */\n\nSuite.prototype.enableTimeouts = function(enabled){\n  if (arguments.length === 0) return this._enableTimeouts;\n  debug('enableTimeouts %s', enabled);\n  this._enableTimeouts = enabled;\n  return this;\n};\n\n/**\n * Set slow `ms` or short-hand such as \"2s\".\n *\n * @param {Number|String} ms\n * @return {Suite|Number} for chaining\n * @api private\n */\n\nSuite.prototype.slow = function(ms){\n  if (0 === arguments.length) return this._slow;\n  if ('string' == typeof ms) ms = milliseconds(ms);\n  debug('slow %d', ms);\n  this._slow = ms;\n  return this;\n};\n\n/**\n * Sets whether to bail after first error.\n *\n * @param {Boolean} bail\n * @return {Suite|Number} for chaining\n * @api private\n */\n\nSuite.prototype.bail = function(bail){\n  if (0 == arguments.length) return this._bail;\n  debug('bail %s', bail);\n  this._bail = bail;\n  return this;\n};\n\n/**\n * Run `fn(test[, done])` before running tests.\n *\n * @param {Function} fn\n * @return {Suite} for chaining\n * @api private\n */\n\nSuite.prototype.beforeAll = function(title, fn){\n  if (this.pending) return this;\n  if ('function' === typeof title) {\n    fn = title;\n    title = fn.name;\n  }\n  title = '\"before all\" hook' + (title ? ': ' + title : '');\n\n  var hook = new Hook(title, fn);\n  hook.parent = this;\n  hook.timeout(this.timeout());\n  hook.enableTimeouts(this.enableTimeouts());\n  hook.slow(this.slow());\n  hook.ctx = this.ctx;\n  this._beforeAll.push(hook);\n  this.emit('beforeAll', hook);\n  return this;\n};\n\n/**\n * Run `fn(test[, done])` after running tests.\n *\n * @param {Function} fn\n * @return {Suite} for chaining\n * @api private\n */\n\nSuite.prototype.afterAll = function(title, fn){\n  if (this.pending) return this;\n  if ('function' === typeof title) {\n    fn = title;\n    title = fn.name;\n  }\n  title = '\"after all\" hook' + (title ? ': ' + title : '');\n\n  var hook = new Hook(title, fn);\n  hook.parent = this;\n  hook.timeout(this.timeout());\n  hook.enableTimeouts(this.enableTimeouts());\n  hook.slow(this.slow());\n  hook.ctx = this.ctx;\n  this._afterAll.push(hook);\n  this.emit('afterAll', hook);\n  return this;\n};\n\n/**\n * Run `fn(test[, done])` before each test case.\n *\n * @param {Function} fn\n * @return {Suite} for chaining\n * @api private\n */\n\nSuite.prototype.beforeEach = function(title, fn){\n  if (this.pending) return this;\n  if ('function' === typeof title) {\n    fn = title;\n    title = fn.name;\n  }\n  title = '\"before each\" hook' + (title ? ': ' + title : '');\n\n  var hook = new Hook(title, fn);\n  hook.parent = this;\n  hook.timeout(this.timeout());\n  hook.enableTimeouts(this.enableTimeouts());\n  hook.slow(this.slow());\n  hook.ctx = this.ctx;\n  this._beforeEach.push(hook);\n  this.emit('beforeEach', hook);\n  return this;\n};\n\n/**\n * Run `fn(test[, done])` after each test case.\n *\n * @param {Function} fn\n * @return {Suite} for chaining\n * @api private\n */\n\nSuite.prototype.afterEach = function(title, fn){\n  if (this.pending) return this;\n  if ('function' === typeof title) {\n    fn = title;\n    title = fn.name;\n  }\n  title = '\"after each\" hook' + (title ? ': ' + title : '');\n\n  var hook = new Hook(title, fn);\n  hook.parent = this;\n  hook.timeout(this.timeout());\n  hook.enableTimeouts(this.enableTimeouts());\n  hook.slow(this.slow());\n  hook.ctx = this.ctx;\n  this._afterEach.push(hook);\n  this.emit('afterEach', hook);\n  return this;\n};\n\n/**\n * Add a test `suite`.\n *\n * @param {Suite} suite\n * @return {Suite} for chaining\n * @api private\n */\n\nSuite.prototype.addSuite = function(suite){\n  suite.parent = this;\n  suite.timeout(this.timeout());\n  suite.enableTimeouts(this.enableTimeouts());\n  suite.slow(this.slow());\n  suite.bail(this.bail());\n  this.suites.push(suite);\n  this.emit('suite', suite);\n  return this;\n};\n\n/**\n * Add a `test` to this suite.\n *\n * @param {Test} test\n * @return {Suite} for chaining\n * @api private\n */\n\nSuite.prototype.addTest = function(test){\n  test.parent = this;\n  test.timeout(this.timeout());\n  test.enableTimeouts(this.enableTimeouts());\n  test.slow(this.slow());\n  test.ctx = this.ctx;\n  this.tests.push(test);\n  this.emit('test', test);\n  return this;\n};\n\n/**\n * Return the full title generated by recursively\n * concatenating the parent's full title.\n *\n * @return {String}\n * @api public\n */\n\nSuite.prototype.fullTitle = function(){\n  if (this.parent) {\n    var full = this.parent.fullTitle();\n    if (full) return full + ' ' + this.title;\n  }\n  return this.title;\n};\n\n/**\n * Return the total number of tests.\n *\n * @return {Number}\n * @api public\n */\n\nSuite.prototype.total = function(){\n  return utils.reduce(this.suites, function(sum, suite){\n    return sum + suite.total();\n  }, 0) + this.tests.length;\n};\n\n/**\n * Iterates through each suite recursively to find\n * all tests. Applies a function in the format\n * `fn(test)`.\n *\n * @param {Function} fn\n * @return {Suite}\n * @api private\n */\n\nSuite.prototype.eachTest = function(fn){\n  utils.forEach(this.tests, fn);\n  utils.forEach(this.suites, function(suite){\n    suite.eachTest(fn);\n  });\n  return this;\n};\n\n/**\n * This will run the root suite if we happen to be running in delayed mode.\n */\nSuite.prototype.run = function run() {\n  if (this.root) {\n    this.emit('run');\n  }\n};\n\n}); // module: suite.js\n\nrequire.register(\"test.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar Runnable = require('./runnable');\n\n/**\n * Expose `Test`.\n */\n\nmodule.exports = Test;\n\n/**\n * Initialize a new `Test` with the given `title` and callback `fn`.\n *\n * @param {String} title\n * @param {Function} fn\n * @api private\n */\n\nfunction Test(title, fn) {\n  Runnable.call(this, title, fn);\n  this.pending = !fn;\n  this.type = 'test';\n}\n\n/**\n * Inherit from `Runnable.prototype`.\n */\n\nfunction F(){};\nF.prototype = Runnable.prototype;\nTest.prototype = new F;\nTest.prototype.constructor = Test;\n\n\n}); // module: test.js\n\nrequire.register(\"utils.js\", function(module, exports, require){\n/**\n * Module dependencies.\n */\n\nvar fs = require('browser/fs')\n  , path = require('browser/path')\n  , basename = path.basename\n  , exists = fs.existsSync || path.existsSync\n  , glob = require('browser/glob')\n  , join = path.join\n  , debug = require('browser/debug')('mocha:watch');\n\n/**\n * Ignored directories.\n */\n\nvar ignore = ['node_modules', '.git'];\n\n/**\n * Escape special characters in the given string of html.\n *\n * @param  {String} html\n * @return {String}\n * @api private\n */\n\nexports.escape = function(html){\n  return String(html)\n    .replace(/&/g, '&amp;')\n    .replace(/\"/g, '&quot;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;');\n};\n\n/**\n * Array#forEach (<=IE8)\n *\n * @param {Array} array\n * @param {Function} fn\n * @param {Object} scope\n * @api private\n */\n\nexports.forEach = function(arr, fn, scope){\n  for (var i = 0, l = arr.length; i < l; i++)\n    fn.call(scope, arr[i], i);\n};\n\n/**\n * Array#map (<=IE8)\n *\n * @param {Array} array\n * @param {Function} fn\n * @param {Object} scope\n * @api private\n */\n\nexports.map = function(arr, fn, scope){\n  var result = [];\n  for (var i = 0, l = arr.length; i < l; i++)\n    result.push(fn.call(scope, arr[i], i, arr));\n  return result;\n};\n\n/**\n * Array#indexOf (<=IE8)\n *\n * @parma {Array} arr\n * @param {Object} obj to find index of\n * @param {Number} start\n * @api private\n */\n\nexports.indexOf = function(arr, obj, start){\n  for (var i = start || 0, l = arr.length; i < l; i++) {\n    if (arr[i] === obj)\n      return i;\n  }\n  return -1;\n};\n\n/**\n * Array#reduce (<=IE8)\n *\n * @param {Array} array\n * @param {Function} fn\n * @param {Object} initial value\n * @api private\n */\n\nexports.reduce = function(arr, fn, val){\n  var rval = val;\n\n  for (var i = 0, l = arr.length; i < l; i++) {\n    rval = fn(rval, arr[i], i, arr);\n  }\n\n  return rval;\n};\n\n/**\n * Array#filter (<=IE8)\n *\n * @param {Array} array\n * @param {Function} fn\n * @api private\n */\n\nexports.filter = function(arr, fn){\n  var ret = [];\n\n  for (var i = 0, l = arr.length; i < l; i++) {\n    var val = arr[i];\n    if (fn(val, i, arr)) ret.push(val);\n  }\n\n  return ret;\n};\n\n/**\n * Object.keys (<=IE8)\n *\n * @param {Object} obj\n * @return {Array} keys\n * @api private\n */\n\nexports.keys = Object.keys || function(obj) {\n  var keys = []\n    , has = Object.prototype.hasOwnProperty; // for `window` on <=IE8\n\n  for (var key in obj) {\n    if (has.call(obj, key)) {\n      keys.push(key);\n    }\n  }\n\n  return keys;\n};\n\n/**\n * Watch the given `files` for changes\n * and invoke `fn(file)` on modification.\n *\n * @param {Array} files\n * @param {Function} fn\n * @api private\n */\n\nexports.watch = function(files, fn){\n  var options = { interval: 100 };\n  files.forEach(function(file){\n    debug('file %s', file);\n    fs.watchFile(file, options, function(curr, prev){\n      if (prev.mtime < curr.mtime) fn(file);\n    });\n  });\n};\n\n/**\n * Array.isArray (<=IE8)\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\nvar isArray = Array.isArray || function (obj) {\n  return '[object Array]' == {}.toString.call(obj);\n};\n\n/**\n * @description\n * Buffer.prototype.toJSON polyfill\n * @type {Function}\n */\nif(typeof Buffer !== 'undefined' && Buffer.prototype) {\n  Buffer.prototype.toJSON = Buffer.prototype.toJSON || function () {\n    return Array.prototype.slice.call(this, 0);\n  };\n}\n\n/**\n * Ignored files.\n */\n\nfunction ignored(path){\n  return !~ignore.indexOf(path);\n}\n\n/**\n * Lookup files in the given `dir`.\n *\n * @return {Array}\n * @api private\n */\n\nexports.files = function(dir, ext, ret){\n  ret = ret || [];\n  ext = ext || ['js'];\n\n  var re = new RegExp('\\\\.(' + ext.join('|') + ')$');\n\n  fs.readdirSync(dir)\n    .filter(ignored)\n    .forEach(function(path){\n      path = join(dir, path);\n      if (fs.statSync(path).isDirectory()) {\n        exports.files(path, ext, ret);\n      } else if (path.match(re)) {\n        ret.push(path);\n      }\n    });\n\n  return ret;\n};\n\n/**\n * Compute a slug from the given `str`.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nexports.slug = function(str){\n  return str\n    .toLowerCase()\n    .replace(/ +/g, '-')\n    .replace(/[^-\\w]/g, '');\n};\n\n/**\n * Strip the function definition from `str`,\n * and re-indent for pre whitespace.\n */\n\nexports.clean = function(str) {\n  str = str\n    .replace(/\\r\\n?|[\\n\\u2028\\u2029]/g, \"\\n\").replace(/^\\uFEFF/, '')\n    .replace(/^function *\\(.*\\) *{|\\(.*\\) *=> *{?/, '')\n    .replace(/\\s+\\}$/, '');\n\n  var spaces = str.match(/^\\n?( *)/)[1].length\n    , tabs = str.match(/^\\n?(\\t*)/)[1].length\n    , re = new RegExp('^\\n?' + (tabs ? '\\t' : ' ') + '{' + (tabs ? tabs : spaces) + '}', 'gm');\n\n  str = str.replace(re, '');\n\n  return exports.trim(str);\n};\n\n/**\n * Trim the given `str`.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nexports.trim = function(str){\n  return str.replace(/^\\s+|\\s+$/g, '');\n};\n\n/**\n * Parse the given `qs`.\n *\n * @param {String} qs\n * @return {Object}\n * @api private\n */\n\nexports.parseQuery = function(qs){\n  return exports.reduce(qs.replace('?', '').split('&'), function(obj, pair){\n    var i = pair.indexOf('=')\n      , key = pair.slice(0, i)\n      , val = pair.slice(++i);\n\n    obj[key] = decodeURIComponent(val);\n    return obj;\n  }, {});\n};\n\n/**\n * Highlight the given string of `js`.\n *\n * @param {String} js\n * @return {String}\n * @api private\n */\n\nfunction highlight(js) {\n  return js\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\\/\\/(.*)/gm, '<span class=\"comment\">//$1</span>')\n    .replace(/('.*?')/gm, '<span class=\"string\">$1</span>')\n    .replace(/(\\d+\\.\\d+)/gm, '<span class=\"number\">$1</span>')\n    .replace(/(\\d+)/gm, '<span class=\"number\">$1</span>')\n    .replace(/\\bnew[ \\t]+(\\w+)/gm, '<span class=\"keyword\">new</span> <span class=\"init\">$1</span>')\n    .replace(/\\b(function|new|throw|return|var|if|else)\\b/gm, '<span class=\"keyword\">$1</span>')\n}\n\n/**\n * Highlight the contents of tag `name`.\n *\n * @param {String} name\n * @api private\n */\n\nexports.highlightTags = function(name) {\n  var code = document.getElementById('mocha').getElementsByTagName(name);\n  for (var i = 0, len = code.length; i < len; ++i) {\n    code[i].innerHTML = highlight(code[i].innerHTML);\n  }\n};\n\n/**\n * If a value could have properties, and has none, this function is called, which returns\n * a string representation of the empty value.\n *\n * Functions w/ no properties return `'[Function]'`\n * Arrays w/ length === 0 return `'[]'`\n * Objects w/ no properties return `'{}'`\n * All else: return result of `value.toString()`\n *\n * @param {*} value Value to inspect\n * @param {string} [type] The type of the value, if known.\n * @returns {string}\n */\nvar emptyRepresentation = function emptyRepresentation(value, type) {\n  type = type || exports.type(value);\n\n  switch(type) {\n    case 'function':\n      return '[Function]';\n    case 'object':\n      return '{}';\n    case 'array':\n      return '[]';\n    default:\n      return value.toString();\n  }\n};\n\n/**\n * Takes some variable and asks `{}.toString()` what it thinks it is.\n * @param {*} value Anything\n * @example\n * type({}) // 'object'\n * type([]) // 'array'\n * type(1) // 'number'\n * type(false) // 'boolean'\n * type(Infinity) // 'number'\n * type(null) // 'null'\n * type(new Date()) // 'date'\n * type(/foo/) // 'regexp'\n * type('type') // 'string'\n * type(global) // 'global'\n * @api private\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/toString\n * @returns {string}\n */\nexports.type = function type(value) {\n  if (typeof Buffer !== 'undefined' && Buffer.isBuffer(value)) {\n    return 'buffer';\n  }\n  return Object.prototype.toString.call(value)\n    .replace(/^\\[.+\\s(.+?)\\]$/, '$1')\n    .toLowerCase();\n};\n\n/**\n * @summary Stringify `value`.\n * @description Different behavior depending on type of value.\n * - If `value` is undefined or null, return `'[undefined]'` or `'[null]'`, respectively.\n * - If `value` is not an object, function or array, return result of `value.toString()` wrapped in double-quotes.\n * - If `value` is an *empty* object, function, or array, return result of function\n *   {@link emptyRepresentation}.\n * - If `value` has properties, call {@link exports.canonicalize} on it, then return result of\n *   JSON.stringify().\n *\n * @see exports.type\n * @param {*} value\n * @return {string}\n * @api private\n */\n\nexports.stringify = function(value) {\n  var type = exports.type(value);\n\n  if (!~exports.indexOf(['object', 'array', 'function'], type)) {\n    if(type != 'buffer') {\n      return jsonStringify(value);\n    }\n    var json = value.toJSON();\n    // Based on the toJSON result\n    return jsonStringify(json.data && json.type ? json.data : json, 2)\n      .replace(/,(\\n|$)/g, '$1');\n  }\n\n  for (var prop in value) {\n    if (Object.prototype.hasOwnProperty.call(value, prop)) {\n      return jsonStringify(exports.canonicalize(value), 2).replace(/,(\\n|$)/g, '$1');\n    }\n  }\n\n  return emptyRepresentation(value, type);\n};\n\n/**\n * @description\n * like JSON.stringify but more sense.\n * @param {Object}  object\n * @param {Number=} spaces\n * @param {number=} depth\n * @returns {*}\n * @private\n */\nfunction jsonStringify(object, spaces, depth) {\n  if(typeof spaces == 'undefined') return _stringify(object);  // primitive types\n\n  depth = depth || 1;\n  var space = spaces * depth\n    , str = isArray(object) ? '[' : '{'\n    , end = isArray(object) ? ']' : '}'\n    , length = object.length || exports.keys(object).length\n    , repeat = function(s, n) { return new Array(n).join(s); }; // `.repeat()` polyfill\n\n  function _stringify(val) {\n    switch (exports.type(val)) {\n      case 'null':\n      case 'undefined':\n        val = '[' + val + ']';\n        break;\n      case 'array':\n      case 'object':\n        val = jsonStringify(val, spaces, depth + 1);\n        break;\n      case 'boolean':\n      case 'regexp':\n      case 'number':\n        val = val === 0 && (1/val) === -Infinity // `-0`\n          ? '-0'\n          : val.toString();\n        break;\n      case 'date':\n        val = '[Date: ' + val.toISOString() + ']';\n        break;\n      case 'buffer':\n        var json = val.toJSON();\n        // Based on the toJSON result\n        json = json.data && json.type ? json.data : json;\n        val = '[Buffer: ' + jsonStringify(json, 2, depth + 1) + ']';\n        break;\n      default:\n        val = (val == '[Function]' || val == '[Circular]')\n          ? val\n          : '\"' + val + '\"'; //string\n    }\n    return val;\n  }\n\n  for(var i in object) {\n    if(!object.hasOwnProperty(i)) continue;        // not my business\n    --length;\n    str += '\\n ' + repeat(' ', space)\n      + (isArray(object) ? '' : '\"' + i + '\": ') // key\n      +  _stringify(object[i])                   // value\n      + (length ? ',' : '');                     // comma\n  }\n\n  return str + (str.length != 1                    // [], {}\n    ? '\\n' + repeat(' ', --space) + end\n    : end);\n}\n\n/**\n * Return if obj is a Buffer\n * @param {Object} arg\n * @return {Boolean}\n * @api private\n */\nexports.isBuffer = function (arg) {\n  return typeof Buffer !== 'undefined' && Buffer.isBuffer(arg);\n};\n\n/**\n * @summary Return a new Thing that has the keys in sorted order.  Recursive.\n * @description If the Thing...\n * - has already been seen, return string `'[Circular]'`\n * - is `undefined`, return string `'[undefined]'`\n * - is `null`, return value `null`\n * - is some other primitive, return the value\n * - is not a primitive or an `Array`, `Object`, or `Function`, return the value of the Thing's `toString()` method\n * - is a non-empty `Array`, `Object`, or `Function`, return the result of calling this function again.\n * - is an empty `Array`, `Object`, or `Function`, return the result of calling `emptyRepresentation()`\n *\n * @param {*} value Thing to inspect.  May or may not have properties.\n * @param {Array} [stack=[]] Stack of seen values\n * @return {(Object|Array|Function|string|undefined)}\n * @see {@link exports.stringify}\n * @api private\n */\n\nexports.canonicalize = function(value, stack) {\n  var canonicalizedObj,\n    type = exports.type(value),\n    prop,\n    withStack = function withStack(value, fn) {\n      stack.push(value);\n      fn();\n      stack.pop();\n    };\n\n  stack = stack || [];\n\n  if (exports.indexOf(stack, value) !== -1) {\n    return '[Circular]';\n  }\n\n  switch(type) {\n    case 'undefined':\n    case 'buffer':\n    case 'null':\n      canonicalizedObj = value;\n      break;\n    case 'array':\n      withStack(value, function () {\n        canonicalizedObj = exports.map(value, function (item) {\n          return exports.canonicalize(item, stack);\n        });\n      });\n      break;\n    case 'function':\n      for (prop in value) {\n        canonicalizedObj = {};\n        break;\n      }\n      if (!canonicalizedObj) {\n        canonicalizedObj = emptyRepresentation(value, type);\n        break;\n      }\n    /* falls through */\n    case 'object':\n      canonicalizedObj = canonicalizedObj || {};\n      withStack(value, function () {\n        exports.forEach(exports.keys(value).sort(), function (key) {\n          canonicalizedObj[key] = exports.canonicalize(value[key], stack);\n        });\n      });\n      break;\n    case 'date':\n    case 'number':\n    case 'regexp':\n    case 'boolean':\n      canonicalizedObj = value;\n      break;\n    default:\n      canonicalizedObj = value.toString();\n  }\n\n  return canonicalizedObj;\n};\n\n/**\n * Lookup file names at the given `path`.\n */\nexports.lookupFiles = function lookupFiles(path, extensions, recursive) {\n  var files = [];\n  var re = new RegExp('\\\\.(' + extensions.join('|') + ')$');\n\n  if (!exists(path)) {\n    if (exists(path + '.js')) {\n      path += '.js';\n    } else {\n      files = glob.sync(path);\n      if (!files.length) throw new Error(\"cannot resolve path (or pattern) '\" + path + \"'\");\n      return files;\n    }\n  }\n\n  try {\n    var stat = fs.statSync(path);\n    if (stat.isFile()) return path;\n  }\n  catch (ignored) {\n    return;\n  }\n\n  fs.readdirSync(path).forEach(function(file) {\n    file = join(path, file);\n    try {\n      var stat = fs.statSync(file);\n      if (stat.isDirectory()) {\n        if (recursive) {\n          files = files.concat(lookupFiles(file, extensions, recursive));\n        }\n        return;\n      }\n    }\n    catch (ignored) {\n      return;\n    }\n    if (!stat.isFile() || !re.test(file) || basename(file)[0] === '.') return;\n    files.push(file);\n  });\n\n  return files;\n};\n\n/**\n * Generate an undefined error with a message warning the user.\n *\n * @return {Error}\n */\n\nexports.undefinedError = function() {\n  return new Error('Caught undefined error, did you throw without specifying what?');\n};\n\n/**\n * Generate an undefined error if `err` is not defined.\n *\n * @param {Error} err\n * @return {Error}\n */\n\nexports.getError = function(err) {\n  return err || exports.undefinedError();\n};\n\n\n}); // module: utils.js\n// The global object is \"self\" in Web Workers.\nvar global = (function() { return this; })();\n\n/**\n * Save timer references to avoid Sinon interfering (see GH-237).\n */\n\nvar Date = global.Date;\nvar setTimeout = global.setTimeout;\nvar setInterval = global.setInterval;\nvar clearTimeout = global.clearTimeout;\nvar clearInterval = global.clearInterval;\n\n/**\n * Node shims.\n *\n * These are meant only to allow\n * mocha.js to run untouched, not\n * to allow running node code in\n * the browser.\n */\n\nvar process = {};\nprocess.exit = function(status){};\nprocess.stdout = {};\n\nvar uncaughtExceptionHandlers = [];\n\nvar originalOnerrorHandler = global.onerror;\n\n/**\n * Remove uncaughtException listener.\n * Revert to original onerror handler if previously defined.\n */\n\nprocess.removeListener = function(e, fn){\n  if ('uncaughtException' == e) {\n    if (originalOnerrorHandler) {\n      global.onerror = originalOnerrorHandler;\n    } else {\n      global.onerror = function() {};\n    }\n    var i = Mocha.utils.indexOf(uncaughtExceptionHandlers, fn);\n    if (i != -1) { uncaughtExceptionHandlers.splice(i, 1); }\n  }\n};\n\n/**\n * Implements uncaughtException listener.\n */\n\nprocess.on = function(e, fn){\n  if ('uncaughtException' == e) {\n    global.onerror = function(err, url, line){\n      fn(new Error(err + ' (' + url + ':' + line + ')'));\n      return true;\n    };\n    uncaughtExceptionHandlers.push(fn);\n  }\n};\n\n/**\n * Expose mocha.\n */\n\nvar Mocha = global.Mocha = require('mocha'),\n    mocha = global.mocha = new Mocha({ reporter: 'html' });\n\n// The BDD UI is registered by default, but no UI will be functional in the\n// browser without an explicit call to the overridden `mocha.ui` (see below).\n// Ensure that this default UI does not expose its methods to the global scope.\nmocha.suite.removeAllListeners('pre-require');\n\nvar immediateQueue = []\n  , immediateTimeout;\n\nfunction timeslice() {\n  var immediateStart = new Date().getTime();\n  while (immediateQueue.length && (new Date().getTime() - immediateStart) < 100) {\n    immediateQueue.shift()();\n  }\n  if (immediateQueue.length) {\n    immediateTimeout = setTimeout(timeslice, 0);\n  } else {\n    immediateTimeout = null;\n  }\n}\n\n/**\n * High-performance override of Runner.immediately.\n */\n\nMocha.Runner.immediately = function(callback) {\n  immediateQueue.push(callback);\n  if (!immediateTimeout) {\n    immediateTimeout = setTimeout(timeslice, 0);\n  }\n};\n\n/**\n * Function to allow assertion libraries to throw errors directly into mocha.\n * This is useful when running tests in a browser because window.onerror will\n * only receive the 'message' attribute of the Error.\n */\nmocha.throwError = function(err) {\n  Mocha.utils.forEach(uncaughtExceptionHandlers, function (fn) {\n    fn(err);\n  });\n  throw err;\n};\n\n/**\n * Override ui to ensure that the ui functions are initialized.\n * Normally this would happen in Mocha.prototype.loadFiles.\n */\n\nmocha.ui = function(ui){\n  Mocha.prototype.ui.call(this, ui);\n  this.suite.emit('pre-require', global, null, this);\n  return this;\n};\n\n/**\n * Setup mocha with the given setting options.\n */\n\nmocha.setup = function(opts){\n  if ('string' == typeof opts) opts = { ui: opts };\n  for (var opt in opts) this[opt](opts[opt]);\n  return this;\n};\n\n/**\n * Run mocha, returning the Runner.\n */\n\nmocha.run = function(fn){\n  var options = mocha.options;\n  mocha.globals('location');\n\n  var query = Mocha.utils.parseQuery(global.location.search || '');\n  if (query.grep) mocha.grep(new RegExp(query.grep));\n  if (query.fgrep) mocha.grep(query.fgrep);\n  if (query.invert) mocha.invert();\n\n  return Mocha.prototype.run.call(mocha, function(err){\n    // The DOM Document is not available in Web Workers.\n    var document = global.document;\n    if (document && document.getElementById('mocha') && options.noHighlighting !== true) {\n      Mocha.utils.highlightTags('code');\n    }\n    if (fn) fn(err);\n  });\n};\n\n/**\n * Expose the process shim.\n */\n\nMocha.process = process;\n})();\n"
},function(t){!function(e){"use strict";t.exports=e}(function(t,e){"use strict";function n(t){return"function"==typeof t&&"function"==typeof t.getCall&&"function"==typeof t.calledWithExactly}function r(t){return 1===t?"once":2===t?"twice":3===t?"thrice":(t||0)+" times"}function i(t){return t&&n(t.proxy)}function o(t){if(!n(t._obj)&&!i(t._obj))throw new TypeError(e.inspect(t._obj)+" is not a spy or a call to a spy!")}function s(t,e,r,i,o){function s(e){return t.printf.apply(t,e)}var a=i?"always have ":"have ";return r=r||"",n(t.proxy)&&(t=t.proxy),{affirmative:function(){return s(["expected %n to "+a+e+r].concat(o))},negative:function(){return s(["expected %n to not "+a+e].concat(o))}}}function a(n,r,i){e.addProperty(t.Assertion.prototype,n,function(){o(this);var t=s(this._obj,r,i,!1);this.assert(this._obj[n],t.affirmative,t.negative)})}function u(n,i,a){e.addMethod(t.Assertion.prototype,n,function(t){o(this);var e=s(this._obj,i,a,!1,[r(t)]);this.assert(this._obj[n]===t,e.affirmative,e.negative)})}function c(t,n,r){return function(){o(this);var i="always"+t[0].toUpperCase()+t.substring(1),a=e.flag(this,"always")&&"function"==typeof this._obj[i],u=a?i:t,c=s(this._obj,n,r,a,p.call(arguments));this.assert(this._obj[u].apply(this._obj,arguments),c.affirmative,c.negative)}}function l(n,r,i){var o=c(n,r,i);e.addProperty(t.Assertion.prototype,n,o)}function h(n,r,i,o){var s=c(r,i,o);e.addMethod(t.Assertion.prototype,n,s)}function f(t,e,n){h(t,t,e,n)}var p=Array.prototype.slice;e.addProperty(t.Assertion.prototype,"always",function(){e.flag(this,"always",!0)}),a("called","been called"," at least once, but it was never called"),u("callCount","been called exactly %1",", but it was called %c%C"),a("calledOnce","been called exactly once",", but it was called %c%C"),a("calledTwice","been called exactly twice",", but it was called %c%C"),a("calledThrice","been called exactly thrice",", but it was called %c%C"),l("calledWithNew","been called with new"),f("calledBefore","been called before %1"),f("calledAfter","been called after %1"),f("calledOn","been called with %1 as this",", but it was called with %t instead"),f("calledWith","been called with arguments %*","%C"),f("calledWithExactly","been called with exact arguments %*","%C"),f("calledWithMatch","been called with arguments matching %*","%C"),f("returned","returned %1"),h("thrown","threw","thrown %1")})},function(t,e,n){"use strict";e.spy=n(171),e.stub=n(172),e.spyCall=n(170),e.mock=n(228),e.expectation=n(227),e.collection=n(225),e.sandbox=n(229),e.createStubInstance=n(335),e.match=n(79);var r=n(155);e.match.equal=r;var i=n(336);e.log=i.log,e.logError=i.logError,e.restore=n(337),e.format=n(156),e.assert=n(333),e.test=n(230),e.testCase=n(338);var o=n(55);e.wrapMethod=n(174),e.deepEqual=n(155),e.extend=n(64),e.functionToString=o.toString,e.create=o.create;var s=n(226);e.getConfig=s.getConfig,e.defaultConfig=s.defaultConfig,e.timesInWords=n(173),e.typeOf=n(231)},function(t,e,n){(function(e){"use strict";function r(t){for(var e=1,n=t.length;n>e;e++)if(!t[e-1].calledBefore(t[e])||!t[e].called)return!1;return!0}function i(t){return t.sort(function(t,e){var n=t.getCall(0),r=e.getCall(0),i=n&&n.callId||-1,o=r&&r.callId||-1;return o>i?-1:1})}function o(){for(var t,e=0,n=arguments.length;n>e;++e)t=arguments[e],t||c.fail("fake is not a spy"),"function"!=typeof t&&c.fail(t+" is not a function"),"function"!=typeof t.getCall&&c.fail(t+" is not stubbed")}function s(t,e){t=t||d;var n=t.fail||c.fail;n.call(t,e)}function a(t,e,n){2==arguments.length&&(n=e,e=t),c[t]=function(r){o(r);var i=p.call(arguments,1),a=!1;a="function"==typeof e?!e(r):"function"==typeof r[e]?!r[e].apply(r,i):!r[e],a?s(this,r.printf.apply(r,[n].concat(i))):c.pass(t)}}function u(t,e){return!t||/^fail/.test(e)?e:t+e.slice(0,1).toUpperCase()+e.slice(1)}var c,l=n(173),h=n(79),f=n(156),p=Array.prototype.slice,d="undefined"==typeof e?window:e;c={failException:"AssertError",fail:function(t){var e=new Error(t);throw e.name=this.failException||c.failException,e},pass:function(){},callOrder:function(){o.apply(null,arguments);var t="",e="";if(r(arguments))c.pass("callOrder");else{try{t=[].join.call(arguments,", ");for(var n=p.call(arguments),a=n.length;a;)n[--a].called||n.splice(a,1);e=i(n).join(", ")}catch(u){}s(this,"expected "+t+" to be called in order but were called as "+e)}},callCount:function(t,e){if(o(t),t.callCount!=e){var n="expected %n to be called "+l(e)+" but was called %c%C";s(this,t.printf(n))}else c.pass("callCount")},expose:function(t,e){if(!t)throw new TypeError("target is null or undefined");var n=e||{},r="undefined"==typeof n.prefix&&"assert"||n.prefix,i="undefined"==typeof n.includeFail||!!n.includeFail;for(var o in this)"expose"==o||!i&&/^(fail)/.test(o)||(t[u(r,o)]=this[o]);return t},match:function(t,e){var n=h(e);if(n.test(t))c.pass("match");else{var r=["expected value to match","    expected = "+f(e),"    actual = "+f(t)];s(this,r.join("\n"))}}},a("called","expected %n to have been called at least once but was never called"),a("notCalled",function(t){return!t.called},"expected %n to not have been called but was called %c%C"),a("calledOnce","expected %n to be called once but was called %c%C"),a("calledTwice","expected %n to be called twice but was called %c%C"),a("calledThrice","expected %n to be called thrice but was called %c%C"),a("calledOn","expected %n to be called with %1 as this but was called with %t"),a("alwaysCalledOn","expected %n to always be called with %1 as this but was called with %t"),a("calledWithNew","expected %n to be called with new"),a("alwaysCalledWithNew","expected %n to always be called with new"),a("calledWith","expected %n to be called with arguments %*%C"),a("calledWithMatch","expected %n to be called with match %*%C"),a("alwaysCalledWith","expected %n to always be called with arguments %*%C"),a("alwaysCalledWithMatch","expected %n to always be called with match %*%C"),a("calledWithExactly","expected %n to be called with exact arguments %*%C"),a("alwaysCalledWithExactly","expected %n to always be called with exact arguments %*%C"),a("neverCalledWith","expected %n to never be called with arguments %*%C"),a("neverCalledWithMatch","expected %n to never be called with match %*%C"),a("threw","%n did not throw exception%C"),a("alwaysThrew","%n did not always throw exception%C"),t.exports=c}).call(e,function(){return this}())},function(t,e,n){(function(e,r){"use strict";function i(t,e){return"string"==typeof t?(this.exception=new Error(e||""),this.exception.name=t):this.exception=t?t:new Error("Error"),this}function o(t,e){var n=t.callArgAt;if(0>n){for(var r=t.callArgProp,i=0,o=e.length;o>i;++i){if(!r&&"function"==typeof e[i])return e[i];if(r&&e[i]&&"function"==typeof e[i][r])return e[i][r]}return null}return e[n]}function s(t,e,n){if(t.callArgAt<0){var r;return r=t.callArgProp?u.getName(t.stub)+" expected to yield to '"+t.callArgProp+"', but no object with such a property was passed.":u.getName(t.stub)+" expected to yield, but no callback was passed.",n.length>0&&(r+=" Received ["+h.call(n,", ")+"]"),r}return"argument at index "+t.callArgAt+" is not a function: "+e}function a(t,e){if("number"==typeof t.callArgAt){var n=o(t,e);if("function"!=typeof n)throw new TypeError(s(t,n,e));t.callbackAsync?f(function(){n.apply(t.callbackContext,t.callbackArguments)}):n.apply(t.callbackContext,t.callbackArguments)}}var u=n(55),c=n(64),l=Array.prototype.slice,h=Array.prototype.join,f=function(){return"object"==typeof e&&"function"==typeof e.nextTick?e.nextTick:"function"==typeof r?r:function(t){setTimeout(t,0)}}(),p={create:function(t){var e=c({},p);return delete e.create,e.stub=t,e},isPresent:function(){return"number"==typeof this.callArgAt||this.exception||"number"==typeof this.returnArgAt||this.returnThis||this.returnValueDefined},invoke:function(t,e){if(a(this,e),this.exception)throw this.exception;return"number"==typeof this.returnArgAt?e[this.returnArgAt]:this.returnThis?t:this.returnValue},onCall:function(t){return this.stub.onCall(t)},onFirstCall:function(){return this.stub.onFirstCall()},onSecondCall:function(){return this.stub.onSecondCall()},onThirdCall:function(){return this.stub.onThirdCall()},withArgs:function(){throw new Error('Defining a stub by invoking "stub.onCall(...).withArgs(...)" is not supported. Use "stub.withArgs(...).onCall(...)" to define sequential behavior for calls with certain arguments.')},callsArg:function(t){if("number"!=typeof t)throw new TypeError("argument index is not number");return this.callArgAt=t,this.callbackArguments=[],this.callbackContext=void 0,this.callArgProp=void 0,this.callbackAsync=!1,this},callsArgOn:function(t,e){if("number"!=typeof t)throw new TypeError("argument index is not number");if("object"!=typeof e)throw new TypeError("argument context is not an object");return this.callArgAt=t,this.callbackArguments=[],this.callbackContext=e,this.callArgProp=void 0,this.callbackAsync=!1,this},callsArgWith:function(t){if("number"!=typeof t)throw new TypeError("argument index is not number");return this.callArgAt=t,this.callbackArguments=l.call(arguments,1),this.callbackContext=void 0,this.callArgProp=void 0,this.callbackAsync=!1,this},callsArgOnWith:function(t,e){if("number"!=typeof t)throw new TypeError("argument index is not number");if("object"!=typeof e)throw new TypeError("argument context is not an object");return this.callArgAt=t,this.callbackArguments=l.call(arguments,2),this.callbackContext=e,this.callArgProp=void 0,this.callbackAsync=!1,this},yields:function(){return this.callArgAt=-1,this.callbackArguments=l.call(arguments,0),this.callbackContext=void 0,this.callArgProp=void 0,this.callbackAsync=!1,this},yieldsOn:function(t){if("object"!=typeof t)throw new TypeError("argument context is not an object");return this.callArgAt=-1,this.callbackArguments=l.call(arguments,1),this.callbackContext=t,this.callArgProp=void 0,this.callbackAsync=!1,this},yieldsTo:function(t){return this.callArgAt=-1,this.callbackArguments=l.call(arguments,1),this.callbackContext=void 0,this.callArgProp=t,this.callbackAsync=!1,this},yieldsToOn:function(t,e){if("object"!=typeof e)throw new TypeError("argument context is not an object");return this.callArgAt=-1,this.callbackArguments=l.call(arguments,2),this.callbackContext=e,this.callArgProp=t,this.callbackAsync=!1,this},"throws":i,throwsException:i,returns:function(t){return this.returnValue=t,this.returnValueDefined=!0,this},returnsArg:function(t){if("number"!=typeof t)throw new TypeError("argument index is not number");return this.returnArgAt=t,this},returnsThis:function(){return this.returnThis=!0,this}};for(var d in p)p.hasOwnProperty(d)&&d.match(/^(callsArg|yields)/)&&!d.match(/Async/)&&(p[d+"Async"]=function(t){return function(){var e=this[t].apply(this,arguments);return this.callbackAsync=!0,e}}(d));t.exports=p}).call(e,n(12),n(163).setImmediate)},function(t,e,n){"use strict";var r=n(55),i=n(172);t.exports=function(t){if("function"!=typeof t)throw new TypeError("The constructor should be a function.");return i(r.create(t.prototype))}},function(t,e){"use strict";function n(){}function r(t,e){var i=t+" threw exception: ";n(i+"["+e.name+"] "+e.message),e.stack&&n(e.stack),r.setTimeout(function(){throw e.message=i+e.message,e},0)}var i=setTimeout;r.setTimeout=function(t,e){i(t,e)},e.log=n,e.logError=r},function(t){"use strict";function e(t){return"function"==typeof t&&"function"==typeof t.restore&&t.restore.sinon}t.exports=function(t){if(null!==t&&"object"==typeof t)for(var n in t)e(t[n])&&t[n].restore();else e(t)&&t.restore()}},function(t,e,n){"use strict";function r(t,e,n){return function(){e&&e.apply(this,arguments);var r,i;try{i=t.apply(this,arguments)}catch(o){r=o}if(n&&n.apply(this,arguments),r)throw r;return i}}function i(t,e){if(!t||"object"!=typeof t)throw new TypeError("sinon.testCase needs an object with test functions");e=e||"test";var n,i,s,a=new RegExp("^"+e),u={},c=t.setUp,l=t.tearDown;for(n in t)if(t.hasOwnProperty(n)){if(i=t[n],/^(setUp|tearDown)$/.test(n))continue;"function"==typeof i&&a.test(n)?(s=i,(c||l)&&(s=r(i,c,l)),u[n]=o(s)):u[n]=t[n]}return u}var o=n(230);t.exports=i},function(t,e,n){"use strict";var r=n(341);t.exports=function(){var t,e=Array.prototype.slice.call(arguments);t="string"==typeof e[0]?0:e.shift();var n=r.install(t||0,e);return n.restore=n.uninstall,n}},function(t,e,n){var r,i,o;(function(s){(!0&&n(242)&&function(s){i=[n(232)],r=s,o="function"==typeof r?r.apply(e,i):r,!(void 0!==o&&(t.exports=o))}||"object"==typeof t&&function(e){t.exports=e(n(232))}||function(t){this.formatio=t(this.samsam)})(function(t){"use strict";function e(t){if(!t)return"";if(t.displayName)return t.displayName;if(t.name)return t.name;var e=t.toString().match(/function\s+([^\(]+)/m);return e&&e[1]||""}function n(t,n){var r,i,o=e(n&&n.constructor),s=t.excludeConstructors||a.excludeConstructors||[];for(r=0,i=s.length;i>r;++r){if("string"==typeof s[r]&&s[r]===o)return"";if(s[r].test&&s[r].test(o))return""}return o}function r(t,e){if("object"!=typeof t)return!1;var n,r;for(n=0,r=e.length;r>n;++n)if(e[n]===t)return!0;return!1}function i(e,n,o,s){if("string"==typeof n){if(0===n.length)return"(empty string)";var a=e.quoteStrings,c="boolean"!=typeof a||a;return o||c?'"'+n+'"':n}if("function"==typeof n&&!(n instanceof RegExp))return i.func(n);if(o=o||[],r(n,o))return"[Circular]";if("[object Array]"===Object.prototype.toString.call(n))return i.array.call(e,n,o);if(!n)return String(1/n===-1/0?"-0":n);if(t.isElement(n))return i.element(n);if("function"==typeof n.toString&&n.toString!==Object.prototype.toString)return n.toString();var l,h;for(l=0,h=u.length;h>l;l++)if(n===u[l].object)return u[l].value;return i.object.call(e,n,o,s)}function o(t){for(var e in t)this[e]=t[e]}var a={excludeConstructors:["Object",/^.$/],quoteStrings:!0,limitChildrenCount:0},u=(Object.prototype.hasOwnProperty,[]);return"undefined"!=typeof s&&u.push({object:s,value:"[object global]"}),"undefined"!=typeof document&&u.push({object:document,value:"[object HTMLDocument]"}),"undefined"!=typeof window&&u.push({object:window,value:"[object Window]"}),i.func=function(t){return"function "+e(t)+"() {}"},i.array=function(t,e){e=e||[],e.push(t);var n,r,o=[];for(r=this.limitChildrenCount>0?Math.min(this.limitChildrenCount,t.length):t.length,n=0;r>n;++n)o.push(i(this,t[n],e));return r<t.length&&o.push("[... "+(t.length-r)+" more elements]"),"["+o.join(", ")+"]"},i.object=function(e,o,s){o=o||[],o.push(e),s=s||0;var a,u,c,l,h,f,p=[],d=t.keys(e).sort(),m=3;for(f=this.limitChildrenCount>0?Math.min(this.limitChildrenCount,d.length):d.length,l=0;f>l;++l)a=d[l],c=e[a],u=r(c,o)?"[Circular]":i(this,c,o,s+2),u=(/\s/.test(a)?'"'+a+'"':a)+": "+u,m+=u.length,p.push(u);var g=n(this,e),v=g?"["+g+"] ":"",y="";for(l=0,h=s;h>l;++l)y+=" ";return f<d.length&&p.push("[... "+(d.length-f)+" more elements]"),m+s>80?v+"{\n  "+y+p.join(",\n  "+y)+"\n"+y+"}":v+"{ "+p.join(", ")+" }"},i.element=function(t){var e,n,r,i,o,s=t.tagName.toLowerCase(),a=t.attributes,u=[];for(r=0,i=a.length;i>r;++r)e=a.item(r),n=e.nodeName.toLowerCase().replace("html:",""),o=e.nodeValue,("contenteditable"!==n||"inherit"!==o)&&o&&u.push(n+'="'+o+'"');var c="<"+s+(u.length>0?" ":""),l=t.innerHTML||"";l.length>20&&(l=l.substr(0,20)+"[...]");var h=c+u.join(" ")+">"+l+"</"+s+">";return h.replace(/ contentEditable="inherit"/,"")},o.prototype={functionName:e,configure:function(t){return new o(t)},constructorName:function(t){return n(this,t)},ascii:function(t,e,n){return i(this,t,e,n)}},o.prototype})}).call(e,function(){return this}())},function(module,exports,__webpack_require__){(function(setImmediate,clearImmediate,global){/**
	 * @author Christian Johansen (christian@cjohansen.no) and contributors
	 * @license BSD
	 *
	 * Copyright (c) 2010-2014 Christian Johansen
	 */
"use strict";function parseTime(t){if(!t)return 0;var e,n=t.split(":"),r=n.length,i=r,o=0;if(r>3||!/^(\d\d:){0,2}\d\d?$/.test(t))throw new Error("tick only understands numbers and 'h:m:s'");for(;i--;){if(e=parseInt(n[i],10),e>=60)throw new Error("Invalid time "+t);o+=e*Math.pow(60,r-i-1)}return 1e3*o}function getEpoch(t){if(!t)return 0;if("function"==typeof t.getTime)return t.getTime();if("number"==typeof t)return t;throw new TypeError("now should be milliseconds since UNIX epoch")}function inRange(t,e,n){return n&&n.callAt>=t&&n.callAt<=e}function mirrorDateProperties(t,e){e.now?t.now=function(){return t.clock.now}:delete t.now,e.toSource?t.toSource=function(){return e.toSource()}:delete t.toSource,t.toString=function(){return e.toString()},t.prototype=e.prototype,t.parse=e.parse,t.UTC=e.UTC,t.prototype.toUTCString=e.prototype.toUTCString;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function createDate(){function t(e,n,r,i,o,s,a){switch(arguments.length){case 0:return new NativeDate(t.clock.now);case 1:return new NativeDate(e);case 2:return new NativeDate(e,n);case 3:return new NativeDate(e,n,r);case 4:return new NativeDate(e,n,r,i);case 5:return new NativeDate(e,n,r,i,o);case 6:return new NativeDate(e,n,r,i,o,s);default:return new NativeDate(e,n,r,i,o,s,a)}}return mirrorDateProperties(t,NativeDate)}function addTimer(t,e){if("undefined"==typeof e.func)throw new Error("Callback must be provided to timer calls");return t.timers||(t.timers={}),e.id=id++,e.createdAt=t.now,e.callAt=t.now+(e.delay||0),t.timers[e.id]=e,addTimerReturnsObject?{id:e.id,ref:function(){},unref:function(){}}:e.id}function firstTimerInRange(t,e,n){var r=t.timers,i=null;for(var o in r)inRange(e,n,r[o])&&(!i||~compareTimers(i,r[o]))&&(i=r[o]);return i}function compareTimers(t,e){return t.callAt<e.callAt?-1:t.callAt>e.callAt?1:t.immediate&&!e.immediate?-1:!t.immediate&&e.immediate?1:t.createdAt<e.createdAt?-1:t.createdAt>e.createdAt?1:t.id<e.id?-1:t.id>e.id?1:void 0}function callTimer(clock,timer){"number"==typeof timer.interval?clock.timers[timer.id].callAt+=timer.interval:delete clock.timers[timer.id];try{"function"==typeof timer.func?timer.func.apply(null,timer.args):eval(timer.func)}catch(e){var exception=e}if(clock.timers[timer.id]){if(exception)throw exception}else if(exception)throw exception}function uninstall(t,e){for(var n,r=0,i=t.methods.length;i>r;r++)if(n=t.methods[r],e[n].hadOwnProperty)e[n]=t["_"+n];else try{delete e[n]}catch(o){}t.methods=[]}function hijackMethod(t,e,n){if(n[e].hadOwnProperty=Object.prototype.hasOwnProperty.call(t,e),n["_"+e]=t[e],"Date"==e){var r=mirrorDateProperties(n[e],t[e]);t[e]=r}else{t[e]=function(){return n[e].apply(n,arguments)};for(var i in n[e])n[e].hasOwnProperty(i)&&(t[e][i]=n[e][i])}t[e].clock=n}var timeoutResult=setTimeout(function(){},0),addTimerReturnsObject="object"==typeof timeoutResult;clearTimeout(timeoutResult);var NativeDate=Date,id=1,timers={setTimeout:setTimeout,clearTimeout:clearTimeout,setImmediate:"undefined"!=typeof setImmediate?setImmediate:void 0,clearImmediate:"undefined"!=typeof clearImmediate?clearImmediate:void 0,setInterval:setInterval,clearInterval:clearInterval,Date:Date},keys=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};exports.timers=timers;var createClock=exports.createClock=function(t){var e={now:getEpoch(t),timeouts:{},Date:createDate()};return e.Date.clock=e,e.setTimeout=function(t,n){return addTimer(e,{func:t,args:Array.prototype.slice.call(arguments,2),delay:n})},e.clearTimeout=function(t){t&&(e.timers||(e.timers=[]),"object"==typeof t&&(t=t.id),t in e.timers&&delete e.timers[t])},e.setInterval=function(t,n){return addTimer(e,{func:t,args:Array.prototype.slice.call(arguments,2),delay:n,interval:n})},e.clearInterval=function(t){e.clearTimeout(t)},e.setImmediate=function(t){return addTimer(e,{func:t,args:Array.prototype.slice.call(arguments,1),immediate:!0})},e.clearImmediate=function(t){e.clearTimeout(t)},e.tick=function(t){t="number"==typeof t?t:parseTime(t);for(var n,r=e.now,i=e.now+t,o=e.now,s=firstTimerInRange(e,r,i);s&&i>=r;){if(e.timers[s.id]){r=e.now=s.callAt;try{callTimer(e,s)}catch(a){n=n||a}}s=firstTimerInRange(e,o,i),o=r}if(e.now=i,n)throw n;return e.now},e.reset=function(){e.timers={}},e};exports.install=function(t,e,n){"number"==typeof t&&(n=e,e=t,t=null),t||(t=global);var r=createClock(e);r.uninstall=function(){uninstall(r,t)},r.methods=n||[],0===r.methods.length&&(r.methods=keys(timers));for(var i=0,o=r.methods.length;o>i;i++)hijackMethod(t,r.methods[i],r);return r}}).call(exports,__webpack_require__(163).setImmediate,__webpack_require__(163).clearImmediate,function(){return this}())},function(t,e,n){var r=n(300);"string"==typeof r&&(r=[[t.id,r,""]]);n(14)(r,{})},,,,,,,,,,function(t,e,n){var r=n(310);"string"==typeof r&&(r=[[t.id,r,""]]);n(14)(r,{})},function(t,e,n){var r=n(342);"string"==typeof r&&(r=[[t.id,r,""]]);n(14)(r,{})},,function(t,e,n){var r=n(352);"string"==typeof r&&(r=[[t.id,r,""]]);n(14)(r,{})},,,,function(t,e,n){n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";function r(t){a.call(this,t,{name:"AnalyserNode",numberOfInputs:1,numberOfOutputs:1,channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers"});var e=2048,n=function(){return this.fftSize>>1},r=-100,o=30,s=.8;i.defineAttribute(this,"fftSize",u,e,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"frequencyBinCount","readonly",n,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"minDecibels","number",r,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"maxDecibels","number",o,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"smoothingTimeConstant","number",s,function(t){throw new TypeError(i.formatter.concat(this,t))})}var i=n(5),o=n(24),s=n(4),a=n(15),u="enum { 32, 64, 128, 256, 512, 1024, 2048 }",c=function(){throw new TypeError("Illegal constructor: use audioContext.createAnalyser()")};i.inherits(c,a),i.inherits(r,c),r.exports=c,r.jsonAttrs=["fftSize","minDecibels","maxDecibels","smoothingTimeConstant"],c.prototype.getFloatFrequencyData=function(){var t=new o(this,"getFloatFrequencyData",[{name:"array",type:"Float32Array"}]);t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)})},c.prototype.getByteFrequencyData=function(){var t=new o(this,"getByteFrequencyData",[{name:"array",type:"Uint8Array"}]);t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)})},c.prototype.getByteTimeDomainData=function(){var t=new o(this,"getByteTimeDomainData",[{name:"array",type:"Uint8Array"}]);t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)})},t.exports=s.AnalyserNode=r},function(t,e,n){"use strict";function r(t){a.call(this,t,{name:"AudioBufferSourceNode",numberOfInputs:0,numberOfOutputs:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"});var e=null,n=new u(this,"playbackRate",1,0,1024),r=!1,o=0,s=0,c=null;i.defineAttribute(this,"buffer","AudioBuffer|null",e,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"playbackRate","readonly",n,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"loop","boolean",r,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"loopStart","number",o,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"loopEnd","number",s,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"onended","function|null",c,function(t){throw new TypeError(i.formatter.concat(this,t))}),Object.defineProperties(this,{$state:{get:function(){return this.$stateAtTime(this.context.currentTime)}}}),this._startTime=1/0,this._stopTime=1/0,this._firedOnEnded=!1}var i=n(5),o=n(24),s=n(4),a=n(15),u=n(65),c=n(178),l=function(){throw new TypeError("Illegal constructor: use audioContext.createBufferSource()")};i.inherits(l,a),i.inherits(r,l),r.exports=l,r.jsonAttrs=["buffer","playbackRate","loop","loopStart","loopEnd"],l.prototype.start=function(t){var e=new o(this,"start",[{name:"when",type:"optional number"},{name:"offset",type:"optional number"},{name:"duration",type:"optional number"}]);e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)}),e.assert(1/0===this._startTime,function(){throw new Error(e.form+"; cannot start more than once")}),this._startTime=i.defaults(t,0)},l.prototype.stop=function(t){var e=new o(this,"stop",[{name:"when",type:"optional number"}]);e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)}),e.assert(1/0!==this._startTime,function(){throw new Error(e.form+"; cannot call stop without calling start first")}),e.assert(1/0===this._stopTime,function(){throw new Error(e.form+"; cannot stop more than once")}),this._stopTime=t},r.prototype.$stateAtTime=function(t){if(t=i.toSeconds(t),1/0===this._startTime)return"UNSCHEDULED";if(t<this._startTime)return"SCHEDULED";var e=this._stopTime;return!this.loop&&this.buffer&&(e=Math.min(e,this._startTime+this.buffer.duration)),e>t?"PLAYING":"FINISHED"},r.prototype._process=function(){this._firedOnEnded||"FINISHED"!==this.$stateAtTime(this.context.currentTime)||(this.dispatchEvent(new c("ended",this)),this._firedOnEnded=!0)},t.exports=s.AudioBufferSourceNode=r},function(t,e,n){"use strict";function r(t){s.call(this,"audioprocess",t),Object.defineProperties(this,{$name:{value:"AudioProcessingEvent"},$node:{value:t}})}var i=n(5),o=n(4),s=n(178),a=function(){throw new TypeError("Illegal constructor")};i.inherits(a,s),i.inherits(r,a),r.exports=a,t.exports=o.AudioProcessingEvent=r},function(t,e,n){"use strict";function r(t){a.call(this,t,{name:"BiquadFilterNode",numberOfInputs:1,numberOfOutputs:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"});var e="lowpass",n=new u(this,"frequency",350,10,t.sampleRate/2),r=new u(this,"detune",0,-4800,4800),o=new u(this,"Q",1,1e-4,1e3),s=new u(this,"gain",0,-40,40);i.defineAttribute(this,"type",c,e,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"frequency","readonly",n,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"detune","readonly",r,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"Q","readonly",o,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"gain","readonly",s,function(t){throw new TypeError(i.formatter.concat(this,t))})}var i=n(5),o=n(24),s=n(4),a=n(15),u=n(65),c="enum { lowpass, highpass, bandpass, lowshelf, highshelf, peaking, notch, allpass }",l=function(){throw new TypeError("Illegal constructor: use audioContext.createBiquadFilter()")};i.inherits(l,a),i.inherits(r,l),r.exports=l,r.jsonAttrs=["type","frequency","detune","Q","gain"],l.prototype.getFrequencyResponse=function(){var t=new o(this,"getFrequencyResponse",[{name:"frequencyHz",type:"Float32Array"},{name:"magResponse",type:"Float32Array"},{name:"phaseResponse",type:"Float32Array"}]);t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)})},t.exports=s.BiquadFilterNode=r},function(t,e,n){"use strict";function r(t,e){s.call(this,t,{name:"ChannelMergerNode",numberOfInputs:e,numberOfOutputs:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"})}var i=n(5),o=n(4),s=n(15),a=function(){throw new TypeError("Illegal constructor: use audioContext.createChannelMerger([numberOfInputs: number])")};i.inherits(a,s),i.inherits(r,a),r.exports=a,t.exports=o.ChannelMergerNode=r},function(t,e,n){"use strict";function r(t,e){s.call(this,t,{name:"ChannelSplitterNode",numberOfInputs:1,numberOfOutputs:e,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"})}var i=n(5),o=n(4),s=n(15),a=function(){throw new TypeError("Illegal constructor: use audioContext.createChannelSplitter([numberOfOutputs: number])")};i.inherits(a,s),i.inherits(r,a),r.exports=a,t.exports=o.ChannelSplitterNode=r},function(t,e,n){"use strict";function r(t){s.call(this,t,{name:"ConvolverNode",numberOfInputs:1,numberOfOutputs:1,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers"});var e=null,n=!0;i.defineAttribute(this,"buffer","AudioBuffer|null",e,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"normalize","boolean",n,function(t){throw new TypeError(i.formatter.concat(this,t))})}var i=n(5),o=n(4),s=n(15),a=function(){throw new TypeError("Illegal constructor: use audioContext.createConvolver()")};i.inherits(a,s),i.inherits(r,a),r.exports=a,r.jsonAttrs=["normalize"],t.exports=o.ConvolverNode=r},function(t,e,n){"use strict";function r(t,e){s.call(this,t,{name:"DelayNode",numberOfInputs:1,numberOfOutputs:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"});var n=new a(this,"delayTime",0,0,e);i.defineAttribute(this,"delayTime","readonly",n,function(t){throw new TypeError(i.formatter.concat(this,t))}),Object.defineProperties(this,{$maxDelayTime:{value:e}})}var i=n(5),o=n(4),s=n(15),a=n(65),u=function(){throw new TypeError("Illegal constructor: use audioContext.createDelay([maxDelayTime: number])")};i.inherits(u,s),i.inherits(r,u),r.exports=u,r.jsonAttrs=["delayTime"],t.exports=o.DelayNode=r},function(t,e,n){"use strict";function r(t){s.call(this,t,{name:"DynamicsCompressorNode",numberOfInputs:1,numberOfOutputs:1,channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"});var e=new a(this,"threshold",-24,-100,0),n=new a(this,"knee",30,0,40),r=new a(this,"ratio",12,1,20),o=new a(this,"reduction",0,-20,0),u=new a(this,"attack",.003,0,1),c=new a(this,"release",.25,0,1);i.defineAttribute(this,"threshold","readonly",e,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"knee","readonly",n,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"ratio","readonly",r,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"reduction","readonly",o,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"attack","readonly",u,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"release","readonly",c,function(t){throw new TypeError(i.formatter.concat(this,t))})}var i=n(5),o=n(4),s=n(15),a=n(65),u=function(){throw new TypeError("Illegal constructor: use audioContext.createDynamicsCompressor()")};i.inherits(u,s),i.inherits(r,u),r.exports=u,r.jsonAttrs=["threshold","knee","ratio","reduction","attack","release"],t.exports=o.DynamicsCompressorNode=r},function(t,e,n){(function(e){"use strict";function r(){}var i=n(5),o=n(4),s=n(162);"undefined"==typeof e.Element&&(e.Element=function(){throw new TypeError("Illegal constructor")},i.inherits(e.Element,s)),i.inherits(r,e.Element),t.exports=o.Element=r}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t){s.call(this,t,{name:"GainNode",numberOfInputs:1,numberOfOutputs:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"});var e=new a(this,"gain",1,0,1);i.defineAttribute(this,"gain","readonly",e,function(t){throw new TypeError(i.formatter.concat(this,t))})}var i=n(5),o=n(4),s=n(15),a=n(65),u=function(){throw new TypeError("Illegal constructor: use audioContext.createGain()")};i.inherits(u,s),i.inherits(r,u),r.exports=u,r.jsonAttrs=["gain"],t.exports=o.GainNode=r},function(t,e,n){(function(e){"use strict";function r(){}var i=n(5),o=n(4),s=n(414);"undefined"==typeof e.HTMLElement&&(e.HTMLElement=function(){throw new TypeError("Illegal constructor")},i.inherits(e.HTMLElement,s)),i.inherits(r,e.HTMLElement),t.exports=o.HTMLElement=r}).call(e,function(){return this}())},function(t,e,n){(function(e){"use strict";function r(){}var i=n(5),o=n(4),s=n(416);"undefined"==typeof e.HTMLMediaElement&&(e.HTMLMediaElement=function(){throw new TypeError("Illegal constructor")},i.inherits(e.HTMLMediaElement,s)),i.inherits(r,e.HTMLMediaElement),t.exports=o.HTMLMediaElement=r}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t){s.call(this,t,{name:"MediaElementAudioSourceNode",numberOfInputs:0,numberOfOutputs:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"})}var i=n(5),o=n(4),s=n(15),a=function(){throw new TypeError("Illegal constructor: use audioContext.createMediaElementSource(mediaElement: HTMLMediaElement)")};i.inherits(a,s),i.inherits(r,a),r.exports=a,t.exports=o.MediaElementAudioSourceNode=r},function(t,e,n){(function(e){"use strict";function r(){}var i=n(5),o=n(4),s=n(162);"undefined"==typeof e.MediaStream&&(e.MediaStream=function(){throw new TypeError("Illegal constructor")},i.inherits(e.MediaStream,s)),i.inherits(r,e.MediaStream),t.exports=o.MediaStream=r}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t){s.call(this,t,{name:"MediaStreamAudioDestinationNode",numberOfInputs:1,numberOfOutputs:0,channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"})}var i=n(5),o=n(4),s=n(15),a=function(){throw new TypeError("Illegal constructor: use audioContext.createMediaStreamDestination()")};i.inherits(a,s),i.inherits(r,a),r.exports=a,t.exports=o.MediaStreamAudioDestinationNode=r},function(t,e,n){"use strict";function r(t){s.call(this,t,{name:"MediaStreamAudioSourceNode",numberOfInputs:0,numberOfOutputs:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"})}var i=n(5),o=n(4),s=n(15),a=function(){throw new TypeError("Illegal constructor: use audioContext.createMediaStreamSource(mediaStream: MediaStream)")};i.inherits(a,s),i.inherits(r,a),r.exports=a,t.exports=o.MediaStreamAudioSourceNode=r},function(t,e,n){"use strict";function r(t){s.call(this,"complete",t),Object.defineProperties(this,{$name:{value:"OfflineAudioCompletionEvent"},$node:{value:t}})}var i=n(5),o=n(4),s=n(178),a=function(){throw new TypeError("Illegal constructor")};i.inherits(a,s),i.inherits(r,a),r.exports=a,t.exports=o.OfflineAudioCompletionEvent=r},function(t,e,n){"use strict";function r(t,e,n){if(!(this instanceof r))throw new TypeError("Failed to construct 'AudioContext': Please use the 'new' operator");h.call(this);var s=new o(this,null,[{name:"numberOfChannels",type:"number"},{name:"length",type:"number"},{name:"sampleRate",type:"number"}]);s.validateArguments(arguments,function(t){throw new TypeError(s.form+"; "+t)});var a=new c(this),u=function(){return this._microCurrentTime/1e6},f=new l(this),p=null;i.defineAttribute(this,"destination","readonly",a,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"sampleRate","readonly",n,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"currentTime","readonly",u,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"listener","readonly",f,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"oncomplete","function|null",p,function(t){throw new TypeError(i.formatter.concat(this,t))}),Object.defineProperties(this,{$name:{value:"OfflineAudioContext"},$context:{value:this}}),this._microCurrentTime=0,this._processedSamples=0,this._tick=0,this._numberOfChannels=t,this._length=e,this._rendering=!1}var i=n(5),o=n(24),s=n(4),a=n(237),u=n(204),c=n(238),l=n(239),h=n(162),f=n(422);i.inherits(r,a),r.prototype.startRendering=function(){var t=new o(this,"startRendering",[]);t.assert(!this._rendering,function(){throw Error(t.form+"; must only be called one time")}),this._rendering=!0},r.prototype._process=function(t){if(this._rendering&&!(this._length<=this._processedSamples)){for(var e=this._microCurrentTime+t;this._microCurrentTime<e;){var n=Math.min(this._microCurrentTime+1e3,e),r=Math.floor(n/1e6*this.sampleRate),i=r-this._processedSamples;if(this.destination.$process(i,++this._tick),this._microCurrentTime=n,this._processedSamples=r,this._length<=this._processedSamples)break}if(this._length<=this._processedSamples){var o=new f(this);o.renderedBuffer=new u(this,this._numberOfChannels,this._length,this.sampleRate),this.dispatchEvent(o)}}},t.exports=s.OfflineAudioContext=r},function(t,e,n){"use strict";function r(t){a.call(this,t,{name:"OscillatorNode",numberOfInputs:0,numberOfOutputs:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"});var e="sine",n=new u(this,"frequency",440,0,1e5),r=new u(this,"detune",0,-4800,4800),o=null;Object.defineProperty(this,"type",{get:function(){return this._custom?"custom":this._type},set:function(t){if(!i.typeCheck(t,l)){var e="";throw e+="type ",e+=i.formatter.shouldBeButGot(l,t),new TypeError(i.formatter.concat(this,e))}this._type=t},enumerable:!0}),i.defineAttribute(this,"frequency","readonly",n,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"detune","readonly",r,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"onended","function|null",o,function(t){throw new TypeError(i.formatter.concat(this,t))}),Object.defineProperties(this,{$state:{get:function(){return this.$stateAtTime(this.context.currentTime)}},$custom:{get:function(){return this._custom}}}),this._type=e,this._custom=null,this._startTime=1/0,this._stopTime=1/0,this._firedOnEnded=!1}var i=n(5),o=n(24),s=n(4),a=n(15),u=n(65),c=n(178),l="enum { sine, square, sawtooth, triangle }",h=function(){throw new TypeError("Illegal constructor: use audioContext.createOscillator()")};i.inherits(h,a),i.inherits(r,h),r.exports=h,r.jsonAttrs=["type","frequency","detune"],h.prototype.start=function(t){var e=new o(this,"start",[{name:"when",type:"optional number"}]);e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)}),e.assert(1/0===this._startTime,function(){throw new Error(e.form+"; cannot start more than once")}),this._startTime=i.defaults(t,0)},h.prototype.stop=function(t){var e=new o(this,"stop",[{name:"when",type:"optional number"}]);e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)}),e.assert(1/0!==this._startTime,function(){throw new Error(e.form+"; cannot call stop without calling start first")}),e.assert(1/0===this._stopTime,function(){throw new Error(e.form+"; cannot stop more than once")}),this._stopTime=i.defaults(t,0)},h.prototype.setPeriodicWave=function(t){var e=new o(this,"setPeriodicWave",[{name:"periodicWave",type:"PeriodicWave"}]);e.validateArguments(arguments,function(t){throw new TypeError(e.form+"; "+t)}),this._type="custom",this._custom=t},r.prototype.$stateAtTime=function(t){return t=i.toSeconds(t),1/0===this._startTime?"UNSCHEDULED":t<this._startTime?"SCHEDULED":t<this._stopTime?"PLAYING":"FINISHED"},r.prototype._process=function(){this._firedOnEnded||"FINISHED"!==this.$stateAtTime(this.context.currentTime)||(this.dispatchEvent(new c("ended",this)),this._firedOnEnded=!0)},t.exports=s.OscillatorNode=r},function(t,e,n){"use strict";function r(t){a.call(this,t,{name:"PannerNode",numberOfInputs:1,numberOfOutputs:1,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers"});var e="HRTF",n="inverse",r=1,o=1e4,s=1,l=360,h=360,f=0;i.defineAttribute(this,"panningModel",u,e,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"distanceModel",c,n,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"refDistance","number",r,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"maxDistance","number",o,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"rolloffFactor","number",s,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"coneInnerAngle","number",l,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"coneOuterAngle","number",h,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"coneOuterGain","number",f,function(t){throw new TypeError(i.formatter.concat(this,t))})}var i=n(5),o=n(24),s=n(4),a=n(15),u="enum { equalpower, HRTF }",c="enum { linear, inverse, exponential }",l=function(){throw new TypeError("Illegal constructor: use audioContext.createPanner()")};i.inherits(l,a),i.inherits(r,l),r.exports=l,r.jsonAttrs=["panningModel","distanceModel","refDistance","maxDistance","rolloffFactor","coneInnerAngle","coneOuterAngle","coneOuterGain"],l.prototype.setPosition=function(){var t=new o(this,"setPosition",[{name:"x",type:"number"},{name:"y",type:"number"},{name:"z",type:"number"}]);t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)})},l.prototype.setOrientation=function(){var t=new o(this,"setOrientation",[{name:"x",type:"number"},{name:"y",type:"number"},{name:"z",type:"number"}]);t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)})},l.prototype.setVelocity=function(){var t=new o(this,"setVelocity",[{name:"x",type:"number"},{name:"y",type:"number"},{name:"z",type:"number"}]);t.validateArguments(arguments,function(e){throw new TypeError(t.form+"; "+e)})},t.exports=s.PannerNode=r},function(t,e,n){"use strict";function r(t,e){Object.defineProperties(this,{$name:{value:"PeriodicWave"},$real:{value:t},$imag:{value:e}})}var i=n(5),o=n(4),s=function(){throw new TypeError("Illegal constructor")};i.inherits(r,s),r.exports=s,t.exports=o.PeriodicWave=r},function(t,e,n){"use strict";function r(t,e,n,r){s.call(this,t,{name:"ScriptProcessorNode",numberOfInputs:1,numberOfOutputs:1,channelCount:n,channelCountMode:"max",channelInterpretation:"speakers"});var o=null;i.defineAttribute(this,"numberOfInputChannels","readonly",n,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"numberOfOutputChannels","readonly",r,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"bufferSize","readonly",e,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"onaudioprocess","function|null",o,function(t){throw new TypeError(i.formatter.concat(this,t))}),this._numSamples=0}var i=n(5),o=n(4),s=n(15),a=n(204),u=n(407),c=function(){throw new TypeError("Illegal constructor: use audioContext.createScriptProcessor(bufferSize: number, [numberOfInputChannels: number], [numberOfOutputChannels: number])")};i.inherits(c,s),i.inherits(r,c),r.exports=c,r.prototype._process=function(t){if(this._numSamples-=t,this._numSamples<=0){this._numSamples+=this.bufferSize;var e=new u(this);e.playbackTime=this.context.currentTime+this.bufferSize/this.context.sampleRate,e.inputBuffer=new a(this.context,this.numberOfInputChannels,this.bufferSize,this.context.sampleRate),e.outputBuffer=new a(this.context,this.numberOfOutputChannels,this.bufferSize,this.context.sampleRate),this.dispatchEvent(e)}},t.exports=o.ScriptProcessorNode=r},function(t,e,n){"use strict";function r(t){s.call(this,t,{name:"WaveShaperNode",numberOfInputs:1,numberOfOutputs:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"});var e=null,n="none";i.defineAttribute(this,"curve","Float32Array|null",e,function(t){throw new TypeError(i.formatter.concat(this,t))}),i.defineAttribute(this,"oversample",a,n,function(t){throw new TypeError(i.formatter.concat(this,t))})}var i=n(5),o=n(4),s=n(15),a="enum { none, 2x, 4x }",u=function(){throw new TypeError("Illegal constructor: use audioContext.createWaveShaper()")};i.inherits(u,s),i.inherits(r,u),r.exports=u,r.jsonAttrs=["oversample"],t.exports=o.WaveShaperNode=r},function(t,e){(function(e){"use strict";var n={};n.AnalyserNode=e.AnalyserNode,n.AudioBuffer=e.AudioBuffer,n.AudioBufferSourceNode=e.AudioBufferSourceNode,n.AudioContext=e.AudioContext||e.webkitAudioContext,n.AudioDestinationNode=e.AudioDestinationNode,n.AudioListener=e.AudioListener,n.AudioNode=e.AudioNode,n.AudioParam=e.AudioParam,n.AudioProcessingEvent=e.AudioProcessingEvent,n.BiquadFilterNode=e.BiquadFilterNode,n.ChannelMergerNode=e.ChannelMergerNode,n.ChannelSplitterNode=e.ChannelSplitterNode,n.ConvolverNode=e.ConvolverNode,n.DelayNode=e.DelayNode,n.DynamicsCompressorNode=e.DynamicsCompressorNode,n.GainNode=e.GainNode,n.MediaElementAudioSourceNode=e.MediaElementAudioSourceNode,n.MediaStreamAudioDestinationNode=e.MediaStreamAudioDestinationNode,n.MediaStreamAudioSourceNode=e.MediaStreamAudioSourceNode,n.OfflineAudioCompletionEvent=e.OfflineAudioCompletionEvent,n.OfflineAudioContext=e.OfflineAudioContext||e.webkitOfflineAudioContext,n.OscillatorNode=e.OscillatorNode,n.PannerNode=e.PannerNode,n.PeriodicWave=e.PeriodicWave,n.ScriptProcessorNode=e.ScriptProcessorNode,n.WaveShaperNode=e.WaveShaperNode,t.exports=n}).call(e,function(){return this}())},function(t,e,n){(function(e){"use strict";if(!e.WEB_AUDIO_TEST_API_IGNORE){n(237),n(423);var r=n(4);r.use(),t.exports=e.WebAudioTestAPI=r}}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t,e){e=e.filter(function(e,n){return!(/^optional/.test(e)&&t.length<=n)}),e=e.map(function(t){return t.replace(/^optional\s*/,"")});for(var n=0,r=e.length;r>n;n++)if(!i(t[n],e[n]))return n;return-1}var i=n(207);t.exports=r},function(t){"use strict";function e(t,e){return"undefined"!=typeof t?t:e}t.exports=e},function(t,e,n){"use strict";function r(t,e,n,r,s){var a={enumerable:!0};"function"==typeof r?(n="readonly",a.get=r):a.get=function(){return r},a.set="readonly"===n?function(){s.call(t,e+" is readonly")}:function(a){i(a,n)?r=a:s.call(t,e+" "+o.shouldBeButGot(n,a))},Object.defineProperty(t,e,a)}var i=n(207),o=n(206);t.exports=r},function(t){"use strict";function e(t,e){e&&(t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}t.exports=e},function(t){"use strict";function e(t){return t+=1,{1:"1st",2:"2nd",3:"3rd"}[t]||t+"th"}t.exports=e},function(t,e,n){"use strict";function r(t){if(!t)return String(t);var e=typeof t;if("number"===e||"boolean"===e)return String(t);if("string"===e)return"'"+t+"'";if(Array.isArray(t))return"[ "+t.map(r).join(", ")+" ]";if(t.constructor==={}.constructor)return"{ "+Object.keys(t).map(function(e){return e+": "+r(t[e])}).join(", ")+"}";var n=t.constructor.name||Object.prototype.toString.call(t).slice(8,-1);return i(n)+" "+n}var i=n(205);t.exports=r},function(t,e,n){"use strict";function r(t,e,n){var r;return n=n||[],-1!==n.indexOf(t)?"<circular:"+i(t)+">":(n.push(t),r=e(t,n),n.pop(),r)}var i=n(240);t.exports=r},function(t,e,n){"use strict";function r(t){return i(t)/1e6}var i=n(241);t.exports=r}]);